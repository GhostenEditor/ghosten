(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[761],{8761:(Ie,De,b)=>{"use strict";b.r(De),b.d(De,{GtModule:()=>Ol});var _e=b(5453),e=(b(6198),b(4650)),we=b(8580),A=b(7340);const Qe=(0,A.X$)("bodyExpansion",[(0,A.SB)("collapsed, void",(0,A.oB)({height:"0px",visibility:"hidden"})),(0,A.SB)("expanded",(0,A.oB)({height:"*",visibility:"visible"})),(0,A.eR)("expanded <=> collapsed, void => collapsed",(0,A.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),ze=(0,A.X$)("slideFadeIn",[(0,A.SB)("void",(0,A.oB)({transform:"matrix(.98,0,0,.98,0,5)",opacity:"0"})),(0,A.SB)("*",(0,A.oB)({transform:"matrix(1,0,0,1,0,0)"})),(0,A.eR)("* <=> void",(0,A.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),je=(0,A.X$)("fade",[(0,A.SB)("in",(0,A.oB)({opacity:1})),(0,A.eR)("void => *",[(0,A.oB)({opacity:0}),(0,A.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)")])]),Te=[[["",8,"accordion-header-buttons"]],"*"],se=[".accordion-header-buttons","*"];let me=(()=>{class n{constructor(){this.opened=new e.vpe,this.closed=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion-item"]],viewQuery:function(t,o){if(1&t&&e.Gf(we.dD,5),2&t){let r;e.iGM(r=e.CRH())&&(o.accordion=r.first)}},hostAttrs:[1,"accordion-item","d-block"],inputs:{cardTitle:"cardTitle",expanded:"expanded"},outputs:{opened:"opened",closed:"closed"},ngContentSelectors:se,decls:10,vars:6,consts:[["cdkAccordionItem","",3,"expanded","opened","closed"],["accordionItem","cdkAccordionItem"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse",1,"accordion-button",3,"click"],[1,"flex-grow-1"],[1,"accordion-collapse",2,"overflow","hidden"],[1,"accordion-body"]],template:function(t,o){if(1&t){const r=e.EpF();e.F$t(Te),e.ynx(0,0,1),e.NdJ("opened",function(){return o.opened.emit()})("closed",function(){return o.closed.emit()}),e.TgZ(2,"h2",2)(3,"button",3),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(1);return e.KtG(a.toggle())}),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.Hsn(6),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.Hsn(9,1),e.qZA()(),e.BQk()}if(2&t){const r=e.MAs(1);e.Q6J("expanded",o.expanded),e.xp6(3),e.ekj("collapsed",!r.expanded),e.uIk("aria-expanded",r.expanded),e.xp6(2),e.Oqu(o.cardTitle),e.xp6(2),e.Q6J("@bodyExpansion",r.expanded?"expanded":"collapsed")}},dependencies:[we.dD],encapsulation:2,data:{animation:[Qe]}}),n})();var u=b(6895);let ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,we.XD]}),n})();var j=b(8184);let Xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,j.U8]}),n})();function _t(n,i){if(1&n&&(e.TgZ(0,"i",4),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.icon)}}function Re(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",2),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.itemClick.emit(s))}),e.YNc(2,_t,2,1,"i",3),e._uU(3),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(1),e.ekj("active",t.active),e.xp6(1),e.Q6J("ngIf",t.icon),e.xp6(1),e.hij("",t.text," ")}}let mt=(()=>{class n{constructor(){this.itemClick=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-dropdown"]],inputs:{items:"items"},outputs:{itemClick:"itemClick"},decls:2,vars:2,consts:[[1,"dropdown-menu","d-block","position-static","w-100","shadow"],[4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"click"],["class","gt-icon me-3",4,"ngIf"],[1,"gt-icon","me-3"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,Re,4,4,"li",1),e.qZA()),2&t&&(e.Q6J("@slideFadeIn",void 0),e.xp6(1),e.Q6J("ngForOf",o.items))},dependencies:[u.sg,u.O5],encapsulation:2,data:{animation:[ze]}}),n})();var $=b(4080),D=b(727),G=b(6451),v=b(8505),E=b(5698);let _=(()=>{class n{constructor(t,o){this.elementRef=t,this.overlay=o,this.itemClick=new e.vpe,this.overlayRef=null,this.overlaySubscription=D.w0.EMPTY}click(){this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"bottom",offsetY:6},{overlayX:"start",overlayY:"bottom",originX:"start",originY:"top",offsetY:-6},{overlayX:"end",overlayY:"bottom",originX:"end",originY:"top",offsetY:-6},{overlayX:"end",overlayY:"top",originX:"end",originY:"bottom",offsetY:6}])});const t=this.overlayRef.attach(new $.C5(mt)).instance;t.items=this.items,this.overlaySubscription=(0,G.T)(this.overlayRef.backdropClick(),t.itemClick.pipe((0,v.b)(o=>this.itemClick.emit(o)))).pipe((0,E.q)(1)).subscribe(()=>this.closeOverlay())}closeOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlaySubscription.unsubscribe(),this.overlayRef=null,this.overlaySubscription=D.w0.EMPTY)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(j.aV))},n.\u0275dir=e.lG2({type:n,selectors:[["","gt-dropdown",""]],hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.click()})},inputs:{items:"items"},outputs:{itemClick:"itemClick"}}),n})();var C=b(445);let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.vT]}),n})();var J=b(8690),X=b(8372);function ye(n,i,t,o=1){switch(n.beginPath(),i){case"long":n.moveTo(t,0),n.lineTo(t,10*o),n.globalAlpha=1;break;case"medium":n.moveTo(t,0),n.lineTo(t,8*o),n.globalAlpha=.6;break;case"short":n.moveTo(t,0),n.lineTo(t,5*o),n.globalAlpha=.3}n.closePath(),n.stroke()}function We(n,i,t,o,r=1){const s=Math.ceil(5/o),a=[Math.floor(-t/s/o)*s,Math.ceil((i-t)/s/o)*s];for(let l=a[0];l<=a[1];l+=s){const c=l*o+t;l%(20*s)==0?(ye(n,"long",c,r),n.fillText(""+l,c+5,20*r)):l%(10*s)==0?ye(n,"medium",c,r):l%s==0&&ye(n,"short",c,r)}}var T=b(7579),y=b(4004),g=b(1013);class M{constructor(){this.selected=[],this.rightTabIndex=0,this.configAccordionExpanded={},this.elementAccordionExpanded={}}init(i){this.name=i.name,this.description=i.description,this.selected=i.selectedNodes||[],this.sidebarPosition=i.sidebarPosition,this.configAccordionExpanded=i.configAccordionExpanded||{},this.elementAccordionExpanded=i.elementAccordionExpanded||{},this.currentBoardName=i.currentBoardName}activateRightTab(i){this.rightTabIndex=i}changeCurrentBoard(i){this.currentBoardName=i.name}changeConfigAccordionExpanded(i,t){this.configAccordionExpanded[i]=t}changeElementAccordionExpanded(i,t){this.elementAccordionExpanded[i]=t}export(){return{name:this.name,description:this.description,currentBoardName:this.currentBoardName,elementAccordionExpanded:this.elementAccordionExpanded,configAccordionExpanded:this.configAccordionExpanded,selectedNodes:this.selected,sidebarPosition:this.sidebarPosition}}}const O=new e.OlP("Gt ContextMenu"),S=new e.OlP("gt-default-options"),w=new e.OlP("gt-element-lists"),K=new e.OlP("gt-auth-config"),k=new e.OlP("Top Bar Buttons"),P=new e.OlP("Ghosten Edit Component Map"),ce=new e.OlP("Ghosten Edit Component Type Map"),z=new e.OlP("Ghosten Template Map"),et=new e.OlP("Ghosten Internal Element Lists"),re=new e.OlP("Gt Node Default Config"),gt=new e.OlP("Ghosten Editor Brand"),ft=new e.OlP("Ghosten Editor Theme Color"),Ct=new e.OlP("Ghosten Editor Config Form Map"),Gt=new e.OlP("Ghosten Editor Event Listener"),bt=new e.OlP("Ghosten Node \u914d\u7f6e\u5217\u8868"),Jt=new e.OlP("Ghosten Node \u9ed8\u8ba4\u5c5e\u6027\u914d\u7f6e");class Ht{constructor(){this.historyMaxLength=10,this.history=[]}get(){return this.history}push(i){this.history.length>=this.historyMaxLength&&(this.history=this.history.slice(this.history.length-this.historyMaxLength-1)),this.history.push(i)}pop(){return this.history.pop()}clear(){this.history=[]}}let q=(()=>{class n extends g.Gt{constructor(t,o,r){super(),this.events=t,this.themeColor=o,this.defaultConfigMap=r,this.mode="edit",this.showReferenceLine=!0,this.copiedNode=[],this.selected=[],this.history=new Ht,this.undoHistory=new Ht,this.settings=new M,this.events.onEvent.subscribe(s=>{switch(s.type){case"CHANGE_PROPERTY":case"INSERT_NODE":case"MOVE_NODE":case"REMOVE_NODE":this.history.push(s),this.undoHistory.clear()}}),(0,G.T)(this.events.CHANGE_STYLE,this.events.CHANGE_PROPERTY,this.events.CHANGE_ACTION,this.events.CHANGE_VALIDATOR,this.events.CHANGE_RIGHTS,this.events.PASTE_STYLE,this.events.MOVE_NODE,this.events.REMOVE_NODE,this.events.INSERT_NODE,this.events.UNDO,this.events.REDO).pipe((0,X.b)(3e4)).subscribe(()=>this.events.AUTO_SAVE.next({config:this.exportString(),settings:this.settings.export()})),this.events.CHANGE_SELECT.subscribe(s=>this.settings.selected=s.map(({id:a})=>a))}get darkMode(){return"dark"===this.themeColor()}initSettings(t){this.settings.init(t),this.settings.selected.forEach(o=>{const r=this.getNodeById(o);r&&this.changeSelect(r,!0)})}undo(){const t=this.history.get();if(t.length){const o=t.pop();if("CHANGE_PROPERTY"===o.type){const{name:r,gtNode:s,previousValue:a,value:l}=o.data;s.property[r]=a,this.undoHistory.push({type:o.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.UNDO.next(o)}if("INSERT_NODE"===o.type){const{gtNode:r,parent:s,index:a=s.children.length-1}=o.data;s.children.splice(a,1),s.componentRef.instance.remove(a),this._removeGtNode(r),this.undoHistory.push(o),this.events.UNDO.next(o)}if("REMOVE_NODE"===o.type&&(this.undoHistory.push(o),o.data.forEach(({gtNode:r,parent:s,index:a})=>{s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a)}),this.events.UNDO.next(o)),"MOVE_NODE"===o.type){this.undoHistory.push(o);const{gtNode:r,previousParent:s,previousIndex:a}=o.data;r.setParent(s,a),this.events.UNDO.next(o)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\uff01",data:null})}redo(){const t=this.undoHistory.get();if(t.length){const o=t.pop();if("CHANGE_PROPERTY"===o.type){const{name:r,gtNode:s,previousValue:a,value:l}=o.data;s.property[r]=a,this.history.push({type:o.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.REDO.next(o)}if("INSERT_NODE"===o.type){this.history.push(o);const{gtNode:r,parent:s,index:a}=o.data;s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a),this.events.REDO.next(o)}if("MOVE_NODE"===o.type){this.history.push(o);const{gtNode:r,parent:s,index:a}=o.data;r.setParent(s,a),this.events.REDO.next(o)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u91cd\u505a\u7684\u64cd\u4f5c\uff01",data:null})}changeSelect(t,o){if(t){if(!this.currentBoard.nodeList.has(t.id))return;this.selected.includes(t)?o?this.selected.splice(this.selected.indexOf(t),1):this.selected=1===this.selected.length?[]:[t]:o?this.selected.push(t):this.selected=[t]}else this.selected=[];this.events.CHANGE_SELECT.next(this.selected)}addBoard(){const t=new g.$l({name:"Modal",title:"Modal",type:"modal",url:"",id:(0,g.gj)(),size:null,events:null,description:"",modalFooter:!1});return this.boards.push(t),this.pages.push(t),t.gt=this.createGtNode({type:"root"},void 0,void 0,void 0,t.id),this.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t),t}addCustomComponent(){const t=new g.$l({type:"cc",id:(0,g.gj)(),name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",events:null,description:"",modalFooter:!1,size:null,url:""});this.customComponent.push(t),this.boards.push(t),t.gt=this.createGtNode({type:"template"},void 0,void 0,void 0,t.id),t.gt.isTemplate=!0,this.setCurrentBoard(t)}addRemoteCustomComponent(){const t=new g.$l({type:"rcc",id:(0,g.gj)(),name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",events:null,description:"",modalFooter:!1,size:null,url:""});this.remoteCustomComponent.push(t),this.boards.push(t),t.gt=this.createGtNode({type:"template"},void 0,void 0,void 0,t.id),t.gt.isTemplate=!0,this.setCurrentBoard(t)}removeBoard(t){const o=this.boards.indexOf(t),r=this.boards.indexOf(this.currentBoard);switch(this._removeGtNode(t.gt),this.boards.splice(o,1),t.type){case"main":case"modal":this.pages.splice(this.pages.indexOf(t),1);break;case"cc":this.customComponent.splice(this.customComponent.indexOf(t),1);break;case"rcc":this.remoteCustomComponent.splice(this.remoteCustomComponent.indexOf(t),1)}o===r&&this.setCurrentBoard(this.boards[o-1]||this.boards[0])}addNode(t,o,r=-1,s={},a){const l=this.createGtNode({type:t,outletID:a,...s},o,void 0,r);return l?(o.inheritList.forEach(c=>{this.createGtNode({type:l.type,template:l.id},c,void 0,r)}),this.selected=[l],this.events.INSERT_NODE.next({gtNode:l,parent:o,index:r}),this.events.CHANGE_SELECT.next(this.selected),l):null}moveNode(t,o,r,s){if(t.parent===o&&t.outletID===s&&(void 0===r?t.parent.children.indexOf(t)===t.parent.children.length-1:t.parent.children.indexOf(t)===r))return;const a=t.parent,l=a.children.indexOf(t);t.setParent(o,r,s),t.inheritList.forEach((c,d)=>{c.setParent(o.inheritList[d],r,s)}),this.events.MOVE_NODE.next({gtNode:t,parent:o,index:r,previousParent:a,previousIndex:-1===l?void 0:l})}removeNode(){const t=[];if(!this.selected||this.selected.some(o=>"root"===o.type))return this.log.next({type:"error",message:"\u65e0\u6cd5\u5220\u9664",data:null});this.selected.forEach(o=>{o.template&&!o.isTemplateRoot&&this.log.next({type:"warning",message:"\u8be5\u8282\u70b9\u7531\u6a21\u677f\u751f\u6210\uff0c\u65e0\u6cd5\u5220\u9664"}),o.template&&o.isTemplateRoot&&o.template.inheritList&&o.template.inheritList.splice(o.template.inheritList.indexOf(o),1);const r=o.parent.children.indexOf(o);this._removeGtNode(o),t.push({gtNode:o,parent:o.parent,index:r})}),this.selected=[],this.events.REMOVE_NODE.next(t),this.events.CHANGE_SELECT.next(this.selected)}addCustomNode(t,o,r=-1){const s=this.boards.filter(l=>l.id===t)[0].gt,a=this.createGtNode({type:"template",template:s.id},o,void 0,r);if(a)return this.events.INSERT_NODE.next({gtNode:a,parent:o,index:r}),this.events.CHANGE_SELECT.next(this.selected),a}setCurrentBoard(t){super.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t)}copyStyle(){1===this.selected.length?(this.copiedStyle=this.selected[0].style.export(),this.events.COPY_STYLE.next(this.copiedStyle)):this.log.next({type:"error",message:"\u65e0\u6cd5\u590d\u5236\u6837\u5f0f\uff0c\u56e0\u4e3a\u5f53\u524d\u9009\u4e2d\u4e86\u591a\u4e2a\u8282\u70b9"})}pasteStyle(){const t=this.copiedStyle;this.selected.forEach(({core:o,style:r})=>o.canPasteStyle&&r.setStyles(t)),this.events.PASTE_STYLE.next({pastedNodes:this.selected,pastedStyle:this.copiedStyle})}copyNode(){this.copiedNode=this.selected.map(({id:t})=>t)}pasteNode(t){if(!t){if(1!==this.selected.length)return void this.log.next({type:"error",message:"\u65e0\u6cd5\u7c98\u8d34\u8282\u70b9\uff0c\u56e0\u4e3a\u5f53\u524d\u6ca1\u6709\u9009\u4e2d\u6216\u9009\u4e2d\u591a\u4e2a\u53c2\u7167\u8282\u70b9"});t=this.selected[0]}const o=a=>{const l=a.export();if(a.isTemplateRoot)for(const c in l.slot)l.slot[c].forEach(d=>delete d.id);else l.children=a.children.map(c=>o(c));return delete l.id,l};let s,r=null;if(t.core.canHasChild)r=t;else for(;t.parent;){if(t.parent.core.canHasChild&&!t.parent.template){r=t.parent,s=t.parent.children.indexOf(t);break}t=t.parent}!r||this.copiedNode.forEach(a=>{const l=this.createGtNode(o(this.getNodeById(a)),r,void 0,typeof s>"u"?s:++s);this.events.INSERT_NODE.next({parent:r,gtNode:l,index:s})})}removeCustomComponent(t){this.selected=[t.gt],this.removeNode(),this.customComponent.splice(this.customComponent.indexOf(t),1)}_removeGtNode(t){const o=this.getBoardById(t.boardId);[...t.inheritList].forEach(r=>this._removeGtNode(r)),t.template&&t.template.inheritList.splice(t.template.inheritList.indexOf(t),1),t.remove(),o.nodeList.delete(t.id),this.nodeList.delete(t.id),[...t.children].forEach(r=>this._removeGtNode(r))}exportSettings(){return this.settings.export()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(W),e.LFG(ft),e.LFG(Jt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();class Fn extends EventTarget{addEventListener(i,t,o){super.addEventListener(i,t,o)}}class Gn extends Event{constructor(i){super("changeactionstart",{cancelable:!0,bubbles:!1}),this.action=i}}class Yt extends Event{constructor(i,t){super("changeactionend",{cancelable:!0,bubbles:!1}),this.action=i,this.script=t}}class vt extends Event{constructor(i){super("editexpressionstart",{cancelable:!0,bubbles:!1}),this.expression=i}}class Jn extends Event{constructor(i){super("editexpressionend",{cancelable:!0,bubbles:!1}),this.expression=i}}let W=(()=>{class n{constructor(){this.target=new Fn,this.CHANGE_SELECT=new T.x,this.CHANGE_STYLE=new T.x,this.CHANGE_PROPERTY=new T.x,this.CHANGE_ACTION=new T.x,this.CHANGE_RIGHTS=new T.x,this.CHANGE_VALIDATOR=new T.x,this.CHANGE_BOARD=new T.x,this.COPY_STYLE=new T.x,this.PASTE_STYLE=new T.x,this.RENDER_START=new T.x,this.RENDER_STOP=new T.x,this.CUSTOM_EDIT_START=new T.x,this.CUSTOM_EDIT_STOP=new T.x,this.WINDOW_CREATE=new T.x,this.WINDOW_MOVE=new T.x,this.WINDOW_DESTROY=new T.x,this.INSERT_NODE=new T.x,this.REMOVE_NODE=new T.x,this.MOVE_NODE=new T.x,this.UNDO=new T.x,this.REDO=new T.x,this.UPDATE_TEMPLATE=new T.x,this.BLACKBOARD_RESIZE=new T.x,this.AUTO_SAVE=new T.x,this.SAVE=new e.vpe,this.SAVE_COMPONENT=new e.vpe,this.REMOVE_COMPONENT=new e.vpe,this.TOP_BUTTON_CLICK=new e.vpe,this.CUSTOM=new e.vpe,this.onEvent=(0,G.T)(this.CHANGE_SELECT.pipe((0,y.U)(t=>({type:"CHANGE_SELECT",data:t}))),this.CHANGE_STYLE.pipe((0,y.U)(t=>({type:"CHANGE_STYLE",data:t}))),this.CHANGE_PROPERTY.pipe((0,y.U)(t=>({type:"CHANGE_PROPERTY",data:t}))),this.CHANGE_ACTION.pipe((0,y.U)(t=>({type:"CHANGE_ACTION",data:t}))),this.CHANGE_RIGHTS.pipe((0,y.U)(t=>({type:"CHANGE_RIGHTS",data:t}))),this.CHANGE_VALIDATOR.pipe((0,y.U)(t=>({type:"CHANGE_VALIDATOR",data:t}))),this.CHANGE_BOARD.pipe((0,y.U)(t=>({type:"CHANGE_BOARD",data:t}))),this.COPY_STYLE.pipe((0,y.U)(t=>({type:"COPY_STYLE",data:t}))),this.PASTE_STYLE.pipe((0,y.U)(t=>({type:"PASTE_STYLE",data:t}))),this.RENDER_START.pipe((0,y.U)(t=>({type:"RENDER_START",data:t}))),this.RENDER_STOP.pipe((0,y.U)(t=>({type:"RENDER_STOP",data:t}))),this.CUSTOM_EDIT_START.pipe((0,y.U)(t=>({type:"CUSTOM_EDIT_START",data:t}))),this.CUSTOM_EDIT_STOP.pipe((0,y.U)(t=>({type:"CUSTOM_EDIT_STOP",data:t}))),this.WINDOW_CREATE.pipe((0,y.U)(t=>({type:"WINDOW_CREATE",data:t}))),this.WINDOW_MOVE.pipe((0,y.U)(t=>({type:"WINDOW_MOVE",data:t}))),this.WINDOW_DESTROY.pipe((0,y.U)(t=>({type:"WINDOW_DESTROY",data:t}))),this.INSERT_NODE.pipe((0,y.U)(t=>({type:"INSERT_NODE",data:t}))),this.REMOVE_NODE.pipe((0,y.U)(t=>({type:"REMOVE_NODE",data:t}))),this.MOVE_NODE.pipe((0,y.U)(t=>({type:"MOVE_NODE",data:t}))),this.UPDATE_TEMPLATE.pipe((0,y.U)(t=>({type:"UPDATE_TEMPLATE",data:t}))),this.UNDO.pipe((0,y.U)(t=>({type:"UNDO",data:t}))),this.REDO.pipe((0,y.U)(t=>({type:"REDO",data:t}))),this.AUTO_SAVE.pipe((0,y.U)(t=>({type:"AUTO_SAVE",data:t}))),this.SAVE.pipe((0,y.U)(t=>({type:"SAVE",data:t}))))}changeActionStart(t){return this.target.dispatchEvent(new Gn(t))}changeActionEnd(t,o){return this.target.dispatchEvent(new Yt(t,o))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),$t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","page-structure-source",""]]}),n})(),Hn=(()=>{class n{constructor(t,o,r,s,a,l,c){this.el=t,this.events=o,this.render=r,this.gt=s,this.ngZone=a,this.direction=l,this.subscription=D.w0.EMPTY,this.isBrowser=(0,u.NF)(c)}ngOnInit(){if(!this.gtPage)throw new Error;if(!this.isBrowser)return;const t=this.el.nativeElement,o=this.gtPage.nativeElement,r=this.render.createElement("canvas"),s=r.getContext("2d");r.classList.add("position-absolute"),r.classList.add("pe-none"),r.style.setProperty("z-index","1"),this.render.insertBefore(t.parentElement,r,t),this.ngZone.runOutsideAngular(()=>{this.subscription=(0,G.T)(this.events.CHANGE_SELECT,(0,J.R)(),this.events.BLACKBOARD_RESIZE.pipe((0,X.b)(20))).subscribe(()=>{const a=[],l=[];this.gt.currentBoard.nodeList.forEach(c=>{c.componentRef&&a.push({element:c.componentRef.location.nativeElement,type:c.type})}),this.gt.selected.forEach(c=>{c.componentRef&&l.push({element:c.componentRef.location.nativeElement,text1:c.type.toUpperCase(),text2:c.directive.map(h=>h.type).join(",")})}),function Ke(n,i,t,o,r=[],s={}){const a=n.canvas,l=t,c=i.getBoundingClientRect(),d=i.clientLeft,{clientWidth:h,clientHeight:m,scrollLeft:f,scrollTop:x}=i;if(a.width!==h*devicePixelRatio&&(a.width=h*devicePixelRatio,a.style.width=h+"px"),a.height!==m*devicePixelRatio&&(a.height=m*devicePixelRatio,a.style.height=m+"px"),n.clearRect(0,0,a.width,a.height),n.getTransform().a!==devicePixelRatio&&(n.resetTransform(),n.scale(devicePixelRatio,devicePixelRatio)),s.drawAll||s.drawActive){n.save(),n.translate(-c.left-d,-c.top);const H=[];s.drawActive&&(n.setLineDash([]),n.lineWidth=1/devicePixelRatio,r.forEach(({element:Z,text1:L,text2:F})=>{const le=Z.getBoundingClientRect(),{left:Ue,top:he,width:qe,height:Ve}=le,{padding:kl,margin:Al}=getComputedStyle(Z),{marginRect:Ce,paddingRect:be,contentRect:ve}=function Ze(n,i,t,o,r,s){const a=r?r.split(" ").map(le=>parseInt(le,10)):[0],l=s?s.split(" ").map(le=>parseInt(le,10)):[0];let c,d,h,m,f,x,Q,H;switch(a.length){case 1:c=d=h=m=a[0];break;case 2:c=h=a[0],m=d=a[1];break;case 3:c=a[0],m=d=a[1],h=a[2];break;case 4:c=a[0],d=a[1],h=a[2],m=a[3];break;default:c=d=h=m=0}switch(l.length){case 1:f=x=Q=H=l[0];break;case 2:f=Q=l[0],H=x=l[1];break;case 3:f=l[0],H=x=l[1],Q=l[2];break;case 4:f=l[0],x=l[1],Q=l[2],H=l[3];break;default:f=x=Q=H=0}return{marginRect:[n-H,i-f,t+H+x,o+f+Q],paddingRect:[n,i,t,o],contentRect:[n+m,i+c,t-m-d,o-c-h]}}(Ue,he,qe,Ve,kl,Al);n.fillStyle="rgba(255, 139, 15, 0.4)",n.fillRect(Ce[0],Ce[1],Ce[2],Ce[3]),n.clearRect(be[0],be[1],be[2],be[3]),n.fillStyle="rgba(2, 172, 13, 0.25)",n.fillRect(be[0],be[1],be[2],be[3]),n.clearRect(ve[0],ve[1],ve[2],ve[3]),n.fillStyle="rgba(32,189,248,0.4)",n.fillRect(ve[0],ve[1],ve[2],ve[3]),n.strokeStyle="#06366f",n.setLineDash([12/devicePixelRatio,4/devicePixelRatio]),n.strokeRect(Ce[0],Ce[1],Ce[2],Ce[3]),n.setLineDash([]),H.push({rect:le,text1:L,text2:F})})),s.drawAll&&(n.strokeStyle="#8cb7ff",o.forEach(({element:Z,type:L})=>{if(Z){const F=Z.getBoundingClientRect();n.strokeRect(F.left,F.top,F.width,F.height),"slot"===L&&(n.strokeStyle=s.darkMode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",n.lineWidth=6/devicePixelRatio,n.setLineDash([16/devicePixelRatio,4/devicePixelRatio]),n.strokeRect(F.left+n.lineWidth/2,F.top+n.lineWidth/2,F.width-n.lineWidth,F.height-n.lineWidth),n.setLineDash([]),n.lineWidth=1/devicePixelRatio,n.strokeStyle="#8cb7ff")}})),n.font="normal 12px system-ui,-apple-system,Arial,sans-serif",n.textBaseline="top",H.forEach(({rect:{left:Z,right:L,top:F,bottom:le},text1:Ue,text2:he})=>{const qe=n.measureText(Ue),Ve=n.measureText(he);"rtl"===s.direction?(n.beginPath(),n.rect(L-(qe.width+8),F-16,qe.width+8,16),n.closePath(),n.strokeStyle="#8cb7ff",n.stroke(),n.fillStyle="#404dff",n.fill(),he&&(n.beginPath(),n.rect(L-(Ve.width+8),le,Ve.width+8,16),n.closePath(),n.strokeStyle="#ff8cfd",n.stroke(),n.fillStyle="#ff0cae",n.fill()),n.fillStyle="#ffffff",n.fillText(Ue,L-4,F-14),he&&n.fillText(he,L-4,le+2)):(n.beginPath(),n.rect(Z,F-16,qe.width+8,16),n.closePath(),n.strokeStyle="#8cb7ff",n.stroke(),n.fillStyle="#404dff",n.fill(),he&&(n.beginPath(),n.rect(Z,le,Ve.width+8,16),n.closePath(),n.strokeStyle="#ff8cfd",n.stroke(),n.fillStyle="#ff0cae",n.fill()),n.fillStyle="#ffffff",n.fillText(Ue,Z+4,F-14),he&&n.fillText(he,Z+4,le+2))}),n.restore()}{const H=new WebKitCSSMatrix(l.style.getPropertyValue("transform"));n.font="normal 8px system-ui,-apple-system,Arial,sans-serif",s.darkMode?(n.strokeStyle="#999",n.fillStyle="#999"):(n.strokeStyle="#333",n.fillStyle="#333");const Z=H.a,F=H.f-x;We(n,h,H.e-f,Z),n.save(),n.rotate(Math.PI/180*90),We(n,m,F,Z,-1),n.restore(),n.globalAlpha=1}}(s,t,o,a,l,{drawAll:"edit"===this.gt.mode&&this.gt.showReferenceLine,drawActive:"edit"===this.gt.mode,darkMode:this.gt.darkMode,direction:this.direction.value})})})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(W),e.Y36(e.Qsj),e.Y36(q),e.Y36(e.R0b),e.Y36(C.Is),e.Y36(e.Lbi))},n.\u0275dir=e.lG2({type:n,selectors:[["","page-structure",""]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,$t,7,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(o.gtPage=s.first)}}}),n})(),Yn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var Tt=b(515),ee=b(3900),V=b(2722);const $n=Element.prototype.matches;function Ut(n,i){if(!n)return null;const t=i,o=i,r=i,s=i,a=Boolean("string"==typeof i),l=Boolean("function"==typeof i),c=Boolean(i instanceof NodeList||i instanceof Array),d=Boolean(i instanceof HTMLElement);let m=n;do{if(m=m.correspondingUseElement||m.correspondingElement||m,(f=m)&&(a?$n.call(f,t):c?[...r].includes(f):d?s===f:l&&o(f)))return m;m=m.parentNode}while(m&&m!==document.body&&m!==document);var f;return null}var xe=b(9646),qt=b(4482),Vt=b(5403);function Qt(n){return(0,qt.e)((i,t)=>{let o=!1,r=0;i.subscribe((0,Vt.x)(t,s=>(o||(o=!n(s,r++)))&&t.next(s)))})}var ae=b(9300),Un=b(4671);function Me(n,i=Un.y){return n=n??qn,(0,qt.e)((t,o)=>{let r,s=!0;t.subscribe((0,Vt.x)(o,a=>{const l=i(a);(s||!n(r,l))&&(s=!1,r=l,o.next(a))}))})}function qn(n,i){return n===i}var R=b(4968);const Vn=getComputedStyle(document.documentElement).hasOwnProperty("user-select")?"user-select":"-webkit-user-select";function Ee(n,i,t){n.style.setProperty(zt(i),t)}function de(n,i){n.style.removeProperty(zt(i))}function zt(n){return"userSelect"===n?Vn:n}function jt(n){return 1-Math.pow(n-1,4)}function Xt(n){const i=n.cloneNode(!0);if(n.querySelectorAll("canvas")){const t=n.querySelectorAll("canvas"),o=i.querySelectorAll("canvas");Array.from(t).forEach((r,s)=>{o[s].style.background=`url(${r.toDataURL()}) no-repeat center center / contain`,o[s].style.width="100%",o[s].style.height="100%"})}return i}const Kt=n=>(0,G.T)((0,R.R)(n,"mousedown",{passive:!0}),(0,R.R)(n,"touchstart",{passive:!0}).pipe((0,ae.h)(i=>1===i.touches.length))),Le=(n,i)=>pe(i)?(0,R.R)(n,"touchmove",{passive:!1,capture:!1}).pipe((0,v.b)(t=>t.preventDefault())):(0,R.R)(n,"mousemove",{passive:!0,capture:!1}),Fe=(n,i)=>pe(i)?(0,R.R)(n,"touchend",{capture:!0}):(0,R.R)(n,"mouseup",{capture:!0});function tt(n,i){if(pe(n)&&pe(i)){const t=n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0},o=i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0};return{x:o.pageX-t.pageX,y:o.pageY-t.pageY}}return{x:i.clientX-n.clientX,y:i.clientY-n.clientY}}let nt=(()=>{class n{constructor(){this.status="stop",this.queue=[],this.lastFrameTime=Date.now()}add(t){const o=t.element.style.transform.match(/(\d|\.)+/g)||[0,0],r=this.queue.findIndex(m=>m.element===t.element),{duration:s=250,element:a,to:l={left:0,top:0}}=t;let c=t.from;(-1!==r||!c)&&(c={left:+o[0],top:+o[1]});const h={element:a,from:c,to:l,duration:s,elapse:0};c.left===l.left&&c.top===l.top||(-1===r?this.queue.push(h):this.queue[r]=h,a.style.transform=`translate(${c.left}px,${c.top}px)`,"stop"===this.status&&this.start())}remove(t){this.queue.splice(this.queue.indexOf(t),1)}start(){this.status="start",this.lastFrameTime=performance.now(),this.anime()}anime(){requestAnimationFrame(t=>{const o=t-this.lastFrameTime;this.queue.forEach(r=>{const{element:s,from:a,to:l,duration:c=200,elapse:d}=r,h=d/c>1?1:d/c,m=Math.round((l.left-a.left)*jt(h)+a.left),f=Math.round((l.top-a.top)*jt(h)+a.top);s.style.transform=`translate(${m}px,${f}px)`,0===m&&0===f&&(s.style.transform=""),c<=d&&this.remove(r),r.elapse+=o}),this.queue.length>0?this.anime():this.status="stop",this.lastFrameTime=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function pe(n){return n.type.startsWith("touch")}function Ge(n){n&&n.parentElement&&n.parentElement.removeChild(n)}class jn{constructor(i,t){this.el=i,this._document=t,this._target=null,this._mirror=null,this._placeholder=null,this._parentElement=null,this._refChild=null,this._drop=new T.x,this._dragEnd$=new T.x,this.drop=this._drop.asObservable(),this.dragEnd=this._dragEnd$.asObservable(),this._dragStart(this.el).pipe((0,ee.w)(o=>this._dragEnd(this._dragMove(o),o))).subscribe()}_dragStart(i){return Kt(i).pipe((0,ee.w)(t=>(this._target=Ut(t.target,"[data-draggable]"),!pe(t)&&0!==t.button||this.disabled||!this._target?Tt.E:Le(this._document,t).pipe(Qt(o=>{const{x:r,y:s}=tt(t,o);return Math.abs(r)+Math.abs(s)<30}),(0,V.R)(Fe(this._document,t)),(0,E.q)(1),(0,ee.w)(()=>{const o=this._target,r=o.getBoundingClientRect(),s=this._document;return this._mirror=function a(c){const d=Xt(c);for(const m in d.dataset)delete d.dataset[m];d.style.width=r.width+"px",d.style.height=r.height+"px";const h=s.createElement("div");return h.classList.add("draggable-mirror"),h.appendChild(d),h}(o),this._mirror.style.left=r.left+"px",this._mirror.style.top=r.top+"px",this._placeholder=function l(c){const d=Xt(c);for(const h in d.dataset)delete d.dataset[h];return d.classList.add("draggable-placeholder"),d}(o),this._placeholder.style.transform=`translate(${r.left}px,${r.top}px)`,o.classList.add("draggable-source"),Ee(this._document.documentElement,"userSelect","none"),Ee(this._document.documentElement,"cursor","grab"),this._document.body.appendChild(this._mirror),this._document.body.appendChild(this._placeholder),(0,xe.of)(t)})))))}_dragMove(i){return Le(this._document,i).pipe((0,v.b)(t=>{const{x:o,y:r}=tt(i,t);this._mirror.style.transform=`translate(${o}px,${r}px)`}),(0,y.U)(t=>Wt(t,this._target,this._document)),(0,ae.h)(t=>!!t),(0,v.b)(({parentElement:t,refChild:o})=>{this._parentElement=t,this._refChild=o}),Me((t,o)=>t.parentElement===o.parentElement&&t.refChild===o.refChild),(0,v.b)(t=>this._drop.next({...t,target:this._target,placeholder:this._placeholder})))}_dragEnd(i,t){return i.pipe((0,V.R)(Fe(this._document,t).pipe((0,v.b)(()=>{this._parentElement&&this._dragEnd$.next({parentElement:this._parentElement,refChild:this._refChild,target:this._target}),de(this._document.documentElement,"userSelect"),de(this._document.documentElement,"cursor"),Ge(this._placeholder),Ge(this._mirror),this._target&&this._target.classList.remove("draggable-source"),this._mirror=null,this._placeholder=null,this._target=null,this._parentElement=null,this._refChild=null}))))}}function yt(n){return pe(n)?{x:n.touches[0].pageX,y:n.touches[0].pageY}:{x:n.pageX,y:n.pageY}}function Wt(n,i,t){const o=function Xn(n,i){return pe(n)?i.elementFromPoint(n.touches[0].pageX,n.touches[0].pageY):n.target}(n,t),{x:r,y:s}=yt(n);let a=null,l=null,c=null,d=null,h=o;for(;h.parentElement;){if(h.classList.contains("gt-page")){const f=ot({x:r,y:s},h);switch(c=h.children[0],f){case"left":case"top":d=Array.from(c.children).find(x=>x!==i);break;default:d=null}return{refChild:d,parentElement:c}}if(h.dataset.hasOwnProperty("root")){switch(c=h,ot({x:r,y:s},h)){case"left":case"top":d=Array.from(c.children).find(x=>x!==i);break;default:d=null}return{refChild:d,parentElement:c}}if(h.dataset.hasOwnProperty("droppable")&&(l||(l=h),h.classList.contains("gt-node"))){a=h;break}if(h.dataset.hasOwnProperty("draggable")&&h.classList.contains("gt-node")){a=h;break}h=h.parentElement}if(!t.querySelector(".gt-page"))throw new Error("");if(null===a)return null;if(null===l)switch(ot({x:r,y:s},a,"true"===a.dataset.canHasChild)){case"left":case"top":c=a.parentElement,d=a;break;case"right":case"bottom":c=a.parentElement,d=a.nextElementSibling;break;case"center":return null}else{const f=ot({x:r,y:s},l);if(a===l)switch(f){case"left":case"top":c=a.parentElement,d=a;break;case"right":case"bottom":c=a.parentElement,d=a.nextElementSibling;break;case"center":c=a,d=null}else switch(f){case"left":case"top":case"right":case"bottom":case"center":c=l}}return null!==d&&(d===i.nextElementSibling||d===i)||function zn(n,i){let t=n;for(;t!==i&&null!==t;)t=t.parentElement;return t===i&&null!==t}(a,i)?null:{parentElement:c,refChild:d}}function ot({x:n,y:i},t,o=!0){const r=o?.08:.5,s=o?10:1/0,{top:a,bottom:l,left:c,right:d,width:h,height:m}=t.getBoundingClientRect();return i-a<Math.min(m*r,s)?"top":l-i<Math.min(m*r,s)?"bottom":d-n<Math.min(h*r,s)?"right":n-c<Math.min(h*r,s)?"left":"center"}function en(n){if(!n)return null;for(;n.parentElement;){if(n.classList.contains("gt-node"))return n;n=n.parentElement}return null}function xt(n){const i=getComputedStyle(n);return new WebKitCSSMatrix(i.transform||i.webkitTransform)}let Wn=(()=>{class n{constructor(t,o,r){this.el=t,this.panDisabled=!1,this.updateTransform=new e.vpe,this.subscription=D.w0.EMPTY,o.runOutsideAngular(()=>{this.subscription=Kt(this.el.nativeElement).pipe((0,ee.w)(s=>{if(this.panDisabled)return Tt.E;const a=xt(this.panTarget);return Ee(r.documentElement,"userSelect","none"),Ee(r.documentElement,"cursor","grab"),Le(r,s).pipe((0,V.R)(Fe(r,s).pipe((0,v.b)(()=>{de(r.documentElement,"userSelect"),de(r.documentElement,"cursor")}))),(0,y.U)(l=>tt(s,l)),(0,v.b)(({x:l,y:c})=>this.updateTransform.emit(a.translate(l/a.a,c/a.d).toString())))})).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(u.K0))},n.\u0275dir=e.lG2({type:n,selectors:[["","gtPan",""]],inputs:{panDisabled:"panDisabled",panTarget:"panTarget"},outputs:{updateTransform:"updateTransform"}}),n})(),Et=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var tn=b(9770);let Nt=(()=>{class n{constructor(t,o,r,s,a){this._renderer=o,this._document=s,this._ngZone=a,this.transform=!1,this.minWidth=0,this.maxWidth=1/0,this.minHeight=0,this.maxHeight=1/0,this.setMin=!1,this.updateTransform=new e.vpe,this._widthResize=!1,this._heightResize=!1,this.isBrowser=(0,u.NF)(r),this.container=t.nativeElement}ngOnInit(){if(!this.isBrowser)return;"static"===getComputedStyle(this.container).getPropertyValue("position")&&this._renderer.setStyle(this.container,"position","relative");const o=this._renderer.createElement("div");this._renderer.addClass(o,"resizer-container"),this._renderer.appendChild(this.container,o);let r=[];Array.isArray(this.resizes)?r=this.resizes:"all"===this.resizes&&(r=["t","b","l","r","tl","tr","bl","br"]),this._ngZone.runOutsideAngular(()=>{r.forEach(s=>{const a=this._renderer.createElement("div");this.setResizeStyle(s,a),this._renderer.appendChild(o,a),(0,G.T)((0,R.R)(a,"mousedown",{passive:!1}).pipe((0,ae.h)(l=>0===l.button)),(0,R.R)(a,"touchstart",{passive:!0})).subscribe(l=>this.resize(l,s))})}),this._widthResize="all"===this.resizes||/[lr]/.test(this.resizes.join("")),this._heightResize="all"===this.resizes||/[tb]/.test(this.resizes.join(""))}setResizeStyle(t,o){switch(t){case"t":this._renderer.setStyle(o,"left",".6rem"),this._renderer.setStyle(o,"right",".6rem"),this._renderer.setStyle(o,"top","-.6rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"cursor","ns-resize");break;case"b":this._renderer.setStyle(o,"left",".6rem"),this._renderer.setStyle(o,"right",".6rem"),this._renderer.setStyle(o,"bottom","-.6rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"cursor","ns-resize");break;case"l":this._renderer.setStyle(o,"top",".6rem"),this._renderer.setStyle(o,"bottom",".6rem"),this._renderer.setStyle(o,"left","-.6rem"),this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"cursor","ew-resize");break;case"r":this._renderer.setStyle(o,"top",".6rem"),this._renderer.setStyle(o,"bottom",".6rem"),this._renderer.setStyle(o,"right","-.6rem"),this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"cursor","ew-resize");break;case"tl":this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"left","-.6rem"),this._renderer.setStyle(o,"top","-.6rem"),this._renderer.setStyle(o,"cursor","nwse-resize");break;case"tr":this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"right","-.6rem"),this._renderer.setStyle(o,"top","-.6rem"),this._renderer.setStyle(o,"cursor","nesw-resize");break;case"bl":this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"left","-.6rem"),this._renderer.setStyle(o,"bottom","-.6rem"),this._renderer.setStyle(o,"cursor","nesw-resize");break;case"br":this._renderer.setStyle(o,"width","1.2rem"),this._renderer.setStyle(o,"height","1.2rem"),this._renderer.setStyle(o,"right","-.6rem"),this._renderer.setStyle(o,"bottom","-.6rem"),this._renderer.setStyle(o,"cursor","nwse-resize")}this._renderer.setStyle(o,"position","absolute"),this._renderer.setStyle(o,"z-index","1")}resize(t,o){if(!this.isBrowser)return;t.stopPropagation();const r=getComputedStyle(this.container),s=parseInt(r.getPropertyValue("width"),10),a=parseInt(r.getPropertyValue("height"),10),l=xt(this.container);if(Ee(this._document.documentElement,"userSelect","none"),!pe(t)){let c="auto";switch(o){case"t":case"b":c="ns-resize";break;case"l":case"r":c="ew-resize";break;case"tl":case"br":c="nwse-resize";break;case"tr":case"bl":c="nesw-resize"}Ee(this._document.documentElement,"cursor",c)}(function eo(n,i,t){return(0,tn.P)(()=>n()?i:t)})(()=>pe(t),(0,R.R)(this._document,"touchmove",{passive:!1,capture:!0}).pipe((0,v.b)(c=>c.preventDefault()),(0,V.R)((0,R.R)(this._document,"touchend").pipe((0,v.b)(()=>{de(this._document.documentElement,"userSelect"),de(this._document.documentElement,"cursor")}))),(0,y.U)(c=>({offsetX:c.touches[0].clientX-t.touches[0].clientX,offsetY:c.touches[0].clientY-t.touches[0].clientY}))),(0,R.R)(this._document,"mousemove",{passive:!1,capture:!0}).pipe((0,V.R)((0,R.R)(this._document,"mouseup").pipe((0,v.b)(()=>{de(this._document.documentElement,"userSelect"),de(this._document.documentElement,"cursor")}))),(0,y.U)(c=>({offsetX:c.clientX-t.clientX,offsetY:c.clientY-t.clientY})))).subscribe(({offsetX:c,offsetY:d})=>{let h=0,m=0,f=0,x=0;switch(o){case"t":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a);break;case"l":c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"b":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a);break;case"r":c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"tl":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"tr":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"bl":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a),c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"br":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a),c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s)}switch(o){case"t":m=d,x=-d;break;case"l":h=c,f=-c;break;case"b":x=d;break;case"r":f=c;break;case"tl":h=c,m=d,f=-c,x=-d;break;case"tr":m=d,f=c,x=-d;break;case"bl":h=c,f=-c,x=d;break;case"br":f=c,x=d}this.transform&&this.updateTransform.emit(l.translate(h/l.a,m/l.d).toString()),this._widthResize&&this._renderer.setStyle(this.container,"width",`${s+f/l.a}px`),this._heightResize&&this._renderer.setStyle(this.container,this.setMin?"min-height":"height",`${a+x/l.d}px`)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.Lbi),e.Y36(u.K0),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","gtResize",""]],inputs:{resizes:"resizes",transform:"transform",minWidth:"minWidth",maxWidth:"maxWidth",minHeight:"minHeight",maxHeight:"maxHeight",setMin:"setMin"},outputs:{updateTransform:"updateTransform"}}),n})(),nn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,C.vT]}),n})();var St=b(5963);const to=["tooltipContainer"],no=["tooltip",""],oo=function(n,i){return{top:n,left:i}};let io=(()=>{class n{constructor(t,o,r,s){this.elementRef=t,this.cdr=o,this.direction=r,this._document=s,this.fading=!1,this.fadingOutSubscription=D.w0.EMPTY}get tooltipPosition(){return this._tooltipPosition}set tooltipPosition(t){if("rtl"===this.direction.value)switch(t){case"start":this._tooltipPosition="end";break;case"end":this._tooltipPosition="start";break;default:this._tooltipPosition=t}else this._tooltipPosition=t}get showing(){return!!this.elementRef.nativeElement.parentElement}show(){this.elementRef.nativeElement.parentElement||(this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=D.w0.EMPTY,this._document.body.appendChild(this.elementRef.nativeElement)),this.cdr.detectChanges()}hide(){this.elementRef.nativeElement.parentElement&&this.elementRef.nativeElement.parentElement.removeChild(this.elementRef.nativeElement),this.cdr.detectChanges()}setTitle(t){this.tooltipTitle=t,this.cdr.detectChanges()}setPosition(t){this.tooltipPosition=t,this.cdr.detectChanges()}updatePosition(t){this.fading=!0,this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=D.w0.EMPTY;const o=this.tooltipContainer.nativeElement.getBoundingClientRect();let a,l,r=0,s=0;const c=this._document.body.clientWidth-o.width-5;switch(this.tooltipPosition){case"top":if(r=o.width/2,l=t.top-o.height,a=(t.left+t.right-o.width)/2,a>c){const h=a-c;a=c,r+=h}if(a<5){const h=a-5;a=5,r+=h}break;case"bottom":if(r=o.width/2,l=t.bottom,a=(t.left+t.right-o.width)/2,a>c){const h=a-c;a=c,r+=h}if(a<5){const h=a-5;a=5,r+=h}break;case"start":s=o.height/2,a=t.left-o.width,l=(t.top+t.bottom-o.height)/2;break;default:s=o.height/2,a=t.right,l=(t.top+t.bottom-o.height)/2}r=Math.round(r),s=Math.round(s),a=Math.round(a),l=Math.round(l),this.arrowMatrix=`matrix(1,0,0,1,${r},${s})`,this.containerMatrix=`matrix(1,0,0,1,${a},${l})`,this.cdr.detectChanges()}fadeIn(t){this.cdr.detectChanges(),this.show(),this.updatePosition(t),this.fading=!1,this.hide(),this.show(),this.fading=!0,this.cdr.detectChanges()}fadeOut(){this.fading=!1,this.cdr.detectChanges(),this.fadingOutSubscription=(0,St.H)(150).subscribe(()=>this.hide())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(C.Is),e.Y36(u.K0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["div","tooltip",""]],viewQuery:function(t,o){if(1&t&&e.Gf(to,7),2&t){let r;e.iGM(r=e.CRH())&&(o.tooltipContainer=r.first)}},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"},attrs:no,decls:5,vars:12,consts:[["role","tooltip",1,"tooltip","position-absolute","fade",2,"left","0","top","0",3,"ngClass"],["tooltipContainer",""],[1,"tooltip-arrow","position-absolute",3,"ngStyle"],[1,"tooltip-inner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA()()),2&t&&(e.Udp("transform",o.containerMatrix),e.ekj("show",o.fading),e.Q6J("ngClass","bs-tooltip-"+o.tooltipPosition),e.xp6(2),e.Udp("transform",o.arrowMatrix),e.Q6J("ngStyle",e.WLB(9,oo,"start"===o.tooltipPosition||"end"===o.tooltipPosition?"-.4rem":"","bottom"===o.tooltipPosition||"top"===o.tooltipPosition?"-.4rem":"")),e.xp6(2),e.Oqu(o.tooltipTitle))},dependencies:[u.mk,u.PC],encapsulation:2}),n})();class U{constructor(i,t){this.elementRef=i,this.appRef=t,this.tooltipPosition="end"}mouseenter(i){if(i.preventDefault(),i.stopPropagation(),!this.tooltipTitle)return;U.tooltipRef||(U.tooltipRef=(0,e.LMc)(io,{environmentInjector:this.appRef.injector}));const t=U.tooltipRef.instance,o=this.elementRef.nativeElement.getBoundingClientRect();t.showing?(t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.updatePosition(o)):U.showTimerSubscription=(0,St.H)(400).subscribe(()=>{t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.fadeIn(o)}),U.hideTimerSubscription.unsubscribe(),U.hideTimerSubscription=D.w0.EMPTY}mouseleave(i){i.preventDefault(),i.stopPropagation();const t=U.tooltipRef.instance;U.hideTimerSubscription=(0,St.H)(50).subscribe(()=>t.fadeOut()),U.showTimerSubscription.unsubscribe(),U.showTimerSubscription=D.w0.EMPTY}}U.tooltipRef=null,U.showTimerSubscription=D.w0.EMPTY,U.hideTimerSubscription=D.w0.EMPTY,U.\u0275fac=function(i){return new(i||U)(e.Y36(e.SBq),e.Y36(e.z2F))},U.\u0275dir=e.lG2({type:U,selectors:[["","tooltip",""]],hostBindings:function(i,t){1&i&&e.NdJ("mouseenter",function(r){return t.mouseenter(r)})("mouseleave",function(r){return t.mouseleave(r)})},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"}});let ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),so=(()=>{class n{constructor(t,o,r){this._renderer=o,this._ngZone=r,this.updateTransform=new e.vpe,this.subscription=D.w0.EMPTY,this._container=t.nativeElement,this._renderer.setStyle(this._container,"transform-origin","left top")}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this.subscription=(0,R.R)(this.zoomZone||this._container,"wheel",{passive:!0,capture:!0}).subscribe(t=>this.zoom(t)),(0,R.R)(this.zoomZone||this._container,"touchstart",{passive:!0}).pipe((0,ae.h)(t=>2===t.touches.length)).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}zoom(t){if(this.gtZoomDisabled)return;t.stopPropagation();const o=xt(this._container),r=1-t.deltaY/1e3,s=+(o.a*r).toFixed(2);if(Math.max(.2,Math.min(s,5))!==s)return;const a=this._container.getBoundingClientRect(),l=this._container.parentElement.getBoundingClientRect();this.updateTransform.emit((new WebKitCSSMatrix).scale(s,s).translate((t.pageX-(t.pageX-a.x)*r-l.x)/s,(t.pageY-(t.pageY-a.y)*r-l.y)/s).toString())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","gtZoom",""]],inputs:{zoomZone:"zoomZone",gtZoomDisabled:"gtZoomDisabled"},outputs:{updateTransform:"updateTransform"}}),n})();function on(n,i){return Me((t,o)=>i?i(t[n],o[n]):t[n]===o[n])}function ao(n,i){1&n&&e._UZ(0,"hr",4)}function lo(n,i){1&n&&e._UZ(0,"i",10)}function co(n,i){if(1&n&&(e.TgZ(0,"small",11),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.desc)}}function po(n,i){1&n&&e._UZ(0,"i",12)}function uo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onClick(s,r))})("mouseenter",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.mouseenter(r,s))}),e.YNc(1,lo,1,0,"i",6),e.TgZ(2,"span",7),e._uU(3),e.qZA(),e.YNc(4,co,2,1,"small",8),e.YNc(5,po,1,0,"i",9),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.ekj("active",t.active)("disabled",t.disabled),e.xp6(1),e.Q6J("ngIf",t.checked),e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("ngIf",t.desc),e.xp6(1),e.Q6J("ngIf",t.children)}}function ho(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ao,1,0,"hr",2),e.YNc(2,uo,6,8,"a",3),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.divider),e.xp6(1),e.Q6J("ngIf",!t.divider)}}let _o=(()=>{class n{constructor(t){this.menu=t}preventDefault(t){t.preventDefault(),t.stopPropagation()}mouseenter(t,o){t.stopPropagation(),t.preventDefault(),(0,R.R)(t.target,"mousemove").pipe(on("target"),(0,X.b)(200),(0,V.R)((0,R.R)(t.target,"mouseleave"))).subscribe(()=>{const{children:r,disabled:s}=o;this.menu.create(t,s?[]:r||[],this.level+1)})}onClick(t,o){if(o.stopPropagation(),t.disabled||t.children&&t.children.length)return o.stopPropagation();t.onclick&&t.onclick(t,o),this.menu.destroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-context-menu"]],hostBindings:function(t,o){1&t&&e.NdJ("pointerdown",function(s){return o.preventDefault(s)})},decls:2,vars:2,consts:[[1,"dropdown-menu","show","shadow",2,"position","static"],[4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],["class","dropdown-item d-flex justify-content-between","href","javascript:void(0);",3,"active","disabled","click","mouseenter",4,"ngIf"],[1,"dropdown-divider"],["href","javascript:void(0);",1,"dropdown-item","d-flex","justify-content-between",3,"click","mouseenter"],["class","check-icon",4,"ngIf"],[1,"text-main"],["class","text-desc text-muted ms-3",4,"ngIf"],["class","caret",4,"ngIf"],[1,"check-icon"],[1,"text-desc","text-muted","ms-3"],[1,"caret"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ho,3,2,"ng-container",1),e.qZA()),2&t&&(e.Q6J("@fade","in"),e.xp6(1),e.Q6J("ngForOf",o.menus))},dependencies:[u.sg,u.O5],encapsulation:2,data:{animation:[je]}}),n})();const mo=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"}];let Oe=(()=>{class n{constructor(t,o){this.injector=t,this.overlay=o,this.onclick=new e.vpe,this.overlayRefs=[],this.currentMenus=[],this.destroy=()=>{this.overlayRefs.forEach(r=>{r.dispose()}),this.overlayRefs=[],this.unbindEvents()}}create(t,o,r=0){if(0===this.overlayRefs.length&&this.bindEvents(),!(this.currentMenus.indexOf(o)>-1)&&(this.overlayRefs.splice(r,this.overlayRefs.length).forEach(s=>s.dispose()),this.currentMenus.splice(r,this.overlayRefs.length),o&&o.length)){this.currentMenus.push(o);const s=e.zs3.create({providers:[],parent:this.injector}),a=new $.C5(_o,null,s),l=this.overlay.create({disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(0===r?t:t.target).withPositions(mo)}),c=l.attach(a);c.instance.menus=o,c.instance.level=r,this.overlayRefs.push(l)}}bindEvents(){window.addEventListener("pointerdown",this.destroy,{once:!0,capture:!1}),window.addEventListener("wheel",this.destroy,{once:!0,capture:!0}),window.addEventListener("blur",this.destroy,{once:!0,capture:!0}),window.addEventListener("resize",this.destroy,{once:!0,capture:!0})}unbindEvents(){window.removeEventListener("pointerdown",this.destroy),window.removeEventListener("wheel",this.destroy),window.removeEventListener("blur",this.destroy),window.removeEventListener("resize",this.destroy)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(j.aV))},n.\u0275dir=e.lG2({type:n,outputs:{onclick:"onclick"}}),n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),go=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Oe],imports:[u.ez]}),n})();var p=b(433);function fo(n,i){if(1&n&&e._UZ(0,"input",5),2&n){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function Co(n,i){if(1&n&&e._UZ(0,"input",5),2&n){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function bo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",6),e.NdJ("wheel",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onwheel(r))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function vo(n,i){if(1&n&&e._UZ(0,"input",7),2&n){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}let it=(()=>{class n{constructor(t,o,r,s){this.formItem=t,this.formControl=o,this.formGroup=r,this._document=s}onwheel(t){this._document.activeElement===t.target&&(t.preventDefault(),"number"===this.formItem.type&&this.formControl.setValue(Number(this.formControl.value)-Math.sign(t.deltaY)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw),e.Y36(u.K0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-input"]],decls:6,vars:5,consts:[[3,"formGroup"],[3,"ngSwitch"],["type","color","class","form-control",3,"formControlName",4,"ngSwitchCase"],["type","number","class","form-control","autocomplete","off","pattern","[0-9]*",3,"formControlName","wheel",4,"ngSwitchCase"],["type","text","class","form-control","autocomplete","off",3,"formControlName",4,"ngSwitchDefault"],["type","color",1,"form-control",3,"formControlName"],["type","number","autocomplete","off","pattern","[0-9]*",1,"form-control",3,"formControlName","wheel"],["type","text","autocomplete","off",1,"form-control",3,"formControlName"]],template:function(t,o){1&t&&(e.ynx(0,0)(1,1),e.YNc(2,fo,1,1,"input",2),e.YNc(3,Co,1,1,"input",2),e.YNc(4,bo,1,1,"input",3),e.YNc(5,vo,1,1,"input",4),e.BQk()()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngSwitch",o.formItem.type),e.xp6(1),e.Q6J("ngSwitchCase","password"),e.xp6(1),e.Q6J("ngSwitchCase","color"),e.xp6(1),e.Q6J("ngSwitchCase","number"))},dependencies:[u.RF,u.n9,u.ED,p.Fj,p.wV,p.JJ,p.JL,p.c5,p.sg,p.u],encapsulation:2}),n})();function To(n,i){if(1&n&&(e.TgZ(0,"option",2),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.hij(" ",t.label," ")}}let yo=(()=>{class n{constructor(t,o,r){this.formItem=t,this.formControl=o,this.formGroup=r,this.onclick=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-select"]],outputs:{onclick:"onclick"},decls:4,vars:4,consts:[[1,"input-group",3,"formGroup"],[1,"form-select",3,"formControlName"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"select",1),e._UZ(2,"option",2),e.YNc(3,To,2,2,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("formControlName",o.formItem.name),e.xp6(1),e.Q6J("ngValue",void 0),e.xp6(1),e.Q6J("ngForOf",o.formItem.options))},dependencies:[u.sg,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),n})(),xo=(()=>{class n{constructor(t,o,r){this.formItem=t,this.formControl=o,this.formGroup=r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-switch"]],hostAttrs:[1,"py-2","d-block"],decls:3,vars:4,consts:[[1,"form-check","form-switch",3,"formGroup"],["type","checkbox","role","switch",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1)(2,"label",2),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("id",o.formItem.name)("formControlName",o.formItem.name),e.xp6(1),e.Q6J("for",o.formItem.name))},dependencies:[p.Wl,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),n})(),Eo=(()=>{class n{constructor(t,o,r){this.formItem=t,this.formControl=o,this.formGroup=r,this.options={language:"json",formatOnType:!0,formatOnPaste:!0,automaticLayout:!0,lineNumbersMinChars:2},this.onchange=new e.vpe}onInit(t){t.getModel().updateOptions({tabSize:2}),t.addAction({id:"saveScript",label:"\u4fdd\u5b58",keybindings:[],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:()=>(this.formControl.setValue(JSON.parse(this.rawScript.replace(/(\r|\n|\s+)/g,""))),null)}),t.setValue(JSON.stringify(this.formItem.value)),setTimeout(()=>t.getAction("editor.action.formatDocument").run(),100)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-textarea"]],outputs:{onchange:"onchange"},decls:2,vars:2,consts:[[3,"formGroup"],["cols","30","rows","5",1,"form-control",3,"formControlName"]],template:function(t,o){1&t&&(e.ynx(0,0),e._UZ(1,"textarea",1),e.BQk()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("formControlName",o.formItem.name))},dependencies:[p.Fj,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),n})(),No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:Ct,useValue:{text:it,number:it,color:it,select:yo,textarea:Eo,switch:xo},multi:!0}],imports:[u.ez,p.u5,p.UX]}),n})(),So=(()=>{class n{constructor(t,o){this.formItem=t,this.formControl=o,this.dataReset=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-data-binding"]],outputs:{dataReset:"dataReset"},decls:5,vars:1,consts:[[1,"input-group"],["type","text","disabled","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"gt-icon"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.formControl.reset()}),e.TgZ(3,"i",3),e._uU(4,"close"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("value","\u6570\u636e\u7ed1\u5b9a\u4e2d"))},encapsulation:2}),n})(),rt=(()=>{class n{constructor(t,o){this.viewContainerRef=t,this.injector=o}insert(t,o=[],r){const s=e.zs3.create({providers:o,parent:this.injector});return this.viewContainerRef.createComponent(t,{index:r,injector:s})}move(t,o){o!==this.viewContainerRef.indexOf(t)&&this.viewContainerRef.move(t,o)}remove(t){this.viewContainerRef.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b),e.Y36(e.zs3))},n.\u0275dir=e.lG2({type:n,selectors:[["","template-directive",""]]}),n})();function wo(n,i){}function Mo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.inheritClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e.TgZ(1,"i",8),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw();e.ekj("active",t.formItem.inherit),e.Q6J("disabled",t.formItem.inherit),e.xp6(2),e.Oqu("bind")}}function Oo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.dataBindClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e._uU(1," B "),e.qZA()}}let ko=(()=>{class n{constructor(t,o,r,s){this.formItem=t,this.formTypeMapCollection=o,this.formControl=r,this.formGroup=s,this.inheritClick=new e.vpe,this.dataBindClick=new e.vpe,this.dataReset=new e.vpe,this.subscription=D.w0.EMPTY}ngOnInit(){const t=this.formTypeMapCollection.reduce((o,r)=>Object.assign(o,r),{});this.subscription=(0,G.T)(this.formControl.valueChanges,(0,xe.of)(this.formControl.value)).pipe((0,y.U)(o=>o instanceof g.Sl),Me()).subscribe(()=>{this.template.remove();const o=this.formControl.value instanceof g.Sl?So:t[this.formItem.type]||it;!o||this.template.insert(o,[{provide:p.cw,useValue:this.formGroup},{provide:p.NI,useValue:this.formControl},{provide:"FormItem",useValue:this.formItem}])})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(Ct),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form-group"]],viewQuery:function(t,o){if(1&t&&e.Gf(rt,7),2&t){let r;e.iGM(r=e.CRH())&&(o.template=r.first)}},outputs:{inheritClick:"inheritClick",dataBindClick:"dataBindClick",dataReset:"dataReset"},decls:8,vars:8,consts:[[1,"row","mb-2",3,"formGroup"],[1,"col-4","col-form-label","text-truncate","pe-0",3,"title"],[1,"col-8","position-relative"],[1,"form-item",3,"ngSwitch"],["template-directive",""],["type","button","class","btn btn-light btn-sm","style","position: absolute;left: -1.5rem;top: 0.2rem;width: auto;",3,"active","disabled","click",4,"ngIf"],["type","button","class","btn btn-light btn-sm","style","position: absolute;right: -1rem;top: 0.2rem;width: auto;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","left","-1.5rem","top","0.2rem","width","auto",3,"disabled","click"],[1,"gt-icon"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","right","-1rem","top","0.2rem","width","auto",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,wo,0,0,"ng-template",4),e.qZA(),e.YNc(6,Mo,3,4,"button",5),e.YNc(7,Oo,2,0,"button",6),e.qZA()()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("title",o.formItem.label||o.formItem.name),e.xp6(1),e.Oqu(o.formItem.label||o.formItem.name),e.xp6(1),e.ekj("invalid",o.formControl.invalid),e.xp6(1),e.Q6J("ngSwitch",o.formItem.type),e.xp6(2),e.Q6J("ngIf",void 0!==o.formItem.inherit),e.xp6(1),e.Q6J("ngIf",o.formItem.canBind))},dependencies:[u.O5,u.RF,p.JL,p.sg,rt],encapsulation:2}),n})();function Ao(n,i){}let st=(()=>{class n{constructor(t,o){this.cdr=t,this.iterableDiffers=o,this.formGroup=new p.cw({}),this._differ=this.iterableDiffers.find([]).create((r,s)=>s.type+"-"+s.name),this._subscriptions=new Map,this.formChange=new e.vpe,this.dataBindClick=new e.vpe,this.inheritClick=new e.vpe,this.dataReset=new e.vpe}set formList(t){const o=this._differ.diff(t);o&&o.forEachOperation(({item:r,previousIndex:s},a,l)=>{if(null===s){const d=new p.NI(void 0===r.value?null:r.value,{validators:r.validator,updateOn:r.updateOn});this.formGroup.addControl(r.name,d);const{instance:h}=this.template.insert(ko,[{provide:p.cw,useValue:this.formGroup},{provide:p.NI,useValue:d},{provide:"FormItem",useValue:r}],l);this._subscriptions.set(r.name,(0,G.T)(d.valueChanges.pipe((0,X.b)(100),(0,v.b)(m=>{r.value=m,this.formChange.emit({formItem:r,formControl:d})})),h.dataBindClick.pipe((0,v.b)(m=>this.dataBindClick.emit(m))),h.inheritClick.pipe((0,v.b)(m=>this.inheritClick.emit(m))),h.dataReset.pipe()).subscribe())}else if(null===l)this.formGroup.removeControl(r.name),this.template.remove(null===a?void 0:a),this._subscriptions.get(r.name).unsubscribe();else if(null!==a){const d=this.template.viewContainerRef.get(a);this.template.move(d,l)}}),t.forEach(({name:r,value:s=null})=>{const a=this.formGroup.get(r);a&&a.setValue(s,{emitEvent:!1})}),this.cdr.markForCheck()}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe()),this._subscriptions.clear()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.ZZ4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(rt,7),2&t){let r;e.iGM(r=e.CRH())&&(o.template=r.first)}},inputs:{formList:"formList"},outputs:{formChange:"formChange",dataBindClick:"dataBindClick",inheritClick:"inheritClick",dataReset:"dataReset"},decls:1,vars:0,consts:[["template-directive",""]],template:function(t,o){1&t&&e.YNc(0,Ao,0,0,"ng-template",0)},dependencies:[rt],encapsulation:2,changeDetection:0}),n})(),te=(()=>{class n{constructor(t,o,r,s){this.viewContainerRef=t,this.cdr=o,this.injector=r,this.componentMap=Object.assign({},...s)}insert(t,o){const r=e.zs3.create({providers:[{provide:g.Fo,useValue:t}],parent:this.injector}),s=this.viewContainerRef.createComponent(this.componentMap[t.type],{index:o,injector:r});return t.componentRef=s,this.cdr.detectChanges(),s}remove(t){this.viewContainerRef.remove(t)}move(t,o){const r=this.viewContainerRef.move(t.componentRef.hostView,o);return this.cdr.detectChanges(),r}clear(){this.viewContainerRef.clear(),this.cdr.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(e.zs3),e.Y36(P))},n.\u0275dir=e.lG2({type:n,selectors:[["","gtTemplate",""]],inputs:{templateID:"templateID"}}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Yn,N,Et,ro,wt]}),n})(),Do=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[wt]}),n})(),Ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Xe,nn,u.ez]}),n})();var at=b(5017),lt=b(1135),rn=b(5191),ne=b(1281);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
class Bo extends class Po{constructor(){this.expansionModel=new at.Ov(!0)}toggle(i){this.expansionModel.toggle(this._trackByValue(i))}expand(i){this.expansionModel.select(this._trackByValue(i))}collapse(i){this.expansionModel.deselect(this._trackByValue(i))}isExpanded(i){return this.expansionModel.isSelected(this._trackByValue(i))}toggleDescendants(i){this.expansionModel.isSelected(this._trackByValue(i))?this.collapseDescendants(i):this.expandDescendants(i)}collapseAll(){this.expansionModel.clear()}expandDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.select(...t.map(o=>this._trackByValue(o)))}collapseDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.deselect(...t.map(o=>this._trackByValue(o)))}_trackByValue(i){return this.trackBy?this.trackBy(i):i}}{constructor(i,t,o){super(),this.getLevel=i,this.isExpandable=t,this.options=o,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(i){const o=[];for(let r=this.dataNodes.indexOf(i)+1;r<this.dataNodes.length&&this.getLevel(i)<this.getLevel(this.dataNodes[r]);r++)o.push(this.dataNodes[r]);return o}expandAll(){this.expansionModel.select(...this.dataNodes.map(i=>this._trackByValue(i)))}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
const sn=new e.OlP("CDK_TREE_NODE_OUTLET_NODE");let ct=(()=>{class n{constructor(t,o){this.viewContainer=t,this._node=o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b),e.Y36(sn,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */class Zo{constructor(i){this.$implicit=i}}let Mt=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Rgc))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),Ne=(()=>{class n{constructor(t,o){this._differs=t,this._changeDetectorRef=o,this._onDestroy=new T.x,this._levels=new Map,this.viewChange=new lt.X({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(o=>!o.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;(0,at.Z9)(this._dataSource)?t=this._dataSource.connect(this):(0,rn.b)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,xe.of)(this._dataSource)),t&&(this._dataSubscription=t.pipe((0,V.R)(this._onDestroy)).subscribe(o=>this.renderNodeChanges(o)))}renderNodeChanges(t,o=this._dataDiffer,r=this._nodeOutlet.viewContainer,s){const a=o.diff(t);!a||(a.forEachOperation((l,c,d)=>{if(null==l.previousIndex)this.insertNode(t[d],d,r,s);else if(null==d)r.remove(c),this._levels.delete(l.item);else{const h=r.get(c);r.move(h,d)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,o){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(o,t))||this._defaultNodeDef}insertNode(t,o,r,s){const a=this._getNodeDef(t,o),l=new Zo(t);l.level=this.treeControl.getLevel?this.treeControl.getLevel(t):typeof s<"u"&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,l.level),(r||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,l,o),ge.mostRecentTreeNode&&(ge.mostRecentTreeNode.data=t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.ZZ4),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,Mt,5),2&t){let s;e.iGM(s=e.CRH())&&(o._nodeDefs=s)}},viewQuery:function(t,o){if(1&t&&e.Gf(ct,7),2&t){let r;e.iGM(r=e.CRH())&&(o._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,o){1&t&&e.GkF(0,0)},dependencies:[ct],encapsulation:2}),n})(),ge=(()=>{class n{constructor(t,o){this._elementRef=t,this._tree=o,this._destroyed=new T.x,this._dataChanges=new T.x,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function Lo(n){let i=n.parentElement;for(;i&&!Fo(i);)i=i.parentElement;return i?i.classList.contains("cdk-nested-tree-node")?(0,ne.su)(i.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(Ne))},n.\u0275dir=e.lG2({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,o){2&t&&e.uIk("aria-expanded",o.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Fo(n){const i=n.classList;return!(!i?.contains("cdk-nested-tree-node")&&!i?.contains("cdk-tree"))}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */let an=(()=>{class n extends ge{constructor(t,o,r){super(t,o),this._differs=r}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);const t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):(0,rn.b)(t)&&t.pipe((0,V.R)(this._destroyed)).subscribe(o=>this.updateChildrenNodes(o)),this.nodeOutlet.changes.pipe((0,V.R)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(t){const o=this._getNodeOutlet();t&&(this._children=t),o&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,o.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const t=this.nodeOutlet;return t&&t.find(o=>!o._node||o._node===this)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(Ne),e.Y36(e.ZZ4))},n.\u0275dir=e.lG2({type:n,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,o,r){if(1&t&&e.Suo(r,ct,5),2&t){let s;e.iGM(s=e.CRH())&&(o.nodeOutlet=s)}},hostAttrs:[1,"cdk-nested-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[e._Bn([{provide:ge,useExisting:n},{provide:sn,useExisting:n}]),e.qOj]}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */const Go=/([A-Za-z%]+)$/;let ln=(()=>{class n{constructor(t,o,r,s){this._treeNode=t,this._tree=o,this._element=r,this._dir=s,this._destroyed=new T.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe((0,V.R)(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,o=this._level??t;return"number"==typeof o?`${o*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const o=this._paddingIndent();if(o!==this._currentPadding||t){const r=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===s?"paddingRight":"paddingLeft";r.style[s]=o||"",r.style[a]="",this._currentPadding=o}}_setLevelInput(t){this._level=(0,ne.su)(t,null),this._setPadding()}_setIndentInput(t){let o=t,r="px";if("string"==typeof t){const s=t.split(Go);o=s[0],r=s[1]||r}this.indentUnits=r,this._indent=(0,ne.su)(o),this._setPadding()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ge),e.Y36(Ne),e.Y36(e.SBq),e.Y36(C.Is,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),cn=(()=>{class n{constructor(t,o){this._tree=t,this._treeNode=o,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=(0,ne.Ig)(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ne),e.Y36(ge))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,o){1&t&&e.NdJ("click",function(s){return o._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var B=b(1206);function Ho(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editAction(s))}),e.TgZ(9,"i",11),e._uU(10,"edit"),e.qZA()(),e.TgZ(11,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeAction(s))}),e.TgZ(12,"i",11),e._uU(13,"close"),e.qZA()()()()(),e.TgZ(14,"div",13)(15,"div",14)(16,"label",15),e._uU(17,"Description"),e.qZA(),e.TgZ(18,"input",16),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.desc=r)}),e.qZA()()()()}if(2&n){const t=i.$implicit;e.xp6(3),e.hij(" ",t.type," "),e.xp6(15),e.Q6J("ngModel",t.desc)}}function Yo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("cdkDropListDropped",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.dropped(r,a.actions))}),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,Ho,19,2,"div",5),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("ngForOf",t.actions)}}let dn=(()=>{class n{constructor(t,o,r){this.configMap=t,this.cdr=o,this.events=r,this.subscription=D.w0.EMPTY}set gtNode(t){this.updateGtNode(t)}get gtNode(){return this._gtNode}ngOnInit(){this.subscription=(0,R.R)(this.events.target,"changeactionend").subscribe(t=>{const{action:o,script:r}=t,s={...o};o.script=r,this.gtNode.action.hasOwnProperty(o.type)?-1===this.gtNode.action[o.type].indexOf(o)?(this.gtNode.action[o.type].push(o),this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"add",action:o,previousAction:null})):this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"update",action:o,previousAction:s}):(this.gtNode.action[o.type]=[o],this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"add",action:o,previousAction:null})),this.updateGtNode(this.gtNode)})}updateGtNode(t){const o=this.configMap.get(t.type);if(o){const r=o.get("action");this.actionTypes=r?Object.keys(r).map(s=>({text:s})):[]}else this.actionTypes=[];this._gtNode=t,this.actions=Object.entries(this.gtNode.action).map(([r,s])=>({type:r,actions:s})),this.cdr.detectChanges()}ngOnDestroy(){this.subscription.unsubscribe()}addAction(t){this.events.changeActionStart({desc:null,script:"",scopes:[],type:t.text,editable:!0})}editAction(t){this.events.changeActionStart(t)}removeAction(t){const o=this.gtNode.action[t.type],r=o.indexOf(t);o.splice(r,1),this.updateGtNode(this.gtNode),this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"remove",action:t,previousAction:null})}dropped(t,o){(0,B.bA)(o,t.previousIndex,t.currentIndex)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(bt),e.Y36(e.sBO),e.Y36(W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-action"]],inputs:{gtNode:"gtNode"},decls:4,vars:2,consts:function(){let i;return i="Add",[["cdkDropList","",3,"cdkDropListDropped",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],i,["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]]},template:function(t,o){1&t&&(e.YNc(0,Yo,4,2,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("itemClick",function(s){return o.addAction(s)}),e.SDv(3,3),e.qZA()()),2&t&&(e.Q6J("ngForOf",o.actions),e.xp6(2),e.Q6J("items",o.actionTypes))},dependencies:[u.sg,p.Fj,p.JJ,p.On,B.Wj,B.Zt,B.Bh,_],encapsulation:2}),n})();const $o=["*"];let pn=(()=>{class n{constructor(){this.removeItem=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-card"]],inputs:{item:"item"},outputs:{removeItem:"removeItem"},ngContentSelectors:$o,decls:13,vars:1,consts:[["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.TgZ(4,"div",3)(5,"button",4)(6,"i",5),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return o.removeItem.emit(o.item)}),e.TgZ(9,"i",5),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"div",7),e.Hsn(12),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",o.item.title," "))},dependencies:[B.Zt,B.Bh],encapsulation:2}),n})();function Uo(n,i){if(1&n&&(e.TgZ(0,"option",1),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t)}}function qo(n,i){if(1&n&&(e.TgZ(0,"optgroup",3),e.YNc(1,Uo,2,2,"option",4),e.qZA()),2&n){const t=i.$implicit;e.Q6J("label",t.category),e.xp6(1),e.Q6J("ngForOf",t.list)}}let un=(()=>{class n{constructor(){this.classList=[{category:"Margin",list:["m-0","m-1","m-2","m-3","m-4","m-5","mx-auto"]},{category:"Padding",list:["p-0","p-1","p-2","p-3","p-4","p-5"]},{category:"Float",list:["clearfix","float-start","float-end"]},{category:"Border",list:["border"]},{category:"Display",list:["d-block"]}]}set gtNode(t){this._gtNode=t,this.value=t.classList}get gtNode(){return this._gtNode}change(){this.gtNode.classList=this.value.filter(t=>!!t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-class"]],inputs:{gtNode:"gtNode"},decls:4,vars:3,consts:[["multiple","",1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(s){return o.value=s})("ngModelChange",function(){return o.change()}),e.TgZ(1,"option",1),e._uU(2,"---------------------------------------------------------"),e.qZA(),e.YNc(3,qo,2,2,"optgroup",2),e.qZA()),2&t&&(e.Q6J("ngModel",o.value),e.xp6(1),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",o.classList))},dependencies:[u.sg,p.YN,p.Kr,p.K7,p.JJ,p.On],encapsulation:2}),n})();function Vo(n,i){1&n&&(e.TgZ(0,"div",9),e._uU(1,"~~DataBinding~~"),e.qZA())}function Qo(n,i){if(1&n&&e._UZ(0,"input",14),2&n){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function zo(n,i){if(1&n&&e._UZ(0,"input",15),2&n){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function jo(n,i){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Xo(n,i){if(1&n&&(e.TgZ(0,"select",16),e.YNc(1,jo,2,2,"option",17),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name),e.xp6(1),e.Q6J("ngForOf",t.options)}}function Ko(n,i){if(1&n&&(e.ynx(0)(1,10),e.YNc(2,Qo,1,3,"input",11),e.YNc(3,zo,1,3,"input",12),e.YNc(4,Xo,2,4,"select",13),e.BQk()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","select")}}function Wo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.control.reset())}),e.TgZ(1,"i",20),e._uU(2,"close"),e.qZA()()}}function ei(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.expressionClick.emit(r))}),e._uU(1," f(x) "),e.qZA()}}function ti(n,i){if(1&n&&(e.TgZ(0,"div",2)(1,"label",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,Vo,2,0,"div",5),e.YNc(5,Ko,5,4,"ng-container",6),e.YNc(6,Wo,3,0,"button",7),e.YNc(7,ei,2,0,"button",7),e.TgZ(8,"div",8),e._uU(9),e.ALo(10,"json"),e.qZA()()()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(2),e.Oqu(t.label||t.name),e.xp6(2),e.Q6J("ngIf",o.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",!o.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",null!==t.control.value),e.xp6(1),e.Q6J("ngIf",t.expression),e.xp6(2),e.hij(" ",e.lcZ(10,6,o.formGroup.get(t.name).errors)," ")}}let Ot=(()=>{class n{constructor(){this.formGroup=new p.cw({}),this.subscription=D.w0.EMPTY,this.expressionClick=new e.vpe,this.formChange=new e.vpe}set value(t){this.formGroup.setValue(t)}get formList(){return this._formList}set formList(t){Object.keys(this.formGroup.controls).forEach(o=>this.formGroup.removeControl(o)),this._formList=t.map(o=>{const r=new p.NI({value:void 0!==o.value?o.value:null,disabled:o.disabled},o.validators);return this.formGroup.addControl(o.name,r),{...o,control:r}})}ngOnInit(){this.subscription=this.formGroup.valueChanges.subscribe(()=>this.formChange.emit(this.formGroup))}ngOnDestroy(){this.subscription.unsubscribe()}isDataBinding(t){return t instanceof g.Sl}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-form"]],inputs:{value:"value",formList:"formList"},outputs:{expressionClick:"expressionClick",formChange:"formChange"},decls:2,vars:2,consts:[[3,"formGroup"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"form-label"],[1,"input-group","input-group-sm","has-validation"],["class","form-control",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"invalid-feedback"],[1,"form-control"],[3,"ngSwitch"],["type","text","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","number","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["class","form-select",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","text",1,"form-control",3,"formControlName"],["type","number",1,"form-control",3,"formControlName"],[1,"form-select",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"gt-icon"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.YNc(1,ti,11,8,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngForOf",o.formList))},dependencies:[u.sg,u.O5,u.RF,u.n9,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.sg,p.u,u.Ts],encapsulation:2}),n})();function ni(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th",15),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",16),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"i",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.actionEdit())}),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"i",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.delete())}),e._uU(11,"minus"),e.qZA()()()}if(2&n){const t=i.$implicit,o=i.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("title",t.desc),e.xp6(1),e.Oqu(t.desc)}}let hn=(()=>{class n{get actions(){return Object.values(this.board.events).reduce((t,o)=>t.concat(o),[])}get board(){return this._board}set board(t){this._board=t,this.formList=[{label:"name",value:t.name,type:"text",name:"name"},{label:"Title",value:t.title,type:"text",name:"title"},{label:"type",value:t.type,type:"text",name:"type",disabled:!0},{label:"url",value:t.url,type:"text",name:"url"},{hide:"modal"!==t.type,label:"size",value:t.size||"",type:"select",name:"size",options:[{label:"xl",value:"xl"},{label:"lg",value:"lg"},{label:"md",value:""},{label:"sm",value:"sm"}]},{label:"Footer",name:"modalFooter",type:"switch",value:t.modalFooter}]}onchange({formItem:t}){const{name:o,value:r}=t;this.board[o]=r}actionEdit(){}delete(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-board-edit"]],inputs:{board:"board"},decls:20,vars:2,consts:function(){let i,t,o,r,s;return i="Index",t="Type",o="Description",r="Operation",s="Add",[[3,"formList","formChange"],[1,"overflow-auto"],[1,"table","table-bordered","m-0"],[1,"text-truncate",2,"width","3.8em"],i,[1,"text-truncate",2,"width","4em"],t,[1,"text-truncate"],o,[1,"text-truncate",2,"width","5em"],r,[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],[1,"btn","btn-light",3,"click"],s,["scope","row"],[1,"text-truncate",3,"title"],["title","Edit",1,"gt-icon",2,"cursor","pointer",3,"click"],["title","Remove",1,"gt-icon",2,"cursor","pointer",3,"click"]]},template:function(t,o){1&t&&(e.TgZ(0,"config-form",0),e.NdJ("formChange",function(s){return o.onchange(s)}),e.qZA(),e.TgZ(1,"p"),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th",3),e.SDv(8,4),e.qZA(),e.TgZ(9,"th",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"th",7),e.SDv(12,8),e.qZA(),e.TgZ(13,"th",9),e.SDv(14,10),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,ni,12,4,"tr",11),e.qZA()()(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){return o.actionEdit()}),e.SDv(19,14),e.qZA()()),2&t&&(e.Q6J("formList",o.formList),e.xp6(16),e.Q6J("ngForOf",o.actions))},dependencies:[u.sg,st],encapsulation:2,changeDetection:0}),n})(),_n=(()=>{class n{constructor(t,o,r){this.events=t,this.cdr=o,this.configList=r,this.subscription=D.w0.EMPTY}set gtNode(t){this._gtNode=t,this.formList=this.getFormList()}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}getFormList(){return this.configList.get(this.gtNode.type).get(this.type).map(t=>({...t,value:this.gtNode[this.type][t.name],inherit:this.gtNode.template?!Object.prototype.hasOwnProperty.call(this.gtNode[this.type],t.name):void 0}))}inheritClick({formItem:t,formControl:o}){if(!1===t.inherit){const r=this.gtNode[this.type][t.name];Reflect.deleteProperty(this.gtNode[this.type],t.name),o.reset(this.gtNode[this.type][t.name],{emitEvent:!1}),this.events["CHANGE_"+this.type.toUpperCase()].next({name:t.name,value:void 0,previousValue:r,gtNode:this.gtNode}),t.inherit=!0,this.cdr.markForCheck()}}onchange({formItem:t,formControl:o}){const{name:r,value:s}=t,a=this.gtNode[this.type][r];this.gtNode[this.type][r]=s,this.events["CHANGE_"+this.type.toUpperCase()].next({name:r,value:s,previousValue:a,gtNode:this.gtNode}),this.gtNode.template&&(t.inherit=!1),void 0!==t.inherit&&(t.inherit=!this.gtNode[this.type].hasOwnProperty(r)),o.setValue(t.value,{emitEvent:!1,onlySelf:!0}),this.cdr.markForCheck()}dataBind({formItem:t,formControl:o}){this.events.target.dispatchEvent(new vt(o.value instanceof g.Sl?o.value.data:o.value)),this.subscription.unsubscribe(),this.subscription=(0,R.R)(this.events.target,"editexpressionend").pipe((0,E.q)(1)).subscribe(r=>{this.onchange({formItem:{...t,value:new g.Sl(r.expression)},formControl:o})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(W),e.Y36(e.sBO),e.Y36(bt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-config"]],viewQuery:function(t,o){if(1&t&&e.Gf(st,7),2&t){let r;e.iGM(r=e.CRH())&&(o.formComp=r.first)}},inputs:{type:"type",gtNode:"gtNode"},decls:1,vars:1,consts:[[3,"formList","formChange","dataBindClick","inheritClick"]],template:function(t,o){1&t&&(e.TgZ(0,"config-form",0),e.NdJ("formChange",function(s){return o.onchange(s)})("dataBindClick",function(s){return o.dataBind(s)})("inheritClick",function(s){return o.inheritClick(s)}),e.qZA()),2&t&&e.Q6J("formList",o.formList)},dependencies:[st],encapsulation:2,changeDetection:0}),n})();const oi=["dropdown"];function ii(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Input"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"input"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.input)}}function ri(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Output"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"output"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.output)}}function si(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(9,"i",11),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"ul",13),e.YNc(12,ii,4,1,"li",14),e.YNc(13,ri,4,1,"li",14),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(9),e.Q6J("ngIf",t.form.input),e.xp6(1),e.Q6J("ngIf",t.form.output)}}const ai=[{text:"if"},{text:"for"}];let mn=(()=>{class n{constructor(t,o){this.cdr=t,this.events=o,this.subscription=D.w0.EMPTY,this.directives=[],this.directiveTypes=ai}set gtNode(t){this.directives=t.directive.map(({type:o,value:r})=>this.getDirective(o,r)),this._gtNode=t}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}formChange(t,o,r){t.valid&&(o.value[r]=t.value,this.updateGtNodeValidator())}getDirective(t,o={}){switch(t){case"if":return{title:t,form:{input:[{type:"text",name:"default",value:o.input?.default,expression:!0,validators:p.kI.required}]},value:{}};case"for":return{title:t,form:{input:[{type:"text",name:"default",value:o.input?.default,expression:!0,validators:p.kI.required}],output:[{type:"text",name:"index",value:o.output?.index},{type:"text",name:"item",value:o.output?.item}],export:[]},value:{}};default:throw new Error}}addDirective(t){this.directives.push(this.getDirective(t)),this.updateGtNodeValidator()}removeValidator(t){this.directives.splice(this.directives.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.directive=this.directives.map(t=>({needTemplate:!0,type:t.title,value:t.value}))}editExpression(t){this.events.target.dispatchEvent(new vt(t.control.value instanceof g.Sl?t.control.value.data:"")),this.subscription.unsubscribe(),this.subscription=(0,R.R)(this.events.target,"editexpressionend").pipe((0,E.q)(1)).subscribe(r=>{t.control.setValue(new g.Sl(r.expression)),this.cdr.markForCheck()})}dropped(t){(0,B.bA)(this.directives,t.previousIndex,t.currentIndex),this.updateGtNodeValidator()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-directive"]],viewQuery:function(t,o){if(1&t&&e.Gf(oi,7),2&t){let r;e.iGM(r=e.CRH())&&(o.dropdown=r.first)}},inputs:{gtNode:"gtNode"},decls:6,vars:2,consts:function(){let i;return i="Add",[["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],["dropdownButton",""],i,["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"card-title","text-center"],[3,"formList","formChange","expressionClick"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return o.dropped(s)}),e.YNc(1,si,14,3,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3,4),e.NdJ("itemClick",function(s){return o.addDirective(s.text)}),e.SDv(5,5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.directives),e.xp6(2),e.Q6J("items",o.directiveTypes))},dependencies:[u.sg,u.O5,B.Wj,B.Zt,B.Bh,_,Ot],encapsulation:2}),n})();const ui=["dropdown"];function hi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-panel-card",5),e.NdJ("removeItem",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(1,"config-form",6),e.NdJ("formChange",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.formChange(a,r))}),e.qZA()()}if(2&n){const t=i.$implicit;e.Q6J("item",t),e.xp6(1),e.Q6J("formList",t.formList)}}const _i=[{text:"min"},{text:"max"},{text:"required"},{text:"requiredTrue"},{text:"email"},{text:"minLength"},{text:"maxLength"},{text:"pattern"}];let gn=(()=>{class n{constructor(){this.validators=[],this.validatorTypes=_i}set gtNode(t){this._gtNode=t,this.validators=t.validator.map(({type:o,value:r})=>({title:o,formList:fn(o,r),value:r}))}get gtNode(){return this._gtNode}formChange(t,o){t.value=o.formControl.root.value,this.updateGtNodeValidator()}addValidator(t){const o=fn(t);this.validators.push({title:t,formList:o,value:{}}),this.updateGtNodeValidator()}removeValidator(t){this.validators.splice(this.validators.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.validator=this.validators.map(t=>({type:t.title,value:t.value}))}dropped(t){(0,B.bA)(this.validators,t.previousIndex,t.currentIndex),(0,B.bA)(this.gtNode.validator,t.previousIndex,t.currentIndex)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-validator"]],viewQuery:function(t,o){if(1&t&&e.Gf(ui,7),2&t){let r;e.iGM(r=e.CRH())&&(o.dropdown=r.first)}},inputs:{gtNode:"gtNode"},decls:5,vars:2,consts:function(){let i;return i="Add",[["cdkDropList","",3,"cdkDropListDropped"],[3,"item","removeItem",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],i,[3,"item","removeItem"],[3,"formList","formChange"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return o.dropped(s)}),e.YNc(1,hi,2,2,"gt-panel-card",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("itemClick",function(s){return o.addValidator(s.text)}),e.SDv(4,4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.validators),e.xp6(2),e.Q6J("items",o.validatorTypes))},dependencies:[u.sg,st,B.Wj,_,pn],encapsulation:2}),n})();function fn(n,i={}){switch(n){case"min":return[{type:"number",name:"min",value:i.min},{type:"text",name:"errorText",value:i.errorText}];case"max":return[{type:"number",name:"max",value:i.max},{type:"text",name:"errorText",value:i.errorText}];case"required":case"requiredTrue":case"email":default:return[{type:"text",name:"errorText",value:i.errorText}];case"minLength":return[{type:"number",name:"minLength",value:i.minLength},{type:"text",name:"errorText",value:i.errorText}];case"maxLength":return[{type:"number",name:"maxLength",value:i.maxLength},{type:"text",name:"errorText",value:i.errorText}];case"pattern":return[{type:"text",name:"pattern",value:i.pattern},{type:"text",name:"errorText",value:i.errorText}]}}const mi=["editTemplate"];function gi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",14)(2,"label",15),e.SDv(3,16),e.qZA(),e.TgZ(4,"div",17),e._uU(5),e.qZA()(),e.TgZ(6,"div",14)(7,"label",15),e.SDv(8,18),e.qZA(),e.TgZ(9,"div",17),e._uU(10),e.qZA()(),e.TgZ(11,"div",14)(12,"label",15),e.SDv(13,19),e.qZA(),e.TgZ(14,"div",17),e._uU(15),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editingVariable=r)}),e.SDv(17,20),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.removeVariable(r))}),e.SDv(19,21),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.type),e.xp6(5),e.Oqu(t.value)}}function fi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"gt-panel-form",22,23),e.NdJ("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA(),e.TgZ(3,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2),s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.finishEdit(r.formGroup,s))}),e.SDv(4,24),e.qZA()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("formList",o.formList)("value",t)}}function Ci(n,i){if(1&n&&(e.TgZ(0,"li",12),e.YNc(1,gi,20,3,"div",13),e.YNc(2,fi,5,2,"div",13),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t!==o.editingVariable),e.xp6(1),e.Q6J("ngIf",t===o.editingVariable)}}let Cn=(()=>{class n{constructor(t,o){this.cdr=t,this.events=o,this.subscription=D.w0.EMPTY,this.editingVariable=null,this.formList=[{label:"Variable Name",name:"name",type:"text",validators:p.kI.required},{label:"Data Type",name:"type",type:"select",validators:p.kI.required,options:[{label:"Boolean",value:"Boolean"},{label:"String",value:"String"},{label:"Number",value:"Number"},{label:"Null",value:"Null"}]},{label:"Value",name:"value",type:"text",validators:p.kI.required,expression:!0}]}set gtNode(t){this._gtNode=t,this.variableName=t.variableName,this.variables=t.variable}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}variableNameChange(){this.gtNode.variableName=this.variableName}addVariable(t){if(t.invalid)return void Object.values(t.controls).forEach(r=>r.markAsTouched());const o=this.normalizeVariable(t.value);if(o){if(this.gtNode.variable.find(({name:r})=>r===o.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});this.gtNode.variable.push(o),t.reset()}}normalizeVariable(t){switch(t.value instanceof g.Sl&&(t.type="DataBinding"),t.type){case"Boolean":t.value=!!t.value;break;case"String":t.value=String(t.value);break;case"Number":t.value=Number(t.value);break;case"Null":t.value=null;break;case"DataBinding":break;default:return null}return{...t}}removeVariable(t){this.gtNode.variable.splice(this.gtNode.variable.indexOf(t),1)}finishEdit(t,o){if(t.invalid)return void Object.values(t.controls).forEach(s=>s.markAsTouched());const r=this.normalizeVariable(t.value);if(r){if(this.gtNode.variable.find(a=>a!==o&&a.name===r.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});const s=this.gtNode.variable.indexOf(o);this.gtNode.variable.splice(s,1,r),this.editingVariable=null}}editExpression(t){this.events.target.dispatchEvent(new vt(t.control.value instanceof g.Sl?t.control.value.data:"")),this.subscription.unsubscribe(),this.subscription=(0,R.R)(this.events.target,"editexpressionend").pipe((0,E.q)(1)).subscribe(r=>{t.control.setValue(new g.Sl(r.expression)),this.cdr.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-panel-variable"]],viewQuery:function(t,o){if(1&t&&e.Gf(mi,7),2&t){let r;e.iGM(r=e.CRH())&&(o.editTemplate=r.first)}},inputs:{gtNode:"gtNode"},decls:12,vars:3,consts:function(){let i,t,o,r,s,a,l,c;return i="Component Variable Name",t="Add",o="Variable Name",r="Data Type",s="Value",a="Edit",l="Remove",c="Finish",[[1,"card"],[1,"card-header"],[1,"card-title"],i,["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","bg-secondary-subtle"],[3,"formList","expressionClick"],["form",""],["type","button",1,"btn","btn-link",3,"click"],t,[1,"list-group-item"],[4,"ngIf"],[1,"mb-3"],[1,"form-label"],o,[1,"form-control"],r,s,a,l,[3,"formList","value","expressionClick"],["editForm",""],c]},template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(a){return o.variableName=a})("ngModelChange",function(){return o.variableNameChange()}),e.qZA()(),e.TgZ(5,"ul",5),e.YNc(6,Ci,3,2,"li",6),e.TgZ(7,"li",7)(8,"gt-panel-form",8,9),e.NdJ("expressionClick",function(a){return o.editExpression(a)}),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(9);return e.KtG(o.addVariable(a.formGroup))}),e.SDv(11,11),e.qZA()()()()}2&t&&(e.xp6(4),e.Q6J("ngModel",o.variableName),e.xp6(2),e.Q6J("ngForOf",o.variables),e.xp6(2),e.Q6J("formList",o.formList))},dependencies:[u.sg,u.O5,p.Fj,p.JJ,p.On,Ot],encapsulation:2}),n})(),bi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,p.u5,No,B._t,Xe,p.UX,$.eL]}),n})();function vi(n,i){}let Ti=(()=>{class n{constructor(t,o){this.gt=t,this.cdr=o,this.windowClose=new e.vpe,this.dragEnded=new e.vpe}updateTransform(t){this.transform=t,this.cdr.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-float-bar"]],hostAttrs:[2,"width","0","height","0"],inputs:{icon:"icon",componentPortal:"componentPortal"},outputs:{windowClose:"windowClose",dragEnded:"dragEnded"},decls:11,vars:8,consts:[["cdkDrag","","cdkDragBoundary","html","gtResize","",1,"card",2,"width","260px","height","600px",3,"resizes","minWidth","minHeight","transform","updateTransform","cdkDragEnded"],["cdkDragHandle","",1,"card-header","bg-body",2,"cursor","move"],[1,"nav","nav-pills","card-header-pills"],[1,"nav-item"],[1,"nav-link","active"],[1,"gt-icon"],[1,"nav-item","ms-auto","mt-1"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"card-body","p-0","overflow-scroll"],[3,"cdkPortalOutlet"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("updateTransform",function(s){return o.updateTransform(s)})("cdkDragEnded",function(s){return o.dragEnded.emit(s)}),e.TgZ(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4)(5,"i",5),e._uU(6),e.qZA()()(),e.TgZ(7,"li",6)(8,"button",7),e.NdJ("click",function(){return o.windowClose.emit()}),e.qZA()()()(),e.TgZ(9,"div",8),e.YNc(10,vi,0,0,"ng-template",9),e.qZA()()),2&t&&(e.Udp("transform",o.transform),e.Q6J("resizes","all")("minWidth",180)("minHeight",300)("transform",!0),e.xp6(6),e.Oqu(o.icon),e.xp6(4),e.Q6J("cdkPortalOutlet",o.componentPortal))},dependencies:[B.Zt,B.Bh,$.Pl,Nt],encapsulation:2}),n})();var yi=b(9841);const xi=["*"];let kt=(()=>{class n{constructor(){this.multi=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion"]],inputs:{multi:"multi"},ngContentSelectors:xi,decls:2,vars:1,consts:[["cdkAccordion","",1,"accordion","accordion-flush","border-bottom",3,"multi"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&t&&e.Q6J("multi",o.multi)},dependencies:[we.xI],encapsulation:2}),n})();function Ei(n,i){1&n&&(e.TgZ(0,"div",2),e.SDv(1,3),e.qZA())}function Ni(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",13),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("variable"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("variable"))}),e._UZ(1,"gt-panel-variable",14),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.variable),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Si(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",15),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("property"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("property"))}),e._UZ(1,"gt-panel-config",16),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.property),e.xp6(1),e.Q6J("type","property")("gtNode",t.gtNode)}}function wi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",17),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("style"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("style"))}),e._UZ(1,"gt-panel-config",16),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.style),e.xp6(1),e.Q6J("type","style")("gtNode",t.gtNode)}}function Mi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",18),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("class"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("class"))}),e._UZ(1,"gt-panel-class",14),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.class),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Oi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",19),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("rights"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("rights"))}),e._UZ(1,"gt-panel-config",16),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.rights),e.xp6(1),e.Q6J("type","rights")("gtNode",t.gtNode)}}function ki(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",20),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("directive"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("directive"))}),e._UZ(1,"gt-panel-directive",14),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.directive),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Ai(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",21),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("validator"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("validator"))}),e._UZ(1,"gt-panel-validator",14),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.validator),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Ii(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",22),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("action"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("action"))}),e._UZ(1,"gt-panel-action",14),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.action),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Di(n,i){if(1&n&&(e.TgZ(0,"gt-accordion",4),e.YNc(1,Ni,2,2,"gt-accordion-item",5),e.YNc(2,Si,2,3,"gt-accordion-item",6),e.YNc(3,wi,2,3,"gt-accordion-item",7),e.YNc(4,Mi,2,2,"gt-accordion-item",8),e.YNc(5,Oi,2,3,"gt-accordion-item",9),e.YNc(6,ki,2,2,"gt-accordion-item",10),e.YNc(7,Ai,2,2,"gt-accordion-item",11),e.YNc(8,Ii,2,2,"gt-accordion-item",12),e.qZA()),2&n){const t=e.oxw();e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngIf",t.gtNode.variable),e.xp6(1),e.Q6J("ngIf",t.gtNode.property),e.xp6(1),e.Q6J("ngIf",t.gtNode.style),e.xp6(1),e.Q6J("ngIf",t.gtNode.style),e.xp6(1),e.Q6J("ngIf",t.gtNode.rights),e.xp6(1),e.Q6J("ngIf",t.gtNode.directive),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator)}}let bn=(()=>{class n{constructor(t,o,r){this.gt=t,this.subscription=D.w0.EMPTY,this.subscription=(0,yi.a)([(0,G.T)((0,xe.of)(t.selected),r.CHANGE_SELECT),(0,G.T)((0,xe.of)(null),r.REDO,r.UNDO,r.PASTE_STYLE)]).pipe((0,X.b)(10)).subscribe(([s])=>{this.gtNode=1===s.length?s[0]:null,o.detectChanges()})}ngOnDestroy(){this.subscription.unsubscribe()}opened(t){this.gt.settings.changeConfigAccordionExpanded(t,!0)}closed(t){this.gt.settings.changeConfigAccordionExpanded(t,!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(e.sBO),e.Y36(W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion-config"]],viewQuery:function(t,o){if(1&t&&e.Gf(me,5),2&t){let r;e.iGM(r=e.CRH())&&(o.accordionList=r)}},decls:2,vars:2,consts:function(){let i,t,o,r,s,a,l,c,d;return i="Please Select a Component",t="Variable",o="Property",r="Style",s="Class",a="Authorization",l="Directive",c="Validator",d="Action",[["class","bg-secondary-subtle p-2 text-center border-bottom",4,"ngIf"],[3,"multi",4,"ngIf"],[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],i,[3,"multi"],["cardTitle",t,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",o,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",r,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",s,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",a,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",l,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",c,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",d,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",t,3,"expanded","opened","closed"],[3,"gtNode"],["cardTitle",o,3,"expanded","opened","closed"],[3,"type","gtNode"],["cardTitle",r,3,"expanded","opened","closed"],["cardTitle",s,3,"expanded","opened","closed"],["cardTitle",a,3,"expanded","opened","closed"],["cardTitle",l,3,"expanded","opened","closed"],["cardTitle",c,3,"expanded","opened","closed"],["cardTitle",d,3,"expanded","opened","closed"]]},template:function(t,o){1&t&&(e.YNc(0,Ei,2,0,"div",0),e.YNc(1,Di,9,9,"gt-accordion",1)),2&t&&(e.Q6J("ngIf",!o.gtNode),e.xp6(1),e.Q6J("ngIf",o.gtNode))},dependencies:[u.O5,_n,gn,mn,Cn,dn,un,kt,me],encapsulation:2,changeDetection:0}),n})();var Ri=b(5577);function Pi(n,i){if(1&n&&(e.TgZ(0,"i",9),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.icon||"custom")}}function Bi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",5,6),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))}),e.YNc(2,Pi,2,1,"i",7),e.TgZ(3,"div",8),e._uU(4),e.qZA()()}if(2&n){const t=i.$implicit;e.Q6J("title",t.label),e.uIk("data-type",t.type),e.xp6(2),e.Q6J("ngIf",t.icon),e.xp6(2),e.Oqu(t.label)}}function Zi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",2),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.opened(s))})("closed",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.closed(s))}),e.TgZ(1,"div",3),e.YNc(2,Bi,5,4,"button",4),e.qZA()()}if(2&n){const t=i.$implicit;e.Q6J("cardTitle",t.title)("expanded",t.expanded),e.xp6(2),e.Q6J("ngForOf",t.elements)}}function Li(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",17),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.type=r)})("blur",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.editTypeMode=!1)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.type)}}function Fi(n,i){if(1&n&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name||t.type," ")}}function Gi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",14,6),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("dblclick",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editCustom(s))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.editCustomInfo(a,r))}),e.TgZ(2,"i",9),e._uU(3,"custom"),e.qZA(),e.YNc(4,Li,1,1,"input",15),e.YNc(5,Fi,2,1,"div",16),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(2);e.ekj("active",o.gt.currentBoard===t),e.Q6J("title",t.name||t.type),e.uIk("data-id",t.id),e.xp6(4),e.Q6J("ngIf",o.editTypeMode),e.xp6(1),e.Q6J("ngIf",!o.editTypeMode)}}function Ji(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",2),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.opened(s))})("closed",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.closed(s))}),e.TgZ(1,"div",3),e.YNc(2,Gi,6,6,"button",10),e.qZA(),e.TgZ(3,"div",11)(4,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addCustom(s.type))}),e.SDv(5,13),e.qZA()()()}if(2&n){const t=i.$implicit;e.Q6J("cardTitle",t.title)("expanded",t.expanded),e.xp6(2),e.Q6J("ngForOf",t.elements),e.xp6(1),e.ekj("mt-2",t.elements.length)}}let vn=(()=>{class n{constructor(t,o,r,s,a,l,c,d,h){this.gt=t,this.cdr=o,this.events=r,this.translateAnimation=s,this.contextmenu=a,this._document=l,this.templateMap=c,this.gtAuth=d,this.internalElementLists=h,this.editMode=!1,this.editTypeMode=!1,this.customList=[{title:"Custom Component",type:"cc",elements:this.gt.customComponent,expanded:this.gt.settings.elementAccordionExpanded["Custom Component"]},{title:"Custom Component(Remote)",type:"rcc",elements:this.gt.remoteCustomComponent,expanded:this.gt.settings.elementAccordionExpanded["Custom Component(Remote)"]}],this.internalElementLists.forEach(m=>{m.expanded=this.gt.settings.elementAccordionExpanded[m.title]}),this.templateMap=c.reduce((m,f)=>({...m,...f}),{}),this.events.CHANGE_BOARD.subscribe(()=>{this.cdr.detectChanges()})}itemDrag(t,o,r){if((!this.gt.currentBoard||"cc"===this.gt.currentBoard.type||"rcc"===this.gt.currentBoard.type)&&t instanceof g.$l)return void this.gt.log.next({type:"warning",message:"\u76ee\u524d\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u65e0\u6cd5\u5d4c\u5957\u4f7f\u7528"});if(!pe(r)&&0!==r.button)return;r.stopPropagation(),r.preventDefault();let s=null,a=null,l=null;Ee(this._document.documentElement,"userSelect","none"),((n,i)=>Le(n,i).pipe(Qt(t=>{const{x:o,y:r}=tt(i,t);return Math.abs(o)+Math.abs(r)<30}),(0,E.q)(1),(0,V.R)(Fe(n,i).pipe((0,v.b)(()=>de(n.documentElement,"userSelect"))))))(this._document,r).pipe((0,y.U)(()=>{this.cdr.detach();const c=this._document.createElement("div");l=o;const d=t.type;let h;h="cc"===d||"rcc"===d?'<div style="width: 10rem;height: 10rem;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u81ea\u5b9a\u4e49\u7ec4\u4ef6</div>':this.templateMap[d]?this.templateMap[d]:'<div style="width: 10rem;height: 10rem;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u672a\u77e5\u7ec4\u4ef6</div>',c.style.setProperty("max-width","10rem"),c.innerHTML=h;const m=c.cloneNode(!0),f=c.children[0].cloneNode(!0),x=c.children[0].cloneNode(!0);m.classList.add("draggable-mirror"),f.classList.add("draggable-placeholder"),x.classList.add("draggable-source");const{x:Q,y:H}=yt(r);return m.style.transform=`translate(${Q}px,${H}px)`,m.classList.add("draggable-mirror"),m.style.left="0",m.style.top="0",this._document.body.appendChild(m),this._document.body.appendChild(f),{mirror:m,placeholder:f,source:x,event:r}})).pipe((0,Ri.z)(({event:c,mirror:d,placeholder:h,source:m})=>Le(this._document,c).pipe((0,v.b)(f=>{const{x,y:Q}=yt(f);d.style.transform=`translate(${x}px,${Q}px)`}),(0,y.U)(f=>Wt(f,m,this._document)),(0,ae.h)(f=>!!f),(0,ae.h)(({parentElement:f})=>!f.dataset.accept||f.dataset.accept.split(",").includes(l.dataset.type)),(0,y.U)(({refChild:f,parentElement:x})=>(a=f,s=x,{refChild:f,parentElement:x})),Me((f,x)=>f.parentElement===x.parentElement&&f.refChild===x.refChild),(0,v.b)(({parentElement:f,refChild:x})=>{const Q=Array.prototype.filter.call(f.children,L=>L!==m).map(L=>L.getBoundingClientRect());f.insertBefore(m,x);const H=Array.prototype.filter.call(f.children,L=>L!==m).map(L=>L.getBoundingClientRect());Array.prototype.filter.call(f.children,L=>L!==m).forEach((L,F)=>{this.translateAnimation.add({element:L,from:{left:Q[F].left-H[F].left,top:Q[F].top-H[F].top}})});const Z=m.getBoundingClientRect();h.style.width=Z.width+"px",h.style.height=Z.height+"px",this.translateAnimation.add({element:h,to:{left:Z.left,top:Z.top}})}),(0,V.R)(Fe(this._document,c).pipe((0,v.b)(()=>{if(de(this._document.documentElement,"userSelect"),Ge(h),Ge(m),Ge(d),this.cdr.reattach(),!s)return;const f=en(s).dataset.id,x=this.gt.getNodeById(f),Q=a&&this.gt.getNodeById(a.dataset.id),H=Q?Q.parent.children.indexOf(Q):x.children.length;t instanceof g.$l?this.gt.addCustomNode(l.dataset.id,x,H):this.gt.addNode(t.type,x,H,t.content,s.dataset.droppable),s=null,a=null})))))).subscribe()}addCustom(t){switch(t){case"cc":this.gt.addCustomComponent();break;case"rcc":this.gt.addRemoteCustomComponent()}}editCustom(t){this.gt.setCurrentBoard(t),this.editMode=!0}editCustomInfo(t,o){o.stopPropagation(),o.preventDefault();const r=[{label:"Modify",onclick:()=>{this.editType()}},{label:"Remove",onclick:()=>{this.gt.removeBoard(t),this.cdr.detectChanges(),"rcc"===t.type&&this.events.REMOVE_COMPONENT.emit({id:t.id})}}];"rcc"===t.type&&r.unshift({label:"Upload",onclick:()=>{this.events.SAVE_COMPONENT.emit({config:JSON.stringify(t.export()),id:t.id})}}),this.contextmenu.create(o,r)}editType(){this.editTypeMode=!this.editTypeMode,this.cdr.detectChanges()}opened(t){t.expanded=!0,this.gt.settings.changeElementAccordionExpanded(t.title,!0)}closed(t){t.expanded=!1,this.gt.settings.changeElementAccordionExpanded(t.title,!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(e.sBO),e.Y36(W),e.Y36(nt),e.Y36(Oe),e.Y36(u.K0),e.Y36(z),e.Y36(K),e.Y36(et))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion-element"]],features:[e._Bn([nt])],decls:3,vars:3,consts:function(){let i;return i="Add",[[3,"multi"],[3,"cardTitle","expanded","opened","closed",4,"ngFor","ngForOf"],[3,"cardTitle","expanded","opened","closed"],[1,"d-grid",2,"grid","auto / 1fr 1fr 1fr","grid-gap",".5rem"],["type","button","class","text-center btn btn-text overflow-hidden",3,"title","mousedown","touchstart",4,"ngFor","ngForOf"],["type","button",1,"text-center","btn","btn-text","overflow-hidden",3,"title","mousedown","touchstart"],["target",""],["class","fs-1 gt-icon",4,"ngIf"],[1,"text-truncate"],[1,"fs-1","gt-icon"],["type","button","class","text-center btn btn-text overflow-hidden",3,"active","title","mousedown","touchstart","dblclick","contextmenu",4,"ngFor","ngForOf"],[1,"d-grid","gap-2"],[1,"btn","btn-light",3,"click"],i,["type","button",1,"text-center","btn","btn-text","overflow-hidden",3,"title","mousedown","touchstart","dblclick","contextmenu"],["type","text","class","form-control input-xs",3,"ngModel","ngModelChange","blur",4,"ngIf"],["class","text-truncate",4,"ngIf"],["type","text",1,"form-control","input-xs",3,"ngModel","ngModelChange","blur"]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,Zi,3,3,"gt-accordion-item",1),e.YNc(2,Ji,6,5,"gt-accordion-item",1),e.qZA()),2&t&&(e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngForOf",o.internalElementLists),e.xp6(1),e.Q6J("ngForOf",o.customList))},dependencies:[p.Fj,p.JJ,p.On,u.sg,u.O5,kt,me],encapsulation:2,changeDetection:0}),n})();function Hi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"i",9),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw().remove(s,r),e.KtG(r.stopPropagation())}),e._uU(1,"trash"),e.qZA()}}function Yi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"gt-accordion-item",6),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.switchBoard(r))}),e.YNc(1,Hi,2,0,"i",7),e._UZ(2,"gt-board-edit",8),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("cardTitle",t.name||"Main"),e.xp6(1),e.Q6J("ngIf","main"!==t.type),e.xp6(1),e.Q6J("board",t)}}function $i(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Yi,3,3,"gt-accordion-item",5),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","cc"!==t.type&&"rcc"!==t.type)}}let Tn=(()=>{class n{constructor(t){this.gt=t}remove(t,o){o.stopPropagation(),this.gt.removeBoard(t)}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion-page"]],decls:5,vars:2,consts:function(){let i;return i="Add",[[3,"multi"],[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","p-3"],[1,"btn","btn-light",3,"click"],i,[3,"cardTitle","opened",4,"ngIf"],[3,"cardTitle","opened"],["class","gt-icon me-2 accordion-header-buttons","style","cursor:pointer;",3,"click",4,"ngIf"],[3,"board"],[1,"gt-icon","me-2","accordion-header-buttons",2,"cursor","pointer",3,"click"]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,$i,2,1,"ng-container",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.gt.addBoard()}),e.SDv(4,4),e.qZA()()),2&t&&(e.Q6J("multi",!1),e.xp6(1),e.Q6J("ngForOf",o.gt.boards))},dependencies:[u.sg,u.O5,hn,kt,me],encapsulation:2,changeDetection:0}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */class Ui{constructor(i,t,o,r){this.transformFunction=i,this.getLevel=t,this.isExpandable=o,this.getChildren=r}_flattenNode(i,t,o,r){const s=this.transformFunction(i,t);if(o.push(s),this.isExpandable(s)){const a=this.getChildren(i);a&&(Array.isArray(a)?this._flattenChildren(a,t,o,r):a.pipe((0,E.q)(1)).subscribe(l=>{this._flattenChildren(l,t,o,r)}))}return o}_flattenChildren(i,t,o,r){i.forEach((s,a)=>{let l=r.slice();l.push(a!==i.length-1),this._flattenNode(s,t+1,o,l)})}flattenNodes(i){let t=[];return i.forEach(o=>this._flattenNode(o,0,t,[])),t}expandFlattenedNodes(i,t){let o=[],r=[];return r[0]=!0,i.forEach(s=>{let a=!0;for(let l=0;l<=this.getLevel(s);l++)a=a&&r[l];a&&o.push(s),this.isExpandable(s)&&(r[this.getLevel(s)+1]=t.isExpanded(s))}),o}}class qi extends at.o2{constructor(i,t,o){super(),this._treeControl=i,this._treeFlattener=t,this._flattenedData=new lt.X([]),this._expandedData=new lt.X([]),this._data=new lt.X([]),o&&(this.data=o)}get data(){return this._data.value}set data(i){this._data.next(i),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(i){return(0,G.T)(i.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,y.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Vi(n,i){if(1&n&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("(Outlet ID: ",t.source.outletID,")")}}function Qi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cdk-tree-node",6)(1,"div",7),e._UZ(2,"div",8),e.TgZ(3,"button",9),e.NdJ("click",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectTreeNode(a.source,r))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(4),e.YNc(5,Vi,2,1,"small",10),e.qZA()()()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("cdkDragDisabled",t.source.template&&!t.source.isTemplateRoot)("cdkDragData",t.source),e.xp6(3),e.ekj("active",o.gt.selected.includes(t.source)),e.xp6(1),e.hij(" ",t.type," "),e.xp6(1),e.Q6J("ngIf",t.source.outletID)}}function zi(n,i){if(1&n&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("(Outlet ID: ",t.source.outletID,")")}}function ji(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cdk-tree-node",11)(1,"div",7)(2,"button",12)(3,"i",13),e._uU(4,"chevron_right"),e.qZA()(),e.TgZ(5,"button",9),e.NdJ("click",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectTreeNode(a.source,r))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(6),e.YNc(7,zi,2,1,"small",10),e.qZA()()()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("cdkDragData",t.source),e.xp6(2),e.Udp("transform",o.treeControl.isExpanded(t)?"rotate(90deg)":""),e.uIk("aria-label","Toggle "+t.type),e.xp6(3),e.ekj("active",o.gt.selected.includes(t.source)),e.xp6(1),e.AsE(" ",t.type," ( ",t.source.children.length," ) "),e.xp6(1),e.Q6J("ngIf",t.source.outletID)}}let yn=(()=>{class n{constructor(t,o,r,s,a){this.gt=t,this.events=o,this.cdr=r,this.contextmenu=s,this.gtContextMenu=a,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this._transformer=(l,c)=>{const d=this.nestedNodeMap.get(l),h=d&&d.source===l&&d.expandable===(!!l.children&&l.children.length>0)&&d.level===c?d:{expandable:!!l.children&&l.children.length>0,type:l.type,level:c,source:l};return h.source=l,h.level=c,h.expandable=!!l.children&&l.children.length>0,this.flatNodeMap.set(h,l),this.nestedNodeMap.set(l,h),h},this.treeControl=new Bo(l=>l.level,l=>l.expandable),this.treeFlattener=new Ui(this._transformer,l=>l.level,l=>l.expandable,l=>l.children),this.dataSource=new qi(this.treeControl,this.treeFlattener),this.hasChild=(l,c)=>c.expandable,this.subscription1=D.w0.EMPTY,this.subscription2=D.w0.EMPTY}ngOnInit(){this.subscription1=(0,G.T)((0,xe.of)(null),this.events.onEvent.pipe((0,ae.h)(({type:t})=>["INSERT_NODE","REMOVE_NODE","MOVE_NODE","CHANGE_SELECT","UNDO","REDO","CHANGE_BOARD"].indexOf(t)>-1))).subscribe(()=>{this.dataSource.data=[this.gt.currentBoard.gt],this.cdr.detectChanges()}),this.subscription2=this.events.CHANGE_SELECT.subscribe(t=>{t.forEach(o=>{o.path.forEach(r=>{const s=this.nestedNodeMap.get(r);this.treeControl.expand(s)})})})}ngOnDestroy(){this.subscription1.unsubscribe(),this.subscription2.unsubscribe()}onContextmenu(t,o){if(o.preventDefault(),this.gt.selected.includes(t)||this.gt.changeSelect(t),this.gtContextMenu){const r=this.gtContextMenu(this.gt,t);this.contextmenu.create(o,r)}}selectTreeNode(t,o){const r=this.gt.getNodeById(t.id);r&&this.gt.changeSelect(r,o.metaKey||o.ctrlKey)}onEvent(t){const o=this.gt.getNodeById(t.node.id);this.gt.selected.includes(o)||this.gt.changeSelect(o)}cdkDropListSortPredicate(t,o,r){const s=o.data,a=r.getSortedItems()[t].data;return!!a.parent&&!a.path.includes(s)}cdkDropListDropped({currentIndex:t,container:o,item:r}){const s=o.getSortedItems()[t];this.gt.moveNode(r.data,s.data.parent,s.data.parent.children.indexOf(s.data))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(W),e.Y36(e.sBO),e.Y36(Oe),e.Y36(O,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion-elTree"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ne,5),e.Gf(an,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.tree=r.first),e.iGM(r=e.CRH())&&(o.treeNodes=r)}},decls:6,vars:5,consts:function(){let i;return i="There are " + "\ufffd0\ufffd" + " Nodes Totally.",[[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],i,[1,"p-3"],["cdkDropList","",1,"py-2",3,"dataSource","treeControl","cdkDropListSortPredicate","cdkDropListDropped"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragDisabled","cdkDragData",4,"cdkTreeNodeDef"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragData",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragDisabled","cdkDragData"],[1,"d-flex","align-items-center","px-1"],[2,"width","2rem"],["type","button",1,"btn","btn-text","btn-sm","text-nowrap",3,"click","contextmenu"],[4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragData"],["type","button","cdkTreeNodeToggle","",1,"btn","btn-expander","btn-sm"],[1,"gt-icon"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"div",2)(3,"cdk-tree",3),e.NdJ("cdkDropListDropped",function(s){return o.cdkDropListDropped(s)}),e.YNc(4,Qi,6,6,"cdk-tree-node",4),e.YNc(5,ji,8,9,"cdk-tree-node",5),e.qZA()()),2&t&&(e.xp6(1),e.pQV(o.gt.currentBoard.nodeList.size),e.QtT(1),e.xp6(2),e.Q6J("dataSource",o.dataSource)("treeControl",o.treeControl)("cdkDropListSortPredicate",o.cdkDropListSortPredicate),e.xp6(2),e.Q6J("cdkTreeNodeDefWhen",o.hasChild))},dependencies:[u.O5,B.Wj,B.Zt,Mt,ln,cn,Ne,ge],encapsulation:2,changeDetection:0}),n})(),At=(()=>{class n{constructor(t,o){this.overlay=t,this.gt=o,this.tabs=[{type:"element",icon:"add",component:vn,position:"right",active:!0},{type:"config",icon:"edit",component:bn,position:"right"},{type:"tree",icon:"file",component:yn,position:"right"},{type:"page",icon:"pages",component:Tn,position:"right"}]}initSettings(){this.gt.settings.sidebarPosition&&this.tabs.forEach(t=>{t.active=this.gt.settings.sidebarPosition[t.type].active})}activeTab(t){this.tabs.find(o=>{o.position===t.position&&(o.active=!1)}),t.active=!0,this.updateSettings()}updateSettings(){this.gt.settings.sidebarPosition=this.tabs.reduce((t,{type:o,position:r,active:s})=>(t[o]={type:o,position:r,active:s},t),{})}createWindow(t,o,r){const s=t.position;if("right"===t.position&&o<=10){if(t.position="left",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}return this.tabs.forEach(c=>{"left"===c.position&&(c.active=!1)}),t.active=!0,void this.updateSettings()}if("left"===t.position&&o>=window.innerWidth-10){if(t.position="right",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}return this.tabs.forEach(c=>{"right"===c.position&&(c.active=!1)}),t.active=!0,void this.updateSettings()}if(t.position="float",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}const a=this.overlay.create({disposeOnNavigation:!0,positionStrategy:this.overlay.position().global().top((0,ne.HM)(r)).left((0,ne.HM)(o))}),l=a.attach(new $.C5(Ti));l.instance.componentPortal=new $.C5(t.component),l.instance.icon=t.icon,l.instance.dragEnded.pipe((0,V.R)(l.instance.windowClose.pipe((0,v.b)(()=>{"float"===t.position&&(t.position=s,delete t.rect),this.tabs.forEach(c=>{c.position===t.position&&(c.active=!1)}),t.active=!0,a.dispose(),this.updateSettings()})))).subscribe(c=>{const d=c.source.getRootElement().getBoundingClientRect();d.x<=10&&(t.position="left",l.instance.windowClose.emit()),d.x>=window.innerWidth-d.width-10&&(t.position="right",l.instance.windowClose.emit())})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(j.aV),e.LFG(q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Xi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[At],imports:[p.u5,u.ez,j.U8,bi,ht,B._t,Jo,$.eL,Et]}),n})(),I=(()=>{class n{constructor(t,o){this.gtNode=t,this.gt=o,this.gtClass=!0,this.subscriptions=[],this.property=this.gtNode.property}get gtSlot(){return"slot"===this.gtNode.type}get isHidden(){return!this.gtNode.property.show||this.property.disabled}get id(){return this.gtNode.id}get type(){return this.gtNode.type}get root(){return this.gtNode.parent?null:""}get draggable(){return"root"===this.gtNode.type||this.gtNode.template&&!this.gtNode.isTemplateRoot?null:""}get canHasChild(){return this.gtNode.core.canHasChild}get droppable(){return this.gtNode.template&&"slot"!==this.gtNode.type||!this.gtNode.core.canHasChild?null:""}get width(){return this.gtNode.style.width}get height(){return this.gtNode.style.height}get margin(){return this.gtNode.style.margin}get padding(){return this.gtNode.style.padding}get display(){return this.gtNode.style.display}get position(){return this.gtNode.style.position}get float(){return this.gtNode.style.float}get overflow(){return this.gtNode.style.overflow}get flexDirection(){return this.gtNode.style.flexDirection}get flexGrow(){return this.gtNode.style.flexGrow}get flexShrink(){return this.gtNode.style.flexShrink}get flexWrap(){return this.gtNode.style.flexWrap}get justifyContent(){return this.gtNode.style.justifyContent}get alignItems(){return this.gtNode.style.alignItems}get alignContent(){return this.gtNode.style.alignContent}get background(){return this.gtNode.style.background}get color(){return this.gtNode.style.color}get textAlign(){return this.gtNode.style.textAlign}get left(){return this.gtNode.style.left}get top(){return this.gtNode.style.top}get right(){return this.gtNode.style.right}get bottom(){return this.gtNode.style.bottom}get zIndex(){return this.gtNode.style.zIndex}get border(){if(this.gtNode.style.border&&this.gtNode.style.border.all)return this.gtNode.style.border.all}get borderLeft(){if(this.gtNode.style.border&&this.gtNode.style.border.left)return this.gtNode.style.border.left}get borderRight(){if(this.gtNode.style.border&&this.gtNode.style.border.right)return this.gtNode.style.border.right}get borderTop(){if(this.gtNode.style.border&&this.gtNode.style.border.top)return this.gtNode.style.border.top}get borderBottom(){if(this.gtNode.style.border&&this.gtNode.style.border.bottom)return this.gtNode.style.border.bottom}get fontWeight(){return this.gtNode.style.fontWeight}get fontSize(){return this.gtNode.style.fontSize}ngOnInit(){this.gtNode.core.dynamicTemplate||this.refresh()}ngAfterViewInit(){this.gtNode.core.dynamicTemplate&&this.refresh()}ngOnDestroy(){this.gtNode.componentRef=null,this.subscriptions.forEach(t=>t.unsubscribe())}refresh(){if(this.gtNode.core.canHasChild)if(this.gtNode.core.dynamicTemplate){const t=new Map;this.templates.forEach(o=>{o.clear(),t.set(o.templateID,o)}),this.gtNode.children.forEach(o=>{const r=t.get(o.outletID);r&&r.insert(o)})}else this.template.clear(),this.gtNode.children.forEach(t=>{this.template.insert(t)})}insert(t,o){if(this.gtNode.core.dynamicTemplate){const r=this.templates.find(s=>s.templateID===t.outletID);if(r){let s=0;for(let a=0;a<o;a++)this.gtNode.children[a].outletID===r.templateID&&s++;return r.insert(t,s)}throw new Error}return this.template.insert(t,o)}remove(t){if("number"==typeof t||void 0===t){if(!this.gtNode.core.dynamicTemplate)return this.template.remove(t);{const o=this.templates.find(r=>r.templateID===this.gtNode.children[t].outletID);if(o)return o.remove(t);console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}}else{if(!this.gtNode.core.dynamicTemplate)return this.template.remove(t.parent.children.indexOf(t));{const o=this.templates.find(r=>r.templateID===t.outletID);if(o)return o.remove(t.parent.children.filter(r=>r.outletID===t.outletID).indexOf(t));console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}}}move(t,o){if(this.gtNode.core.dynamicTemplate){const r=this.templates.find(s=>s.templateID===t.outletID);r?r.move(t,t.parent.children.filter(s=>s.outletID===t.outletID).indexOf(t)):console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}else this.template.move(t,o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.Fo),e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&(e.Gf(te,7),e.Gf(te,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.template=r.first),e.iGM(r=e.CRH())&&(o.templates=r)}},hostVars:72,hostBindings:function(t,o){2&t&&(e.uIk("data-id",o.id)("data-type",o.type)("data-root",o.root)("data-draggable",o.draggable)("data-can-has-child",o.canHasChild)("data-droppable",o.droppable),e.Udp("width",o.width)("height",o.height)("margin",o.margin)("padding",o.padding)("display",o.display)("position",o.position)("float",o.float)("overflow",o.overflow)("flex-direction",o.flexDirection)("flex-grow",o.flexGrow)("flex-shrink",o.flexShrink)("flex-wrap",o.flexWrap)("justify-content",o.justifyContent)("align-items",o.alignItems)("align-content",o.alignContent)("background",o.background)("color",o.color)("text-align",o.textAlign)("left",o.left)("top",o.top)("right",o.right)("bottom",o.bottom)("z-index",o.zIndex)("border",o.border)("border-left",o.borderLeft)("border-right",o.borderRight)("border-top",o.borderTop)("border-bottom",o.borderBottom)("font-weight",o.fontWeight)("font-size",o.fontSize),e.ekj("gt-node",o.gtClass)("gt-slot",o.gtSlot)("opacity-25",o.isHidden))},decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})();const Ki=["gt-division",""];function Wi(n,i){}let Je=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["div","gt-division",""]],features:[e.qOj],attrs:Ki,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,o){1&t&&e.YNc(0,Wi,0,0,"ng-template",0)},dependencies:[te],encapsulation:2}),n})();const er=[q,W,{provide:gt,useValue:{title:"GHOSTEN",src:"assets/icons/128.png",alt:"Ghosten Logo",click(){}}},{provide:ft,useValue:()=>"light"},{provide:S,useValue:{exitUrl:"/test"}},{provide:K,useValue:{customComponent:!0,modal:!0,preview:!0,editProperty:!0,editVariable:!0,editStyle:!0,editRight:!0,editAction:!0,editDatasource:!0,editValidator:!0,editDirective:!0}},{provide:P,useValue:{},multi:!0},{provide:ce,useValue:{},multi:!0},{provide:re,useValue:{},multi:!0},{provide:z,useValue:{division:'<div class="gt-node" style="border: .15rem dashed"></div>',slot:'<div class="gt-node" style="border: .15rem dashed"></div>'},multi:!0},{provide:k,useFactory:n=>[{title:"Undo",icon:"rotate_ccw",get disabled(){return!n.history.get().length},onclick:()=>{n.undo()}},{title:"Redo",icon:"rotate_cw",get disabled(){return!n.undoHistory.get().length},onclick:()=>{n.redo()}},{title:"Reference Line",icon:"dashed_rect",get active(){return n.showReferenceLine},onclick(){n.showReferenceLine=!n.showReferenceLine}},{title:"Preview",icon:"preview",onclick:()=>{n.events.TOP_BUTTON_CLICK.emit({button:{name:"preview"},data:n.exportString()})}},{title:"Save",icon:"save",onclick:()=>{n.events.TOP_BUTTON_CLICK.emit({button:{name:"save"},data:{config:n.exportString(),settings:n.exportSettings()}})}}],deps:[q]},{provide:P,useValue:{root:Je,division:Je,template:Je,slot:Je,outlet:Je},multi:!0},{provide:re,useFactory:g.Tf,multi:!0},{provide:w,useValue:{title:"Layout",elements:[{label:"Row",type:"division",icon:"row",content:{style:{display:"flex"}}},{label:"Column",type:"division",icon:"column"},{label:"Division",type:"division",icon:"division"}]},multi:!0},{provide:et,useFactory:(n,i,t,o,r)=>(i=Object.assign({},...i),t=Object.assign({},...t),o=Object.assign({},...o),n?(n.forEach(s=>{s.elements.forEach(a=>{const l=a.type;i[l]||(a.disabled=!0,r.log.next({type:"error",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e Component`,data:null})),t[l]||(a.disabled=!0,r.log.next({type:"error",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e`,data:null})),o[l]||r.log.next({type:"warning",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9884\u89c8\u7ec4\u4ef6`,data:null})})}),n):(r.log.next({type:"error",message:`\u672a\u914d\u7f6e ${w.toString()}`,data:null}),[])),deps:[[new e.FiY,w],P,re,z,q]},{provide:bt,useFactory:n=>{const i=new Map;return n.forEach(t=>{for(const o in t)i.set(o,t[o])}),i},deps:[re]},{provide:Jt,useFactory:n=>{const i=new Map;return n.forEach(t=>{for(const o in t)i.set(o,{core:g.QY.create(t[o].get("core")),property:g.Z9.create(t[o].get("property").reduce((r,s)=>(r[s.name]=void 0===s.value?null:s.value,r),{})),style:g.bg.create(t[o].get("style").reduce((r,s)=>(r[s.name]=void 0===s.value?null:s.value,r),{})),action:t[o].get("action"),rights:t[o].get("rights"),validator:t[o].get("validator")})}),i},deps:[re]}];let ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:er,imports:[u.ez,Xi,nn,Et,go,Io,Ro,Do,wt]}),n})();var Y=b(9521),tr=b(7521),oe=b.n(tr);const nr=["page"];function or(n,i){}let xn=(()=>{class n{constructor(t,o,r,s,a,l,c,d,h,m,f,x){this.el=t,this.gt=o,this.events=r,this.translateAnimation=s,this.viewContainerRef=a,this.cdr=l,this.direction=c,this.ngZone=d,this.contextmenu=h,this._document=m,this.gtContextMenu=f,this.gtNodeHover=new e.vpe,this.transform="matrix(1, 0, 0, 1, 0, 0)",this.itemName=null,this.isBrowser=(0,u.NF)(x),this.events.CHANGE_BOARD.subscribe(()=>this.init())}blackboardClick(t){if("move"!==this.gt.mode){const o=this.getTargetNode(t);o&&this.gt.changeSelect(o,t.metaKey||t.ctrlKey)}}blackBoardContextmenu(t){t.stopPropagation(),t.preventDefault();const o=this.getTargetNode(t);if(o&&(this.gt.selected.includes(o)||this.gt.changeSelect(o),this.gtContextMenu)){const r=this.gtContextMenu(this.gt,o);this.contextmenu.create(t,r)}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.initDragEvent()}),this.ngZone.runOutsideAngular(()=>{(0,R.R)(this.el.nativeElement,"mousemove").pipe(on("target"),(0,y.U)(t=>"move"!==this.gt.mode?this.getTargetNode(t):null),Me()).subscribe(t=>{this.ngZone.run(()=>this.gtNodeHover.emit(t))})})}ngAfterViewInit(){this.isBrowser?this.resetPosition():(this.page.nativeElement.style.width="800px",this.page.nativeElement.style.minHeight="1000px",this.page.nativeElement.style.marginLeft="calc(50% - 400px)",this.transform="translate(0,60px)")}init(){this.template.clear(),this.gt.gt&&this.template.insert(this.gt.gt)}updateTransform(t){this.transform=t,this.cdr.detectChanges()}resetPosition(){const t=this.viewContainerRef.element.nativeElement.offsetWidth,o=this.viewContainerRef.element.nativeElement.offsetHeight;this.page.nativeElement.style.width=Math.min(t-100,800)+"px",this.page.nativeElement.style.minHeight=Math.max(o-100,1e3)+"px",this.transform=`matrix(1,0,0,1,${("ltr"===this.direction.value?1:-1)*Math.max(t/2-this.page.nativeElement.offsetWidth/2,50)},60)`,this.cdr.detectChanges()}getTargetNode(t){const o=Ut(t.target,".gt-node");return o?this.gt.getNodeById(o.dataset.id):null}initDragEvent(){const t=new jn(this.el.nativeElement,this._document),o=this.gt;Object.defineProperty(t,"disabled",{get:()=>"move"===o.mode}),t.drop.subscribe(({parentElement:r,refChild:s,target:a,placeholder:l})=>{const c=Array.prototype.filter.call(r.children,m=>m!==a).map(m=>m.getBoundingClientRect());r.insertBefore(a,s);const d=a.getBoundingClientRect(),h=Array.prototype.filter.call(r.children,m=>m!==a).map(m=>m.getBoundingClientRect());Array.prototype.filter.call(r.children,m=>m!==a).forEach((m,f)=>{this.translateAnimation.add({element:m,from:{left:c[f].left-h[f].left,top:c[f].top-h[f].top}})}),l.style.width=d.width+"px",l.style.height=d.height+"px",this.translateAnimation.add({element:l,to:{left:d.left,top:d.top}})}),t.dragEnd.subscribe(({parentElement:r,refChild:s,target:a})=>{const l=a.dataset.id,c=en(r).dataset.id,d=this.gt.getNodeById(l),h=this.gt.getNodeById(c),m=s&&s.dataset.id?this.gt.getNodeById(s.dataset.id):null;if(!d||!h)return void console.error("something wrong!");let f=h.children.length-1;m&&(f=h.children.indexOf(m),m.parent===d.parent&&f>d.parent.children.indexOf(d)&&(f-=1)),this.gt.moveNode(d,h,f,r.dataset.droppable)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(q),e.Y36(W),e.Y36(nt),e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(C.Is),e.Y36(e.R0b),e.Y36(Oe),e.Y36(u.K0),e.Y36(O,8),e.Y36(e.Lbi))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-blackboard"]],viewQuery:function(t,o){if(1&t&&(e.Gf(te,7),e.Gf(nr,7)),2&t){let r;e.iGM(r=e.CRH())&&(o.template=r.first),e.iGM(r=e.CRH())&&(o.page=r.first)}},hostAttrs:[1,"position-relative","d-flex","flex-column","flex-grow-1","overflow-hidden"],hostBindings:function(t,o){1&t&&e.NdJ("click",function(s){return o.blackboardClick(s)})("contextmenu",function(s){return o.blackBoardContextmenu(s)})},outputs:{gtNodeHover:"gtNodeHover"},features:[e._Bn([nt])],decls:4,vars:16,consts:[["page-structure","","gtPan","",1,"oblique-stripes","overflow-auto","position-relative","h-100",3,"panTarget","panDisabled","updateTransform"],["gtResize","","gtZoom","","resizes","all","page-structure-source","",1,"gt-page",2,"margin-bottom","12rem",3,"minWidth","maxWidth","minHeight","maxHeight","setMin","transform","gtZoomDisabled","zoomZone","updateTransform"],["page",""],["gtTemplate",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("updateTransform",function(s){return o.updateTransform(s)}),e.TgZ(1,"div",1,2),e.NdJ("updateTransform",function(s){return o.updateTransform(s)}),e.YNc(3,or,0,0,"ng-template",3),e.qZA()()),2&t){const r=e.MAs(2);e.ekj("overflow-auto","edit"===o.gt.mode)("overflow-hidden","move"===o.gt.mode),e.Q6J("panTarget",r)("panDisabled","move"!==o.gt.mode),e.xp6(1),e.Udp("transform",o.transform),e.Q6J("minWidth",300)("maxWidth",5e3)("minHeight",500)("maxHeight",5e3)("setMin",!0)("transform",!0)("gtZoomDisabled","move"!==o.gt.mode)("zoomZone",o.el.nativeElement)}},dependencies:[Wn,Hn,$t,Nt,so,te],encapsulation:2}),n})();const ir=["tabsEle"];function rr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.sidebar.activeTab(r))})("dragstart",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.dragStart(s,r))}),e.TgZ(1,"i",8),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.Udp("cursor",o.activeTab===t?"default":"pointer"),e.ekj("active",t.active),e.xp6(2),e.Oqu(t.icon)}}function sr(n,i){if(1&n&&(e.ynx(0),e.YNc(1,rr,3,5,"button",6),e.BQk()),2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.position===o.type)}}function ar(n,i){if(1&n&&e._UZ(0,"gt-accordion-element",9),2&n){const t=e.oxw();e.Udp("display",t.sidebar.tabs[0].active?"":"none")}}function lr(n,i){if(1&n&&e._UZ(0,"gt-accordion-config",9),2&n){const t=e.oxw();e.Udp("display",t.sidebar.tabs[1].active?"":"none")}}function cr(n,i){if(1&n&&e._UZ(0,"gt-accordion-elTree",9),2&n){const t=e.oxw();e.Udp("display",t.sidebar.tabs[2].active?"":"none")}}function dr(n,i){if(1&n&&e._UZ(0,"gt-accordion-page",9),2&n){const t=e.oxw();e.Udp("display",t.sidebar.tabs[3].active?"":"none")}}let pr=(()=>{class n{constructor(t,o,r,s){this.gt=t,this.sidebar=o,this.gtAuth=r,this._document=s,this.type="right"}dragStart(t,o){o.dataTransfer.dropEffect="move",(0,R.R)(this._document,"dragover").pipe((0,V.R)((0,R.R)(this._document,"drop").pipe((0,v.b)(r=>{r.preventDefault(),this.sidebar.createWindow(t,r.clientX,r.clientY)}))),(0,v.b)(r=>r.preventDefault())).subscribe()}shouldHide(){return!this.sidebar.tabs.find(t=>t.position===this.type)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(At),e.Y36(K),e.Y36(u.K0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-sidebar"]],viewQuery:function(t,o){if(1&t&&e.Gf(ir,7),2&t){let r;e.iGM(r=e.CRH())&&(o.tabsEle=r.first)}},hostAttrs:[1,"gt-sidebar","flex-shrink-0"],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("d-none",o.shouldHide())},inputs:{type:"type"},decls:9,vars:5,consts:[[1,"card","border-0","h-100"],[1,"card-header","bg-body"],[1,"nav","nav-pills","nav-justified","card-header-pills"],[4,"ngFor","ngForOf"],[1,"card-body","p-0",2,"overflow-y","scroll"],["class","tab-panel",3,"display",4,"ngIf"],["class","nav-link","type","button","draggable","true",3,"active","cursor","click","dragstart",4,"ngIf"],["type","button","draggable","true",1,"nav-link",3,"click","dragstart"],[1,"gt-icon"],[1,"tab-panel"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2),e.YNc(3,sr,2,1,"ng-container",3),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,ar,1,2,"gt-accordion-element",5),e.YNc(6,lr,1,2,"gt-accordion-config",5),e.YNc(7,cr,1,2,"gt-accordion-elTree",5),e.YNc(8,dr,1,2,"gt-accordion-page",5),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",o.sidebar.tabs),e.xp6(2),e.Q6J("ngIf",o.sidebar.tabs[0].position===o.type),e.xp6(1),e.Q6J("ngIf",o.sidebar.tabs[1].position===o.type),e.xp6(1),e.Q6J("ngIf",o.sidebar.tabs[2].position===o.type),e.xp6(1),e.Q6J("ngIf",o.sidebar.tabs[3].position===o.type))},dependencies:[u.sg,u.O5,bn,vn,yn,Tn],encapsulation:2}),n})();function ur(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.switchBoard(s))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Udp("cursor",o.gt.currentBoard===t?"default":"pointer"),e.ekj("active",o.gt.currentBoard===t),e.xp6(1),e.hij(" ",t.name||t.type," ")}}function hr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(r.onclick(s.gt))}),e.TgZ(1,"i",2),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.ekj("active",t.active),e.Q6J("tooltipTitle",t.title)("disabled",t.disabled),e.xp6(2),e.Oqu(t.icon)}}function _r(n,i){if(1&n&&(e.TgZ(0,"div",19)(1,"button",20)(2,"i",2),e._uU(3),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("title",t.title),e.xp6(2),e.Oqu(t.icon)}}function mr(n,i){if(1&n&&(e.ynx(0),e.YNc(1,hr,3,5,"button",16),e._uU(2,"\xa0 "),e.YNc(3,_r,4,2,"div",17),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",!t.children),e.xp6(2),e.Q6J("ngIf",t.children)}}let gr=(()=>{class n{constructor(t,o,r,s,a){this.gt=t,this.events=o,this.cdr=r,this.editorBrand=s,this.topBarButtons=a,this.subscription=D.w0.EMPTY}ngOnInit(){this.subscription=this.events.onEvent.subscribe(()=>this.cdr.detectChanges())}ngOnDestroy(){this.subscription.unsubscribe()}getLeftDropdown(){return this.gt.boards.concat(this.gt.customComponent).map(t=>({text:t.type,active:this.gt.currentBoard===t,data:t}))}getRightDropdown(){return this.topBarButtons.map(t=>({text:t.title,active:t.active,icon:t.icon,data:t}))}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(W),e.Y36(e.sBO),e.Y36(gt),e.Y36(k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-navbar"]],hostAttrs:[1,"navbar","navbar-expand-md","border-bottom"],decls:22,vars:9,consts:[[1,"container-fluid","flex-nowrap"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-label","Toggle navigation","gt-dropdown","",1,"navbar-toggler","me-auto",3,"items","itemClick"],[1,"gt-icon"],[1,"navbar-brand","d-flex","align-items-center",2,"cursor","pointer",3,"click"],["width","32","height","32",1,"rounded",2,"width","2rem","height","2rem",3,"src","alt"],[1,"fw-bold","ms-2","d-md-inline","d-none"],[1,"vr","my-2","text-body"],[1,"nav","nav-pills","me-auto","ms-3","d-none","d-md-flex"],["class","nav-link","type","button",3,"active","cursor","click",4,"ngFor","ngForOf"],[1,"ms-3","me-auto","text-nowrap"],[1,"fw-bold","fs-5"],[1,"d-none","d-sm-inline"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-label","Toggle navigation","gt-dropdown","",1,"navbar-toggler",3,"items","itemClick"],[1,"text-nowrap","ms-3","d-none","d-md-block"],[4,"ngFor","ngForOf"],["type","button",1,"nav-link",3,"click"],["type","button","class","btn btn-light","tooltip","","tooltipPosition","bottom",3,"active","tooltipTitle","disabled","click",4,"ngIf"],["class","btn-group","role","group",4,"ngIf"],["type","button","tooltip","","tooltipPosition","bottom",1,"btn","btn-light",3,"tooltipTitle","disabled","click"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-link","dropdown-toggle",3,"title"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("itemClick",function(s){return o.switchBoard(s.data)}),e.TgZ(2,"i",2),e._uU(3,"list"),e.qZA()(),e.TgZ(4,"span",3),e.NdJ("click",function(){return o.editorBrand.click&&o.editorBrand.click()}),e._UZ(5,"img",4),e.TgZ(6,"span",5),e._uU(7),e.qZA()(),e._UZ(8,"div",6),e.TgZ(9,"nav",7),e.YNc(10,ur,2,5,"button",8),e.qZA(),e.TgZ(11,"div",9)(12,"span",10),e._uU(13),e.qZA(),e._uU(14," \xa0"),e.TgZ(15,"small",11),e._uU(16),e.qZA()(),e.TgZ(17,"button",12),e.NdJ("itemClick",function(s){return s.data.onclick(o.gt)}),e.TgZ(18,"i",2),e._uU(19,"dotted_line"),e.qZA()(),e.TgZ(20,"div",13),e.YNc(21,mr,4,2,"ng-container",14),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("items",o.getLeftDropdown()),e.xp6(4),e.Q6J("src",o.editorBrand.src,e.LSH)("alt",o.editorBrand.alt),e.xp6(2),e.Oqu(o.editorBrand.title),e.xp6(3),e.Q6J("ngForOf",o.gt.pages),e.xp6(3),e.Oqu(o.gt.settings.name),e.xp6(3),e.Oqu(o.gt.settings.description),e.xp6(1),e.Q6J("items",o.getRightDropdown()),e.xp6(4),e.Q6J("ngForOf",o.topBarButtons))},dependencies:[_,U,u.sg,u.O5],encapsulation:2,changeDetection:0}),n})();function fr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.gt.changeSelect(r))})("contextmenu",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onContextmenu(s,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function Cr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span",22),e.NdJ("contextmenu",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onContextmenu(s,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.type)}}function br(n,i){if(1&n&&(e.TgZ(0,"li",18),e.YNc(1,fr,2,1,"a",19),e.YNc(2,Cr,2,1,"span",20),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.ekj("active",t===(o.gt.selected[0]||o.gt.gt)),e.xp6(1),e.Q6J("ngIf",t!==(o.gt.selected[0]||o.gt.gt)),e.xp6(1),e.Q6J("ngIf",t===(o.gt.selected[0]||o.gt.gt))}}const vr=function(){return["r"]},Tr=function(){return["l","t"]};let yr=(()=>{class n{constructor(t,o,r,s,a,l,c){this.gt=t,this.events=o,this.contextmenu=r,this.sidebar=s,this.gtContextMenu=a,this.event=new e.vpe,this.log=new e.vpe,this.init=new e.vpe,this.eventSubscription=D.w0.EMPTY,this.hoveredGtNode=null,this.isBrowser=(0,u.NF)(c),this.isBrowser&&("function"==typeof l&&l(o.target),this.eventSubscription=(0,G.T)(t.log.pipe((0,v.b)(d=>this.log.emit(d))),o.CHANGE_SELECT.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_SELECT",data:d}))),o.CHANGE_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_STYLE",data:d}))),o.CHANGE_PROPERTY.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_PROPERTY",data:d}))),o.CHANGE_ACTION.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_ACTION",data:d}))),o.CHANGE_BOARD.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_BOARD",data:d}))),o.COPY_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"COPY_STYLE",data:d}))),o.PASTE_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"PASTE_STYLE",data:d}))),o.TOP_BUTTON_CLICK.pipe((0,v.b)(d=>this.event.emit({type:"TOP_BUTTON_CLICK",data:d}))),o.SAVE.pipe((0,v.b)(d=>this.event.emit({type:"SAVE",data:d}))),o.AUTO_SAVE.pipe((0,v.b)(d=>this.event.emit({type:"AUTO_SAVE",data:d}))),o.INSERT_NODE.pipe((0,v.b)(d=>this.event.emit({type:"INSERT_NODE",data:d}))),o.REMOVE_NODE.pipe((0,v.b)(d=>this.event.emit({type:"REMOVE_NODE",data:d}))),o.MOVE_NODE.pipe((0,v.b)(d=>this.event.emit({type:"MOVE_NODE",data:d}))),o.UNDO.pipe((0,v.b)(d=>this.event.emit({type:"UNDO",data:d}))),o.REDO.pipe((0,v.b)(d=>this.event.emit({type:"REDO",data:d}))),o.CUSTOM.pipe((0,v.b)(d=>this.event.emit({type:"CUSTOM",data:d}))),o.SAVE_COMPONENT.pipe((0,v.b)(d=>this.event.emit({type:"SAVE_COMPONENT",data:d}))),o.REMOVE_COMPONENT.pipe((0,v.b)(d=>this.event.emit({type:"REMOVE_COMPONENT",data:d})))).subscribe(),oe().bind(["ctrl+c","meta+c"],d=>{d.preventDefault(),t.copyNode()}),oe().bind(["ctrl+v","meta+v"],d=>{d.preventDefault(),t.pasteNode()}),oe().bind(["ctrl+shift+c","meta+shift+c"],d=>{d.preventDefault(),t.copyStyle()}),oe().bind(["ctrl+shift+v","meta+shift+v"],d=>{d.preventDefault(),t.pasteStyle()}),oe().bind(["ctrl+z","meta+z"],d=>{d.preventDefault(),t.undo()}),oe().bind(["ctrl+shift+z","meta+shift+z"],d=>{d.preventDefault(),t.redo()}),oe().bind("alt+1",d=>{d.preventDefault(),t.settings.activateRightTab(0)}),oe().bind("alt+2",d=>{d.preventDefault(),t.settings.activateRightTab(1)}),oe().bind("alt+3",d=>{d.preventDefault(),t.settings.activateRightTab(2)}),oe().bind("alt+4",d=>{d.preventDefault(),t.settings.activateRightTab(3)}),oe().bind("del",d=>{d.preventDefault(),t.removeNode()}),oe().bind("m",d=>{d.preventDefault(),t.mode="move"}),oe().bind("v",d=>{d.preventDefault(),t.mode="edit"}),(0,R.R)(document,"keypress").pipe((0,ae.h)(()=>document.activeElement===document.body),(0,ae.h)(d=>d.keyCode===Y.L_),(0,v.b)(d=>{d.preventDefault(),t.mode="move"}),(0,ee.w)(()=>(0,R.R)(document,"keyup").pipe((0,ae.h)(d=>d.keyCode===Y.L_),(0,v.b)(()=>t.mode="edit"),(0,E.q)(1)))).subscribe())}set data(t){t?(this.gt.init(t.config,t.components),this.gt.initSettings({name:t.title,description:t.description,...t.settings}),this.sidebar.initSettings()):this.gt.init()}ngOnDestroy(){this.eventSubscription.unsubscribe(),this.gt.destroy(),this.events.target.removeAllListeners()}resetPosition(){this.blackboard.resetPosition()}onContextmenu(t,o){if(this.gtContextMenu){o.preventDefault();const r=this.gtContextMenu(this.gt,t);this.contextmenu.create(o,r)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(W),e.Y36(Oe),e.Y36(At),e.Y36(O,8),e.Y36(Gt,8),e.Y36(e.Lbi))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-editor"]],viewQuery:function(t,o){if(1&t&&e.Gf(xn,7),2&t){let r;e.iGM(r=e.CRH())&&(o.blackboard=r.first)}},inputs:{data:"data"},outputs:{event:"event",log:"log",init:"init"},decls:29,vars:16,consts:function(){let i,t,o;return i="Cursor",t="Pan",o="Reset",[[1,"d-flex","vh-100","flex-column"],[1,"d-flex","flex-grow-1","flex-md-row","flex-column","overflow-hidden"],["gtResize","","type","left",2,"width","20rem",3,"maxWidth","minWidth","resizes"],[1,"vr","d-none","d-md-flex","h-100","text-body-secondary"],[1,"d-inline-flex","flex-md-column","flex-row","p-1",3,"mousedown"],["tooltip","","tooltipTitle",i,1,"btn","btn-text","mb-md-1","me-1","me-md-0",3,"click"],[1,"gt-icon"],["tooltip","","tooltipTitle",t,1,"btn","btn-text","mb-md-1","me-1","me-md-0",3,"click"],["tooltip","","tooltipTitle",o,1,"btn","btn-text",3,"click"],[1,"d-lg-none","text-body-secondary","m-0"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden"],[1,"flex-grow-1",3,"gtNodeHover"],["blackboard",""],[1,"d-flex","justify-content-between","align-items-center","border-top","px-2"],[1,"breadcrumb","mb-0","flex-shrink-0"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"badge","text-bg-primary"],["gtResize","","type","right",2,"width","20rem",3,"maxWidth","minWidth","resizes"],[1,"breadcrumb-item"],["href","javascript:void(0)",3,"click","contextmenu",4,"ngIf"],[3,"contextmenu",4,"ngIf"],["href","javascript:void(0)",3,"click","contextmenu"],[3,"contextmenu"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"gt-navbar"),e.TgZ(2,"div",1),e._UZ(3,"gt-sidebar",2)(4,"div",3),e.TgZ(5,"div",4),e.NdJ("mousedown",function(s){return s.stopPropagation()}),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.gt.mode="edit"}),e.TgZ(7,"i",6),e._uU(8,"mouse_pointer"),e.qZA()(),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.gt.mode="move",o.gt.selected=[]}),e.TgZ(10,"i",6),e._uU(11,"move"),e.qZA()(),e.TgZ(12,"button",8),e.NdJ("click",function(){return o.resetPosition()}),e.TgZ(13,"i",6),e._uU(14,"refresh_ccw"),e.qZA()()(),e._UZ(15,"div",3)(16,"hr",9),e.TgZ(17,"div",10)(18,"gt-blackboard",11,12),e.NdJ("gtNodeHover",function(s){return o.hoveredGtNode=s}),e.qZA(),e.TgZ(20,"div",13)(21,"ol",14),e.YNc(22,br,3,4,"li",15),e.qZA(),e.TgZ(23,"span",16),e._uU(24),e.ALo(25,"uppercase"),e.qZA()()(),e._UZ(26,"div",3)(27,"hr",9)(28,"gt-sidebar",17),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("maxWidth",400)("minWidth",230)("resizes",e.DdM(14,vr)),e.xp6(3),e.ekj("active","edit"===o.gt.mode),e.xp6(3),e.ekj("active","move"===o.gt.mode),e.xp6(13),e.Q6J("ngForOf",null==(o.gt.selected[0]||o.gt.gt)?null:(o.gt.selected[0]||o.gt.gt).path),e.xp6(2),e.Oqu(e.lcZ(25,12,null==o.hoveredGtNode?null:o.hoveredGtNode.type)),e.xp6(4),e.Q6J("maxWidth",400)("minWidth",230)("resizes",e.DdM(15,Tr)))},dependencies:[u.sg,u.O5,pr,U,Nt,xn,gr,u.gd],encapsulation:2}),n})(),ie=(()=>{class n{transform(t){return t instanceof g.Sl||"string"==typeof t&&/\${.+?}/.test(t)?"~~\u6570\u636e\u7ed1\u5b9a~~":t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"dataBinding",type:n,pure:!1}),n})();var Ae=b(4905);const xr=["gt-code",""];let Er=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["code","gt-code",""]],features:[e.qOj],attrs:xr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"Code Placeholder"))},dependencies:[ie],encapsulation:2}),n})();const Nr=["gt-text",""];let Sr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h1","gt-text",""]],features:[e.qOj],attrs:Nr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h1.Heading"))},dependencies:[ie],encapsulation:2}),n})();const wr=["gt-text",""];let Mr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h2","gt-text",""]],features:[e.qOj],attrs:wr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h2.Heading"))},dependencies:[ie],encapsulation:2}),n})();const Or=["gt-text",""];let kr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h3","gt-text",""]],features:[e.qOj],attrs:Or,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h3.Heading"))},dependencies:[ie],encapsulation:2}),n})();const Ar=["gt-text",""];let Ir=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h4","gt-text",""]],features:[e.qOj],attrs:Ar,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h4.Heading"))},dependencies:[ie],encapsulation:2}),n})();const Dr=["gt-text",""];let Rr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h5","gt-text",""]],features:[e.qOj],attrs:Dr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h5.Heading"))},dependencies:[ie],encapsulation:2}),n})();const Pr=["gt-text",""];let Br=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["h6","gt-text",""]],features:[e.qOj],attrs:Pr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"h6.Heading"))},dependencies:[ie],encapsulation:2}),n})();const Zr=["gt-strong",""];let Lr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["strong","gt-strong",""]],features:[e.qOj],attrs:Zr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"Strong Text Placeholder"))},dependencies:[ie],encapsulation:2}),n})();const Fr=["gt-text",""];let Gr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["span","gt-text",""]],features:[e.qOj],attrs:Fr,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.property.text||"Some Text Placeholder"))},dependencies:[ie],encapsulation:2}),n})(),Jr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:w,useValue:{title:"Typography",elements:[{label:"h1",type:"h1",icon:"h1"},{label:"h2",type:"h2",icon:"h2"},{label:"h3",type:"h3",icon:"h3"},{label:"h4",type:"h4",icon:"h4"},{label:"h5",type:"h5",icon:"h5"},{label:"h6",type:"h6",icon:"h6"},{label:"Code",type:"code",icon:"code"},{label:"Typography",type:"text",icon:"text"},{label:"Strong",type:"strong",icon:"B"}]},multi:!0},{provide:P,useValue:{h1:Sr,h2:Mr,h3:kr,h4:Ir,h5:Rr,h6:Br,code:Er,strong:Lr,text:Gr},multi:!0},{provide:z,useValue:{h1:"<h1>h1.Heading</h1>",h2:"<h2>h2.Heading</h2>",h3:"<h3>h3.Heading</h3>",h4:"<h4>h4.Heading</h4>",h5:"<h5>h5.Heading</h5>",h6:"<h6>h6.Heading</h6>",code:"<code>Code Placeholder</code>",strong:"<strong>Strong Text Placeholder</strong>",text:"<span>Some Text Placeholder</span>"},multi:!0},{provide:re,multi:!0,useFactory:Ae.tA}],imports:[u.ez,ke]}),n})();function Hr(n,i){1&n&&(e.ynx(0),e._uU(1,"Link Placeholder"),e.BQk())}function Yr(n,i){}let $r=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-link"]],features:[e.qOj],decls:3,vars:1,consts:[[4,"ngIf"],["gtTemplate",""]],template:function(t,o){1&t&&(e.TgZ(0,"a"),e.YNc(1,Hr,2,0,"ng-container",0),e.YNc(2,Yr,0,0,"ng-template",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!o.gtNode.children.length))},dependencies:[u.O5,te],encapsulation:2}),n})();const Ur=["gt-image",""];let qr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["img","gt-image",""]],hostVars:7,hostBindings:function(t,o){2&t&&(e.Ikx("src",o.property.src,e.LSH)("alt",o.property.alt)("title",o.property.title),e.ekj("img-fluid",o.property.responsive)("img-thumbnail",o.property.thumbnails))},features:[e.qOj],attrs:Ur,decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})(),Vr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:w,useValue:{title:"Normal",elements:[{label:"Image",type:"image",icon:"picture"},{label:"Link",type:"a",icon:"bind"}]},multi:!0},{provide:P,useValue:{image:qr,a:$r},multi:!0},{provide:z,useValue:{image:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',a:"<a>Link Placeholder</a>"},multi:!0},{provide:re,multi:!0,useFactory:Ae.Tf}],imports:[u.ez,ke]}),n})();function Qr(n,i){1&n&&(e.TgZ(0,"li",3)(1,"a",4),e._uU(2,"\u5360\u4f4dTab"),e.qZA()())}function zr(n,i){if(1&n&&(e.TgZ(0,"li",3)(1,"a",4),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(1),e.ekj("active",t.active)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.tab," ")}}const jr=function(n,i,t){return[n,i,t]};let Xr=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-nav"]],features:[e.qOj],decls:3,vars:7,consts:[[1,"nav",3,"ngClass"],["class","nav-item",4,"ngIf"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["href","javascript:void(0);",1,"nav-link"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,Qr,3,0,"li",1),e.YNc(2,zr,3,5,"li",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(3,jr,o.property.style||"",o.property.fill||"",o.property.align||"")),e.xp6(1),e.Q6J("ngIf",!o.property.items.length),e.xp6(1),e.Q6J("ngForOf",o.property.items))},dependencies:[u.mk,u.sg,u.O5],encapsulation:2}),n})();const Kr={typeName:"NavComponent",typeStr:"\ninterface NavProperty {\n  style: string;\n  fill: string;\n  align: string;\n  items: { tab: string; active: boolean; disabled: boolean }[];\n}\n\ninterface NavComponent {\n  activeTab: NavProperty['items'][0];\n  switchNav(nav: NavProperty['items'][0]): void;\n}\n"};function Wr(n,i){1&n&&(e.ynx(0),e.TgZ(1,"div",3)(2,"h2",4)(3,"button",5),e._uU(4," \u5360\u4f4d\u6807\u9898 "),e.qZA()(),e.TgZ(5,"div",6)(6,"div",7),e._uU(7,"\u5360\u4f4d\u6587\u672c"),e.qZA()()(),e.BQk())}function es(n,i){}function ts(n,i){if(1&n&&(e.TgZ(0,"div",3)(1,"h2",4)(2,"button",8),e._uU(3),e.qZA()(),e.TgZ(4,"div",6)(5,"div",7),e.YNc(6,es,0,0,"ng-template",9),e.qZA()()()),2&n){const t=i.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(2),e.uIk("data-droppable",t.id),e.xp6(1),e.Q6J("templateID",t.id)}}let ns=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-accordion"]],features:[e.qOj],decls:3,vars:4,consts:[[1,"accordion"],[4,"ngIf"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["type","button","data-bs-toggle","collapse","aria-expanded","true",1,"accordion-button"],["gtTemplate","",3,"templateID"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Wr,8,0,"ng-container",1),e.YNc(2,ts,7,3,"div",2),e.qZA()),2&t&&(e.ekj("accordion-flush",o.property.flush),e.xp6(1),e.Q6J("ngIf",!o.property.accordionItems.length),e.xp6(1),e.Q6J("ngForOf",o.property.accordionItems))},dependencies:[u.sg,u.O5,te],encapsulation:2}),n})();function os(n,i){1&n&&(e.ynx(0),e._uU(1,"\u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01"),e.BQk())}function is(n,i){}function rs(n,i){1&n&&e._UZ(0,"button",4)}let ss=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-alert"]],features:[e.qOj],decls:4,vars:5,consts:[["data-droppable","","role","alert",1,"alert",3,"ngClass"],[4,"ngIf"],["gtTemplate",""],["type","button","class","btn-close","data-bs-dismiss","alert","aria-label","Close",4,"ngIf"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,os,2,0,"ng-container",1),e.YNc(2,is,0,0,"ng-template",2),e.YNc(3,rs,1,0,"button",3),e.qZA()),2&t&&(e.ekj("alert-dismissible",o.property.dismissible),e.Q6J("ngClass","alert-"+o.property.type),e.xp6(1),e.Q6J("ngIf",!o.gtNode.children.length),e.xp6(2),e.Q6J("ngIf",o.property.dismissible))},dependencies:[u.mk,u.O5,te],encapsulation:2}),n})();const as=["button-group",""];function ls(n,i){}let cs=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["div","button-group",""]],hostVars:9,hostBindings:function(t,o){2&t&&(e.uIk("data-accept","buttonGroup,button"),e.ekj("btn-group","horizontal"===o.gtNode.property.orientation)("btn-group-vertical","vertical"===o.gtNode.property.orientation)("btn-group-lg","lg"===o.gtNode.property.size)("btn-group-sm","sm"===o.gtNode.property.size))},features:[e.qOj],attrs:as,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,o){1&t&&e.YNc(0,ls,0,0,"ng-template",0)},dependencies:[te],encapsulation:2}),n})();function ds(n,i){if(1&n&&e._UZ(0,"img",7),2&n){const t=e.oxw();e.Q6J("src",t.property.topImage,e.LSH)}}function ps(n,i){}function us(n,i){if(1&n&&(e.TgZ(0,"div",8),e._uU(1),e.YNc(2,ps,0,0,"ng-template",9),e.qZA()),2&n){const t=e.oxw();e.uIk("data-droppable","header"),e.xp6(1),e.hij(" ",t.property.title," ")}}function hs(n,i){}function _s(n,i){1&n&&(e.TgZ(0,"div",10),e.YNc(1,hs,0,0,"ng-template",11),e.qZA()),2&n&&e.uIk("data-droppable","body")}function ms(n,i){}function gs(n,i){1&n&&(e.TgZ(0,"ul",12),e.YNc(1,ms,0,0,"ng-template",13),e.qZA()),2&n&&e.uIk("data-droppable","listGroup")("data-accept","listGroupItem")}function fs(n,i){}function Cs(n,i){1&n&&(e.TgZ(0,"div",14),e.YNc(1,fs,0,0,"ng-template",15),e.qZA()),2&n&&e.uIk("data-droppable","footer")}function bs(n,i){if(1&n&&e._UZ(0,"img",16),2&n){const t=e.oxw();e.Q6J("src",t.property.bottomImage,e.LSH)}}const vs=function(n,i){return[n,i]};let Ts=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-card"]],features:[e.qOj],decls:7,vars:10,consts:[[1,"card",3,"ngClass"],["class","card-img-top","alt","",3,"src",4,"ngIf"],["class","card-header",4,"ngIf"],["class","card-body",4,"ngIf"],["class","list-group list-group-flush","style","min-height: 2rem",4,"ngIf"],["class","card-footer",4,"ngIf"],["class","card-img-bottom","alt","",3,"src",4,"ngIf"],["alt","",1,"card-img-top",3,"src"],[1,"card-header"],["gtTemplate","","templateID","header"],[1,"card-body"],["gtTemplate","","templateID","body"],[1,"list-group","list-group-flush",2,"min-height","2rem"],["gtTemplate","","templateID","listGroup"],[1,"card-footer"],["gtTemplate","","templateID","footer"],["alt","",1,"card-img-bottom",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ds,1,1,"img",1),e.YNc(2,us,3,2,"div",2),e.YNc(3,_s,2,1,"div",3),e.YNc(4,gs,2,2,"ul",4),e.YNc(5,Cs,2,1,"div",5),e.YNc(6,bs,1,1,"img",6),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(7,vs,o.property.style||"",o.property.align||"")),e.xp6(1),e.Q6J("ngIf",o.property.topImage),e.xp6(1),e.Q6J("ngIf",o.property.showHeader),e.xp6(1),e.Q6J("ngIf",o.property.showBody),e.xp6(1),e.Q6J("ngIf",o.property.showListGroup),e.xp6(1),e.Q6J("ngIf",o.property.showFooter),e.xp6(1),e.Q6J("ngIf",o.property.bottomImage))},dependencies:[u.mk,u.O5,te],encapsulation:2}),n})();const ys=["gt-list-group",""];function xs(n,i){}let Es=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ul","gt-list-group",""]],hostAttrs:[1,"list-group"],hostVars:6,hostBindings:function(t,o){2&t&&e.ekj("list-group-horizontal",o.property.horizontal)("list-group-flush",o.property.flush)("list-group-numbered",o.property.numbered)},features:[e.qOj],attrs:ys,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,o){1&t&&e.YNc(0,xs,0,0,"ng-template",0)},dependencies:[te],encapsulation:2}),n})();const Ns=["gt-list-group-item",""];function Ss(n,i){}let ws=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["li","gt-list-group-item",""]],hostAttrs:[1,"list-group-item"],hostVars:6,hostBindings:function(t,o){2&t&&(e.Tol(o.property.style),e.ekj("active",o.property.active)("list-group-item-action",o.property.active))},features:[e.qOj],attrs:Ns,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,o){1&t&&e.YNc(0,Ss,0,0,"ng-template",0)},dependencies:[te],encapsulation:2}),n})(),Ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:w,useValue:{title:"Container",elements:[{label:"Card",type:"card",icon:"panel"},{label:"List Group",type:"listGroup",icon:"list"},{label:"List Group Item",type:"listGroupItem",icon:"list"},{label:"Nav",type:"nav",icon:"tab"},{label:"Accordion",type:"accordion",icon:"panel"},{label:"Alert",type:"alert",icon:"bell"},{label:"Button Group",type:"buttonGroup",icon:"button_group"}]},multi:!0},{provide:P,useValue:{card:Ts,accordion:ns,alert:ss,buttonGroup:cs,listGroup:Es,listGroupItem:ws,nav:Xr},multi:!0},{provide:re,useFactory:Ae.rT,multi:!0},{provide:z,useValue:{card:'<div class="card">\n\t\t  <div class="card-header" *ngIf="gtNode.property.showTitle">\u6807\u9898</div>\n\t\t  <div class="card-body">\u5361\u7247\u5185\u5bb9</div>\n      <div class="card-footer"></div>\n\t  </div>',alert:'<div class="alert alert-primary" role="alert">\n  \u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01\n</div>',accordion:'<div class="accordion">\n  <div class="accordion-item">\n    <h2 class="accordion-header">\n      <button class="accordion-button" type="button">\n        \u5360\u4f4d\u6807\u9898\n      </button>\n    </h2>\n    <div class="accordion-collapse collapse show">\n      <div class="accordion-body">\u5360\u4f4d\u6587\u672c\n      </div>\n    </div>\n  </div>\n</div>',buttonGroup:'<div class="btn-group">\n  <button type="button" class="btn btn-primary">\u6309\u94ae1</button>\n  <button type="button" class="btn btn-primary">\u6309\u94ae2</button>\n</div>',listGroupItem:'<div class="gt-node" style="border: .15rem dashed"></div>',nav:'<ul class="nav" style="width: 20rem;"><li class="nav-item"><a class="nav-link active">Active</a></li><li class="nav-item"><a class="nav-link">Link</a></li><li class="nav-item"><a class="nav-link disabled">Disabled</a></li>\n</ul>',listGroup:'<ul class="list-group"><li class="list-group-item">An item</li><li class="list-group-item">A second item</li><li class="list-group-item">A third item</li></ul>'},multi:!0},{provide:ce,useValue:{nav:Kr},multi:!0}],imports:[u.ez,ke]}),n})();const Os=["gt-button","","type","button"];let ks=(()=>{class n extends I{get className(){return["btn","gt-node",this.gtNode.property.buttonSize,this.gtNode.property.buttonColor,this.gtNode.property.buttonType].join(" ")}get buttonActive(){return this.property.active}}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["button","gt-button","","type","button"]],hostVars:4,hostBindings:function(t,o){2&t&&(e.Tol(o.className),e.ekj("active",o.buttonActive))},features:[e.qOj],attrs:Os,decls:2,vars:3,template:function(t,o){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,o.gtNode.property.text))},dependencies:[ie],encapsulation:2}),n})();const As=["gt-form",""];function Is(n,i){}let Ds=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["form","gt-form",""]],features:[e.qOj],attrs:As,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,o){1&t&&e.YNc(0,Is,0,0,"ng-template",0)},dependencies:[te],encapsulation:2}),n})();function Rs(n,i){if(1&n&&(e.TgZ(0,"label",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}function Ps(n,i){1&n&&(e.TgZ(0,"button",5),e._uU(1,"-"),e.qZA())}function Bs(n,i){1&n&&(e.TgZ(0,"button",5),e._uU(1,"+"),e.qZA())}let Zs=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-input"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:5,vars:11,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],["type","button","class","btn btn-outline-secondary",4,"ngIf"],[1,"form-control",3,"type","ngClass","disabled","readonly"],[1,"form-label"],["type","button",1,"btn","btn-outline-secondary"]],template:function(t,o){1&t&&(e.YNc(0,Rs,2,1,"label",0),e.TgZ(1,"div",1),e.YNc(2,Ps,2,0,"button",2),e._UZ(3,"input",3),e.YNc(4,Bs,2,0,"button",2),e.qZA()),2&t&&(e.Q6J("ngIf",o.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",o.property.inputSize),e.xp6(1),e.Q6J("ngIf","number"===o.property.inputType),e.xp6(1),e.Akn(o.property.inputType),e.Q6J("type",o.property.inputType)("ngClass",o.gtNode.property.inputSize)("disabled",o.gtNode.property.disabled)("readonly",o.gtNode.property.readonly),e.uIk("placeholder",o.gtNode.property.placeholder),e.xp6(1),e.Q6J("ngIf","number"===o.property.inputType))},dependencies:[u.mk,u.O5],encapsulation:2}),n})();function Ls(n,i){if(1&n&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.property.labelText)}}function Fs(n,i){if(1&n&&(e.TgZ(0,"label",7),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.inputType))}}function Gs(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"input",5),e.YNc(2,Fs,3,3,"label",6),e.qZA()),2&n){const t=e.oxw();e.ekj("form-check-inline","config-form-check-inline"===t.property.layout)("form-check-reverse","config-form-check-reverse"===t.property.layout),e.xp6(1),e.Q6J("type",t.property.inputType),e.xp6(1),e.Q6J("ngIf",t.property.showLabel)}}function Js(n,i){if(1&n&&(e.TgZ(0,"label",7),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function Hs(n,i){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"input",5),e.YNc(2,Js,2,1,"label",6),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.ekj("form-check-inline","config-form-check-inline"===o.property.layout)("form-check-reverse","config-form-check-reverse"===o.property.layout),e.xp6(1),e.Q6J("type",o.property.inputType),e.xp6(1),e.Q6J("ngIf",t.label)}}let En=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-radio"]],features:[e.qOj],decls:4,vars:3,consts:[["class","form-label",4,"ngIf"],["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngIf"],["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngFor","ngForOf"],[1,"form-label"],[1,"form-check"],[1,"form-check-input",3,"type"],["class","form-check-label",4,"ngIf"],[1,"form-check-label"]],template:function(t,o){1&t&&(e.YNc(0,Ls,2,1,"label",0),e.TgZ(1,"div"),e.YNc(2,Gs,3,6,"div",1),e.YNc(3,Hs,3,6,"div",2),e.qZA()),2&t&&(e.Q6J("ngIf",o.property.showLabel),e.xp6(2),e.Q6J("ngIf",!o.property.options.length),e.xp6(1),e.Q6J("ngForOf",o.property.options))},dependencies:[u.sg,u.O5,u.gd],encapsulation:2}),n})();function Ys(n,i){if(1&n&&(e.TgZ(0,"label",3),e._uU(1),e.ALo(2,"dataBinding"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.labelText))}}let $s=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-select"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:4,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-select",3,"ngClass","disabled"],[1,"form-label"]],template:function(t,o){1&t&&(e.YNc(0,Ys,3,3,"label",0),e.TgZ(1,"div",1),e._UZ(2,"select",2),e.qZA()),2&t&&(e.Q6J("ngIf",o.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",o.property.inputSize),e.xp6(1),e.Q6J("ngClass",o.property.inputSize)("disabled",o.property.disabled))},dependencies:[u.mk,u.O5,ie],encapsulation:2}),n})();function Us(n,i){if(1&n&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}let qs=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-textarea"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:5,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-control",3,"rows","placeholder","disabled"],[1,"form-label"]],template:function(t,o){1&t&&(e.YNc(0,Us,2,1,"label",0),e.TgZ(1,"div",1),e._UZ(2,"textarea",2),e.qZA()),2&t&&(e.Q6J("ngIf",o.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",o.property.inputSize),e.xp6(1),e.Q6J("rows",o.property.textareaRows)("placeholder",o.gtNode.property.placeholder||"")("disabled",o.gtNode.property.disabled))},dependencies:[u.mk,u.O5],encapsulation:2}),n})(),Vs=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-toggle"]],features:[e.qOj],decls:4,vars:0,consts:[[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input"],[1,"form-check-label"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"label",2),e._uU(3,"\u5207\u6362\u6309\u94ae"),e.qZA()())},encapsulation:2}),n})(),Qs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:w,useValue:{title:"Form",elements:[{label:"Form",type:"form",icon:"form"},{label:"Button",type:"button",icon:"button"},{label:"Input",type:"input",icon:"input"},{label:"Radio",type:"radio",icon:"radio",content:{property:{inputType:"radio"}}},{label:"Checkbox",type:"checkbox",icon:"checkbox",content:{property:{inputType:"checkbox"}}},{label:"Select",type:"select",icon:"select"},{label:"Textarea",type:"textarea",icon:"textarea"},{label:"Toggle",type:"toggle",icon:"toggle"}]},multi:!0},{provide:P,useValue:{radio:En,checkbox:En,toggle:Vs,button:ks,input:Zs,form:Ds,textarea:qs,select:$s},multi:!0},{provide:z,useValue:{button:'<button class="btn btn-primary" type="button">Button</button>',select:'<select class="form-select"><option selected>Select</option></select>',input:'<input type="text" class="form-control" placeholder="Input">',datepicker:'<input type="text" class="form-control" placeholder="Datepicker">',textarea:'<textarea class="form-control"></textarea>',radio:'<div class="config-form-check"><input class="config-form-check-input" type="radio"><label class="config-form-check-label">RADIO</label></div>',checkbox:'<div class="config-form-check"><input class="config-form-check-input" type="checkbox"><label class="config-form-check-label">CHECKBOX</label></div>',form:'<div style="border: 1px dashed;width: 100px;height:100px;"></div>',toggle:'<div class="form-check form-switch"><input type="checkbox" class="form-check-input" role="switch"><label class="form-check-label">\u5207\u6362\u6309\u94ae</label></div>'},multi:!0},{provide:re,useFactory:Ae.Am,multi:!0}],imports:[u.ez,p.u5,ke]}),n})();var zs=b(2894);let js=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-battery"]],features:[e.qOj],decls:7,vars:10,consts:[[1,"text-center","text-truncate"],[1,"flex-grow-1","overflow-hidden","h-100"],["gt-battery","",1,"d-block",3,"data","title","direction","gaugeMax","gaugeMin"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"canvas",2),e.ALo(4,"dataBinding"),e.qZA(),e.TgZ(5,"div",0),e._uU(6),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.property.title," "),e.xp6(2),e.Q6J("data",e.lcZ(4,8,o.property.data))("title",o.property.title)("direction",o.property.direction)("gaugeMax",o.property.gaugeMax)("gaugeMin",o.property.gaugeMin),e.xp6(3),e.AsE("",o.property.data||0,"/",o.property.gaugeMax,""))},dependencies:[zs.j,ie],encapsulation:2}),n})();var Xs=b(2021);let Ks=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-gauge"]],features:[e.qOj],decls:4,vars:8,consts:[["gt-gauge","",3,"data","max","min","startColor","endColor"],[1,"px-2","text-center"]],template:function(t,o){1&t&&(e._UZ(0,"canvas",0),e.ALo(1,"dataBinding"),e.TgZ(2,"div",1),e._uU(3),e.qZA()),2&t&&(e.Q6J("data",e.lcZ(1,6,o.property.data))("max",o.gtNode.property.gaugeMax)("min",o.gtNode.property.gaugeMin)("startColor",o.property.startColor)("endColor",o.property.endColor),e.xp6(3),e.Oqu(o.gtNode.property.title))},dependencies:[Xs.Y,ie],encapsulation:2}),n})();var Ws=b(8870);let ea=(()=>{class n extends I{}return n.\u0275fac=function(){let i;return function(o){return(i||(i=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-water"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"h-100","d-flex","flex-column"],[1,"position-relative","flex-grow-1"],["gt-waterBall","",1,"d-block","mx-auto",3,"value","max","min","minColor","maxColor","background"],[1,"position-absolute","top-50","start-50","translate-middle","text-white"],[1,"text-truncate","text-center","p-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"canvas",2),e.TgZ(3,"span",3),e._uU(4),e.qZA()(),e.TgZ(5,"div",4),e._uU(6),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("value",o.property.data)("max",o.property.gaugeMax)("min",o.property.gaugeMin)("minColor",o.property.minColor)("maxColor",o.property.maxColor)("background",o.property.background),e.xp6(2),e.Oqu(o.property.data),e.xp6(2),e.Oqu(o.property.title))},dependencies:[Ws.a],encapsulation:2}),n})(),ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:w,useValue:{title:"Component",elements:[{label:"Gauge",type:"gauge",icon:"gauge"},{label:"Water",type:"water",icon:"water"},{label:"Slot",type:"slot",icon:"slot"},{label:"Battery",type:"battery",icon:"battery"}]},multi:!0},{provide:P,useValue:{gauge:Ks,water:ea,battery:js},multi:!0},{provide:re,useFactory:Ae.Nt,multi:!0},{provide:z,useValue:{gauge:"<div>Gauge</div>",water:"<div>Water</div>",battery:"<div>Battery</div>"},multi:!0}],imports:[ke,Ae.WU]}),n})(),na=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Ms,Jr,Vr,Qs,ta]}),n})();var oa=b(2867),Nn=b(6555),Sn=(b(9812),b(7188));
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */b(8675);let ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var dt=b(4412);function sa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleMousedown(r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("id",t.uniqueId)("ngStyle",t.labelStyle),e.xp6(1),e.hij(" ",t.label," ")}}function aa(n,i){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.qZA()),2&n){const t=e.oxw();e.Udp("left",t.left)("top",t.top),e.xp6(1),e.Q6J("ngStyle",t.pointer)}}const la=["*"];function ca(n,i){1&n&&e._UZ(0,"color-checkboard",2)}const Dt={};let Rt=(()=>{class n{constructor(){this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}ngOnInit(){const t=function pa(n,i,t){const o=`${n}-${i}-${t}`;if(Dt[o])return Dt[o];const r=function da(n,i,t){if(typeof document>"u")return null;const o=document.createElement("canvas");o.width=2*t,o.height=2*t;const r=o.getContext("2d");return r?(r.fillStyle=n,r.fillRect(0,0,o.width,o.height),r.fillStyle=i,r.fillRect(0,0,t,t),r.translate(t,t),r.fillRect(0,0,t,t),o.toDataURL()):null}(n,i,t);return r?(Dt[o]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:`url(${t}) center left`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,o){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("ngStyle",o.gridStyles)},dependencies:[u.PC],styles:[".grid[_ngcontent-%COMP%]{top:0px;right:0px;bottom:0px;left:0px;position:absolute}"],changeDetection:0}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez]}),n})(),Bt=(()=>{class n{constructor(t){this.el=t,this.coordinatesChange=new T.x,this.mousechange=new T.x,this.mouseListening=!1}mousemove(t,o,r,s=!1){this.mouseListening&&(t.preventDefault(),this.mousechange.next({$event:t,x:o,y:r,isTouch:s}))}mouseup(){this.mouseListening=!1}mousedown(t,o,r,s=!1){t.preventDefault(),this.mouseListening=!0,this.mousechange.next({$event:t,x:o,y:r,isTouch:s})}ngOnInit(){this.sub=this.mousechange.pipe(Me((t,o)=>t.x===o.x&&t.y===o.y)).subscribe(t=>this.handleChange(t.x,t.y,t.$event,t.isTouch))}ngOnDestroy(){this.sub?.unsubscribe()}handleChange(t,o,r,s){const a=this.el.nativeElement.clientWidth,l=this.el.nativeElement.clientHeight,c=t-(this.el.nativeElement.getBoundingClientRect().left+window.pageXOffset);let d=o-this.el.nativeElement.getBoundingClientRect().top;s||(d-=window.pageYOffset),this.coordinatesChange.next({x:t,y:o,top:d,left:c,containerWidth:a,containerHeight:l,$event:r})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","ngx-color-coordinates",""]],hostBindings:function(t,o){1&t&&e.NdJ("mousemove",function(s){return o.mousemove(s,s.pageX,s.pageY)},!1,e.Jf7)("touchmove",function(s){return o.mousemove(s,s.touches[0].clientX,s.touches[0].clientY,!0)},!1,e.Jf7)("mouseup",function(){return o.mouseup()},!1,e.Jf7)("touchend",function(){return o.mouseup()},!1,e.Jf7)("mousedown",function(s){return o.mousedown(s,s.pageX,s.pageY)})("touchstart",function(s){return o.mousedown(s,s.touches[0].clientX,s.touches[0].clientY,!0)})},outputs:{coordinatesChange:"coordinatesChange"}}),n})(),Zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),ua=(()=>{class n{constructor(){this.direction="horizontal",this.onChange=new e.vpe}ngOnChanges(){"vertical"===this.direction?(this.pointerLeft=0,this.pointerTop=100*this.rgb.a,this.gradient={background:`linear-gradient(to bottom, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`}):(this.gradient={background:`linear-gradient(to right, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`},this.pointerLeft=100*this.rgb.a)}handleChange({top:t,left:o,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?0:t>r?1:Math.round(100*t/r)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}else{let c;c=o<0?0:o>s?1:Math.round(100*o/s)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-alpha"]],inputs:{hsl:"hsl",rgb:"rgb",pointer:"pointer",shadow:"shadow",radius:"radius",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:7,vars:15,consts:[[1,"alpha"],[1,"alpha-checkboard"],[1,"alpha-gradient",3,"ngStyle"],["ngx-color-coordinates","",3,"coordinatesChange"],[1,"alpha-pointer"],[1,"alpha-slider",3,"ngStyle"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"color-checkboard"),e.qZA(),e._UZ(3,"div",2),e.TgZ(4,"div",3),e.NdJ("coordinatesChange",function(s){return o.handleChange(s)}),e.TgZ(5,"div",4),e._UZ(6,"div",5),e.qZA()()()),2&t&&(e.Udp("border-radius",o.radius),e.xp6(3),e.Udp("box-shadow",o.shadow)("border-radius",o.radius),e.Q6J("ngStyle",o.gradient),e.xp6(1),e.Gre("alpha-container color-alpha-",o.direction,""),e.xp6(1),e.Udp("left",o.pointerLeft,"%")("top",o.pointerTop,"%"),e.xp6(1),e.Q6J("ngStyle",o.pointer))},dependencies:[u.PC,Rt,Bt],styles:[".alpha[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-checkboard[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.alpha-gradient[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-container[_ngcontent-%COMP%]{position:relative;height:100%;margin:0 3px}.alpha-pointer[_ngcontent-%COMP%]{position:absolute}.alpha-slider[_ngcontent-%COMP%]{width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;margin-top:1px;transform:translate(-2px)}"],changeDetection:0}),n})(),ha=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Pt,Zt]}),n})();function kn(n){let t=0,o=0;return["r","g","b","a","h","s","l","v"].forEach(r=>{!n[r]||(t+=1,isNaN(n[r])||(o+=1),("s"===r||"l"===r)&&/^\d+%$/.test(n[r])&&(o+=1))}),t===o&&n}function He(n,i,t){const o=new dt.C(n.hex?n.hex:n);t&&o.setAlpha(1);const r=o.toHsl(),s=o.toHsv(),a=o.toRgb(),l=o.toHex();return 0===r.s&&(r.h=i||0,s.h=i||0),{hsl:r,hex:"000000"===l&&0===a.a?"transparent":o.toHexString(),rgb:a,hsv:s,oldHue:n.h||i||r.h,source:n.source}}function An(n){return new dt.C(n).isValid}var fe=(()=>{return(n=fe||(fe={})).HEX="hex",n.HSL="hsl",n.HSV="hsv",n.RGB="rgb",fe;var n})();let In=(()=>{class n{constructor(){this.mode=fe.HEX,this.color={h:250,s:.5,l:.2,a:1},this.colorChange=new e.vpe,this.onChange=new e.vpe,this.onChangeComplete=new e.vpe,this.onSwatchHover=new e.vpe,this._onChangeCompleteSubscription=new D.w0,this._onSwatchHoverSubscription=new D.w0}ngOnInit(){this.changes=this.onChange.pipe((0,X.b)(100),(0,v.b)(t=>{switch(this.onChangeComplete.emit(t),this.mode){case fe.HEX:this.colorChange.emit(t.color.hex);break;case fe.HSL:this.colorChange.emit(t.color.hsl);break;case fe.HSV:this.colorChange.emit(t.color.hsv);break;case fe.RGB:this.colorChange.emit(t.color.rgb);break;default:const o=`The mode '${this.mode}' is not supported`;if((0,e.X6Q)())throw new Error(o);console.warn(o)}})).subscribe(),this.setState(He(this.color,0)),this.currentColor=this.hex}ngOnChanges(){this.setState(He(this.color,this.oldHue))}ngOnDestroy(){this.changes?.unsubscribe(),this._onChangeCompleteSubscription?.unsubscribe(),this._onSwatchHoverSubscription?.unsubscribe()}setState(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}handleChange(t,o){if(kn(t)){const s=He(t,t.h||this.oldHue,this.disableAlpha);this.setState(s),this.onChange.emit({color:s,$event:o}),this.afterValidChange()}}afterValidChange(){}handleSwatchHover(t,o){if(kn(t)){const s=He(t,t.h||this.oldHue);this.setState(s),this.onSwatchHover.emit({color:s,$event:o})}}registerOnChange(t){this._onChangeCompleteSubscription.add(this.onChangeComplete.pipe((0,v.b)(o=>t(o.color.hex))).subscribe())}registerOnTouched(t){this._onSwatchHoverSubscription.add(this.onSwatchHover.pipe((0,v.b)(()=>t())).subscribe())}setDisabledState(t){}writeValue(t){this.color=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-wrap"]],inputs:{className:"className",mode:"mode",color:"color"},outputs:{colorChange:"colorChange",onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD],decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})(),_a=0,ma=(()=>{class n{constructor(){this.placeholder="",this.onChange=new e.vpe,this.focus=!1,this.uniqueId="editableInput-"+ ++_a}ngOnInit(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}handleFocus(t){this.focus=!0}handleFocusOut(t){this.focus=!1,this.currentValue=this.blurValue}handleKeydown(t){const o=String(t.target.value),r=o.indexOf("%")>-1,s=Number(o.replace(/%/g,""));if(isNaN(s))return;const a=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s+a},$event:t}:{data:s+a,$event:t}),this.currentValue=r?`${s+a}%`:s+a),40===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s-a},$event:t}:{data:s-a,$event:t}),this.currentValue=r?s-a+"%":s-a)}handleKeyup(t){40===t.keyCode||38===t.keyCode||`${this.currentValue}`!==t.target.value&&this.onChange.emit(this.label?{data:{[this.label]:t.target.value},$event:t}:{data:t.target.value,$event:t})}ngOnChanges(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.mousemove=(0,R.R)(document,"mousemove").subscribe(t=>this.handleDrag(t)),this.mouseup=(0,R.R)(document,"mouseup").subscribe(()=>this.unsubscribe())}unsubscribe(){this.mousemove?.unsubscribe(),this.mouseup?.unsubscribe()}handleMousedown(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}handleDrag(t){if(this.dragLabel){const o=Math.round(this.value+t.movementX);o>=0&&o<=this.dragMax&&this.onChange.emit({data:{[this.label]:o},$event:t})}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-editable-input"]],inputs:{style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax",placeholder:"placeholder"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:6,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"id","ngStyle","mousedown",4,"ngIf"],[3,"id","ngStyle","mousedown"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("keydown",function(s){return o.handleKeydown(s)})("keyup",function(s){return o.handleKeyup(s)})("focus",function(s){return o.handleFocus(s)})("focusout",function(s){return o.handleFocusOut(s)}),e.qZA(),e.YNc(2,sa,2,3,"span",2),e.qZA()),2&t&&(e.Q6J("ngStyle",o.wrapStyle),e.xp6(1),e.Q6J("ngStyle",o.inputStyle)("value",o.currentValue)("placeholder",o.placeholder),e.uIk("aria-labelledby",o.uniqueId),e.xp6(1),e.Q6J("ngIf",o.label))},dependencies:[u.O5,u.PC],styles:["[_nghost-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]{position:relative}"],changeDetection:0}),n})(),ga=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez]}),n})(),fa=(()=>{class n{constructor(){this.hidePointer=!1,this.direction="horizontal",this.onChange=new e.vpe,this.left="0px",this.top=""}ngOnChanges(){"horizontal"===this.direction?this.left=100*this.hsl.h/360+"%":this.top=-100*this.hsl.h/360+100+"%"}handleChange({top:t,left:o,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?359:t>r?0:360*(-100*t/r+100)/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}else{let c;c=o<0?0:o>s?359:100*o/s*360/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-hue"]],inputs:{hsl:"hsl",pointer:"pointer",radius:"radius",shadow:"shadow",hidePointer:"hidePointer",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:8,consts:[["ngx-color-coordinates","",1,"color-hue-container",3,"coordinatesChange"],["class","color-hue-pointer",3,"left","top",4,"ngIf"],[1,"color-hue-pointer"],[1,"color-hue-slider",3,"ngStyle"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"div",0),e.NdJ("coordinatesChange",function(s){return o.handleChange(s)}),e.YNc(2,aa,2,5,"div",1),e.qZA()()),2&t&&(e.Gre("color-hue color-hue-",o.direction,""),e.Udp("border-radius",o.radius,"px")("box-shadow",o.shadow),e.xp6(2),e.Q6J("ngIf",!o.hidePointer))},dependencies:[u.O5,u.PC,Bt],styles:[".color-hue[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.color-hue-container[_ngcontent-%COMP%]{margin:0 2px;position:relative;height:100%}.color-hue-pointer[_ngcontent-%COMP%]{position:absolute}.color-hue-slider[_ngcontent-%COMP%]{margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;transform:translate(-2px)}.color-hue-horizontal[_ngcontent-%COMP%]{background:linear-gradient(to right,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}.color-hue-vertical[_ngcontent-%COMP%]{background:linear-gradient(to top,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}"],changeDetection:0}),n})(),Ca=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Zt]}),n})(),ba=(()=>{class n{constructor(){this.onChange=new e.vpe}ngOnChanges(){this.background=`hsl(${this.hsl.h}, 100%, 50%)`,this.pointerTop=-100*this.hsv.v+1+100+"%",this.pointerLeft=100*this.hsv.s+"%"}handleChange({top:t,left:o,containerHeight:r,containerWidth:s,$event:a}){o<0?o=0:o>s?o=s:t<0?t=0:t>r&&(t=r);let c=-t/r+1;c=c>0?c:0,c=c>1?1:c,this.onChange.emit({data:{h:this.hsl.h,s:o/s,v:c,a:this.hsl.a,source:"hsva"},$event:a})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-saturation"]],inputs:{hsl:"hsl",hsv:"hsv",radius:"radius",pointer:"pointer",circle:"circle"},outputs:{onChange:"onChange"},features:[e.TTD],decls:5,vars:8,consts:[["ngx-color-coordinates","",1,"color-saturation",3,"coordinatesChange"],[1,"saturation-white"],[1,"saturation-black"],[1,"saturation-pointer",3,"ngStyle"],[1,"saturation-circle",3,"ngStyle"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("coordinatesChange",function(s){return o.handleChange(s)}),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"div",4),e.qZA()()()),2&t&&(e.Udp("background",o.background),e.xp6(3),e.Udp("top",o.pointerTop)("left",o.pointerLeft),e.Q6J("ngStyle",o.pointer),e.xp6(1),e.Q6J("ngStyle",o.circle))},dependencies:[u.PC,Bt],styles:[".saturation-white[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,rgba(255,255,255,0));position:absolute;top:0;bottom:0;left:0;right:0}.saturation-black[_ngcontent-%COMP%]{background:linear-gradient(to top,#000,rgba(0,0,0,0));position:absolute;top:0;bottom:0;left:0;right:0}.color-saturation[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.saturation-pointer[_ngcontent-%COMP%]{position:absolute;cursor:default}.saturation-circle[_ngcontent-%COMP%]{width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px #0000004d,0 0 1px 2px #0006;border-radius:50%;cursor:hand;transform:translate(-2px,-4px)}"],changeDetection:0}),n})(),va=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Zt]}),n})(),Ta=(()=>{class n{constructor(){this.style={},this.focusStyle={},this.onClick=new e.vpe,this.onHover=new e.vpe,this.divStyles={},this.focusStyles={},this.inFocus=!1}ngOnInit(){this.divStyles={background:this.color,...this.style}}currentStyles(){return this.focusStyles={...this.divStyles,...this.focusStyle},this.focus||this.inFocus?this.focusStyles:this.divStyles}handleFocusOut(){this.inFocus=!1}handleFocus(){this.inFocus=!0}handleHover(t,o){this.onHover.emit({hex:t,$event:o})}handleClick(t,o){this.onClick.emit({hex:t,$event:o})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-swatch"]],inputs:{color:"color",style:"style",focusStyle:"focusStyle",focus:"focus"},outputs:{onClick:"onClick",onHover:"onHover"},ngContentSelectors:la,decls:3,vars:3,consts:[["tabindex","0",1,"swatch",3,"ngStyle","click","keydown.enter","focus","blur","mouseover"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)",4,"ngIf"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(s){return o.handleClick(o.color,s)})("keydown.enter",function(s){return o.handleClick(o.color,s)})("focus",function(){return o.handleFocus()})("blur",function(){return o.handleFocusOut()})("mouseover",function(s){return o.handleHover(o.color,s)}),e.Hsn(1),e.YNc(2,ca,1,0,"color-checkboard",1),e.qZA()),2&t&&(e.Q6J("ngStyle",o.currentStyles()),e.uIk("title",o.color),e.xp6(2),e.Q6J("ngIf","transparent"===o.color))},dependencies:[u.O5,u.PC,Rt],styles:[".swatch[_ngcontent-%COMP%]{outline:none;height:100%;width:100%;cursor:pointer;position:relative}"],changeDetection:0}),n})(),ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,Pt]}),n})();const Ye=function(n,i){return{input:n,label:i}};function xa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"color-editable-input",9),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleChange(r))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.WLB(5,Ye,t.input,t.label)),e.Q6J("value",t.round(100*t.rgb.a))("dragLabel",!0)("dragMax",100)}}function Ea(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"color-swatch",3),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleClick(r))})("onHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Akn(o.swatchStyle),e.Q6J("color",o.normalizeValue(t).color)("focusStyle",o.focusStyle(t))}}function Na(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"color-alpha",13),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleValueChange(r))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("radius",2)("rgb",t.rgb)("hsl",t.hsl)}}function Sa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"color-sketch-preset-colors",15),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleBlockChange(r))})("onSwatchHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("colors",t.presetColors)}}let wa=(()=>{class n{constructor(){this.disableAlpha=!1,this.onChange=new e.vpe,this.input={width:"100%",padding:"4px 10% 3px",border:"none",boxSizing:"border-box",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},this.label={display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}}round(t){return Math.round(t)}handleChange({data:t,$event:o}){if(t.hex){if(An(t.hex)){const r=new dt.C(t.hex);this.onChange.emit({data:{hex:this.disableAlpha||t.hex.length<=6?r.toHex():r.toHex8(),source:"hex"},$event:o})}}else t.r||t.g||t.b?this.onChange.emit({data:{r:t.r||this.rgb.r,g:t.g||this.rgb.g,b:t.b||this.rgb.b,source:"rgb"},$event:o}):t.a?(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,this.disableAlpha&&(t.a=1),this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},$event:o})):(t.h||t.s||t.l)&&this.onChange.emit({data:{h:t.h||this.hsl.h,s:Number(t.s&&t.s||this.hsl.s),l:Number(t.l&&t.l||this.hsl.l),source:"hsl"},$event:o})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-sketch-fields"]],inputs:{hsl:"hsl",rgb:"rgb",hex:"hex",disableAlpha:"disableAlpha"},outputs:{onChange:"onChange"},decls:10,vars:31,consts:[[1,"sketch-fields"],[1,"sketch-double"],["label","hex",3,"value","onChange"],[1,"sketch-single"],["label","r",3,"value","dragLabel","dragMax","onChange"],["label","g",3,"value","dragLabel","dragMax","onChange"],["label","b",3,"value","dragLabel","dragMax","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-alpha"],["label","a",3,"value","dragLabel","dragMax","onChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"color-editable-input",2),e.NdJ("onChange",function(s){return o.handleChange(s)}),e.qZA()(),e.TgZ(3,"div",3)(4,"color-editable-input",4),e.NdJ("onChange",function(s){return o.handleChange(s)}),e.qZA()(),e.TgZ(5,"div",3)(6,"color-editable-input",5),e.NdJ("onChange",function(s){return o.handleChange(s)}),e.qZA()(),e.TgZ(7,"div",3)(8,"color-editable-input",6),e.NdJ("onChange",function(s){return o.handleChange(s)}),e.qZA()(),e.YNc(9,xa,2,8,"div",7),e.qZA()),2&t&&(e.xp6(2),e.Akn(e.WLB(19,Ye,o.input,o.label)),e.Q6J("value",o.hex.replace("#","")),e.xp6(2),e.Akn(e.WLB(22,Ye,o.input,o.label)),e.Q6J("value",o.rgb.r)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(25,Ye,o.input,o.label)),e.Q6J("value",o.rgb.g)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(28,Ye,o.input,o.label)),e.Q6J("value",o.rgb.b)("dragLabel",!0)("dragMax",255),e.xp6(1),e.Q6J("ngIf",!1===o.disableAlpha))},dependencies:[u.O5,ma],styles:[".sketch-fields[_ngcontent-%COMP%]{display:flex;padding-top:4px}.sketch-double[_ngcontent-%COMP%]{flex:2 1 0%}.sketch-single[_ngcontent-%COMP%], .sketch-alpha[_ngcontent-%COMP%]{flex:1 1 0%;padding-left:6px}[dir=rtl][_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}"],changeDetection:0}),n})(),Ma=(()=>{class n{constructor(){this.onClick=new e.vpe,this.onSwatchHover=new e.vpe,this.swatchStyle={borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}}handleClick({hex:t,$event:o}){this.onClick.emit({hex:t,$event:o})}normalizeValue(t){return"string"==typeof t?{color:t}:t}focusStyle(t){return{boxShadow:`inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ${this.normalizeValue(t).color}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-sketch-preset-colors"]],inputs:{colors:"colors"},outputs:{onClick:"onClick",onSwatchHover:"onSwatchHover"},decls:2,vars:1,consts:[[1,"sketch-swatches"],["class","sketch-wrap",4,"ngFor","ngForOf"],[1,"sketch-wrap"],[1,"swatch",3,"color","focusStyle","onClick","onHover"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ea,2,4,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.colors))},dependencies:[u.sg,Ta],styles:[".sketch-swatches[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;margin:0 -10px;padding:10px 0 0 10px;border-top:1px solid rgb(238,238,238)}.sketch-wrap[_ngcontent-%COMP%]{width:16px;height:16px;margin:0 10px 10px 0}[dir=rtl][_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%]{padding-right:10px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}"],changeDetection:0}),n})(),Oa=(()=>{class n extends In{constructor(){super(),this.disableAlpha=!1,this.presetColors=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],this.width=200}afterValidChange(){this.activeBackground=`rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, ${this.disableAlpha?1:this.rgb.a})`}handleValueChange({data:t,$event:o}){this.handleChange(t,o)}handleBlockChange({hex:t,$event:o}){An(t)&&this.handleChange({hex:t,source:"hex"},o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["color-sketch"]],inputs:{disableAlpha:"disableAlpha",presetColors:"presetColors",width:"width"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:In,useExisting:(0,e.Gpc)(()=>n)}]),e.qOj],decls:14,vars:16,consts:[[1,"sketch-saturation"],[3,"hsl","hsv","onChange"],[1,"sketch-controls"],[1,"sketch-sliders"],[1,"sketch-hue"],[3,"hsl","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-color"],[1,"sketch-active"],[1,"sketch-fields-container"],[3,"rgb","hsl","hex","disableAlpha","onChange"],["class","sketch-swatches-container",4,"ngIf"],[1,"sketch-alpha"],[3,"radius","rgb","hsl","onChange"],[1,"sketch-swatches-container"],[3,"colors","onClick","onSwatchHover"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"color-saturation",1),e.NdJ("onChange",function(s){return o.handleValueChange(s)}),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"color-hue",5),e.NdJ("onChange",function(s){return o.handleValueChange(s)}),e.qZA()(),e.YNc(7,Na,2,3,"div",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"color-checkboard")(10,"div",8),e.qZA()(),e.TgZ(11,"div",9)(12,"color-sketch-fields",10),e.NdJ("onChange",function(s){return o.handleValueChange(s)}),e.qZA()(),e.YNc(13,Sa,2,1,"div",11),e.qZA()),2&t&&(e.Gre("sketch-picker ",o.className,""),e.Udp("width",o.width,"px"),e.xp6(2),e.Q6J("hsl",o.hsl)("hsv",o.hsv),e.xp6(4),e.Q6J("hsl",o.hsl),e.xp6(1),e.Q6J("ngIf",!1===o.disableAlpha),e.xp6(3),e.Udp("background",o.activeBackground),e.xp6(2),e.Q6J("rgb",o.rgb)("hsl",o.hsl)("hex",o.hex)("disableAlpha",o.disableAlpha),e.xp6(1),e.Q6J("ngIf",o.presetColors&&o.presetColors.length))},dependencies:function(){return[u.O5,ua,Rt,fa,ba,wa,Ma]},styles:[".sketch-picker[_ngcontent-%COMP%]{padding:10px 10px 3px;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px #00000026,0 8px 16px #00000026}.sketch-saturation[_ngcontent-%COMP%]{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.sketch-fields-container[_ngcontent-%COMP%], .sketch-swatches-container[_ngcontent-%COMP%]{display:block}.sketch-controls[_ngcontent-%COMP%]{display:flex}.sketch-sliders[_ngcontent-%COMP%]{padding:4px 0;flex:1 1 0%}.sketch-hue[_ngcontent-%COMP%]{position:relative;height:10px;overflow:hidden}.sketch-alpha[_ngcontent-%COMP%]{position:relative;height:10px;margin-top:4px;overflow:hidden}.sketch-color[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.sketch-active[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;bottom:0px;left:0px;border-radius:2px;box-shadow:#00000026 0 0 0 1px inset,#00000040 0 0 4px inset}[dir=rtl][_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%]{margin-right:4px;margin-left:0}"],changeDetection:0}),n})(),ka=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,ha,Pt,ga,Ca,va,ya]}),n})();function Aa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formControl.reset())}),e.TgZ(1,"i",6),e._uU(2,"close"),e.qZA()()}}let Dn=(()=>{class n{constructor(t,o,r,s,a){this.overlay=t,this.elementRef=o,this.formItem=r,this.formControl=s,this.formGroup=a,this.color="transparent",this.onchange=new e.vpe}set value(t){this.color=t||""}showColorPicker(){const t=this.overlay.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:8},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-8},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8}])});t.backdropClick().subscribe(()=>t.dispose()),t.attach(new $.C5(Oa)).instance.onChangeComplete.subscribe(r=>{const{r:s,g:a,b:l,a:c}=r.color.rgb,d=1===c?r.color.hex:`rgba(${s}, ${a}, ${l}, ${c})`;this.color=d,this.formControl.setValue(d)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.aV),e.Y36(e.SBq),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-color"]],inputs:{disabled:"disabled",value:"value"},outputs:{onchange:"onchange"},decls:6,vars:8,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],[1,"input-group-text"],["type","hidden",3,"formControlName"],[1,"form-control","text-truncate",2,"height","calc(2.5rem - 2px)",3,"click"],["class","btn btn-light btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"gt-icon"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1)(2,"input",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return o.showColorPicker()}),e._uU(4),e.qZA(),e.YNc(5,Aa,3,0,"button",4),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Udp("background-color",o.formControl.value||"transparent"),e.xp6(1),e.Q6J("formControlName",o.formItem.name),e.xp6(1),e.ekj("disabled",o.disabled),e.xp6(1),e.hij(" ",o.formControl.value," "),e.xp6(1),e.Q6J("ngIf",o.formControl.value))},dependencies:[p.Fj,p.JJ,p.JL,p.sg,p.u,u.O5],encapsulation:2}),n})();const Ia=["dropdown"];function Da(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw().type,l=e.oxw();return e.KtG(l.changeDropdown(a,s))}),e.TgZ(1,"a",15),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw().active;e.ekj("active",t===o),e.xp6(1),e.ekj("active",t===o),e.xp6(1),e.Oqu(t)}}function Ra(n,i){if(1&n&&(e.TgZ(0,"ul",12),e.YNc(1,Da,3,5,"li",13),e.qZA()),2&n){const t=i.items;e.xp6(1),e.Q6J("ngForOf",t)}}let Pa=(()=>{class n{constructor(t,o,r,s,a){this.overlay=t,this.vcr=o,this.formItem=r,this.formControl=s,this.formGroup=a,this.onchange=new e.vpe,this.overlayRef=null,this.units=["px","%","em"],this.active="",this.border={left:"1px solid #ccc",top:"2px dashed #000",right:"3px dotted pink",bottom:"3px none red",all:"3px dashed #123456"},this.borderStyles=["solid","dashed","dotted","none"],this.borderIconMap={solid:"solid_line",dashed:"dashed_line",dotted:"dotted_line",none:"close"}}set value(t){this.border=t||{}}switchBorder(t){this.active=t;const o=this.border[t]?this.border[t].split(" "):[];if(o[0]){const r=o[0].match(/\d*/);this.borderWidth=r?r[0]:null,this.borderUnit=o[0].replace(/\d*/,"")}else this.borderWidth=null,this.borderUnit=null;this.borderStyle=o[1]||"none",this.borderColor=o[2]}changeColor(t){this.borderColor=t,this.change()}changeWidth(t){this.borderWidth=t,this.change()}changeStyle(t){"none"===t?(this.borderWidthDisabled=!0,this.borderColorDisabled=!0):(this.borderWidthDisabled=!1,this.borderColorDisabled=!1),this.borderStyle=t.value,this.change()}change(){this.border[this.active]=[this.borderWidth+this.borderUnit,this.borderStyle,this.borderColor].join(" "),this.formItem.value=this.border,this.formGroup.get(this.formItem.name).setValue(this.formItem.value),this.onchange.emit(this.border)}showDropdown(t,o){const r={type:o};switch(o){case"borderStyle":r.items=this.borderStyles,r.active=this.borderStyle;break;case"borderUnit":r.items=this.units,r.active=this.borderUnit}const s=new $.UE(this.dropdown,this.vcr,r);this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(t.target).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}),this.overlayRef.attach(s),this.overlayRef.backdropClick().pipe((0,E.q)(1)).subscribe(()=>{this.overlayRef.dispose(),this.overlayRef=null})}changeDropdown(t,o){switch(t){case"borderStyle":this.borderStyle=o;break;case"borderUnit":this.borderUnit=o}this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.change()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-border"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ia,5),2&t){let r;e.iGM(r=e.CRH())&&(o.dropdown=r.first)}},inputs:{value:"value"},outputs:{onchange:"onchange"},decls:16,vars:18,consts:[[1,"border-box","mb-2"],[1,"border-item","border-all",3,"click"],[1,"border-item","border-left",3,"click"],[1,"border-item","border-top",3,"click"],[1,"border-item","border-right",3,"click"],[1,"border-item","border-bottom",3,"click"],[1,"mb-2","input-group","input-group-sm",2,"flex-wrap","nowrap"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"gt-icon"],["type","text","title","","size","1","name","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[3,"value","disabled","onchange"],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return o.switchBorder("all")}),e.qZA(),e.TgZ(2,"div",2),e.NdJ("click",function(){return o.switchBorder("left")}),e.qZA(),e.TgZ(3,"div",3),e.NdJ("click",function(){return o.switchBorder("top")}),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(){return o.switchBorder("right")}),e.qZA(),e.TgZ(5,"div",5),e.NdJ("click",function(){return o.switchBorder("bottom")}),e.qZA()(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(s){return o.showDropdown(s,"borderStyle")}),e.TgZ(8,"i",8),e._uU(9),e.qZA()(),e.TgZ(10,"input",9),e.NdJ("ngModelChange",function(s){return o.borderWidth=s})("ngModelChange",function(){return o.changeWidth(o.borderWidth)}),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(s){return o.showDropdown(s,"borderUnit")}),e._uU(12),e.qZA()(),e.TgZ(13,"properties-color",10),e.NdJ("onchange",function(s){return o.changeColor(s)}),e.qZA(),e.YNc(14,Ra,2,1,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.ekj("active","all"===o.active),e.xp6(1),e.ekj("active","left"===o.active),e.xp6(1),e.ekj("active","top"===o.active),e.xp6(1),e.ekj("active","right"===o.active),e.xp6(1),e.ekj("active","bottom"===o.active),e.xp6(2),e.Q6J("disabled",!o.active),e.xp6(2),e.Oqu(o.borderIconMap[o.borderStyle]),e.xp6(1),e.Q6J("disabled",!o.active||"none"===o.borderStyle)("ngModel",o.borderWidth),e.xp6(1),e.Q6J("disabled",!o.active||"none"===o.borderStyle),e.xp6(1),e.hij(" ",o.borderUnit," "),e.xp6(1),e.Q6J("value",o.borderColor)("disabled",!o.active||"none"===o.borderStyle))},dependencies:[p.Fj,p.JJ,u.sg,p.On,Dn],encapsulation:2}),n})();const Ba=function(){return{updateOn:"blur"}};function Za(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",1),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r._onchange())}),e.qZA()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(3,Ba))("disabled",!!o&&null===r.values[o-1].value)}}let La=(()=>{class n{constructor(t,o,r){this.formItem=t,this.formControl=o,this.formGroup=r,this.subscription=D.w0.EMPTY,this.setValue(),this.subscription=this.formControl.valueChanges.subscribe(()=>this.setValue())}ngOnDestroy(){this.subscription.unsubscribe()}setValue(){const t=null===this.formControl.value?[]:this.formControl.value.split(" ");this.values=[{value:t[0]?+t[0].match(/(-|\d)+/)[0]:null},{value:t[1]?+t[1].match(/(-|\d)+/)[0]:null},{value:t[2]?+t[2].match(/(-|\d)+/)[0]:null},{value:t[3]?+t[3].match(/(-|\d)+/)[0]:null}]}_onchange(){this.formControl.setValue(this.values.reduce((t,{value:o})=>0===o?t+o+" ":null===o?t:t+o+"px ","").trim()||null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-four-numbers"]],hostAttrs:[1,"input-group"],decls:1,vars:1,consts:[["class","form-control","title","","type","number","pattern","[0-9]*",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngFor","ngForOf"],["title","","type","number","pattern","[0-9]*",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"]],template:function(t,o){1&t&&e.YNc(0,Za,1,4,"input",0),2&t&&e.Q6J("ngForOf",o.values)},dependencies:[p.Fj,p.wV,p.JJ,p.c5,u.sg,p.On],encapsulation:2}),n})();function Fa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",5),e._uU(2),e.qZA(),e.TgZ(3,"td",5),e._uU(4),e.qZA(),e.TgZ(5,"td",6)(6,"a")(7,"i",4),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteRow(s))}),e._uU(8,"minus"),e.qZA()()()()}if(2&n){const t=i.$implicit;e.xp6(1),e.Q6J("title",t.key),e.xp6(1),e.Oqu(t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}let Ga=(()=>{class n{constructor(){this.onchange=new e.vpe}add(){this.formItem.value[this.key]=this.value&&this.value.trim()||"",this.onchange.emit(this.formItem),this.key=this.value=""}deleteRow({key:t}){delete this.formItem.value[t],this.onchange.emit(this.formItem)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-object"]],inputs:{formItem:"formItem",relateList:"relateList"},outputs:{onchange:"onchange"},decls:20,vars:5,consts:[[1,"table","table-bordered","table-condensed","table-sm"],[2,"width","20px"],[4,"ngFor","ngForOf"],["type","text","title","",1,"form-control","input-xs",3,"ngModel","ngModelChange"],[1,"gt-icon",3,"click"],[1,"text-truncate",3,"title"],[2,"padding","4px"]],template:function(t,o){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Key"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Value"),e.qZA(),e._UZ(7,"th",1),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,Fa,9,4,"tr",2),e.ALo(10,"keyvalue"),e.TgZ(11,"tr")(12,"td")(13,"input",3),e.NdJ("ngModelChange",function(s){return o.key=s}),e.qZA()(),e.TgZ(14,"td")(15,"input",3),e.NdJ("ngModelChange",function(s){return o.value=s}),e.qZA()(),e.TgZ(16,"td")(17,"a")(18,"i",4),e.NdJ("click",function(){return o.add()}),e._uU(19,"plus"),e.qZA()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,3,o.formItem.value)),e.xp6(4),e.Q6J("ngModel",o.key),e.xp6(2),e.Q6J("ngModel",o.value))},dependencies:[p.Fj,p.JJ,u.sg,p.On,u.Nd],encapsulation:2}),n})();function Ja(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.value)}}const Rn=function(){return{updateOn:"blur"}};function Ha(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",6),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(2,Rn))}}function Ya(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",7),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(2,Rn))}}function $a(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.value)}}function Ua(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"input",10),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.value)}}function qa(n,i){if(1&n&&(e.ynx(0)(1,1),e.YNc(2,Ha,1,3,"input",2),e.YNc(3,Ya,1,3,"input",3),e.YNc(4,$a,2,1,"div",4),e.YNc(5,Ua,1,1,"input",5),e.BQk()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","switch")}}let Va=(()=>{class n{constructor(){this.mode="view",this.cellBlur=new e.vpe,this.valueChange=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-table-cell"]],inputs:{mode:"mode",type:"type",value:"value"},outputs:{cellBlur:"cellBlur",valueChange:"valueChange"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSwitch"],["class","form-control","style","min-width: 10rem","type","text","autofocus","",3,"ngModel","ngModelOptions","ngModelChange","blur",4,"ngSwitchCase"],["class","form-control","style","min-width: 10rem","type","number","autofocus","",3,"ngModel","ngModelOptions","ngModelChange","blur",4,"ngSwitchCase"],["class","form-check form-switch",4,"ngSwitchCase"],["class","form-control","type","text","autofocus","",3,"ngModel","ngModelChange","blur",4,"ngSwitchDefault"],["type","text","autofocus","",1,"form-control",2,"min-width","10rem",3,"ngModel","ngModelOptions","ngModelChange","blur"],["type","number","autofocus","",1,"form-control",2,"min-width","10rem",3,"ngModel","ngModelOptions","ngModelChange","blur"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","blur"],["type","text","autofocus","",1,"form-control",3,"ngModel","ngModelChange","blur"]],template:function(t,o){1&t&&(e.YNc(0,Ja,2,1,"ng-container",0),e.YNc(1,qa,6,4,"ng-container",0)),2&t&&(e.Q6J("ngIf","view"===o.mode),e.xp6(1),e.Q6J("ngIf","edit"===o.mode))},dependencies:[p.Fj,p.wV,p.Wl,p.JJ,u.O5,u.RF,u.n9,u.ED,p.On],encapsulation:2}),n})();function Qa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.maximize())}),e.TgZ(1,"i",8),e._uU(2,"maximize"),e.qZA()()}}function za(n,i){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t.name)}}function ja(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",15),e.NdJ("dblclick",function(){const s=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.editMap[s.prop+a]=!0)}),e.TgZ(1,"properties-table-cell",16),e.NdJ("valueChange",function(r){const a=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.KtG(l[a.prop]=r)})("cellBlur",function(){const s=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.editMap[s.prop+a]=!1)}),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw(),r=o.$implicit,s=o.index,a=e.oxw(2);e.Q6J("title",r[t.prop]),e.xp6(1),e.Q6J("mode",a.editMap[t.prop+s]?"edit":"view")("type",t.type)("value",r[t.prop])}}function Xa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",10)(1,"td",11)(2,"i",8),e._uU(3,"list"),e.qZA()(),e.YNc(4,ja,2,4,"td",12),e.TgZ(5,"td")(6,"button",13)(7,"i",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.delete(s))}),e._uU(8,"minus"),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.formItem.columns)}}function Ka(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Xa,9,1,"tr",9),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.formControl.value)}}function Wa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"properties-table-cell",17),e.NdJ("valueChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.value=r)})("valueChange",function(r){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l._onchange(r,a))}),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(1),e.Q6J("mode","edit")("type",t.type)("value",t.value)}}function el(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"td"),e.YNc(2,Wa,2,3,"td",3),e.TgZ(3,"td")(4,"button",13)(5,"i",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.add())}),e._uU(6,"plus"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.formItem.columns)}}let tl=(()=>{class n{constructor(t,o,r,s,a,l){this.formItem=t,this.formControl=o,this.formGroup=r,this.overlay=s,this.elementRef=a,this.injector=l,this.onclick=new e.vpe,this.editMap={},this.isMaximize=!1}add(){this.formControl.value.push(this.formItem.columns.reduce((t,o)=>(t[o.prop]=o.value,o.value=null,t),{})),this.formControl.setValue([...this.formControl.value])}delete(t){this.formControl.value.splice(this.formControl.value.indexOf(t),1),this.formControl.setValue([...this.formControl.value])}_onchange(t,o){this.formItem.columns[o].value=t}maximize(){const t=this.overlay.create({hasBackdrop:!0,disposeOnNavigation:!0,backdropClass:"",positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([{overlayX:"end",overlayY:"top",originX:"end",originY:"top",offsetX:12,offsetY:-6}])});t.attach(new $.C5(n,null,e.zs3.create({providers:[],parent:this.injector}))).instance.isMaximize=!0,t.backdropClick().pipe((0,E.q)(1)).subscribe(()=>t.dispose())}drop(t){(0,B.bA)(this.formControl.value,t.previousIndex,t.currentIndex),this.formControl.setValue([...this.formControl.value])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw),e.Y36(j.aV),e.Y36(e.SBq),e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-table"]],outputs:{onclick:"onclick"},decls:11,vars:14,consts:[[2,"overflow-x","auto","margin-bottom","10px"],["type","button","class","btn btn-light btn-sm position-absolute top-0 end-0",3,"click",4,"ngIf"],[1,"table","table-bordered","table-condensed","table-sm",2,"margin","0"],[4,"ngFor","ngForOf"],[2,"width","1.25rem"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm","position-absolute","top-0","end-0",3,"click"],[1,"gt-icon"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y"],["cdkDragHandle",""],[3,"title","dblclick",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link"],[1,"gt-icon",3,"click"],[3,"title","dblclick"],[3,"mode","type","value","valueChange","cellBlur"],[3,"mode","type","value","valueChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qa,3,0,"button",1),e.TgZ(2,"table",2)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.YNc(6,za,2,1,"th",3),e._UZ(7,"th",4),e.qZA()(),e.TgZ(8,"tbody",5),e.NdJ("cdkDropListDropped",function(s){return o.drop(s)}),e.YNc(9,Ka,2,1,"ng-container",6),e.YNc(10,el,7,1,"tr",6),e.qZA()()()),2&t&&(e.ekj("bg-body",o.isMaximize)("p-3",o.isMaximize)("shadow",o.isMaximize)("border",o.isMaximize)("rounded",o.isMaximize),e.xp6(1),e.Q6J("ngIf",!o.isMaximize),e.xp6(5),e.Q6J("ngForOf",o.formItem.columns),e.xp6(3),e.Q6J("ngIf",o.formControl.value.length),e.xp6(1),e.Q6J("ngIf","button"!==o.formItem.tableAddType))},dependencies:[u.sg,u.O5,B.Wj,B.Zt,B.Bh,Va],encapsulation:2}),n})();const nl=["dropdown"],ol=["unitEl"];function il(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",8),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.change(s))}),e.TgZ(1,"a",9),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw(2);e.ekj("active",t===o.unit),e.xp6(1),e.ekj("active",t===o.unit),e.xp6(1),e.Oqu(t)}}function rl(n,i){if(1&n&&(e.TgZ(0,"ul",6),e.YNc(1,il,3,5,"li",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.units)}}const sl=function(){return{standalone:!0}};let al=(()=>{class n{constructor(t,o,r,s,a,l){this.cdf=t,this.overlay=o,this.vcr=r,this.formItem=s,this.formControl=a,this.formGroup=l,this.onchange=new e.vpe,this.unit="\\",this.units=["px","%","em","rem"],this.setValue(a.value),this.formControl.valueChanges.subscribe(c=>this.setValue(c))}setValue(t){t?(this.input=t.match(/([\d.-]|auto)/)?t.match(/([\d.-]+|auto)/)[0]:"",this.unit=t.match(/(px|%|em|rem|vw|vh)$/)?t.match(/(px|%|em|rem|vw|vh)$/)[0]:"\\"):(this.input="",this.unit="\\")}switchUnit(){if(this.disabled)return;const t=this.overlay.position().flexibleConnectedTo(this.unitEl).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({positionStrategy:t,disposeOnNavigation:!0,scrollStrategy:this.overlay.scrollStrategies.block(),backdropClass:"",hasBackdrop:!0});const o=new $.UE(this.dropdown,this.vcr);this.overlayRef.attach(o),this.overlayRef.backdropClick().pipe((0,E.q)(1)).subscribe(()=>this.overlayRef&&this.overlayRef.dispose())}onwheel(t){if(document.activeElement!==t.target)return;t.preventDefault();const o=this.input?+this.input:0;Number.isNaN(o)||(this.input=o-Math.sign(t.deltaY),this.change())}change(t){void 0!==t&&(this.unit=t);const o=this.formControl;"auto"===this.input?(this.unit="\\",o.setValue(this.input),this.onchange.emit(this.input)):(o.setValue(this.input+this.unit),this.onchange.emit(this.input+this.unit)),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.cdf.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(j.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["properties-unit-input"]],viewQuery:function(t,o){if(1&t&&(e.Gf(nl,7),e.Gf(ol,7)),2&t){let r;e.iGM(r=e.CRH())&&(o.dropdown=r.first),e.iGM(r=e.CRH())&&(o.unitEl=r.first)}},inputs:{disabled:"disabled"},outputs:{onchange:"onchange"},decls:8,vars:7,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],["type","number","title","","size","1","name","","pattern","[0-9]*",1,"form-control",3,"ngModel","disabled","ngModelOptions","ngModelChange","wheel","change"],["type","hidden",3,"formControlName","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["unitEl",""],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(s){return o.input=s})("wheel",function(s){return o.onwheel(s)})("change",function(){return o.change()}),e.qZA(),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(s){return o.setValue(s)}),e.qZA(),e.TgZ(3,"button",3,4),e.NdJ("click",function(){return o.switchUnit()}),e._uU(5),e.qZA()(),e.YNc(6,rl,2,1,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngModel",o.input)("disabled",o.disabled)("ngModelOptions",e.DdM(6,sl)),e.xp6(1),e.Q6J("formControlName",o.formItem.name),e.xp6(3),e.hij(" ",o.unit," "))},dependencies:[p.Fj,p.wV,p.JJ,p.JL,p.c5,p.sg,p.u,u.sg,p.On],encapsulation:2}),n})(),ll=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:Ct,useValue:{color:Dn,border:Pa,fourNumbers:La,object:Ga,table:tl,numberHasUnit:al},multi:!0}],imports:[p.UX,ka,u.ez,p.u5,j.U8,$.eL,B._t]}),n})();var Lt=b(529),pt=b(8744);function cl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td")(7,"button",5),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.MAs(1).onConfirm(),e.KtG(a.confirm.emit(s))}),e.TgZ(8,"i",6),e._uU(9,"rotate_ccw"),e.qZA()()()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.xi3(5,2,t.timestamp,"medium"))}}let Pn=(()=>{class n{constructor(t,o){this.http=t,this.gt=o,this.confirm=new e.vpe,this.cancel=new e.vpe,this.animationDone=new e.vpe,this.data=this.http?this.http.get("getHistoryByID",{params:{id:this.gt.metadata.id||0}}):Tt.E,console.info(o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Lt.eN,8),e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-modal-history"]],outputs:{confirm:"confirm",cancel:"cancel",animationDone:"animationDone"},decls:13,vars:3,consts:function(){let i;return i="History",[["modalTitle",i,3,"cancel","animationDone"],["modal",""],[1,"table","table-striped","table-bordered","table-hover"],[1,"position-sticky","bg-body",2,"top","-1rem"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"],[1,"gt-icon"]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-modal",0,1),e.NdJ("cancel",function(){return o.cancel.emit()})("animationDone",function(){return o.animationDone.emit()}),e.TgZ(2,"table",2)(3,"thead",3)(4,"tr")(5,"th"),e._uU(6,"Type"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"timestamp"),e.qZA(),e._UZ(9,"th"),e.qZA()(),e.TgZ(10,"tbody"),e.YNc(11,cl,10,5,"tr",4),e.ALo(12,"async"),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("ngForOf",e.lcZ(12,1,o.data)))},dependencies:[u.sg,pt.O,u.Ov,u.uU],encapsulation:2}),n})();var dl=b(2076),pl=b(6063);class ul extends T.x{constructor(i=1/0,t=1/0,o=pl.l){super(),this._bufferSize=i,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,t)}next(i){const{isStopped:t,_buffer:o,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;t||(o.push(i),!r&&o.push(s.now()+a)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(i),{_infiniteTimeWindow:o,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!i.closed;a+=o?1:2)i.next(s[a]);return this._checkFinalizedStatuses(i),t}_trimBuffer(){const{_bufferSize:i,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:r}=this,s=(r?1:2)*i;if(i<1/0&&s<o.length&&o.splice(0,o.length-s),!r){const a=t.now();let l=0;for(let c=1;c<o.length&&o[c]<=a;c+=2)l=c;l&&o.splice(0,l+1)}}}var hl=b(3099);const ml=["editor"],Bn="https://cdn.jsdelivr.net/npm/monaco-editor@0.34.1/min/vs",gl=(0,xe.of)(null).pipe((0,y.U)(()=>{const n=document.createElement("script");return n.type="text/javascript",n.src=`${Bn}/loader.js`,document.body.appendChild(n),n}),(0,ee.w)(n=>(0,R.R)(n,"load")),(0,ee.w)(()=>(window.require.config({paths:{vs:Bn}}),(0,dl.D)(new Promise(n=>window.require(["vs/editor/editor.main"],n))))),function _l(n,i,t){let o,r=!1;return n&&"object"==typeof n?({bufferSize:o=1/0,windowTime:i=1/0,refCount:r=!1,scheduler:t}=n):o=n??1/0,(0,hl.B)({connector:()=>new ul(o,i,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1));let Ft=(()=>{class n{constructor(t,o){this.gt=t,this.confirm=new e.vpe,this.cancel=new e.vpe,this.animationDone=new e.vpe,this.typeMap=Object.assign({},...o)}ngAfterViewInit(){gl.subscribe(()=>{const t=monaco.editor.create(this.editor.nativeElement,{value:this.script||"",language:"typescript",lineNumbersMinChars:2,theme:this.gt.darkMode?"vs-dark":"vs",automaticLayout:!0});t.onDidChangeModelContent(()=>this.script=t.getValue()),Object.entries(this.typeMap).forEach(([o,{typeStr:r}])=>{monaco.languages.typescript.typescriptDefaults.addExtraLib(r,o)}),this.gt.nodeList.forEach(o=>{o.variableName&&monaco.languages.typescript.typescriptDefaults.addExtraLib(`declare const ${o.variableName}: ${this.typeMap[o.type].typeName}`)}),monaco.languages.typescript.typescriptDefaults.addExtraLib(`declare const _this: ${this.typeMap.nav.typeName}`)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(ce))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-modal-action-editor"]],viewQuery:function(t,o){if(1&t&&e.Gf(ml,7),2&t){let r;e.iGM(r=e.CRH())&&(o.editor=r.first)}},inputs:{script:"script"},outputs:{confirm:"confirm",cancel:"cancel",animationDone:"animationDone"},decls:3,vars:1,consts:function(){let i;return i="Action Editor",[["modalTitle",i,"modalSize","xl",3,"modalFooter","confirm","cancel","animationDone"],[1,"overflow-hidden","border",2,"height","calc(100vh - 15rem)"],["editor",""]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return o.confirm.emit(o.script)})("cancel",function(){return o.cancel.emit()})("animationDone",function(){return o.animationDone.emit()}),e._UZ(1,"div",1,2),e.qZA()),2&t&&e.Q6J("modalFooter",!0)},dependencies:[pt.O],encapsulation:2}),n})(),Zn=(()=>{class n{constructor(){this.confirm=new e.vpe,this.cancel=new e.vpe,this.animationDone=new e.vpe,this.formGroup=new p.cw({fontSize:new p.NI(16),autoSaveFrequency:new p.NI(3e3),theme:new p.NI("auto")})}ngOnInit(){this.formGroup.get("fontSize").valueChanges.subscribe(t=>{document.documentElement.style.setProperty("font-size",t+"px")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings"]],outputs:{confirm:"confirm",cancel:"cancel",animationDone:"animationDone"},decls:14,vars:1,consts:function(){let i;return i="Settings",[["modalTitle",i,3,"confirm","cancel","animationDone"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],[1,"form-label"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input"],[1,"input-group"],["type","numer","formControlName","autoSaveFrequency",1,"form-control"],[1,"input-group-text"]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return o.confirm.emit()})("cancel",function(){return o.cancel.emit()})("animationDone",function(){return o.animationDone.emit()}),e.TgZ(1,"form",1)(2,"div",2)(3,"label",3),e._uU(4,"\u81ea\u52a8\u4fdd\u5b58"),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",2)(8,"label",3),e._uU(9,"\u81ea\u52a8\u4fdd\u5b58\u9891\u7387"),e.qZA(),e.TgZ(10,"div",6),e._UZ(11,"input",7),e.TgZ(12,"span",8),e._uU(13,"ms"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.formGroup))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,pt.O],encapsulation:2}),n})();const fl={provide:Gt,useFactory:n=>i=>{i.addEventListener("changeactionstart",t=>{t.preventDefault();const o=n.create({hasBackdrop:!0,disposeOnNavigation:!0}),r=o.attach(new $.C5(Ft));r.instance.script=t.action.script,(0,G.T)(r.instance.confirm.pipe((0,v.b)(s=>{i.dispatchEvent(new Yt(t.action,s))})),r.instance.cancel).pipe((0,v.b)(()=>o.detachBackdrop()),(0,ee.w)(()=>r.instance.animationDone),(0,E.q)(1)).subscribe(()=>o.dispose())}),i.addEventListener("editexpressionstart",t=>{t.preventDefault();const o=n.create({hasBackdrop:!0,disposeOnNavigation:!0}),r=o.attach(new $.C5(Ft));r.instance.script=t.expression,(0,G.T)(r.instance.confirm.pipe((0,v.b)(s=>i.dispatchEvent(new Jn(s)))),r.instance.cancel).pipe((0,v.b)(()=>o.detachBackdrop()),(0,ee.w)(()=>r.instance.animationDone),(0,E.q)(1)).subscribe(()=>o.dispose())})},deps:[j.aV]};function Cl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("mouseenter",function(){const s=e.CHM(t).index,a=e.oxw().index,l=e.oxw();return e.KtG(l.current=[a,s])}),e.qZA()}if(2&n){const t=i.index,o=e.oxw().index,r=e.oxw();e.ekj("bg-body-tertiary",o<=r.current[0]&&t<=r.current[1])}}function bl(n,i){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,Cl,1,2,"div",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rows)}}let vl=(()=>{class n{constructor(){this.rows=Array(10).fill(0),this.current=[0,0],this.modalClose=new e.vpe}onclick(){this.modalClose.emit(this.current)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["gt-create-table"]],hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.onclick()})},outputs:{modalClose:"modalClose"},decls:2,vars:1,consts:[[1,"p-2","bg-body","rounded","border","shadow"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["class","table-cell border",3,"bg-body-tertiary","mouseenter",4,"ngFor","ngForOf"],[1,"table-cell","border",3,"mouseenter"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,bl,2,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.rows))},dependencies:[u.sg],styles:[".table-cell[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;margin:.15rem}"]}),n})();const yl=[{provide:k,useFactory:(n,i)=>[{title:"Undo",icon:"rotate_ccw",get disabled(){return!n.history.get().length},onclick:()=>{n.undo()}},{title:"Redo",icon:"rotate_cw",get disabled(){return!n.undoHistory.get().length},onclick:()=>{n.redo()}},{title:"Reference Line",icon:"dashed_rect",get active(){return n.showReferenceLine},onclick(){n.showReferenceLine=!n.showReferenceLine}},{title:"Preview",icon:"preview",onclick:()=>{n.events.TOP_BUTTON_CLICK.emit({button:{name:"preview"},data:{config:n.exportString(),components:n.remoteCustomComponent.map(t=>JSON.stringify(t.export()))}})}},{title:"Save",icon:"save",onclick:()=>{n.events.SAVE.emit({config:n.exportString(),settings:n.exportSettings()})}},{title:"History",icon:"history",onclick:()=>{const t=i.create({hasBackdrop:!0,disposeOnNavigation:!0}),o=t.attach(new $.C5(Pn)).instance;(0,G.T)(o.confirm.pipe((0,v.b)(r=>n.events.CUSTOM.emit({type:"rollback",callback(s){n.init(s.config,s.components),n.initSettings({name:s.title,description:s.description,...s.settings})},data:r}))),o.cancel).pipe((0,v.b)(()=>t.detachBackdrop()),(0,ee.w)(()=>o.animationDone),(0,E.q)(1)).subscribe(()=>t.dispose())}},{title:"Settings",icon:"tools",onclick:()=>{const t=i.create({hasBackdrop:!0,disposeOnNavigation:!0}),o=t.attach(new $.C5(Zn)).instance;(0,G.T)(o.confirm,o.cancel).pipe((0,v.b)(()=>t.detachBackdrop()),(0,ee.w)(()=>o.animationDone),(0,E.q)(1)).subscribe(()=>t.dispose())}}],deps:[q,j.aV]},{provide:O,useFactory:n=>(i,t)=>[{label:"Move Left",desc:"\u2318\u2190",disabled:!(t.parent&&t.parent.children.indexOf(t)>0),onclick:()=>i.moveNode(t,t.parent,t.parent.children.indexOf(t)-1)},{label:"Move Right",desc:"\u2318\u2192",disabled:!(t.parent&&t.parent.children.indexOf(t)<t.parent.children.length-1),onclick:()=>i.moveNode(t,t.parent,t.parent.children.indexOf(t)+1)},{label:"Move Up",desc:"\u2318\u2191\ufe0f",disabled:!(t.parent&&t.parent.parent),onclick:()=>i.moveNode(t,t.parent.parent,t.parent.parent.children.indexOf(t.parent)+1)},{divider:!0},{label:"Copy",desc:"\u2318C",disabled:!i.selected.length||!i.selected[0].core.canCopy,onclick:()=>i.copyNode()},{label:"Paste",desc:"\u2318V",disabled:1!==i.selected.length||!i.copiedNode.length,onclick:()=>{i.pasteNode(t)}},{label:"Cut",desc:"Todo",disabled:!0},{label:"Remove",desc:"DEL",disabled:!i.selected.length||!i.selected[0].core.canDelete,onclick:()=>i.removeNode()},{divider:!0},{label:"Copy Style",desc:"\u2318\u21e7C",disabled:1!==i.selected.length||!i.selected[0].core.canCopyStyle,onclick:()=>i.copyStyle()},{label:"Paste Style",desc:"\u2318\u21e7V",disabled:!i.copiedStyle||!i.selected.length,onclick:()=>i.pasteStyle()},{divider:!0},{label:"Generate Grid",disabled:0===i.selected.filter(({core:o})=>o.canHasChild).length,onclick:(o,r)=>{const s=n.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:n.position().flexibleConnectedTo({x:r.clientX,y:r.clientY}).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])}),a=new $.C5(vl),l=s.attach(a);(0,G.T)(s.backdropClick(),l.instance.modalClose.pipe((0,v.b)(([c,d])=>{i.selected.forEach(h=>{i.addNode("division",h,-1,{type:"division",style:{},children:new Array(c+1).fill({type:"division",style:{display:"flex",flexDirection:"row",width:"100%"},children:new Array(d+1).fill({type:"division",style:{width:100/d+"%"}})})})})}))).pipe((0,E.q)(1),(0,v.b)(()=>s.dispose())).subscribe()}}],deps:[j.aV]},fl];let xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:yl,imports:[u.ez,p.u5,B._t,Sn.rt,ra,p.UX,Nn.l,ll]}),n})();var El=b(4254),$e=b(9847),Se=b(5425),Nl=b(7032);let Sl=(()=>{class n{constructor(){this.modalDismiss=new e.vpe,this.animationDone=new e.vpe}log({type:t,message:o,data:r}){switch(t){case"info":(0,Se.c)("info","[GHOSTEN  INFO]: "+o+" %O",r);break;case"error":(0,Se.c)("error","[GHOSTEN ERROR]: "+o,r);break;case"warning":(0,Se.c)("warn","[GHOSTEN WARNING]: "+o,r)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gt-render"]],inputs:{data:"data"},outputs:{modalDismiss:"modalDismiss",animationDone:"animationDone"},decls:2,vars:1,consts:function(){let i;return i="Preview",[["modalTitle",i,"modalSize","xl",3,"cancel","animationDone"],[3,"data","log"]]},template:function(t,o){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("cancel",function(){return o.modalDismiss.emit()})("animationDone",function(){return o.animationDone.emit()}),e.TgZ(1,"gt-renderer",1),e.NdJ("log",function(s){return o.log(s)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("data",o.data))},dependencies:[Nl.O,pt.O],encapsulation:2}),n})();var wl=b(3498);let Ml=(()=>{class n{constructor(t,o,r,s){this.overlay=t,this.http=o,this.route=r,this.toast=s}save(t,o){return this.http.post("save",{config:t.config,settings:t.settings,id:this.route.snapshot.params.id,type:o}).subscribe(()=>this.toast.show({type:"primary",message:"auto"===o?$e.Cz:"manual"===o?$e.tz:$e.YK,position:"top_center"}))}onEvent(t){switch(t.type){case"TOP_BUTTON_CLICK":if("preview"===t.data.button.name){const o=this.overlay.create({hasBackdrop:!0,width:"90%",maxHeight:"90%",disposeOnNavigation:!0,panelClass:"",positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically()}),r=o.attach(new $.C5(Sl));r.instance.data=t.data.data,r.instance.modalDismiss.pipe((0,v.b)(()=>o.detachBackdrop()),(0,ee.w)(()=>r.instance.animationDone),(0,E.q)(1)).subscribe(()=>o.dispose())}break;case"SAVE":this.save(t.data,"manual");break;case"AUTO_SAVE":this.save(t.data,"auto");break;case"SAVE_COMPONENT":this.http.post("saveComponent",t.data).subscribe(()=>this.toast.show({type:"primary",message:$e.bW,position:"top_center"}));break;case"REMOVE_COMPONENT":this.http.post("removeComponent",t.data).subscribe(()=>this.toast.show({type:"primary",message:$e.dy,position:"top_center"}));break;case"CUSTOM":"rollback"===t.data.type&&this.http.get("getLatestConfigByID",{params:{id:this.route.snapshot.params.id,timestamp:t.data.data.timestamp}}).pipe((0,v.b)(o=>this.save(o,"rollback "+o.timestamp))).subscribe(o=>t.data.callback(o))}(0,Se.c)("info","[GHOSTEN EVENT]",t.type,t.data)}log({type:t,message:o,data:r}){switch(t){case"info":r.metadata.id=this.route.snapshot.data.data.id,(0,Se.c)("info","[GHOSTEN  INFO]",o,r);break;case"error":(0,Se.c)("error","[GHOSTEN ERROR]",o,r);break;case"warning":(0,Se.c)("warn","[GHOSTEN WARNING]",o,r)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.aV),e.Y36(Lt.eN),e.Y36(_e.gz),e.Y36(wl.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gt-edit"]],decls:1,vars:1,consts:[[3,"data","event","log"]],template:function(t,o){1&t&&(e.TgZ(0,"gt-editor",0),e.NdJ("event",function(s){return o.onEvent(s)})("log",function(s){return o.log(s)}),e.qZA()),2&t&&e.Q6J("data",o.route.snapshot.data.data)},dependencies:[yr],encapsulation:2}),n})(),Ln=(()=>{class n{constructor(t,o){this.http=t,this.router=o}resolve(t){return this.http.get("getLatestConfigByID",{params:{id:t.params.id}}).pipe((0,v.b)(o=>{o||this.router.navigate(["404"]).catch()}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Lt.eN),e.LFG(_e.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Ln,{provide:gt,useFactory:i=>({title:"GHOSTEN",href:"/",src:"assets/icons/192.png",alt:"Ghosten Logo",click(){i.navigateByUrl("/").then()}}),deps:[_e.F0]},{provide:ft,useValue:()=>document.documentElement.dataset.bsTheme}],imports:[ke,El.Bp,na,oa.h3,xl,Nn.l,_e.Bz.forChild([{path:"",redirectTo:"/404",pathMatch:"full"},{path:":id",component:Ml,resolve:{data:Ln}}])]}),n})()},7521:(Ie,De,b)=>{var _e;!function(ut,e,we){if(ut){for(var Te,A={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Qe={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ze={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},je={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},se=1;se<20;++se)A[111+se]="f"+se;for(se=0;se<=9;++se)A[se+96]=se.toString();E.prototype.bind=function(_,C,N){var J=this;return J._bindMultiple.call(J,_=_ instanceof Array?_:[_],C,N),J},E.prototype.unbind=function(_,C){return this.bind.call(this,_,function(){},C)},E.prototype.trigger=function(_,C){var N=this;return N._directMap[_+":"+C]&&N._directMap[_+":"+C]({},_),N},E.prototype.reset=function(){var _=this;return _._callbacks={},_._directMap={},_},E.prototype.stopCallback=function(_,C){if((" "+C.className+" ").indexOf(" mousetrap ")>-1||v(C,this.target))return!1;if("composedPath"in _&&"function"==typeof _.composedPath){var J=_.composedPath()[0];J!==_.target&&(C=J)}return"INPUT"==C.tagName||"SELECT"==C.tagName||"TEXTAREA"==C.tagName||C.isContentEditable},E.prototype.handleKey=function(){var _=this;return _._handleKey.apply(_,arguments)},E.addKeycodes=function(_){for(var C in _)_.hasOwnProperty(C)&&(A[C]=_[C]);Te=null},E.init=function(){var _=E(e);for(var C in _)"_"!==C.charAt(0)&&(E[C]=function(N){return function(){return _[N].apply(_,arguments)}}(C))},E.init(),ut.Mousetrap=E,Ie.exports&&(Ie.exports=E),void 0!==(_e=function(){return E}.call(De,b,De,Ie))&&(Ie.exports=_e)}function me(_,C,N){_.addEventListener?_.addEventListener(C,N,!1):_.attachEvent("on"+C,N)}function u(_){if("keypress"==_.type){var C=String.fromCharCode(_.which);return _.shiftKey||(C=C.toLowerCase()),C}return A[_.which]?A[_.which]:Qe[_.which]?Qe[_.which]:String.fromCharCode(_.which).toLowerCase()}function ht(_,C){return _.sort().join(",")===C.sort().join(",")}function Re(_){return"shift"==_||"ctrl"==_||"alt"==_||"meta"==_}function $(_,C,N){return N||(N=function mt(){if(!Te)for(var _ in Te={},A)_>95&&_<112||A.hasOwnProperty(_)&&(Te[A[_]]=_);return Te}()[_]?"keydown":"keypress"),"keypress"==N&&C.length&&(N="keydown"),N}function G(_,C){var N,J,X,ue=[];for(N=function D(_){return"+"===_?["+"]:(_=_.replace(/\+{2}/g,"+plus")).split("+")}(_),X=0;X<N.length;++X)je[J=N[X]]&&(J=je[J]),C&&"keypress"!=C&&ze[J]&&(J=ze[J],ue.push("shift")),Re(J)&&ue.push(J);return{key:J,modifiers:ue,action:C=$(J,ue,C)}}function v(_,C){return null!==_&&_!==e&&(_===C||v(_.parentNode,C))}function E(_){var C=this;if(_=_||e,!(C instanceof E))return new E(_);C.target=_,C._callbacks={},C._directMap={};var J,N={},X=!1,ue=!1,Pe=!1;function Be(g){g=g||{};var O,M=!1;for(O in N)g[O]?M=!0:N[O]=0;M||(Pe=!1)}function Ke(g,M,O,S,w,K){var k,P,ce=[],z=O.type;if(!C._callbacks[g])return[];for("keyup"==z&&Re(g)&&(M=[g]),k=0;k<C._callbacks[g].length;++k)P=C._callbacks[g][k],!S&&P.seq&&N[P.seq]!=P.level||z!=P.action||("keypress"!=z||O.metaKey||O.ctrlKey)&&!ht(M,P.modifiers)||((!S&&P.combo==w||S&&P.seq==S&&P.level==K)&&C._callbacks[g].splice(k,1),ce.push(P));return ce}function Ze(g,M,O,S){C.stopCallback(M,M.target||M.srcElement,O,S)||!1===g(M,O)&&(function Xe(_){_.preventDefault?_.preventDefault():_.returnValue=!1}(M),function _t(_){_.stopPropagation?_.stopPropagation():_.cancelBubble=!0}(M))}function ye(g){"number"!=typeof g.which&&(g.which=g.keyCode);var M=u(g);if(M){if("keyup"==g.type&&X===M)return void(X=!1);C.handleKey(M,function j(_){var C=[];return _.shiftKey&&C.push("shift"),_.altKey&&C.push("alt"),_.ctrlKey&&C.push("ctrl"),_.metaKey&&C.push("meta"),C}(g),g)}}function y(g,M,O,S,w){C._directMap[g+":"+O]=M;var k,K=(g=g.replace(/\s+/g," ")).split(" ");K.length>1?function T(g,M,O,S){function w(z){return function(){Pe=z,++N[g],function We(){clearTimeout(J),J=setTimeout(Be,1e3)}()}}function K(z){Ze(O,z,g),"keyup"!==S&&(X=u(z)),setTimeout(Be,10)}N[g]=0;for(var k=0;k<M.length;++k){var ce=k+1===M.length?K:w(S||G(M[k+1]).action);y(M[k],ce,S,g,k)}}(g,K,M,O):(k=G(g,O),C._callbacks[k.key]=C._callbacks[k.key]||[],Ke(k.key,k.modifiers,{type:k.action},S,g,w),C._callbacks[k.key][S?"unshift":"push"]({callback:M,modifiers:k.modifiers,action:k.action,seq:S,level:w,combo:g}))}C._handleKey=function(g,M,O){var w,S=Ke(g,M,O),K={},k=0,P=!1;for(w=0;w<S.length;++w)S[w].seq&&(k=Math.max(k,S[w].level));for(w=0;w<S.length;++w)if(S[w].seq){if(S[w].level!=k)continue;P=!0,K[S[w].seq]=1,Ze(S[w].callback,O,S[w].combo,S[w].seq)}else P||Ze(S[w].callback,O,S[w].combo);var ce="keypress"==O.type&&ue;O.type==Pe&&!Re(g)&&!ce&&Be(K),ue=P&&"keydown"==O.type},C._bindMultiple=function(g,M,O){for(var S=0;S<g.length;++S)y(g[S],M,O)},me(_,"keypress",ye),me(_,"keydown",ye),me(_,"keyup",ye)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},6198:()=>{},9812:()=>{}}]);