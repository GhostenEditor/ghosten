(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[919],{919:(we,Oe,b)=>{"use strict";b.r(Oe),b.d(Oe,{GtModule:()=>sl});var ue=b(5453),e=(b(6198),b(4650)),Ne=b(8580),E=b(7340);const Ve=(0,E.X$)("bodyExpansion",[(0,E.SB)("collapsed, void",(0,E.oB)({height:"0px",visibility:"hidden"})),(0,E.SB)("expanded",(0,E.oB)({height:"*",visibility:"visible"})),(0,E.eR)("expanded <=> collapsed, void => collapsed",(0,E.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),Qe=(0,E.X$)("slideFadeIn",[(0,E.SB)("void",(0,E.oB)({transform:"matrix(.98,0,0,.98,0,5)",opacity:"0"})),(0,E.SB)("*",(0,E.oB)({transform:"matrix(1,0,0,1,0,0)"})),(0,E.eR)("* <=> void",(0,E.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),ze=(0,E.X$)("fade",[(0,E.SB)("in",(0,E.oB)({opacity:1})),(0,E.eR)("void => *",[(0,E.oB)({opacity:0}),(0,E.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)")])]),ve=[[["",8,"accordion-header-buttons"]],"*"],oe=[".accordion-header-buttons","*"];let _e=(()=>{class o{constructor(){this.opened=new e.vpe,this.closed=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion-item"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ne.dD,5),2&t){let r;e.iGM(r=e.CRH())&&(n.accordion=r.first)}},hostAttrs:[1,"accordion-item","d-block"],inputs:{cardTitle:"cardTitle",expanded:"expanded"},outputs:{opened:"opened",closed:"closed"},ngContentSelectors:oe,decls:10,vars:6,consts:[["cdkAccordionItem","",3,"expanded","opened","closed"],["accordionItem","cdkAccordionItem"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse",1,"accordion-button",3,"click"],[1,"flex-grow-1"],[1,"accordion-collapse",2,"overflow","hidden"],[1,"accordion-body"]],template:function(t,n){if(1&t){const r=e.EpF();e.F$t(ve),e.ynx(0,0,1),e.NdJ("opened",function(){return n.opened.emit()})("closed",function(){return n.closed.emit()}),e.TgZ(2,"h2",2)(3,"button",3),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(1);return e.KtG(a.toggle())}),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.Hsn(6),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.Hsn(9,1),e.qZA()(),e.BQk()}if(2&t){const r=e.MAs(1);e.Q6J("expanded",n.expanded),e.xp6(3),e.ekj("collapsed",!r.expanded),e.uIk("aria-expanded",r.expanded),e.xp6(2),e.Oqu(n.cardTitle),e.xp6(2),e.Q6J("@bodyExpansion",r.expanded?"expanded":"collapsed")}},dependencies:[Ne.dD],encapsulation:2,data:{animation:[Ve]}}),o})();var u=b(6895);let pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Ne.XD]}),o})();var z=b(8184);let je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,z.U8]}),o})();function ut(o,i){if(1&o&&(e.TgZ(0,"i",4),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.icon)}}function ke(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"button",2),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.itemClick.emit(s))}),e.YNc(2,ut,2,1,"i",3),e._uU(3),e.qZA()()}if(2&o){const t=i.$implicit;e.xp6(1),e.ekj("active",t.active),e.xp6(1),e.Q6J("ngIf",t.icon),e.xp6(1),e.hij("",t.text," ")}}let _t=(()=>{class o{constructor(){this.itemClick=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-dropdown"]],inputs:{items:"items"},outputs:{itemClick:"itemClick"},decls:2,vars:2,consts:[[1,"dropdown-menu","d-block","position-static","w-100","shadow"],[4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"click"],["class","gt-icon me-3",4,"ngIf"],[1,"gt-icon","me-3"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,ke,4,4,"li",1),e.qZA()),2&t&&(e.Q6J("@slideFadeIn",void 0),e.xp6(1),e.Q6J("ngForOf",n.items))},dependencies:[u.sg,u.O5],encapsulation:2,data:{animation:[Qe]}}),o})();var $=b(4080),I=b(727),L=b(6451),v=b(8505),N=b(5698);let h=(()=>{class o{constructor(t,n){this.elementRef=t,this.overlay=n,this.itemClick=new e.vpe,this.overlayRef=null,this.overlaySubscription=I.w0.EMPTY}click(){this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"bottom",offsetY:6},{overlayX:"start",overlayY:"bottom",originX:"start",originY:"top",offsetY:-6},{overlayX:"end",overlayY:"bottom",originX:"end",originY:"top",offsetY:-6},{overlayX:"end",overlayY:"top",originX:"end",originY:"bottom",offsetY:6}])});const t=this.overlayRef.attach(new $.C5(_t)).instance;t.items=this.items,this.overlaySubscription=(0,L.T)(this.overlayRef.backdropClick(),t.itemClick.pipe((0,v.b)(n=>this.itemClick.emit(n)))).pipe((0,N.q)(1)).subscribe(()=>this.closeOverlay())}closeOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlaySubscription.unsubscribe(),this.overlayRef=null,this.overlaySubscription=I.w0.EMPTY)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(z.aV))},o.\u0275dir=e.lG2({type:o,selectors:[["","gt-dropdown",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.click()})},inputs:{items:"items"},outputs:{itemClick:"itemClick"}}),o})();var C=b(445);let S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.vT]}),o})();var F=b(8690),j=b(8372);function Te(o,i,t,n=1){switch(o.beginPath(),i){case"long":o.moveTo(t,0),o.lineTo(t,10*n),o.globalAlpha=1;break;case"medium":o.moveTo(t,0),o.lineTo(t,8*n),o.globalAlpha=.6;break;case"short":o.moveTo(t,0),o.lineTo(t,5*n),o.globalAlpha=.3}o.closePath(),o.stroke()}function Ke(o,i,t,n,r=1){const s=Math.ceil(5/n),a=[Math.floor(-t/s/n)*s,Math.ceil((i-t)/s/n)*s];for(let l=a[0];l<=a[1];l+=s){const c=l*n+t;l%(20*s)==0?(Te(o,"long",c,r),o.fillText(""+l,c+5,20*r)):l%(10*s)==0?Te(o,"medium",c,r):l%s==0&&Te(o,"short",c,r)}}var T=b(7579),y=b(4004),g=b(1013);class w{constructor(){this.selected=[],this.rightTabIndex=0,this.configAccordionExpanded={},this.elementAccordionExpanded={}}init(i){this.name=i.name,this.description=i.description,this.selected=i.selectedNodes||[],this.sidebarPosition=i.sidebarPosition,this.configAccordionExpanded=i.configAccordionExpanded||{},this.elementAccordionExpanded=i.elementAccordionExpanded||{},this.currentBoardName=i.currentBoardName}activateRightTab(i){this.rightTabIndex=i}changeCurrentBoard(i){this.currentBoardName=i.name}changeConfigAccordionExpanded(i,t){this.configAccordionExpanded[i]=t}changeElementAccordionExpanded(i,t){this.elementAccordionExpanded[i]=t}export(){return{name:this.name,description:this.description,currentBoardName:this.currentBoardName,elementAccordionExpanded:this.elementAccordionExpanded,configAccordionExpanded:this.configAccordionExpanded,selectedNodes:this.selected,sidebarPosition:this.sidebarPosition}}}const k=new e.OlP("Gt ContextMenu"),M=new e.OlP("gt-default-options"),O=new e.OlP("gt-element-lists"),K=new e.OlP("gt-auth-config"),A=new e.OlP("Top Bar Buttons"),R=new e.OlP("Ghosten Edit Component Map"),X=new e.OlP("Ghosten Template Map"),ie=new e.OlP("Ghosten Internal Element Lists"),re=new e.OlP("Gt Node Default Config"),Re=new e.OlP("Ghosten Editor Brand"),ht=new e.OlP("Ghosten Editor Theme Color"),mt=new e.OlP("Ghosten Editor Config Form Map"),Lt=new e.OlP("Ghosten Editor Event Listener"),gt=new e.OlP("Ghosten Node \u914d\u7f6e\u5217\u8868"),Ft=new e.OlP("Ghosten Node \u9ed8\u8ba4\u5c5e\u6027\u914d\u7f6e");class Gt{constructor(){this.historyMaxLength=10,this.history=[]}get(){return this.history}push(i){this.history.length>=this.historyMaxLength&&(this.history=this.history.slice(this.history.length-this.historyMaxLength-1)),this.history.push(i)}pop(){return this.history.pop()}clear(){this.history=[]}}let q=(()=>{class o extends g.Gt{constructor(t,n,r){super(),this.events=t,this.themeColor=n,this.defaultConfigMap=r,this.mode="edit",this.showReferenceLine=!0,this.copiedNode=[],this.selected=[],this.history=new Gt,this.undoHistory=new Gt,this.settings=new w,this.events.onEvent.subscribe(s=>{switch(s.type){case"CHANGE_PROPERTY":case"INSERT_NODE":case"MOVE_NODE":case"REMOVE_NODE":this.history.push(s),this.undoHistory.clear()}}),(0,L.T)(this.events.CHANGE_STYLE,this.events.CHANGE_PROPERTY,this.events.CHANGE_ACTION,this.events.CHANGE_VALIDATOR,this.events.CHANGE_RIGHTS,this.events.PASTE_STYLE,this.events.MOVE_NODE,this.events.REMOVE_NODE,this.events.INSERT_NODE,this.events.UNDO,this.events.REDO).pipe((0,j.b)(3e4)).subscribe(()=>this.events.AUTO_SAVE.next({config:this.exportString(),settings:this.settings.export()})),this.events.CHANGE_SELECT.subscribe(s=>this.settings.selected=s.map(({id:a})=>a))}get darkMode(){return"dark"===this.themeColor()}initSettings(t){this.settings.init(t),this.settings.selected.forEach(n=>{const r=this.getNodeById(n);r&&this.changeSelect(r,!0)})}undo(){const t=this.history.get();if(t.length){const n=t.pop();if("CHANGE_PROPERTY"===n.type){const{name:r,gtNode:s,previousValue:a,value:l}=n.data;s.property[r]=a,this.undoHistory.push({type:n.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.UNDO.next(n)}if("INSERT_NODE"===n.type){const{gtNode:r,parent:s,index:a=s.children.length-1}=n.data;s.children.splice(a,1),s.componentRef.instance.remove(a),this._removeGtNode(r),this.undoHistory.push(n),this.events.UNDO.next(n)}if("REMOVE_NODE"===n.type&&(this.undoHistory.push(n),n.data.forEach(({gtNode:r,parent:s,index:a})=>{s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a)}),this.events.UNDO.next(n)),"MOVE_NODE"===n.type){this.undoHistory.push(n);const{gtNode:r,previousParent:s,previousIndex:a}=n.data;r.setParent(s,a),this.events.UNDO.next(n)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\uff01",data:null})}redo(){const t=this.undoHistory.get();if(t.length){const n=t.pop();if("CHANGE_PROPERTY"===n.type){const{name:r,gtNode:s,previousValue:a,value:l}=n.data;s.property[r]=a,this.history.push({type:n.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.REDO.next(n)}if("INSERT_NODE"===n.type){this.history.push(n);const{gtNode:r,parent:s,index:a}=n.data;s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a),this.events.REDO.next(n)}if("MOVE_NODE"===n.type){this.history.push(n);const{gtNode:r,parent:s,index:a}=n.data;r.setParent(s,a),this.events.REDO.next(n)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u91cd\u505a\u7684\u64cd\u4f5c\uff01",data:null})}changeSelect(t,n){if(t){if(!this.currentBoard.nodeList.has(t.id))return;this.selected.includes(t)?n?this.selected.splice(this.selected.indexOf(t),1):this.selected=1===this.selected.length?[]:[t]:n?this.selected.push(t):this.selected=[t]}else this.selected=[];this.events.CHANGE_SELECT.next(this.selected)}addBoard(){const t=new g.$l({name:"Modal",type:"modal",url:"",id:(0,g.gj)(),size:"xl",events:null,description:"",noFooter:!0});return this.boards.push(t),this.pages.push(t),t.gt=this.createGtNode({type:"root"},void 0,void 0,void 0,t.id),this.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t),t}addCustomComponent(){const t=new g.$l({type:"cc",id:(0,g.gj)(),name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",events:null,description:"",noFooter:!0,size:null,url:""});this.customComponent.push(t),this.boards.push(t),t.gt=this.createGtNode({type:"template"},void 0,void 0,void 0,t.id),t.gt.isTemplate=!0,this.setCurrentBoard(t)}addRemoteCustomComponent(){const t=new g.$l({type:"rcc",id:(0,g.gj)(),name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",events:null,description:"",noFooter:!0,size:null,url:""});this.remoteCustomComponent.push(t),this.boards.push(t),t.gt=this.createGtNode({type:"template"},void 0,void 0,void 0,t.id),t.gt.isTemplate=!0,this.setCurrentBoard(t)}removeBoard(t){const n=this.boards.indexOf(t),r=this.boards.indexOf(this.currentBoard);switch(this._removeGtNode(t.gt),this.boards.splice(n,1),t.type){case"main":case"modal":this.pages.splice(this.pages.indexOf(t),1);break;case"cc":this.customComponent.splice(this.customComponent.indexOf(t),1);break;case"rcc":this.remoteCustomComponent.splice(this.remoteCustomComponent.indexOf(t),1)}n===r&&this.setCurrentBoard(this.boards[n-1]||this.boards[0])}addNode(t,n,r=-1,s={},a){const l=this.createGtNode({type:t,outletID:a,...s},n,void 0,r);return l?(n.inheritList.forEach(c=>{this.createGtNode({type:l.type,template:l.id},c,void 0,r)}),this.selected=[l],this.events.INSERT_NODE.next({gtNode:l,parent:n,index:r}),this.events.CHANGE_SELECT.next(this.selected),l):null}moveNode(t,n,r,s){if(t.parent===n&&t.outletID===s&&(void 0===r?t.parent.children.indexOf(t)===t.parent.children.length-1:t.parent.children.indexOf(t)===r))return;const a=t.parent,l=a.children.indexOf(t);t.setParent(n,r,s),t.inheritList.forEach((c,d)=>{c.setParent(n.inheritList[d],r,s)}),this.events.MOVE_NODE.next({gtNode:t,parent:n,index:r,previousParent:a,previousIndex:-1===l?void 0:l})}removeNode(){const t=[];if(!this.selected||this.selected.some(n=>"root"===n.type))return this.log.next({type:"error",message:"\u65e0\u6cd5\u5220\u9664",data:null});this.selected.forEach(n=>{n.template&&!n.isTemplateRoot&&this.log.next({type:"warning",message:"\u8be5\u8282\u70b9\u7531\u6a21\u677f\u751f\u6210\uff0c\u65e0\u6cd5\u5220\u9664"}),n.template&&n.isTemplateRoot&&n.template.inheritList&&n.template.inheritList.splice(n.template.inheritList.indexOf(n),1);const r=n.parent.children.indexOf(n);this._removeGtNode(n),t.push({gtNode:n,parent:n.parent,index:r})}),this.selected=[],this.events.REMOVE_NODE.next(t),this.events.CHANGE_SELECT.next(this.selected)}addCustomNode(t,n,r=-1){const s=this.boards.filter(l=>l.id===t)[0].gt,a=this.createGtNode({type:"template",template:s.id},n,void 0,r);if(a)return this.events.INSERT_NODE.next({gtNode:a,parent:n,index:r}),this.events.CHANGE_SELECT.next(this.selected),a}setCurrentBoard(t){super.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t)}copyStyle(){1===this.selected.length?(this.copiedStyle=this.selected[0].style.export(),this.events.COPY_STYLE.next(this.copiedStyle)):this.log.next({type:"error",message:"\u65e0\u6cd5\u590d\u5236\u6837\u5f0f\uff0c\u56e0\u4e3a\u5f53\u524d\u9009\u4e2d\u4e86\u591a\u4e2a\u8282\u70b9"})}pasteStyle(){const t=this.copiedStyle;this.selected.forEach(({core:n,style:r})=>n.canPasteStyle&&r.setStyles(t)),this.events.PASTE_STYLE.next({pastedNodes:this.selected,pastedStyle:this.copiedStyle})}copyNode(){this.copiedNode=this.selected.map(({id:t})=>t)}pasteNode(t){const n=a=>{const l=a.export();if(a.isTemplateRoot)for(const c in l.slot)l.slot[c].forEach(d=>delete d.id);else l.children=a.children.map(c=>n(c));return delete l.id,l};let s,r=null;if(t.core.canHasChild)r=t;else for(;t.parent;){if(t.parent.core.canHasChild&&!t.parent.template){r=t.parent,s=t.parent.children.indexOf(t);break}t=t.parent}!r||this.copiedNode.forEach(a=>{const l=this.createGtNode(n(this.getNodeById(a)),r,void 0,typeof s>"u"?s:++s);this.events.INSERT_NODE.next({parent:r,gtNode:l,index:s})})}removeCustomComponent(t){this.selected=[t.gt],this.removeNode(),this.customComponent.splice(this.customComponent.indexOf(t),1)}_removeGtNode(t){const n=this.getBoardById(t.boardId);[...t.inheritList].forEach(r=>this._removeGtNode(r)),t.template&&t.template.inheritList.splice(t.template.inheritList.indexOf(t),1),t.remove(),n.nodeList.delete(t.id),this.nodeList.delete(t.id),[...t.children].forEach(r=>this._removeGtNode(r))}exportSettings(){return this.settings.export()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(W),e.LFG(ht),e.LFG(Ft))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();class Rn extends EventTarget{addEventListener(i,t,n){super.addEventListener(i,t,n)}}class Pn extends Event{constructor(i){super("changeactionstart",{cancelable:!0,bubbles:!1}),this.action=i}}class Jt extends Event{constructor(i,t){super("changeactionend",{cancelable:!0,bubbles:!1}),this.action=i,this.script=t}}class ft extends Event{constructor(i){super("editexpressionstart",{cancelable:!0,bubbles:!1}),this.expression=i}}class Bn extends Event{constructor(i){super("editexpressionend",{cancelable:!0,bubbles:!1}),this.expression=i}}let W=(()=>{class o{constructor(){this.target=new Rn,this.CHANGE_SELECT=new T.x,this.CHANGE_STYLE=new T.x,this.CHANGE_PROPERTY=new T.x,this.CHANGE_ACTION=new T.x,this.CHANGE_RIGHTS=new T.x,this.CHANGE_VALIDATOR=new T.x,this.CHANGE_BOARD=new T.x,this.COPY_STYLE=new T.x,this.PASTE_STYLE=new T.x,this.RENDER_START=new T.x,this.RENDER_STOP=new T.x,this.CUSTOM_EDIT_START=new T.x,this.CUSTOM_EDIT_STOP=new T.x,this.WINDOW_CREATE=new T.x,this.WINDOW_MOVE=new T.x,this.WINDOW_DESTROY=new T.x,this.INSERT_NODE=new T.x,this.REMOVE_NODE=new T.x,this.MOVE_NODE=new T.x,this.UNDO=new T.x,this.REDO=new T.x,this.UPDATE_TEMPLATE=new T.x,this.BLACKBOARD_RESIZE=new T.x,this.AUTO_SAVE=new T.x,this.SAVE=new e.vpe,this.SAVE_COMPONENT=new e.vpe,this.REMOVE_COMPONENT=new e.vpe,this.TOP_BUTTON_CLICK=new e.vpe,this.CUSTOM=new e.vpe,this.onEvent=(0,L.T)(this.CHANGE_SELECT.pipe((0,y.U)(t=>({type:"CHANGE_SELECT",data:t}))),this.CHANGE_STYLE.pipe((0,y.U)(t=>({type:"CHANGE_STYLE",data:t}))),this.CHANGE_PROPERTY.pipe((0,y.U)(t=>({type:"CHANGE_PROPERTY",data:t}))),this.CHANGE_ACTION.pipe((0,y.U)(t=>({type:"CHANGE_ACTION",data:t}))),this.CHANGE_RIGHTS.pipe((0,y.U)(t=>({type:"CHANGE_RIGHTS",data:t}))),this.CHANGE_VALIDATOR.pipe((0,y.U)(t=>({type:"CHANGE_VALIDATOR",data:t}))),this.CHANGE_BOARD.pipe((0,y.U)(t=>({type:"CHANGE_BOARD",data:t}))),this.COPY_STYLE.pipe((0,y.U)(t=>({type:"COPY_STYLE",data:t}))),this.PASTE_STYLE.pipe((0,y.U)(t=>({type:"PASTE_STYLE",data:t}))),this.RENDER_START.pipe((0,y.U)(t=>({type:"RENDER_START",data:t}))),this.RENDER_STOP.pipe((0,y.U)(t=>({type:"RENDER_STOP",data:t}))),this.CUSTOM_EDIT_START.pipe((0,y.U)(t=>({type:"CUSTOM_EDIT_START",data:t}))),this.CUSTOM_EDIT_STOP.pipe((0,y.U)(t=>({type:"CUSTOM_EDIT_STOP",data:t}))),this.WINDOW_CREATE.pipe((0,y.U)(t=>({type:"WINDOW_CREATE",data:t}))),this.WINDOW_MOVE.pipe((0,y.U)(t=>({type:"WINDOW_MOVE",data:t}))),this.WINDOW_DESTROY.pipe((0,y.U)(t=>({type:"WINDOW_DESTROY",data:t}))),this.INSERT_NODE.pipe((0,y.U)(t=>({type:"INSERT_NODE",data:t}))),this.REMOVE_NODE.pipe((0,y.U)(t=>({type:"REMOVE_NODE",data:t}))),this.MOVE_NODE.pipe((0,y.U)(t=>({type:"MOVE_NODE",data:t}))),this.UPDATE_TEMPLATE.pipe((0,y.U)(t=>({type:"UPDATE_TEMPLATE",data:t}))),this.UNDO.pipe((0,y.U)(t=>({type:"UNDO",data:t}))),this.REDO.pipe((0,y.U)(t=>({type:"REDO",data:t}))),this.AUTO_SAVE.pipe((0,y.U)(t=>({type:"AUTO_SAVE",data:t}))),this.SAVE.pipe((0,y.U)(t=>({type:"SAVE",data:t}))))}changeActionStart(t){return this.target.dispatchEvent(new Pn(t))}changeActionEnd(t,n){return this.target.dispatchEvent(new Jt(t,n))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Yt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["","page-structure-source",""]]}),o})(),Zn=(()=>{class o{constructor(t,n,r,s,a,l,c){this.el=t,this.events=n,this.render=r,this.gt=s,this.ngZone=a,this.direction=l,this.subscription=I.w0.EMPTY,this.isBrowser=(0,u.NF)(c)}ngOnInit(){if(!this.gtPage)throw new Error;if(!this.isBrowser)return;const t=this.el.nativeElement,n=this.gtPage.nativeElement,r=this.render.createElement("canvas"),s=r.getContext("2d");r.classList.add("position-absolute"),r.classList.add("pe-none"),r.style.setProperty("z-index","1"),this.render.insertBefore(t.parentElement,r,t),this.ngZone.runOutsideAngular(()=>{this.subscription=(0,L.T)(this.events.CHANGE_SELECT,(0,F.R)(),this.events.BLACKBOARD_RESIZE.pipe((0,j.b)(20))).subscribe(()=>{const a=[],l=[];this.gt.currentBoard.nodeList.forEach(c=>{c.componentRef&&a.push({element:c.componentRef.location.nativeElement,type:c.type})}),this.gt.selected.forEach(c=>{c.componentRef&&l.push({element:c.componentRef.location.nativeElement,text1:c.type.toUpperCase(),text2:c.directive.map(_=>_.type).join(",")})}),function Xe(o,i,t,n,r=[],s={}){const a=o.canvas,l=t,c=i.getBoundingClientRect(),d=i.clientLeft,{clientWidth:_,clientHeight:m,scrollLeft:f,scrollTop:x}=i;if(a.width!==_*devicePixelRatio&&(a.width=_*devicePixelRatio,a.style.width=_+"px"),a.height!==m*devicePixelRatio&&(a.height=m*devicePixelRatio,a.style.height=m+"px"),o.clearRect(0,0,a.width,a.height),o.getTransform().a!==devicePixelRatio&&(o.resetTransform(),o.scale(devicePixelRatio,devicePixelRatio)),s.drawAll||s.drawActive){o.save(),o.translate(-c.left-d,-c.top);const J=[];s.drawActive&&(o.setLineDash([]),o.lineWidth=1/devicePixelRatio,r.forEach(({element:P,text1:B,text2:Z})=>{const ae=P.getBoundingClientRect(),{left:He,top:pe,width:Ue,height:qe}=ae,{padding:al,margin:ll}=getComputedStyle(P),{marginRect:fe,paddingRect:Ce,contentRect:be}=function De(o,i,t,n,r,s){const a=r?r.split(" ").map(ae=>parseInt(ae,10)):[0],l=s?s.split(" ").map(ae=>parseInt(ae,10)):[0];let c,d,_,m,f,x,Q,J;switch(a.length){case 1:c=d=_=m=a[0];break;case 2:c=_=a[0],m=d=a[1];break;case 3:c=a[0],m=d=a[1],_=a[2];break;case 4:c=a[0],d=a[1],_=a[2],m=a[3];break;default:c=d=_=m=0}switch(l.length){case 1:f=x=Q=J=l[0];break;case 2:f=Q=l[0],J=x=l[1];break;case 3:f=l[0],J=x=l[1],Q=l[2];break;case 4:f=l[0],x=l[1],Q=l[2],J=l[3];break;default:f=x=Q=J=0}return{marginRect:[o-J,i-f,t+J+x,n+f+Q],paddingRect:[o,i,t,n],contentRect:[o+m,i+c,t-m-d,n-c-_]}}(He,pe,Ue,qe,al,ll);o.fillStyle="rgba(255, 139, 15, 0.4)",o.fillRect(fe[0],fe[1],fe[2],fe[3]),o.clearRect(Ce[0],Ce[1],Ce[2],Ce[3]),o.fillStyle="rgba(2, 172, 13, 0.25)",o.fillRect(Ce[0],Ce[1],Ce[2],Ce[3]),o.clearRect(be[0],be[1],be[2],be[3]),o.fillStyle="rgba(32,189,248,0.4)",o.fillRect(be[0],be[1],be[2],be[3]),o.strokeStyle="#06366f",o.setLineDash([12/devicePixelRatio,4/devicePixelRatio]),o.strokeRect(fe[0],fe[1],fe[2],fe[3]),o.setLineDash([]),J.push({rect:ae,text1:B,text2:Z})})),s.drawAll&&(o.strokeStyle="#8cb7ff",n.forEach(({element:P,type:B})=>{if(P){const Z=P.getBoundingClientRect();o.strokeRect(Z.left,Z.top,Z.width,Z.height),"slot"===B&&(o.strokeStyle=s.darkMode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",o.lineWidth=6/devicePixelRatio,o.setLineDash([16/devicePixelRatio,4/devicePixelRatio]),o.strokeRect(Z.left+o.lineWidth/2,Z.top+o.lineWidth/2,Z.width-o.lineWidth,Z.height-o.lineWidth),o.setLineDash([]),o.lineWidth=1/devicePixelRatio,o.strokeStyle="#8cb7ff")}})),o.font="normal 12px system-ui,-apple-system,Arial,sans-serif",o.textBaseline="top",J.forEach(({rect:{left:P,right:B,top:Z,bottom:ae},text1:He,text2:pe})=>{const Ue=o.measureText(He),qe=o.measureText(pe);"rtl"===s.direction?(o.beginPath(),o.rect(B-(Ue.width+8),Z-16,Ue.width+8,16),o.closePath(),o.strokeStyle="#8cb7ff",o.stroke(),o.fillStyle="#404dff",o.fill(),pe&&(o.beginPath(),o.rect(B-(qe.width+8),ae,qe.width+8,16),o.closePath(),o.strokeStyle="#ff8cfd",o.stroke(),o.fillStyle="#ff0cae",o.fill()),o.fillStyle="#ffffff",o.fillText(He,B-4,Z-14),pe&&o.fillText(pe,B-4,ae+2)):(o.beginPath(),o.rect(P,Z-16,Ue.width+8,16),o.closePath(),o.strokeStyle="#8cb7ff",o.stroke(),o.fillStyle="#404dff",o.fill(),pe&&(o.beginPath(),o.rect(P,ae,qe.width+8,16),o.closePath(),o.strokeStyle="#ff8cfd",o.stroke(),o.fillStyle="#ff0cae",o.fill()),o.fillStyle="#ffffff",o.fillText(He,P+4,Z-14),pe&&o.fillText(pe,P+4,ae+2))}),o.restore()}{const J=new WebKitCSSMatrix(l.style.getPropertyValue("transform"));o.font="normal 8px system-ui,-apple-system,Arial,sans-serif",s.darkMode?(o.strokeStyle="#999",o.fillStyle="#999"):(o.strokeStyle="#333",o.fillStyle="#333");const P=J.a,Z=J.f-x;Ke(o,_,J.e-f,P),o.save(),o.rotate(Math.PI/180*90),Ke(o,m,Z,P,-1),o.restore(),o.globalAlpha=1}}(s,t,n,a,l,{drawAll:"edit"===this.gt.mode&&this.gt.showReferenceLine,drawActive:"edit"===this.gt.mode,darkMode:this.gt.darkMode,direction:this.direction.value})})})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(W),e.Y36(e.Qsj),e.Y36(q),e.Y36(e.R0b),e.Y36(C.Is),e.Y36(e.Lbi))},o.\u0275dir=e.lG2({type:o,selectors:[["","page-structure",""]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,Yt,7,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(n.gtPage=s.first)}}}),o})(),Ln=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var Ct=b(515),he=b(3900),V=b(2722);const Fn=Element.prototype.matches;function $t(o,i){if(!o)return null;const t=i,n=i,r=i,s=i,a=Boolean("string"==typeof i),l=Boolean("function"==typeof i),c=Boolean(i instanceof NodeList||i instanceof Array),d=Boolean(i instanceof HTMLElement);let m=o;do{if(m=m.correspondingUseElement||m.correspondingElement||m,(f=m)&&(a?Fn.call(f,t):c?[...r].includes(f):d?s===f:l&&n(f)))return m;m=m.parentNode}while(m&&m!==document.body&&m!==document);var f;return null}var ye=b(9646),Ht=b(4482),Ut=b(5403);function qt(o){return(0,Ht.e)((i,t)=>{let n=!1,r=0;i.subscribe((0,Ut.x)(t,s=>(n||(n=!o(s,r++)))&&t.next(s)))})}var se=b(9300),Gn=b(4671);function Se(o,i=Gn.y){return o=o??Jn,(0,Ht.e)((t,n)=>{let r,s=!0;t.subscribe((0,Ut.x)(n,a=>{const l=i(a);(s||!o(r,l))&&(s=!1,r=l,n.next(a))}))})}function Jn(o,i){return o===i}var D=b(4968);function xe(o,i,t){o.style.setProperty(Vt(i),t)}function le(o,i){o.style.removeProperty(Vt(i))}function Vt(o){return"userSelect"===o?"user-select":o}function Qt(o){return 1-Math.pow(o-1,4)}function zt(o){const i=o.cloneNode(!0);if(o.querySelectorAll("canvas")){const t=o.querySelectorAll("canvas"),n=i.querySelectorAll("canvas");Array.from(t).forEach((r,s)=>{n[s].style.background=`url(${r.toDataURL()}) no-repeat center center / contain`,n[s].style.width="100%",n[s].style.height="100%"})}return i}const jt=o=>(0,L.T)((0,D.R)(o,"mousedown",{passive:!0}),(0,D.R)(o,"touchstart",{passive:!0}).pipe((0,se.h)(i=>1===i.touches.length))),Pe=(o,i)=>ce(i)?(0,D.R)(o,"touchmove",{passive:!1,capture:!1}).pipe((0,v.b)(t=>t.preventDefault())):(0,D.R)(o,"mousemove",{passive:!0,capture:!1}),Be=(o,i)=>ce(i)?(0,D.R)(o,"touchend",{capture:!0}):(0,D.R)(o,"mouseup",{capture:!0});function We(o,i){if(ce(o)&&ce(i)){const t=o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0},n=i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0};return{x:n.pageX-t.pageX,y:n.pageY-t.pageY}}return{x:i.clientX-o.clientX,y:i.clientY-o.clientY}}let et=(()=>{class o{constructor(){this.status="stop",this.queue=[],this.lastFrameTime=Date.now()}add(t){const n=t.element.style.transform.match(/(\d|\.)+/g)||[0,0],r=this.queue.findIndex(m=>m.element===t.element),{duration:s=250,element:a,to:l={left:0,top:0}}=t;let c=t.from;(-1!==r||!c)&&(c={left:+n[0],top:+n[1]});const _={element:a,from:c,to:l,duration:s,elapse:0};c.left===l.left&&c.top===l.top||(-1===r?this.queue.push(_):this.queue[r]=_,a.style.transform=`translate(${c.left}px,${c.top}px)`,"stop"===this.status&&this.start())}remove(t){this.queue.splice(this.queue.indexOf(t),1)}start(){this.status="start",this.lastFrameTime=performance.now(),this.anime()}anime(){requestAnimationFrame(t=>{const n=t-this.lastFrameTime;this.queue.forEach(r=>{const{element:s,from:a,to:l,duration:c=200,elapse:d}=r,_=d/c>1?1:d/c,m=Math.round((l.left-a.left)*Qt(_)+a.left),f=Math.round((l.top-a.top)*Qt(_)+a.top);s.style.transform=`translate(${m}px,${f}px)`,0===m&&0===f&&(s.style.transform=""),c<=d&&this.remove(r),r.elapse+=n}),this.queue.length>0?this.anime():this.status="stop",this.lastFrameTime=t})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function ce(o){return o.type.startsWith("touch")}function Ze(o){o&&o.parentElement&&o.parentElement.removeChild(o)}class Un{constructor(i,t){this.el=i,this._document=t,this._target=null,this._mirror=null,this._placeholder=null,this._parentElement=null,this._refChild=null,this._drop=new T.x,this._dragEnd$=new T.x,this.drop=this._drop.asObservable(),this.dragEnd=this._dragEnd$.asObservable(),this._dragStart(this.el).pipe((0,he.w)(n=>this._dragEnd(this._dragMove(n),n))).subscribe()}_dragStart(i){return jt(i).pipe((0,he.w)(t=>(this._target=$t(t.target,"[data-draggable]"),!ce(t)&&0!==t.button||this.disabled||!this._target?Ct.E:Pe(this._document,t).pipe(qt(n=>{const{x:r,y:s}=We(t,n);return Math.abs(r)+Math.abs(s)<30}),(0,V.R)(Be(this._document,t)),(0,N.q)(1),(0,he.w)(()=>{const n=this._target,r=n.getBoundingClientRect(),s=this._document;return this._mirror=function a(c){const d=zt(c);for(const m in d.dataset)delete d.dataset[m];d.style.width=r.width+"px",d.style.height=r.height+"px";const _=s.createElement("div");return _.classList.add("draggable-mirror"),_.appendChild(d),_}(n),this._mirror.style.left=r.left+"px",this._mirror.style.top=r.top+"px",this._placeholder=function l(c){const d=zt(c);for(const _ in d.dataset)delete d.dataset[_];return d.classList.add("draggable-placeholder"),d}(n),this._placeholder.style.transform=`translate(${r.left}px,${r.top}px)`,n.classList.add("draggable-source"),xe(this._document.documentElement,"userSelect","none"),xe(this._document.documentElement,"cursor","grab"),this._document.body.appendChild(this._mirror),this._document.body.appendChild(this._placeholder),(0,ye.of)(t)})))))}_dragMove(i){return Pe(this._document,i).pipe((0,v.b)(t=>{const{x:n,y:r}=We(i,t);this._mirror.style.transform=`translate(${n}px,${r}px)`}),(0,y.U)(t=>Xt(t,this._target,this._document)),(0,se.h)(t=>!!t),(0,v.b)(({parentElement:t,refChild:n})=>{this._parentElement=t,this._refChild=n}),Se((t,n)=>t.parentElement===n.parentElement&&t.refChild===n.refChild),(0,v.b)(t=>this._drop.next({...t,target:this._target,placeholder:this._placeholder})))}_dragEnd(i,t){return i.pipe((0,V.R)(Be(this._document,t).pipe((0,v.b)(()=>{this._parentElement&&this._dragEnd$.next({parentElement:this._parentElement,refChild:this._refChild,target:this._target}),le(this._document.documentElement,"userSelect"),le(this._document.documentElement,"cursor"),Ze(this._placeholder),Ze(this._mirror),this._target&&this._target.classList.remove("draggable-source"),this._mirror=null,this._placeholder=null,this._target=null,this._parentElement=null,this._refChild=null}))))}}function bt(o){return ce(o)?{x:o.touches[0].pageX,y:o.touches[0].pageY}:{x:o.pageX,y:o.pageY}}function Xt(o,i,t){const n=function qn(o,i){return ce(o)?i.elementFromPoint(o.touches[0].pageX,o.touches[0].pageY):o.target}(o,t),{x:r,y:s}=bt(o);let a=null,l=null,c=null,d=null,_=n;for(;_.parentElement;){if(_.classList.contains("gt-page")){const f=tt({x:r,y:s},_);switch(c=_.children[0],f){case"left":case"top":d=Array.from(c.children).find(x=>x!==i);break;default:d=null}return{refChild:d,parentElement:c}}if(_.dataset.hasOwnProperty("root")){switch(c=_,tt({x:r,y:s},_)){case"left":case"top":d=Array.from(c.children).find(x=>x!==i);break;default:d=null}return{refChild:d,parentElement:c}}if(_.dataset.hasOwnProperty("droppable")&&(l||(l=_),_.classList.contains("gt-node"))){a=_;break}if(_.dataset.hasOwnProperty("draggable")&&_.classList.contains("gt-node")){a=_;break}_=_.parentElement}if(!t.querySelector(".gt-page"))throw new Error("");if(null===a)return null;if(null===l)switch(tt({x:r,y:s},a,"true"===a.dataset.canHasChild)){case"left":case"top":c=a.parentElement,d=a;break;case"right":case"bottom":c=a.parentElement,d=a.nextElementSibling;break;case"center":return null}else{const f=tt({x:r,y:s},l);if(a===l)switch(f){case"left":case"top":c=a.parentElement,d=a;break;case"right":case"bottom":c=a.parentElement,d=a.nextElementSibling;break;case"center":c=a,d=null}else switch(f){case"left":case"top":case"right":case"bottom":case"center":c=l}}return null!==d&&(d===i.nextElementSibling||d===i)||function Hn(o,i){let t=o;for(;t!==i&&null!==t;)t=t.parentElement;return t===i&&null!==t}(a,i)?null:{parentElement:c,refChild:d}}function tt({x:o,y:i},t,n=!0){const r=n?.08:.5,s=n?10:1/0,{top:a,bottom:l,left:c,right:d,width:_,height:m}=t.getBoundingClientRect();return i-a<Math.min(m*r,s)?"top":l-i<Math.min(m*r,s)?"bottom":d-o<Math.min(_*r,s)?"right":o-c<Math.min(_*r,s)?"left":"center"}function Kt(o){if(!o)return null;for(;o.parentElement;){if(o.classList.contains("gt-node"))return o;o=o.parentElement}return null}function vt(o){const i=getComputedStyle(o);return new WebKitCSSMatrix(i.transform||i.webkitTransform)}let Qn=(()=>{class o{constructor(t,n,r){this.el=t,this.panDisabled=!1,this.updateTransform=new e.vpe,this.subscription=I.w0.EMPTY,n.runOutsideAngular(()=>{this.subscription=jt(this.el.nativeElement).pipe((0,he.w)(s=>{if(this.panDisabled)return Ct.E;const a=vt(this.panTarget);return xe(r.documentElement,"userSelect","none"),xe(r.documentElement,"cursor","grab"),Pe(r,s).pipe((0,V.R)(Be(r,s).pipe((0,v.b)(()=>{le(r.documentElement,"userSelect"),le(r.documentElement,"cursor")}))),(0,y.U)(l=>We(s,l)),(0,v.b)(({x:l,y:c})=>this.updateTransform.emit(a.translate(l/a.a,c/a.d).toString())))})).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(u.K0))},o.\u0275dir=e.lG2({type:o,selectors:[["","gtPan",""]],inputs:{panDisabled:"panDisabled",panTarget:"panTarget"},outputs:{updateTransform:"updateTransform"}}),o})(),Tt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var Wt=b(9770);let yt=(()=>{class o{constructor(t,n,r,s,a){this._renderer=n,this._document=s,this._ngZone=a,this.transform=!1,this.minWidth=0,this.maxWidth=1/0,this.minHeight=0,this.maxHeight=1/0,this.setMin=!1,this.updateTransform=new e.vpe,this._widthResize=!1,this._heightResize=!1,this.isBrowser=(0,u.NF)(r),this.container=t.nativeElement}ngOnInit(){if(!this.isBrowser)return;"static"===getComputedStyle(this.container).getPropertyValue("position")&&this._renderer.setStyle(this.container,"position","relative");const n=this._renderer.createElement("div");this._renderer.addClass(n,"resizer-container"),this._renderer.appendChild(this.container,n);let r=[];Array.isArray(this.resizes)?r=this.resizes:"all"===this.resizes&&(r=["t","b","l","r","tl","tr","bl","br"]),this._ngZone.runOutsideAngular(()=>{r.forEach(s=>{const a=this._renderer.createElement("div");this.setResizeStyle(s,a),this._renderer.appendChild(n,a),(0,L.T)((0,D.R)(a,"mousedown",{passive:!1}).pipe((0,se.h)(l=>0===l.button)),(0,D.R)(a,"touchstart",{passive:!0})).subscribe(l=>this.resize(l,s))})}),this._widthResize="all"===this.resizes||/[lr]/.test(this.resizes.join("")),this._heightResize="all"===this.resizes||/[tb]/.test(this.resizes.join(""))}setResizeStyle(t,n){switch(t){case"t":this._renderer.setStyle(n,"left",".6rem"),this._renderer.setStyle(n,"right",".6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"cursor","ns-resize");break;case"b":this._renderer.setStyle(n,"left",".6rem"),this._renderer.setStyle(n,"right",".6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"cursor","ns-resize");break;case"l":this._renderer.setStyle(n,"top",".6rem"),this._renderer.setStyle(n,"bottom",".6rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"cursor","ew-resize");break;case"r":this._renderer.setStyle(n,"top",".6rem"),this._renderer.setStyle(n,"bottom",".6rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"cursor","ew-resize");break;case"tl":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"cursor","nwse-resize");break;case"tr":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"cursor","nesw-resize");break;case"bl":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"cursor","nesw-resize");break;case"br":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"cursor","nwse-resize")}this._renderer.setStyle(n,"position","absolute"),this._renderer.setStyle(n,"z-index","1")}resize(t,n){if(!this.isBrowser)return;t.stopPropagation();const r=getComputedStyle(this.container),s=parseInt(r.getPropertyValue("width"),10),a=parseInt(r.getPropertyValue("height"),10),l=vt(this.container);if(xe(this._document.documentElement,"userSelect","none"),!ce(t)){let c="auto";switch(n){case"t":case"b":c="ns-resize";break;case"l":case"r":c="ew-resize";break;case"tl":case"br":c="nwse-resize";break;case"tr":case"bl":c="nesw-resize"}xe(this._document.documentElement,"cursor",c)}(function zn(o,i,t){return(0,Wt.P)(()=>o()?i:t)})(()=>ce(t),(0,D.R)(this._document,"touchmove",{passive:!1,capture:!0}).pipe((0,v.b)(c=>c.preventDefault()),(0,V.R)((0,D.R)(this._document,"touchend").pipe((0,v.b)(()=>{le(this._document.documentElement,"userSelect"),le(this._document.documentElement,"cursor")}))),(0,y.U)(c=>({offsetX:c.touches[0].clientX-t.touches[0].clientX,offsetY:c.touches[0].clientY-t.touches[0].clientY}))),(0,D.R)(this._document,"mousemove",{passive:!1,capture:!0}).pipe((0,V.R)((0,D.R)(this._document,"mouseup").pipe((0,v.b)(()=>{le(this._document.documentElement,"userSelect"),le(this._document.documentElement,"cursor")}))),(0,y.U)(c=>({offsetX:c.clientX-t.clientX,offsetY:c.clientY-t.clientY})))).subscribe(({offsetX:c,offsetY:d})=>{let _=0,m=0,f=0,x=0;switch(n){case"t":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a);break;case"l":c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"b":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a);break;case"r":c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"tl":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"tr":d=-(0,g.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"bl":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a),c=-(0,g.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"br":d=(0,g.uZ)(d,this.maxHeight-a,this.minHeight-a),c=(0,g.uZ)(c,this.maxWidth-s,this.minWidth-s)}switch(n){case"t":m=d,x=-d;break;case"l":_=c,f=-c;break;case"b":x=d;break;case"r":f=c;break;case"tl":_=c,m=d,f=-c,x=-d;break;case"tr":m=d,f=c,x=-d;break;case"bl":_=c,f=-c,x=d;break;case"br":f=c,x=d}this.transform&&this.updateTransform.emit(l.translate(_/l.a,m/l.d).toString()),this._widthResize&&this._renderer.setStyle(this.container,"width",`${s+f/l.a}px`),this._heightResize&&this._renderer.setStyle(this.container,this.setMin?"min-height":"height",`${a+x/l.d}px`)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.Lbi),e.Y36(u.K0),e.Y36(e.R0b))},o.\u0275dir=e.lG2({type:o,selectors:[["","gtResize",""]],inputs:{resizes:"resizes",transform:"transform",minWidth:"minWidth",maxWidth:"maxWidth",minHeight:"minHeight",maxHeight:"maxHeight",setMin:"setMin"},outputs:{updateTransform:"updateTransform"}}),o})(),en=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,C.vT]}),o})();var xt=b(5963);const jn=["tooltipContainer"],Xn=["tooltip",""],Kn=function(o,i){return{top:o,left:i}};let Wn=(()=>{class o{constructor(t,n,r,s){this.elementRef=t,this.cdr=n,this.direction=r,this._document=s,this.fading=!1,this.fadingOutSubscription=I.w0.EMPTY}get tooltipPosition(){return this._tooltipPosition}set tooltipPosition(t){if("rtl"===this.direction.value)switch(t){case"start":this._tooltipPosition="end";break;case"end":this._tooltipPosition="start";break;default:this._tooltipPosition=t}else this._tooltipPosition=t}get showing(){return!!this.elementRef.nativeElement.parentElement}show(){this.elementRef.nativeElement.parentElement||(this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=I.w0.EMPTY,this._document.body.appendChild(this.elementRef.nativeElement)),this.cdr.detectChanges()}hide(){this.elementRef.nativeElement.parentElement&&this.elementRef.nativeElement.parentElement.removeChild(this.elementRef.nativeElement),this.cdr.detectChanges()}setTitle(t){this.tooltipTitle=t,this.cdr.detectChanges()}setPosition(t){this.tooltipPosition=t,this.cdr.detectChanges()}updatePosition(t){this.fading=!0,this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=I.w0.EMPTY;const n=this.tooltipContainer.nativeElement.getBoundingClientRect();let a,l,r=0,s=0;const c=this._document.body.clientWidth-n.width-5;switch(this.tooltipPosition){case"top":if(r=n.width/2,l=t.top-n.height,a=(t.left+t.right-n.width)/2,a>c){const _=a-c;a=c,r+=_}if(a<5){const _=a-5;a=5,r+=_}break;case"bottom":if(r=n.width/2,l=t.bottom,a=(t.left+t.right-n.width)/2,a>c){const _=a-c;a=c,r+=_}if(a<5){const _=a-5;a=5,r+=_}break;case"start":s=n.height/2,a=t.left-n.width,l=(t.top+t.bottom-n.height)/2;break;default:s=n.height/2,a=t.right,l=(t.top+t.bottom-n.height)/2}r=Math.round(r),s=Math.round(s),a=Math.round(a),l=Math.round(l),this.arrowMatrix=`matrix(1,0,0,1,${r},${s})`,this.containerMatrix=`matrix(1,0,0,1,${a},${l})`,this.cdr.detectChanges()}fadeIn(t){this.cdr.detectChanges(),this.show(),this.updatePosition(t),this.fading=!1,this.hide(),this.show(),this.fading=!0,this.cdr.detectChanges()}fadeOut(){this.fading=!1,this.cdr.detectChanges(),this.fadingOutSubscription=(0,xt.H)(150).subscribe(()=>this.hide())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(C.Is),e.Y36(u.K0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["div","tooltip",""]],viewQuery:function(t,n){if(1&t&&e.Gf(jn,7),2&t){let r;e.iGM(r=e.CRH())&&(n.tooltipContainer=r.first)}},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"},attrs:Xn,decls:5,vars:12,consts:[["role","tooltip",1,"tooltip","position-absolute","fade",2,"left","0","top","0",3,"ngClass"],["tooltipContainer",""],[1,"tooltip-arrow","position-absolute",3,"ngStyle"],[1,"tooltip-inner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA()()),2&t&&(e.Udp("transform",n.containerMatrix),e.ekj("show",n.fading),e.Q6J("ngClass","bs-tooltip-"+n.tooltipPosition),e.xp6(2),e.Udp("transform",n.arrowMatrix),e.Q6J("ngStyle",e.WLB(9,Kn,"start"===n.tooltipPosition||"end"===n.tooltipPosition?"-.4rem":"","bottom"===n.tooltipPosition||"top"===n.tooltipPosition?"-.4rem":"")),e.xp6(2),e.Oqu(n.tooltipTitle))},dependencies:[u.mk,u.PC],encapsulation:2}),o})();class H{constructor(i,t){this.elementRef=i,this.appRef=t,this.tooltipPosition="end"}mouseenter(i){if(i.preventDefault(),i.stopPropagation(),!this.tooltipTitle)return;H.tooltipRef||(H.tooltipRef=(0,e.LMc)(Wn,{environmentInjector:this.appRef.injector}));const t=H.tooltipRef.instance,n=this.elementRef.nativeElement.getBoundingClientRect();t.showing?(t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.updatePosition(n)):H.showTimerSubscription=(0,xt.H)(400).subscribe(()=>{t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.fadeIn(n)}),H.hideTimerSubscription.unsubscribe(),H.hideTimerSubscription=I.w0.EMPTY}mouseleave(i){i.preventDefault(),i.stopPropagation();const t=H.tooltipRef.instance;H.hideTimerSubscription=(0,xt.H)(50).subscribe(()=>t.fadeOut()),H.showTimerSubscription.unsubscribe(),H.showTimerSubscription=I.w0.EMPTY}}H.tooltipRef=null,H.showTimerSubscription=I.w0.EMPTY,H.hideTimerSubscription=I.w0.EMPTY,H.\u0275fac=function(i){return new(i||H)(e.Y36(e.SBq),e.Y36(e.z2F))},H.\u0275dir=e.lG2({type:H,selectors:[["","tooltip",""]],hostBindings:function(i,t){1&i&&e.NdJ("mouseenter",function(r){return t.mouseenter(r)})("mouseleave",function(r){return t.mouseleave(r)})},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"}});let eo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),to=(()=>{class o{constructor(t,n,r){this._renderer=n,this._ngZone=r,this.updateTransform=new e.vpe,this.subscription=I.w0.EMPTY,this._container=t.nativeElement,this._renderer.setStyle(this._container,"transform-origin","left top")}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this.subscription=(0,D.R)(this.zoomZone||this._container,"wheel",{passive:!0,capture:!0}).subscribe(t=>this.zoom(t)),(0,D.R)(this.zoomZone||this._container,"touchstart",{passive:!0}).pipe((0,se.h)(t=>2===t.touches.length)).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}zoom(t){if(this.gtZoomDisabled)return;t.stopPropagation();const n=vt(this._container),r=1-t.deltaY/1e3,s=+(n.a*r).toFixed(2);if(Math.max(.2,Math.min(s,5))!==s)return;const a=this._container.getBoundingClientRect(),l=this._container.parentElement.getBoundingClientRect();this.updateTransform.emit((new WebKitCSSMatrix).scale(s,s).translate((t.pageX-(t.pageX-a.x)*r-l.x)/s,(t.pageY-(t.pageY-a.y)*r-l.y)/s).toString())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},o.\u0275dir=e.lG2({type:o,selectors:[["","gtZoom",""]],inputs:{zoomZone:"zoomZone",gtZoomDisabled:"gtZoomDisabled"},outputs:{updateTransform:"updateTransform"}}),o})();function tn(o,i){return Se((t,n)=>i?i(t[o],n[o]):t[o]===n[o])}function no(o,i){1&o&&e._UZ(0,"hr",4)}function oo(o,i){1&o&&e._UZ(0,"i",10)}function io(o,i){if(1&o&&(e.TgZ(0,"small",11),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.desc)}}function ro(o,i){1&o&&e._UZ(0,"i",12)}function so(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onClick(s,r))})("mouseenter",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.mouseenter(r,s))}),e.YNc(1,oo,1,0,"i",6),e.TgZ(2,"span",7),e._uU(3),e.qZA(),e.YNc(4,io,2,1,"small",8),e.YNc(5,ro,1,0,"i",9),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.ekj("active",t.active)("disabled",t.disabled),e.xp6(1),e.Q6J("ngIf",t.checked),e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("ngIf",t.desc),e.xp6(1),e.Q6J("ngIf",t.children)}}function ao(o,i){if(1&o&&(e.ynx(0),e.YNc(1,no,1,0,"hr",2),e.YNc(2,so,6,8,"a",3),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.divider),e.xp6(1),e.Q6J("ngIf",!t.divider)}}let lo=(()=>{class o{constructor(t){this.menu=t}preventDefault(t){t.preventDefault(),t.stopPropagation()}mouseenter(t,n){t.stopPropagation(),t.preventDefault(),(0,D.R)(t.target,"mousemove").pipe(tn("target"),(0,j.b)(200),(0,V.R)((0,D.R)(t.target,"mouseleave"))).subscribe(()=>{const{children:r,disabled:s}=n;this.menu.create(t,s?[]:r||[],this.level+1)})}onClick(t,n){if(n.stopPropagation(),t.disabled||t.children&&t.children.length)return n.stopPropagation();t.onclick&&t.onclick(t,n),this.menu.destroy()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Me))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-context-menu"]],hostBindings:function(t,n){1&t&&e.NdJ("pointerdown",function(s){return n.preventDefault(s)})},decls:2,vars:2,consts:[[1,"dropdown-menu","show","shadow",2,"position","static"],[4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],["class","dropdown-item d-flex justify-content-between","href","javascript:void(0);",3,"active","disabled","click","mouseenter",4,"ngIf"],[1,"dropdown-divider"],["href","javascript:void(0);",1,"dropdown-item","d-flex","justify-content-between",3,"click","mouseenter"],["class","check-icon",4,"ngIf"],[1,"text-main"],["class","text-desc text-muted ms-3",4,"ngIf"],["class","caret",4,"ngIf"],[1,"check-icon"],[1,"text-desc","text-muted","ms-3"],[1,"caret"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ao,3,2,"ng-container",1),e.qZA()),2&t&&(e.Q6J("@fade","in"),e.xp6(1),e.Q6J("ngForOf",n.menus))},dependencies:[u.sg,u.O5],encapsulation:2,data:{animation:[ze]}}),o})();const co=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"}];let Me=(()=>{class o{constructor(t,n){this.injector=t,this.overlay=n,this.onclick=new e.vpe,this.overlayRefs=[],this.currentMenus=[],this.destroy=()=>{this.overlayRefs.forEach(r=>{r.dispose()}),this.overlayRefs=[],this.unbindEvents()}}create(t,n,r=0){if(0===this.overlayRefs.length&&this.bindEvents(),!(this.currentMenus.indexOf(n)>-1)&&(this.overlayRefs.splice(r,this.overlayRefs.length).forEach(s=>s.dispose()),this.currentMenus.splice(r,this.overlayRefs.length),n&&n.length)){this.currentMenus.push(n);const s=e.zs3.create({providers:[],parent:this.injector}),a=new $.C5(lo,null,s),l=this.overlay.create({disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(0===r?t:t.target).withPositions(co)}),c=l.attach(a);c.instance.menus=n,c.instance.level=r,this.overlayRefs.push(l)}}bindEvents(){window.addEventListener("pointerdown",this.destroy,{once:!0,capture:!1}),window.addEventListener("wheel",this.destroy,{once:!0,capture:!0}),window.addEventListener("blur",this.destroy,{once:!0,capture:!0}),window.addEventListener("resize",this.destroy,{once:!0,capture:!0})}unbindEvents(){window.removeEventListener("pointerdown",this.destroy),window.removeEventListener("wheel",this.destroy),window.removeEventListener("blur",this.destroy),window.removeEventListener("resize",this.destroy)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(z.aV))},o.\u0275dir=e.lG2({type:o,outputs:{onclick:"onclick"}}),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),po=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Me],imports:[u.ez]}),o})();var p=b(433);function uo(o,i){if(1&o&&e._UZ(0,"input",5),2&o){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function _o(o,i){if(1&o&&e._UZ(0,"input",5),2&o){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function ho(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",6),e.NdJ("wheel",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onwheel(r))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}function mo(o,i){if(1&o&&e._UZ(0,"input",7),2&o){const t=e.oxw();e.Q6J("formControlName",t.formItem.name)}}let nt=(()=>{class o{constructor(t,n,r,s){this.formItem=t,this.formControl=n,this.formGroup=r,this._document=s}onwheel(t){this._document.activeElement===t.target&&(t.preventDefault(),"number"===this.formItem.type&&this.formControl.setValue(Number(this.formControl.value)-Math.sign(t.deltaY)))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw),e.Y36(u.K0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-input"]],decls:6,vars:5,consts:[[3,"formGroup"],[3,"ngSwitch"],["type","color","class","form-control",3,"formControlName",4,"ngSwitchCase"],["type","number","class","form-control","autocomplete","off","pattern","[0-9]*",3,"formControlName","wheel",4,"ngSwitchCase"],["type","text","class","form-control","autocomplete","off",3,"formControlName",4,"ngSwitchDefault"],["type","color",1,"form-control",3,"formControlName"],["type","number","autocomplete","off","pattern","[0-9]*",1,"form-control",3,"formControlName","wheel"],["type","text","autocomplete","off",1,"form-control",3,"formControlName"]],template:function(t,n){1&t&&(e.ynx(0,0)(1,1),e.YNc(2,uo,1,1,"input",2),e.YNc(3,_o,1,1,"input",2),e.YNc(4,ho,1,1,"input",3),e.YNc(5,mo,1,1,"input",4),e.BQk()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngSwitch",n.formItem.type),e.xp6(1),e.Q6J("ngSwitchCase","password"),e.xp6(1),e.Q6J("ngSwitchCase","color"),e.xp6(1),e.Q6J("ngSwitchCase","number"))},dependencies:[u.RF,u.n9,u.ED,p.Fj,p.wV,p.JJ,p.JL,p.c5,p.sg,p.u],encapsulation:2}),o})();function go(o,i){if(1&o&&(e.TgZ(0,"option",2),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.hij(" ",t.label," ")}}let fo=(()=>{class o{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.onclick=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-select"]],outputs:{onclick:"onclick"},decls:4,vars:4,consts:[[1,"input-group",3,"formGroup"],[1,"form-select",3,"formControlName"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"select",1),e._UZ(2,"option",2),e.YNc(3,go,2,2,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(1),e.Q6J("ngValue",void 0),e.xp6(1),e.Q6J("ngForOf",n.formItem.options))},dependencies:[u.sg,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),o})(),Co=(()=>{class o{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-switch"]],hostAttrs:[1,"py-2","d-block"],decls:3,vars:4,consts:[[1,"form-check","form-switch",3,"formGroup"],["type","checkbox","role","switch",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1)(2,"label",2),e.qZA()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("id",n.formItem.name)("formControlName",n.formItem.name),e.xp6(1),e.Q6J("for",n.formItem.name))},dependencies:[p.Wl,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),o})(),bo=(()=>{class o{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.options={language:"json",formatOnType:!0,formatOnPaste:!0,automaticLayout:!0,lineNumbersMinChars:2},this.onchange=new e.vpe}onInit(t){t.getModel().updateOptions({tabSize:2}),t.addAction({id:"saveScript",label:"\u4fdd\u5b58",keybindings:[],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:()=>(this.formControl.setValue(JSON.parse(this.rawScript.replace(/(\r|\n|\s+)/g,""))),null)}),t.setValue(JSON.stringify(this.formItem.value)),setTimeout(()=>t.getAction("editor.action.formatDocument").run(),100)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-textarea"]],outputs:{onchange:"onchange"},decls:2,vars:2,consts:[[3,"formGroup"],["cols","30","rows","5",1,"form-control",3,"formControlName"]],template:function(t,n){1&t&&(e.ynx(0,0),e._UZ(1,"textarea",1),e.BQk()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("formControlName",n.formItem.name))},dependencies:[p.Fj,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),o})(),vo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:mt,useValue:{text:nt,number:nt,color:nt,select:fo,textarea:bo,switch:Co},multi:!0}],imports:[u.ez,p.u5,p.UX]}),o})(),To=(()=>{class o{constructor(t,n){this.formItem=t,this.formControl=n,this.dataReset=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-data-binding"]],outputs:{dataReset:"dataReset"},decls:5,vars:1,consts:[[1,"input-group"],["type","text","disabled","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"gt-icon"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.formControl.reset()}),e.TgZ(3,"i",3),e._uU(4,"close"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("value","\u6570\u636e\u7ed1\u5b9a\u4e2d"))},encapsulation:2}),o})(),ot=(()=>{class o{constructor(t,n){this.viewContainerRef=t,this.injector=n}insert(t,n=[],r){const s=e.zs3.create({providers:n,parent:this.injector});return this.viewContainerRef.createComponent(t,{index:r,injector:s})}move(t,n){n!==this.viewContainerRef.indexOf(t)&&this.viewContainerRef.move(t,n)}remove(t){this.viewContainerRef.remove(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b),e.Y36(e.zs3))},o.\u0275dir=e.lG2({type:o,selectors:[["","template-directive",""]]}),o})();function yo(o,i){}function xo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.inheritClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e.TgZ(1,"i",8),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("active",t.formItem.inherit),e.Q6J("disabled",t.formItem.inherit),e.xp6(2),e.Oqu("bind")}}function Eo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.dataBindClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e._uU(1," B "),e.qZA()}}let No=(()=>{class o{constructor(t,n,r,s){this.formItem=t,this.formTypeMapCollection=n,this.formControl=r,this.formGroup=s,this.inheritClick=new e.vpe,this.dataBindClick=new e.vpe,this.dataReset=new e.vpe,this.subscription=I.w0.EMPTY}ngOnInit(){const t=this.formTypeMapCollection.reduce((n,r)=>Object.assign(n,r),{});this.subscription=(0,L.T)(this.formControl.valueChanges,(0,ye.of)(this.formControl.value)).pipe((0,y.U)(n=>n instanceof g.Sl),Se()).subscribe(()=>{this.template.remove();const n=this.formControl.value instanceof g.Sl?To:t[this.formItem.type]||nt;!n||this.template.insert(n,[{provide:p.cw,useValue:this.formGroup},{provide:p.NI,useValue:this.formControl},{provide:"FormItem",useValue:this.formItem}])})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(mt),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form-group"]],viewQuery:function(t,n){if(1&t&&e.Gf(ot,7),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first)}},outputs:{inheritClick:"inheritClick",dataBindClick:"dataBindClick",dataReset:"dataReset"},decls:8,vars:8,consts:[[1,"row","mb-2",3,"formGroup"],[1,"col-4","col-form-label","text-truncate","pe-0",3,"title"],[1,"col-8","position-relative"],[1,"form-item",3,"ngSwitch"],["template-directive",""],["type","button","class","btn btn-light btn-sm","style","position: absolute;left: -1.5rem;top: 0.2rem;width: auto;",3,"active","disabled","click",4,"ngIf"],["type","button","class","btn btn-light btn-sm","style","position: absolute;right: -1rem;top: 0.2rem;width: auto;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","left","-1.5rem","top","0.2rem","width","auto",3,"disabled","click"],[1,"gt-icon","prepend-icon"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","right","-1rem","top","0.2rem","width","auto",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,yo,0,0,"ng-template",4),e.qZA(),e.YNc(6,xo,3,4,"button",5),e.YNc(7,Eo,2,0,"button",6),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("title",n.formItem.label||n.formItem.name),e.xp6(1),e.Oqu(n.formItem.label||n.formItem.name),e.xp6(1),e.ekj("invalid",n.formControl.invalid),e.xp6(1),e.Q6J("ngSwitch",n.formItem.type),e.xp6(2),e.Q6J("ngIf",void 0!==n.formItem.inherit),e.xp6(1),e.Q6J("ngIf",n.formItem.canBind))},dependencies:[u.O5,u.RF,p.JL,p.sg,ot],encapsulation:2}),o})();function So(o,i){}let it=(()=>{class o{constructor(t,n){this.cdr=t,this.iterableDiffers=n,this.formGroup=new p.cw({}),this._differ=this.iterableDiffers.find([]).create((r,s)=>s.type+"-"+s.name),this._subscriptions=new Map,this.formChange=new e.vpe,this.dataBindClick=new e.vpe,this.inheritClick=new e.vpe,this.dataReset=new e.vpe}set formList(t){const n=this._differ.diff(t);n&&n.forEachOperation(({item:r,previousIndex:s},a,l)=>{if(null===s){const d=new p.NI(void 0===r.value?null:r.value,{validators:r.validator,updateOn:r.updateOn});this.formGroup.addControl(r.name,d);const{instance:_}=this.template.insert(No,[{provide:p.cw,useValue:this.formGroup},{provide:p.NI,useValue:d},{provide:"FormItem",useValue:r}],l);this._subscriptions.set(r.name,(0,L.T)(d.valueChanges.pipe((0,j.b)(100),(0,v.b)(m=>{r.value=m,this.formChange.emit({formItem:r,formControl:d})})),_.dataBindClick.pipe((0,v.b)(m=>this.dataBindClick.emit(m))),_.inheritClick.pipe((0,v.b)(m=>this.inheritClick.emit(m))),_.dataReset.pipe()).subscribe())}else if(null===l)this.formGroup.removeControl(r.name),this.template.remove(null===a?void 0:a),this._subscriptions.get(r.name).unsubscribe();else if(null!==a){const d=this.template.viewContainerRef.get(a);this.template.move(d,l)}}),t.forEach(({name:r,value:s=null})=>{const a=this.formGroup.get(r);a&&a.setValue(s,{emitEvent:!1})}),this.cdr.markForCheck()}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe()),this._subscriptions.clear()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.ZZ4))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(ot,7),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first)}},inputs:{formList:"formList"},outputs:{formChange:"formChange",dataBindClick:"dataBindClick",inheritClick:"inheritClick",dataReset:"dataReset"},decls:1,vars:0,consts:[["template-directive",""]],template:function(t,n){1&t&&e.YNc(0,So,0,0,"ng-template",0)},dependencies:[ot],encapsulation:2,changeDetection:0}),o})(),ne=(()=>{class o{constructor(t,n,r,s){this.viewContainerRef=t,this.cdr=n,this.injector=r,this.componentMap=Object.assign({},...s)}insert(t,n){const r=e.zs3.create({providers:[{provide:g.Fo,useValue:t}],parent:this.injector}),s=this.viewContainerRef.createComponent(this.componentMap[t.type],{index:n,injector:r});return t.componentRef=s,this.cdr.detectChanges(),s}remove(t){this.viewContainerRef.remove(t)}move(t,n){const r=this.viewContainerRef.move(t.componentRef.hostView,n);return this.cdr.detectChanges(),r}clear(){this.viewContainerRef.clear(),this.cdr.detectChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(e.zs3),e.Y36(R))},o.\u0275dir=e.lG2({type:o,selectors:[["","gtTemplate",""]],inputs:{templateID:"templateID"}}),o})(),Et=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),Mo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Ln,S,Tt,eo,Et]}),o})(),wo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Et]}),o})(),Oo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[je,en,u.ez]}),o})();var rt=b(5017),st=b(1135),nn=b(5191),ee=b(1281);class Ao extends class ko{constructor(){this.expansionModel=new rt.Ov(!0)}toggle(i){this.expansionModel.toggle(this._trackByValue(i))}expand(i){this.expansionModel.select(this._trackByValue(i))}collapse(i){this.expansionModel.deselect(this._trackByValue(i))}isExpanded(i){return this.expansionModel.isSelected(this._trackByValue(i))}toggleDescendants(i){this.expansionModel.isSelected(this._trackByValue(i))?this.collapseDescendants(i):this.expandDescendants(i)}collapseAll(){this.expansionModel.clear()}expandDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.select(...t.map(n=>this._trackByValue(n)))}collapseDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.deselect(...t.map(n=>this._trackByValue(n)))}_trackByValue(i){return this.trackBy?this.trackBy(i):i}}{constructor(i,t,n){super(),this.getLevel=i,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(i){const n=[];for(let r=this.dataNodes.indexOf(i)+1;r<this.dataNodes.length&&this.getLevel(i)<this.getLevel(this.dataNodes[r]);r++)n.push(this.dataNodes[r]);return n}expandAll(){this.expansionModel.select(...this.dataNodes.map(i=>this._trackByValue(i)))}}const on=new e.OlP("CDK_TREE_NODE_OUTLET_NODE");let at=(()=>{class o{constructor(t,n){this.viewContainer=t,this._node=n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b),e.Y36(on,8))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkTreeNodeOutlet",""]]}),o})();class Io{constructor(i){this.$implicit=i}}let Nt=(()=>{class o{constructor(t){this.template=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Rgc))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),o})(),Ee=(()=>{class o{constructor(t,n){this._differs=t,this._changeDetectorRef=n,this._onDestroy=new T.x,this._levels=new Map,this.viewChange=new st.X({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(n=>!n.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;(0,rt.Z9)(this._dataSource)?t=this._dataSource.connect(this):(0,nn.b)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,ye.of)(this._dataSource)),t&&(this._dataSubscription=t.pipe((0,V.R)(this._onDestroy)).subscribe(n=>this.renderNodeChanges(n)))}renderNodeChanges(t,n=this._dataDiffer,r=this._nodeOutlet.viewContainer,s){const a=n.diff(t);!a||(a.forEachOperation((l,c,d)=>{if(null==l.previousIndex)this.insertNode(t[d],d,r,s);else if(null==d)r.remove(c),this._levels.delete(l.item);else{const _=r.get(c);r.move(_,d)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,n){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(n,t))||this._defaultNodeDef}insertNode(t,n,r,s){const a=this._getNodeDef(t,n),l=new Io(t);l.level=this.treeControl.getLevel?this.treeControl.getLevel(t):typeof s<"u"&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,l.level),(r||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,l,n),me.mostRecentTreeNode&&(me.mostRecentTreeNode.data=t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.ZZ4),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["cdk-tree"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,Nt,5),2&t){let s;e.iGM(s=e.CRH())&&(n._nodeDefs=s)}},viewQuery:function(t,n){if(1&t&&e.Gf(at,7),2&t){let r;e.iGM(r=e.CRH())&&(n._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,n){1&t&&e.GkF(0,0)},dependencies:[at],encapsulation:2}),o})(),me=(()=>{class o{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new T.x,this._dataChanges=new T.x,o.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function Do(o){let i=o.parentElement;for(;i&&!Ro(i);)i=i.parentElement;return i?i.classList.contains("cdk-nested-tree-node")?(0,ee.su)(i.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){o.mostRecentTreeNode===this&&(o.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return o.mostRecentTreeNode=null,o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Ee))},o.\u0275dir=e.lG2({type:o,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,n){2&t&&e.uIk("aria-expanded",n.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),o})();function Ro(o){const i=o.classList;return!(!i?.contains("cdk-nested-tree-node")&&!i?.contains("cdk-tree"))}let rn=(()=>{class o extends me{constructor(t,n,r){super(t,n),this._differs=r}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);const t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):(0,nn.b)(t)&&t.pipe((0,V.R)(this._destroyed)).subscribe(n=>this.updateChildrenNodes(n)),this.nodeOutlet.changes.pipe((0,V.R)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(t){const n=this._getNodeOutlet();t&&(this._children=t),n&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,n.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const t=this.nodeOutlet;return t&&t.find(n=>!n._node||n._node===this)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Ee),e.Y36(e.ZZ4))},o.\u0275dir=e.lG2({type:o,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,at,5),2&t){let s;e.iGM(s=e.CRH())&&(n.nodeOutlet=s)}},hostAttrs:[1,"cdk-nested-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[e._Bn([{provide:me,useExisting:o},{provide:on,useExisting:o}]),e.qOj]}),o})();const Po=/([A-Za-z%]+)$/;let sn=(()=>{class o{constructor(t,n,r,s){this._treeNode=t,this._tree=n,this._element=r,this._dir=s,this._destroyed=new T.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe((0,V.R)(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,n=this._level??t;return"number"==typeof n?`${n*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const n=this._paddingIndent();if(n!==this._currentPadding||t){const r=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===s?"paddingRight":"paddingLeft";r.style[s]=n||"",r.style[a]="",this._currentPadding=n}}_setLevelInput(t){this._level=(0,ee.su)(t,null),this._setPadding()}_setIndentInput(t){let n=t,r="px";if("string"==typeof t){const s=t.split(Po);n=s[0],r=s[1]||r}this.indentUnits=r,this._indent=(0,ee.su)(n),this._setPadding()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(me),e.Y36(Ee),e.Y36(e.SBq),e.Y36(C.Is,8))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),o})(),an=(()=>{class o{constructor(t,n){this._tree=t,this._treeNode=n,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=(0,ee.Ig)(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ee),e.Y36(me))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),o})(),Bo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var G=b(1206);function Zo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editAction(s))}),e.TgZ(9,"i",11),e._uU(10,"edit"),e.qZA()(),e.TgZ(11,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeAction(s))}),e.TgZ(12,"i",11),e._uU(13,"close"),e.qZA()()()()(),e.TgZ(14,"div",13)(15,"div",14)(16,"label",15),e._uU(17,"Description"),e.qZA(),e.TgZ(18,"input",16),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.desc=r)}),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.type," "),e.xp6(15),e.Q6J("ngModel",t.desc)}}function Lo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("cdkDropListDropped",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.dropped(r,a.actions))}),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,Zo,19,2,"div",5),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("ngForOf",t.actions)}}let ln=(()=>{class o{constructor(t,n,r){this.configMap=t,this.cdr=n,this.events=r,this.subscription=I.w0.EMPTY}set gtNode(t){this.updateGtNode(t)}get gtNode(){return this._gtNode}ngOnInit(){this.subscription=(0,D.R)(this.events.target,"changeactionend").subscribe(t=>{const{action:n,script:r}=t,s={...n};n.script=r,this.gtNode.action.hasOwnProperty(n.type)?-1===this.gtNode.action[n.type].indexOf(n)?(this.gtNode.action[n.type].push(n),this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"add",action:n,previousAction:null})):this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"update",action:n,previousAction:s}):(this.gtNode.action[n.type]=[n],this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"add",action:n,previousAction:null})),this.updateGtNode(this.gtNode)})}updateGtNode(t){const n=this.configMap.get(t.type);if(n){const r=n.get("action");this.actionTypes=r?Object.keys(r).map(s=>({text:s})):[]}else this.actionTypes=[];this._gtNode=t,this.actions=Object.entries(this.gtNode.action).map(([r,s])=>({type:r,actions:s})),this.cdr.detectChanges()}ngOnDestroy(){this.subscription.unsubscribe()}addAction(t){this.events.changeActionStart({desc:null,script:"",scopes:[],type:t.text,editable:!0})}editAction(t){this.events.changeActionStart(t)}removeAction(t){const n=this.gtNode.action[t.type],r=n.indexOf(t);n.splice(r,1),this.updateGtNode(this.gtNode),this.events.CHANGE_ACTION.next({gtNode:this.gtNode,type:"remove",action:t,previousAction:null})}dropped(t,n){(0,G.bA)(n,t.previousIndex,t.currentIndex)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(gt),e.Y36(e.sBO),e.Y36(W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-action"]],inputs:{gtNode:"gtNode"},decls:4,vars:2,consts:function(){let i;return i=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],i,["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]]},template:function(t,n){1&t&&(e.YNc(0,Lo,4,2,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("itemClick",function(s){return n.addAction(s)}),e.SDv(3,3),e.qZA()()),2&t&&(e.Q6J("ngForOf",n.actions),e.xp6(2),e.Q6J("items",n.actionTypes))},dependencies:[u.sg,p.Fj,p.JJ,p.On,G.Wj,G.Zt,G.Bh,h],encapsulation:2}),o})();const Fo=["*"];let cn=(()=>{class o{constructor(){this.removeItem=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-card"]],inputs:{item:"item"},outputs:{removeItem:"removeItem"},ngContentSelectors:Fo,decls:13,vars:1,consts:[["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.TgZ(4,"div",3)(5,"button",4)(6,"i",5),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.removeItem.emit(n.item)}),e.TgZ(9,"i",5),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"div",7),e.Hsn(12),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",n.item.title," "))},dependencies:[G.Zt,G.Bh],encapsulation:2}),o})();function Go(o,i){1&o&&(e.TgZ(0,"div",9),e._uU(1,"~~DataBinding~~"),e.qZA())}function Jo(o,i){if(1&o&&e._UZ(0,"input",14),2&o){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function Yo(o,i){if(1&o&&e._UZ(0,"input",15),2&o){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function $o(o,i){if(1&o&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ho(o,i){if(1&o&&(e.TgZ(0,"select",16),e.YNc(1,$o,2,2,"option",17),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name),e.xp6(1),e.Q6J("ngForOf",t.options)}}function Uo(o,i){if(1&o&&(e.ynx(0)(1,10),e.YNc(2,Jo,1,3,"input",11),e.YNc(3,Yo,1,3,"input",12),e.YNc(4,Ho,2,4,"select",13),e.BQk()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","select")}}function qo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.control.reset())}),e.TgZ(1,"i",20),e._uU(2,"close"),e.qZA()()}}function Vo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.expressionClick.emit(r))}),e._uU(1," f(x) "),e.qZA()}}function Qo(o,i){if(1&o&&(e.TgZ(0,"div",2)(1,"label",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,Go,2,0,"div",5),e.YNc(5,Uo,5,4,"ng-container",6),e.YNc(6,qo,3,0,"button",7),e.YNc(7,Vo,2,0,"button",7),e.TgZ(8,"div",8),e._uU(9),e.ALo(10,"json"),e.qZA()()()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.label||t.name),e.xp6(2),e.Q6J("ngIf",n.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",!n.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",null!==t.control.value),e.xp6(1),e.Q6J("ngIf",t.expression),e.xp6(2),e.hij(" ",e.lcZ(10,6,n.formGroup.get(t.name).errors)," ")}}let St=(()=>{class o{constructor(){this.formGroup=new p.cw({}),this.subscription=I.w0.EMPTY,this.expressionClick=new e.vpe,this.formChange=new e.vpe}set value(t){this.formGroup.setValue(t)}get formList(){return this._formList}set formList(t){Object.keys(this.formGroup.controls).forEach(n=>this.formGroup.removeControl(n)),this._formList=t.map(n=>{const r=new p.NI({value:void 0!==n.value?n.value:null,disabled:n.disabled},n.validators);return this.formGroup.addControl(n.name,r),{...n,control:r}})}ngOnInit(){this.subscription=this.formGroup.valueChanges.subscribe(()=>this.formChange.emit(this.formGroup))}ngOnDestroy(){this.subscription.unsubscribe()}isDataBinding(t){return t instanceof g.Sl}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-form"]],inputs:{value:"value",formList:"formList"},outputs:{expressionClick:"expressionClick",formChange:"formChange"},decls:2,vars:2,consts:[[3,"formGroup"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"form-label"],[1,"input-group","input-group-sm","has-validation"],["class","form-control",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"invalid-feedback"],[1,"form-control"],[3,"ngSwitch"],["type","text","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","number","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["class","form-select",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","text",1,"form-control",3,"formControlName"],["type","number",1,"form-control",3,"formControlName"],[1,"form-select",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"gt-icon"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Qo,11,8,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngForOf",n.formList))},dependencies:[u.sg,u.O5,u.RF,u.n9,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.sg,p.u,u.Ts],encapsulation:2}),o})();function zo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",15),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"i",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.actionEdit())}),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"i",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.delete())}),e._uU(11,"minus"),e.qZA()()()}if(2&o){const t=i.$implicit,n=i.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("title",t.desc),e.xp6(1),e.Oqu(t.desc)}}let dn=(()=>{class o{get actions(){return Object.values(this.board.events).reduce((t,n)=>t.concat(n),[])}get board(){return this._board}set board(t){this._board=t,this.formList=[{label:"name",value:t.name,type:"text",name:"name"},{label:"type",value:t.type,type:"text",name:"type",disabled:!0},{label:"url",value:t.url,type:"text",name:"url"},{hide:"modal"!==t.type,label:"size",value:t.size||"",type:"select",name:"size",options:[{label:"xl",value:"xl"},{label:"lg",value:"lg"},{label:"md",value:""},{label:"sm",value:"sm"}]}]}onchange(t){const{name:n,value:r}=t;this.board[n]=r}actionEdit(){}delete(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-board-edit"]],inputs:{board:"board"},decls:19,vars:2,consts:function(){let i,t,n,r,s;return i="\u5E8F\u53F7",t="\u7C7B\u578B",n="\u63CF\u8FF0",r="\u64CD\u4F5C",s="\u6DFB\u52A0",[[3,"formList","formChange"],[1,"table","table-bordered","m-0"],[1,"text-truncate",2,"width","3.8em"],i,[1,"text-truncate",2,"width","4em"],t,[1,"text-truncate"],n,[1,"text-truncate",2,"width","5em"],r,[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],[1,"btn","btn-light",3,"click"],s,["scope","row"],[1,"text-truncate",3,"title"],["title","Edit",1,"gt-icon",2,"cursor","pointer",3,"click"],["title","Remove",1,"gt-icon",2,"cursor","pointer",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"config-form",0),e.NdJ("formChange",function(s){return n.onchange(s)}),e.qZA(),e.TgZ(1,"p"),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"table",1)(4,"thead")(5,"tr")(6,"th",2),e.SDv(7,3),e.qZA(),e.TgZ(8,"th",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"th",6),e.SDv(11,7),e.qZA(),e.TgZ(12,"th",8),e.SDv(13,9),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,zo,12,4,"tr",10),e.qZA()(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){return n.actionEdit()}),e.SDv(18,13),e.qZA()()),2&t&&(e.Q6J("formList",n.formList),e.xp6(15),e.Q6J("ngForOf",n.actions))},dependencies:[u.sg,it],encapsulation:2,changeDetection:0}),o})(),pn=(()=>{class o{constructor(t,n,r){this.events=t,this.cdr=n,this.configList=r,this.subscription=I.w0.EMPTY}set gtNode(t){this._gtNode=t,this.formList=this.getFormList()}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}getFormList(){return this.configList.get(this.gtNode.type).get(this.type).map(t=>({...t,value:this.gtNode[this.type][t.name],inherit:this.gtNode.template?!Object.prototype.hasOwnProperty.call(this.gtNode[this.type],t.name):void 0}))}inheritClick({formItem:t,formControl:n}){if(!1===t.inherit){const r=this.gtNode[this.type][t.name];Reflect.deleteProperty(this.gtNode[this.type],t.name),n.reset(this.gtNode[this.type][t.name],{emitEvent:!1}),this.events["CHANGE_"+this.type.toUpperCase()].next({name:t.name,value:void 0,previousValue:r,gtNode:this.gtNode}),t.inherit=!0,this.cdr.markForCheck()}}onchange({formItem:t,formControl:n}){const{name:r,value:s}=t,a=this.gtNode[this.type][r];this.gtNode[this.type][r]=s,this.events["CHANGE_"+this.type.toUpperCase()].next({name:r,value:s,previousValue:a,gtNode:this.gtNode}),this.gtNode.template&&(t.inherit=!1),void 0!==t.inherit&&(t.inherit=!this.gtNode[this.type].hasOwnProperty(r)),n.setValue(t.value,{emitEvent:!1,onlySelf:!0}),this.cdr.markForCheck()}dataBind({formItem:t,formControl:n}){this.events.target.dispatchEvent(new ft(n.value instanceof g.Sl?n.value.data:n.value)),this.subscription.unsubscribe(),this.subscription=(0,D.R)(this.events.target,"editexpressionend").pipe((0,N.q)(1)).subscribe(r=>{this.onchange({formItem:{...t,value:new g.Sl(r.expression)},formControl:n})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(W),e.Y36(e.sBO),e.Y36(gt))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-config"]],viewQuery:function(t,n){if(1&t&&e.Gf(it,7),2&t){let r;e.iGM(r=e.CRH())&&(n.formComp=r.first)}},inputs:{type:"type",gtNode:"gtNode"},decls:1,vars:1,consts:[[3,"formList","formChange","dataBindClick","inheritClick"]],template:function(t,n){1&t&&(e.TgZ(0,"config-form",0),e.NdJ("formChange",function(s){return n.onchange(s)})("dataBindClick",function(s){return n.dataBind(s)})("inheritClick",function(s){return n.inheritClick(s)}),e.qZA()),2&t&&e.Q6J("formList",n.formList)},dependencies:[it],encapsulation:2,changeDetection:0}),o})();const jo=["dropdown"];function Xo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Input"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"input"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.input)}}function Ko(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Output"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"output"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.output)}}function Wo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(9,"i",11),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"ul",13),e.YNc(12,Xo,4,1,"li",14),e.YNc(13,Ko,4,1,"li",14),e.qZA()()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(9),e.Q6J("ngIf",t.form.input),e.xp6(1),e.Q6J("ngIf",t.form.output)}}const ei=[{text:"if"},{text:"for"}];let un=(()=>{class o{constructor(t,n){this.cdr=t,this.events=n,this.subscription=I.w0.EMPTY,this.directives=[],this.directiveTypes=ei}set gtNode(t){this.directives=t.directive.map(({type:n,value:r})=>this.getDirective(n,r)),this._gtNode=t}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}formChange(t,n,r){t.valid&&(n.value[r]=t.value,this.updateGtNodeValidator())}getDirective(t,n={}){switch(t){case"if":return{title:t,form:{input:[{type:"text",name:"default",value:n.input?.default,expression:!0,validators:p.kI.required}]},value:{}};case"for":return{title:t,form:{input:[{type:"text",name:"default",value:n.input?.default,expression:!0,validators:p.kI.required}],output:[{type:"text",name:"index",value:n.output?.index},{type:"text",name:"item",value:n.output?.item}],export:[]},value:{}};default:throw new Error}}addDirective(t){this.directives.push(this.getDirective(t)),this.updateGtNodeValidator()}removeValidator(t){this.directives.splice(this.directives.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.directive=this.directives.map(t=>({needTemplate:!0,type:t.title,value:t.value}))}editExpression(t){this.events.target.dispatchEvent(new ft(t.control.value instanceof g.Sl?t.control.value.data:"")),this.subscription.unsubscribe(),this.subscription=(0,D.R)(this.events.target,"editexpressionend").pipe((0,N.q)(1)).subscribe(r=>{t.control.setValue(new g.Sl(r.expression)),this.cdr.markForCheck()})}dropped(t){(0,G.bA)(this.directives,t.previousIndex,t.currentIndex),this.updateGtNodeValidator()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-directive"]],viewQuery:function(t,n){if(1&t&&e.Gf(jo,7),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{gtNode:"gtNode"},decls:6,vars:2,consts:function(){let i;return i=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],["dropdownButton",""],i,["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"card-title","text-center"],[3,"formList","formChange","expressionClick"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return n.dropped(s)}),e.YNc(1,Wo,14,3,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3,4),e.NdJ("itemClick",function(s){return n.addDirective(s.text)}),e.SDv(5,5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.directives),e.xp6(2),e.Q6J("items",n.directiveTypes))},dependencies:[u.sg,u.O5,G.Wj,G.Zt,G.Bh,h,St],encapsulation:2}),o})();const ri=["dropdown"];function si(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-panel-card",5),e.NdJ("removeItem",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(1,"config-form",6),e.NdJ("formChange",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.formChange(a,r))}),e.qZA()()}if(2&o){const t=i.$implicit;e.Q6J("item",t),e.xp6(1),e.Q6J("formList",t.formList)}}const ai=[{text:"min"},{text:"max"},{text:"required"},{text:"requiredTrue"},{text:"email"},{text:"minLength"},{text:"maxLength"},{text:"pattern"}];let _n=(()=>{class o{constructor(){this.validators=[],this.validatorTypes=ai}set gtNode(t){this._gtNode=t,this.validators=t.validator.map(({type:n,value:r})=>({title:n,formList:hn(n,r),value:r}))}get gtNode(){return this._gtNode}formChange(t,n){t.value=n.formControl.root.value,this.updateGtNodeValidator()}addValidator(t){const n=hn(t);this.validators.push({title:t,formList:n,value:{}}),this.updateGtNodeValidator()}removeValidator(t){this.validators.splice(this.validators.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.validator=this.validators.map(t=>({type:t.title,value:t.value}))}dropped(t){(0,G.bA)(this.validators,t.previousIndex,t.currentIndex),(0,G.bA)(this.gtNode.validator,t.previousIndex,t.currentIndex)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-validator"]],viewQuery:function(t,n){if(1&t&&e.Gf(ri,7),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{gtNode:"gtNode"},decls:5,vars:2,consts:function(){let i;return i=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped"],[3,"item","removeItem",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],i,[3,"item","removeItem"],[3,"formList","formChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return n.dropped(s)}),e.YNc(1,si,2,2,"gt-panel-card",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("itemClick",function(s){return n.addValidator(s.text)}),e.SDv(4,4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.validators),e.xp6(2),e.Q6J("items",n.validatorTypes))},dependencies:[u.sg,it,G.Wj,h,cn],encapsulation:2}),o})();function hn(o,i={}){switch(o){case"min":return[{type:"number",name:"min",value:i.min},{type:"text",name:"errorText",value:i.errorText}];case"max":return[{type:"number",name:"max",value:i.max},{type:"text",name:"errorText",value:i.errorText}];case"required":case"requiredTrue":case"email":default:return[{type:"text",name:"errorText",value:i.errorText}];case"minLength":return[{type:"number",name:"minLength",value:i.minLength},{type:"text",name:"errorText",value:i.errorText}];case"maxLength":return[{type:"number",name:"maxLength",value:i.maxLength},{type:"text",name:"errorText",value:i.errorText}];case"pattern":return[{type:"text",name:"pattern",value:i.pattern},{type:"text",name:"errorText",value:i.errorText}]}}const li=["editTemplate"];function ci(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",14)(2,"label",15),e.SDv(3,16),e.qZA(),e.TgZ(4,"div",17),e._uU(5),e.qZA()(),e.TgZ(6,"div",14)(7,"label",15),e.SDv(8,18),e.qZA(),e.TgZ(9,"div",17),e._uU(10),e.qZA()(),e.TgZ(11,"div",14)(12,"label",15),e.SDv(13,19),e.qZA(),e.TgZ(14,"div",17),e._uU(15),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editingVariable=r)}),e.SDv(17,20),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.removeVariable(r))}),e.SDv(19,21),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.type),e.xp6(5),e.Oqu(t.value)}}function di(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"gt-panel-form",22,23),e.NdJ("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA(),e.TgZ(3,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2),s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.finishEdit(r.formGroup,s))}),e.SDv(4,24),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("formList",n.formList)("value",t)}}function pi(o,i){if(1&o&&(e.TgZ(0,"li",12),e.YNc(1,ci,20,3,"div",13),e.YNc(2,di,5,2,"div",13),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t!==n.editingVariable),e.xp6(1),e.Q6J("ngIf",t===n.editingVariable)}}let mn=(()=>{class o{constructor(t,n){this.cdr=t,this.events=n,this.subscription=I.w0.EMPTY,this.editingVariable=null,this.formList=[{label:"\u53d8\u91cf\u540d",name:"name",type:"text",validators:p.kI.required},{label:"\u6570\u636e\u7c7b\u578b",name:"type",type:"select",validators:p.kI.required,options:[{label:"Boolean",value:"Boolean"},{label:"String",value:"String"},{label:"Number",value:"Number"},{label:"Null",value:"Null"}]},{label:"\u53d8\u91cf\u503c",name:"value",type:"text",validators:p.kI.required,expression:!0}]}set gtNode(t){this._gtNode=t,this.variableName=t.variableName,this.variables=t.variable}get gtNode(){return this._gtNode}ngOnDestroy(){this.subscription.unsubscribe()}variableNameChange(){this.gtNode.variableName=this.variableName}addVariable(t){if(t.invalid)return void Object.values(t.controls).forEach(r=>r.markAsTouched());const n=this.normalizeVariable(t.value);if(n){if(this.gtNode.variable.find(({name:r})=>r===n.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});this.gtNode.variable.push(n),t.reset()}}normalizeVariable(t){switch(t.value instanceof g.Sl&&(t.type="DataBinding"),t.type){case"Boolean":t.value=!!t.value;break;case"String":t.value=String(t.value);break;case"Number":t.value=Number(t.value);break;case"Null":t.value=null;break;case"DataBinding":break;default:return null}return{...t}}removeVariable(t){this.gtNode.variable.splice(this.gtNode.variable.indexOf(t),1)}finishEdit(t,n){if(t.invalid)return void Object.values(t.controls).forEach(s=>s.markAsTouched());const r=this.normalizeVariable(t.value);if(r){if(this.gtNode.variable.find(a=>a!==n&&a.name===r.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});const s=this.gtNode.variable.indexOf(n);this.gtNode.variable.splice(s,1,r),this.editingVariable=null}}editExpression(t){this.events.target.dispatchEvent(new ft(t.control.value instanceof g.Sl?t.control.value.data:"")),this.subscription.unsubscribe(),this.subscription=(0,D.R)(this.events.target,"editexpressionend").pipe((0,N.q)(1)).subscribe(r=>{t.control.setValue(new g.Sl(r.expression)),this.cdr.markForCheck()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-panel-variable"]],viewQuery:function(t,n){if(1&t&&e.Gf(li,7),2&t){let r;e.iGM(r=e.CRH())&&(n.editTemplate=r.first)}},inputs:{gtNode:"gtNode"},decls:12,vars:3,consts:function(){let i,t,n,r,s,a,l,c;return i="\u7EC4\u4EF6\u53D8\u91CF\u540D",t=" \u589E\u52A0 ",n="\u53D8\u91CF\u540D",r="\u6570\u636E\u7C7B\u578B",s="\u53D8\u91CF\u503C",a=" \u4FEE\u6539 ",l=" \u5220\u9664 ",c=" \u5B8C\u6210 ",[[1,"card"],[1,"card-header"],[1,"card-title"],i,["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","bg-secondary-subtle"],[3,"formList","expressionClick"],["form",""],["type","button",1,"btn","btn-link",3,"click"],t,[1,"list-group-item"],[4,"ngIf"],[1,"mb-3"],[1,"form-label"],n,[1,"form-control"],r,s,a,l,[3,"formList","value","expressionClick"],["editForm",""],c]},template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(a){return n.variableName=a})("ngModelChange",function(){return n.variableNameChange()}),e.qZA()(),e.TgZ(5,"ul",5),e.YNc(6,pi,3,2,"li",6),e.TgZ(7,"li",7)(8,"gt-panel-form",8,9),e.NdJ("expressionClick",function(a){return n.editExpression(a)}),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(9);return e.KtG(n.addVariable(a.formGroup))}),e.SDv(11,11),e.qZA()()()()}2&t&&(e.xp6(4),e.Q6J("ngModel",n.variableName),e.xp6(2),e.Q6J("ngForOf",n.variables),e.xp6(2),e.Q6J("formList",n.formList))},dependencies:[u.sg,u.O5,p.Fj,p.JJ,p.On,St],encapsulation:2}),o})(),ui=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,p.u5,vo,G._t,je,p.UX,$.eL]}),o})();function _i(o,i){}let hi=(()=>{class o{constructor(t,n){this.gt=t,this.cdr=n,this.windowClose=new e.vpe,this.dragEnded=new e.vpe}updateTransform(t){this.transform=t,this.cdr.detectChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-float-bar"]],hostAttrs:[2,"width","0","height","0"],inputs:{icon:"icon",componentPortal:"componentPortal"},outputs:{windowClose:"windowClose",dragEnded:"dragEnded"},decls:11,vars:8,consts:[["cdkDrag","","cdkDragBoundary","html","gtResize","",1,"card",2,"width","260px","height","600px",3,"resizes","minWidth","minHeight","transform","updateTransform","cdkDragEnded"],["cdkDragHandle","",1,"card-header","bg-body",2,"cursor","move"],[1,"nav","nav-pills","card-header-pills"],[1,"nav-item"],[1,"nav-link","active"],[1,"gt-icon"],[1,"nav-item","ms-auto","mt-1"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"card-body","p-0","overflow-scroll"],[3,"cdkPortalOutlet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("updateTransform",function(s){return n.updateTransform(s)})("cdkDragEnded",function(s){return n.dragEnded.emit(s)}),e.TgZ(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4)(5,"i",5),e._uU(6),e.qZA()()(),e.TgZ(7,"li",6)(8,"button",7),e.NdJ("click",function(){return n.windowClose.emit()}),e.qZA()()()(),e.TgZ(9,"div",8),e.YNc(10,_i,0,0,"ng-template",9),e.qZA()()),2&t&&(e.Udp("transform",n.transform),e.Q6J("resizes","all")("minWidth",180)("minHeight",300)("transform",!0),e.xp6(6),e.Oqu(n.icon),e.xp6(4),e.Q6J("cdkPortalOutlet",n.componentPortal))},dependencies:[G.Zt,G.Bh,$.Pl,yt],encapsulation:2}),o})();var mi=b(9841);const gi=["*"];let Mt=(()=>{class o{constructor(){this.multi=!1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion"]],inputs:{multi:"multi"},ngContentSelectors:gi,decls:2,vars:1,consts:[["cdkAccordion","",1,"accordion","accordion-flush","border-bottom",3,"multi"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&t&&e.Q6J("multi",n.multi)},dependencies:[Ne.xI],encapsulation:2}),o})();function fi(o,i){1&o&&(e.TgZ(0,"div",2),e.SDv(1,3),e.qZA())}function Ci(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",12),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("variable"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("variable"))}),e._UZ(1,"gt-panel-variable",13),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.variable),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function bi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",14),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("property"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("property"))}),e._UZ(1,"gt-panel-config",15),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.property),e.xp6(1),e.Q6J("type","property")("gtNode",t.gtNode)}}function vi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",16),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("style"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("style"))}),e._UZ(1,"gt-panel-config",15),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.style),e.xp6(1),e.Q6J("type","style")("gtNode",t.gtNode)}}function Ti(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",17),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("rights"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("rights"))}),e._UZ(1,"gt-panel-config",15),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.rights),e.xp6(1),e.Q6J("type","rights")("gtNode",t.gtNode)}}function yi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",18),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("directive"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("directive"))}),e._UZ(1,"gt-panel-directive",13),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.directive),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function xi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",19),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("validator"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("validator"))}),e._UZ(1,"gt-panel-validator",13),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.validator),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Ei(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",20),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("action"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("action"))}),e._UZ(1,"gt-panel-action",13),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("expanded",t.gt.settings.configAccordionExpanded.action),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Ni(o,i){if(1&o&&(e.TgZ(0,"gt-accordion",4),e.YNc(1,Ci,2,2,"gt-accordion-item",5),e.YNc(2,bi,2,3,"gt-accordion-item",6),e.YNc(3,vi,2,3,"gt-accordion-item",7),e.YNc(4,Ti,2,3,"gt-accordion-item",8),e.YNc(5,yi,2,2,"gt-accordion-item",9),e.YNc(6,xi,2,2,"gt-accordion-item",10),e.YNc(7,Ei,2,2,"gt-accordion-item",11),e.qZA()),2&o){const t=e.oxw();e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngIf",t.gtNode.variable),e.xp6(1),e.Q6J("ngIf",t.gtNode.property),e.xp6(1),e.Q6J("ngIf",t.gtNode.style),e.xp6(1),e.Q6J("ngIf",t.gtNode.rights),e.xp6(1),e.Q6J("ngIf",t.gtNode.directive),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator)}}let gn=(()=>{class o{constructor(t,n,r){this.gt=t,this.subscription=I.w0.EMPTY,this.subscription=(0,mi.a)([(0,L.T)((0,ye.of)(t.selected),r.CHANGE_SELECT),(0,L.T)((0,ye.of)(null),r.REDO,r.UNDO,r.PASTE_STYLE)]).pipe((0,j.b)(10)).subscribe(([s])=>{this.gtNode=1===s.length?s[0]:null,n.detectChanges()})}ngOnDestroy(){this.subscription.unsubscribe()}opened(t){this.gt.settings.changeConfigAccordionExpanded(t,!0)}closed(t){this.gt.settings.changeConfigAccordionExpanded(t,!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(e.sBO),e.Y36(W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion-config"]],viewQuery:function(t,n){if(1&t&&e.Gf(_e,5),2&t){let r;e.iGM(r=e.CRH())&&(n.accordionList=r)}},decls:2,vars:2,consts:function(){let i,t,n,r,s,a,l,c;return i=" \u8BF7\u9009\u4E2D\u4E00\u4E2A\u7EC4\u4EF6\uFF01 ",t="\u53D8\u91CF",n="\u5C5E\u6027",r="\u6837\u5F0F",s="\u6743\u9650",a="\u6307\u4EE4",l="\u6821\u9A8C",c="\u4E8B\u4EF6",[["class","bg-secondary-subtle p-2 text-center border-bottom",4,"ngIf"],[3,"multi",4,"ngIf"],[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],i,[3,"multi"],["cardTitle",t,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",n,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",r,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",s,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",a,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",l,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",c,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",t,3,"expanded","opened","closed"],[3,"gtNode"],["cardTitle",n,3,"expanded","opened","closed"],[3,"type","gtNode"],["cardTitle",r,3,"expanded","opened","closed"],["cardTitle",s,3,"expanded","opened","closed"],["cardTitle",a,3,"expanded","opened","closed"],["cardTitle",l,3,"expanded","opened","closed"],["cardTitle",c,3,"expanded","opened","closed"]]},template:function(t,n){1&t&&(e.YNc(0,fi,2,0,"div",0),e.YNc(1,Ni,8,8,"gt-accordion",1)),2&t&&(e.Q6J("ngIf",!n.gtNode),e.xp6(1),e.Q6J("ngIf",n.gtNode))},dependencies:[u.O5,pn,_n,un,mn,ln,Mt,_e],encapsulation:2,changeDetection:0}),o})();var Si=b(5577);function Mi(o,i){if(1&o&&(e.TgZ(0,"i",9),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.icon||"custom")}}function wi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",5,6),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))}),e.YNc(2,Mi,2,1,"i",7),e.TgZ(3,"div",8),e._uU(4),e.qZA()()}if(2&o){const t=i.$implicit;e.Q6J("title",t.label),e.uIk("data-type",t.type),e.xp6(2),e.Q6J("ngIf",t.icon),e.xp6(2),e.Oqu(t.label)}}function Oi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",2),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.opened(s))})("closed",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.closed(s))}),e.TgZ(1,"div",3),e.YNc(2,wi,5,4,"button",4),e.qZA()()}if(2&o){const t=i.$implicit;e.Q6J("cardTitle",t.title)("expanded",t.expanded),e.xp6(2),e.Q6J("ngForOf",t.elements)}}function ki(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",17),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.type=r)})("blur",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.editTypeMode=!1)}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("ngModel",t.type)}}function Ai(o,i){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name||t.type," ")}}function Ii(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",14,6),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.MAs(1),c=e.oxw(2);return e.KtG(c.itemDrag(a,l,r))})("dblclick",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editCustom(s))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.editCustomInfo(a,r))}),e.TgZ(2,"i",9),e._uU(3,"custom"),e.qZA(),e.YNc(4,ki,1,1,"input",15),e.YNc(5,Ai,2,1,"div",16),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",n.gt.currentBoard===t),e.Q6J("title",t.name||t.type),e.uIk("data-id",t.id),e.xp6(4),e.Q6J("ngIf",n.editTypeMode),e.xp6(1),e.Q6J("ngIf",!n.editTypeMode)}}function Di(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",2),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.opened(s))})("closed",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.closed(s))}),e.TgZ(1,"div",3),e.YNc(2,Ii,6,6,"button",10),e.qZA(),e.TgZ(3,"div",11)(4,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addCustom(s.type))}),e.SDv(5,13),e.qZA()()()}if(2&o){const t=i.$implicit;e.Q6J("cardTitle",t.title)("expanded",t.expanded),e.xp6(2),e.Q6J("ngForOf",t.elements),e.xp6(1),e.ekj("mt-2",t.elements.length)}}let fn=(()=>{class o{constructor(t,n,r,s,a,l,c,d,_){this.gt=t,this.cdr=n,this.events=r,this.translateAnimation=s,this.contextmenu=a,this._document=l,this.templateMap=c,this.gtAuth=d,this.internalElementLists=_,this.editMode=!1,this.editTypeMode=!1,this.customList=[{title:"\u81EA\u5B9A\u4E49",type:"cc",elements:this.gt.customComponent,expanded:this.gt.settings.elementAccordionExpanded["\u81EA\u5B9A\u4E49"]},{title:"\u81EA\u5B9A\u4E49(Remote)",type:"rcc",elements:this.gt.remoteCustomComponent,expanded:this.gt.settings.elementAccordionExpanded["\u81EA\u5B9A\u4E49(Remote)"]}],this.internalElementLists.forEach(m=>{m.expanded=this.gt.settings.elementAccordionExpanded[m.title]}),this.templateMap=c.reduce((m,f)=>({...m,...f}),{}),this.events.CHANGE_BOARD.subscribe(()=>{this.cdr.detectChanges()})}itemDrag(t,n,r){if((!this.gt.currentBoard||"cc"===this.gt.currentBoard.type||"rcc"===this.gt.currentBoard.type)&&t instanceof g.$l)return void this.gt.log.next({type:"warning",message:"\u76ee\u524d\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u65e0\u6cd5\u5d4c\u5957\u4f7f\u7528"});if(!ce(r)&&0!==r.button)return;r.stopPropagation(),r.preventDefault();let s=null,a=null,l=null;xe(this._document.documentElement,"userSelect","none"),((o,i)=>Pe(o,i).pipe(qt(t=>{const{x:n,y:r}=We(i,t);return Math.abs(n)+Math.abs(r)<30}),(0,N.q)(1),(0,V.R)(Be(o,i).pipe((0,v.b)(()=>le(o.documentElement,"userSelect"))))))(this._document,r).pipe((0,y.U)(()=>{this.cdr.detach();const c=this._document.createElement("div");l=n;const d=t.type;let _;_="cc"===d||"rcc"===d?'<div style="width: 10rem;height: 10rem;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u81ea\u5b9a\u4e49\u7ec4\u4ef6</div>':this.templateMap[d]?this.templateMap[d]:'<div style="width: 10rem;height: 10rem;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u672a\u77e5\u7ec4\u4ef6</div>',c.style.setProperty("max-width","10rem"),c.innerHTML=_;const m=c.cloneNode(!0),f=c.children[0].cloneNode(!0),x=c.children[0].cloneNode(!0);m.classList.add("draggable-mirror"),f.classList.add("draggable-placeholder"),x.classList.add("draggable-source");const{x:Q,y:J}=bt(r);return m.style.transform=`translate(${Q}px,${J}px)`,m.classList.add("draggable-mirror"),m.style.left="0",m.style.top="0",this._document.body.appendChild(m),this._document.body.appendChild(f),{mirror:m,placeholder:f,source:x,event:r}})).pipe((0,Si.z)(({event:c,mirror:d,placeholder:_,source:m})=>Pe(this._document,c).pipe((0,v.b)(f=>{const{x,y:Q}=bt(f);d.style.transform=`translate(${x}px,${Q}px)`}),(0,y.U)(f=>Xt(f,m,this._document)),(0,se.h)(f=>!!f),(0,se.h)(({parentElement:f})=>!f.dataset.accept||f.dataset.accept.split(",").includes(l.dataset.type)),(0,y.U)(({refChild:f,parentElement:x})=>(a=f,s=x,{refChild:f,parentElement:x})),Se((f,x)=>f.parentElement===x.parentElement&&f.refChild===x.refChild),(0,v.b)(({parentElement:f,refChild:x})=>{const Q=Array.prototype.filter.call(f.children,B=>B!==m).map(B=>B.getBoundingClientRect());f.insertBefore(m,x);const J=Array.prototype.filter.call(f.children,B=>B!==m).map(B=>B.getBoundingClientRect());Array.prototype.filter.call(f.children,B=>B!==m).forEach((B,Z)=>{this.translateAnimation.add({element:B,from:{left:Q[Z].left-J[Z].left,top:Q[Z].top-J[Z].top}})});const P=m.getBoundingClientRect();_.style.width=P.width+"px",_.style.height=P.height+"px",this.translateAnimation.add({element:_,to:{left:P.left,top:P.top}})}),(0,V.R)(Be(this._document,c).pipe((0,v.b)(()=>{if(le(this._document.documentElement,"userSelect"),Ze(_),Ze(m),Ze(d),this.cdr.reattach(),!s)return;const f=Kt(s).dataset.id,x=this.gt.getNodeById(f),Q=a&&this.gt.getNodeById(a.dataset.id),J=Q?Q.parent.children.indexOf(Q):x.children.length;t instanceof g.$l?this.gt.addCustomNode(l.dataset.id,x,J):this.gt.addNode(t.type,x,J,t.content,s.dataset.droppable),s=null,a=null})))))).subscribe()}addCustom(t){switch(t){case"cc":this.gt.addCustomComponent();break;case"rcc":this.gt.addRemoteCustomComponent()}}editCustom(t){this.gt.setCurrentBoard(t),this.editMode=!0}editCustomInfo(t,n){n.stopPropagation(),n.preventDefault();const r=[{label:"\u4FEE\u6539",onclick:()=>{this.editType()}},{label:"\u5220\u9664",onclick:()=>{this.gt.removeBoard(t),this.cdr.detectChanges(),"rcc"===t.type&&this.events.REMOVE_COMPONENT.emit({id:t.id})}}];"rcc"===t.type&&r.unshift({label:"\u4E0A\u4F20",onclick:()=>{this.events.SAVE_COMPONENT.emit({config:JSON.stringify(t.export()),id:t.id})}}),this.contextmenu.create(n,r)}editType(){this.editTypeMode=!this.editTypeMode,this.cdr.detectChanges()}opened(t){t.expanded=!0,this.gt.settings.changeElementAccordionExpanded(t.title,!0)}closed(t){t.expanded=!1,this.gt.settings.changeElementAccordionExpanded(t.title,!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(e.sBO),e.Y36(W),e.Y36(et),e.Y36(Me),e.Y36(u.K0),e.Y36(X),e.Y36(K),e.Y36(ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion-element"]],features:[e._Bn([et])],decls:3,vars:3,consts:function(){let i;return i="\u6DFB\u52A0",[[3,"multi"],[3,"cardTitle","expanded","opened","closed",4,"ngFor","ngForOf"],[3,"cardTitle","expanded","opened","closed"],[1,"d-grid",2,"grid","auto / 1fr 1fr 1fr","grid-gap",".5rem"],["type","button","class","text-center btn btn-text overflow-hidden",3,"title","mousedown","touchstart",4,"ngFor","ngForOf"],["type","button",1,"text-center","btn","btn-text","overflow-hidden",3,"title","mousedown","touchstart"],["target",""],["class","fs-1 gt-icon",4,"ngIf"],[1,"text-truncate"],[1,"fs-1","gt-icon"],["type","button","class","text-center btn btn-text overflow-hidden",3,"active","title","mousedown","touchstart","dblclick","contextmenu",4,"ngFor","ngForOf"],[1,"d-grid","gap-2"],[1,"btn","btn-light",3,"click"],i,["type","button",1,"text-center","btn","btn-text","overflow-hidden",3,"title","mousedown","touchstart","dblclick","contextmenu"],["type","text","class","form-control input-xs",3,"ngModel","ngModelChange","blur",4,"ngIf"],["class","text-truncate",4,"ngIf"],["type","text",1,"form-control","input-xs",3,"ngModel","ngModelChange","blur"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,Oi,3,3,"gt-accordion-item",1),e.YNc(2,Di,6,5,"gt-accordion-item",1),e.qZA()),2&t&&(e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngForOf",n.internalElementLists),e.xp6(1),e.Q6J("ngForOf",n.customList))},dependencies:[p.Fj,p.JJ,p.On,u.sg,u.O5,Mt,_e],encapsulation:2,changeDetection:0}),o})();function Ri(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"i",9),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw().remove(s,r),e.KtG(r.stopPropagation())}),e._uU(1,"trash"),e.qZA()}}function Pi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"gt-accordion-item",6),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.switchBoard(r))}),e.YNc(1,Ri,2,0,"i",7),e._UZ(2,"gt-board-edit",8),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("cardTitle",t.name||"Main"),e.xp6(1),e.Q6J("ngIf","main"!==t.type),e.xp6(1),e.Q6J("board",t)}}function Bi(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Pi,3,3,"gt-accordion-item",5),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","cc"!==t.type&&"rcc"!==t.type)}}let Cn=(()=>{class o{constructor(t){this.gt=t}remove(t,n){n.stopPropagation(),this.gt.removeBoard(t)}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion-page"]],decls:5,vars:2,consts:function(){let i;return i="\u6DFB\u52A0",[[3,"multi"],[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","p-3"],[1,"btn","btn-light",3,"click"],i,[3,"cardTitle","opened",4,"ngIf"],[3,"cardTitle","opened"],["class","gt-icon me-2 accordion-header-buttons","style","cursor:pointer;",3,"click",4,"ngIf"],[3,"board"],[1,"gt-icon","me-2","accordion-header-buttons",2,"cursor","pointer",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,Bi,2,1,"ng-container",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.gt.addBoard()}),e.SDv(4,4),e.qZA()()),2&t&&(e.Q6J("multi",!1),e.xp6(1),e.Q6J("ngForOf",n.gt.boards))},dependencies:[u.sg,u.O5,dn,Mt,_e],encapsulation:2,changeDetection:0}),o})();class Zi{constructor(i,t,n,r){this.transformFunction=i,this.getLevel=t,this.isExpandable=n,this.getChildren=r}_flattenNode(i,t,n,r){const s=this.transformFunction(i,t);if(n.push(s),this.isExpandable(s)){const a=this.getChildren(i);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,r):a.pipe((0,N.q)(1)).subscribe(l=>{this._flattenChildren(l,t,n,r)}))}return n}_flattenChildren(i,t,n,r){i.forEach((s,a)=>{let l=r.slice();l.push(a!==i.length-1),this._flattenNode(s,t+1,n,l)})}flattenNodes(i){let t=[];return i.forEach(n=>this._flattenNode(n,0,t,[])),t}expandFlattenedNodes(i,t){let n=[],r=[];return r[0]=!0,i.forEach(s=>{let a=!0;for(let l=0;l<=this.getLevel(s);l++)a=a&&r[l];a&&n.push(s),this.isExpandable(s)&&(r[this.getLevel(s)+1]=t.isExpanded(s))}),n}}class Li extends rt.o2{constructor(i,t,n){super(),this._treeControl=i,this._treeFlattener=t,this._flattenedData=new st.X([]),this._expandedData=new st.X([]),this._data=new st.X([]),n&&(this.data=n)}get data(){return this._data.value}set data(i){this._data.next(i),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(i){return(0,L.T)(i.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,y.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Fi(o,i){if(1&o&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("(Outlet ID: ",t.source.outletID,")")}}function Gi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"cdk-tree-node",6)(1,"div",7),e._UZ(2,"div",8),e.TgZ(3,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.selectTreeNode(s.source))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(4),e.YNc(5,Fi,2,1,"small",10),e.qZA()()()}if(2&o){const t=i.$implicit,n=e.oxw();e.Q6J("cdkDragDisabled",t.source.template&&!t.source.isTemplateRoot)("cdkDragData",t.source),e.xp6(3),e.ekj("active",n.gt.selected.includes(t.source)),e.xp6(1),e.hij(" ",t.type," "),e.xp6(1),e.Q6J("ngIf",t.source.outletID)}}function Ji(o,i){if(1&o&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("(Outlet ID: ",t.source.outletID,")")}}function Yi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"cdk-tree-node",11)(1,"div",7)(2,"button",12)(3,"i",13),e._uU(4,"chevron_right"),e.qZA()(),e.TgZ(5,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.selectTreeNode(s.source))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(6),e.YNc(7,Ji,2,1,"small",10),e.qZA()()()}if(2&o){const t=i.$implicit,n=e.oxw();e.Q6J("cdkDragData",t.source),e.xp6(2),e.Udp("transform",n.treeControl.isExpanded(t)?"rotate(90deg)":""),e.uIk("aria-label","Toggle "+t.type),e.xp6(3),e.ekj("active",n.gt.selected.includes(t.source)),e.xp6(1),e.AsE(" ",t.type," ( ",t.source.children.length," ) "),e.xp6(1),e.Q6J("ngIf",t.source.outletID)}}let bn=(()=>{class o{constructor(t,n,r,s,a){this.gt=t,this.events=n,this.cdr=r,this.contextmenu=s,this.gtContextMenu=a,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this._transformer=(l,c)=>{const d=this.nestedNodeMap.get(l),_=d&&d.source===l&&d.expandable===(!!l.children&&l.children.length>0)&&d.level===c?d:{expandable:!!l.children&&l.children.length>0,type:l.type,level:c,source:l};return _.source=l,_.level=c,_.expandable=!!l.children&&l.children.length>0,this.flatNodeMap.set(_,l),this.nestedNodeMap.set(l,_),_},this.treeControl=new Ao(l=>l.level,l=>l.expandable),this.treeFlattener=new Zi(this._transformer,l=>l.level,l=>l.expandable,l=>l.children),this.dataSource=new Li(this.treeControl,this.treeFlattener),this.hasChild=(l,c)=>c.expandable,this.subscription1=I.w0.EMPTY,this.subscription2=I.w0.EMPTY}ngOnInit(){this.subscription1=(0,L.T)((0,ye.of)(null),this.events.onEvent.pipe((0,se.h)(({type:t})=>["INSERT_NODE","REMOVE_NODE","MOVE_NODE","CHANGE_SELECT","UNDO","REDO","CHANGE_BOARD"].indexOf(t)>-1))).subscribe(()=>{this.dataSource.data=[this.gt.currentBoard.gt],this.cdr.detectChanges()}),this.subscription2=this.events.CHANGE_SELECT.subscribe(t=>{t.forEach(n=>{n.path.forEach(r=>{const s=this.nestedNodeMap.get(r);this.treeControl.expand(s)})})})}ngOnDestroy(){this.subscription1.unsubscribe(),this.subscription2.unsubscribe()}onContextmenu(t,n){if(n.preventDefault(),this.gt.selected.includes(t)||this.gt.changeSelect(t),this.gtContextMenu){const r=this.gtContextMenu(this.gt,t);this.contextmenu.create(n,r)}}selectTreeNode(t){const n=this.gt.getNodeById(t.id);n&&!this.gt.selected.includes(n)&&this.gt.changeSelect(n)}onEvent(t){const n=this.gt.getNodeById(t.node.id);this.gt.selected.includes(n)||this.gt.changeSelect(n)}cdkDropListSortPredicate(t,n,r){const s=n.data,a=r.getSortedItems()[t].data;return!!a.parent&&!a.path.includes(s)}cdkDropListDropped({currentIndex:t,container:n,item:r}){const s=n.getSortedItems()[t];this.gt.moveNode(r.data,s.data.parent,s.data.parent.children.indexOf(s.data))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(W),e.Y36(e.sBO),e.Y36(Me),e.Y36(k,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion-elTree"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ee,5),e.Gf(rn,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.tree=r.first),e.iGM(r=e.CRH())&&(n.treeNodes=r)}},decls:6,vars:5,consts:function(){let i;return i=" \u5171" + "\ufffd0\ufffd" + "\u4E2A\u8282\u70B9 ",[[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],i,[1,"p-3"],["cdkDropList","",1,"py-2",3,"dataSource","treeControl","cdkDropListSortPredicate","cdkDropListDropped"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragDisabled","cdkDragData",4,"cdkTreeNodeDef"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragData",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragDisabled","cdkDragData"],[1,"d-flex","align-items-center","px-1"],[2,"width","2rem"],["type","button",1,"btn","btn-text","btn-sm","text-nowrap",3,"click","contextmenu"],[4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragData"],["type","button","cdkTreeNodeToggle","",1,"btn","btn-expander","btn-sm"],[1,"gt-icon"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"div",2)(3,"cdk-tree",3),e.NdJ("cdkDropListDropped",function(s){return n.cdkDropListDropped(s)}),e.YNc(4,Gi,6,6,"cdk-tree-node",4),e.YNc(5,Yi,8,9,"cdk-tree-node",5),e.qZA()()),2&t&&(e.xp6(1),e.pQV(n.gt.currentBoard.nodeList.size),e.QtT(1),e.xp6(2),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl)("cdkDropListSortPredicate",n.cdkDropListSortPredicate),e.xp6(2),e.Q6J("cdkTreeNodeDefWhen",n.hasChild))},dependencies:[u.O5,G.Wj,G.Zt,Nt,sn,an,Ee,me],encapsulation:2,changeDetection:0}),o})(),wt=(()=>{class o{constructor(t,n){this.overlay=t,this.gt=n,this.tabs=[{type:"element",icon:"add",component:fn,position:"left",active:!0},{type:"config",icon:"edit",component:gn,position:"right",active:!0},{type:"tree",icon:"file",component:bn,position:"right"},{type:"page",icon:"pages",component:Cn,position:"right"}]}initSettings(){this.gt.settings.sidebarPosition&&this.tabs.forEach(t=>{t.position=this.gt.settings.sidebarPosition[t.type].position,t.active=this.gt.settings.sidebarPosition[t.type].active})}activeTab(t){this.tabs.find(n=>{n.position===t.position&&(n.active=!1)}),t.active=!0,this.updateSettings()}updateSettings(){this.gt.settings.sidebarPosition=this.tabs.reduce((t,{type:n,position:r,active:s})=>(t[n]={type:n,position:r,active:s},t),{})}createWindow(t,n,r){const s=t.position;if("right"===t.position&&n<=10){if(t.position="left",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}return this.tabs.forEach(c=>{"left"===c.position&&(c.active=!1)}),t.active=!0,void this.updateSettings()}if("left"===t.position&&n>=window.innerWidth-10){if(t.position="right",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}return this.tabs.forEach(c=>{"right"===c.position&&(c.active=!1)}),t.active=!0,void this.updateSettings()}if(t.position="float",t.active){const c=this.tabs.find(d=>d.position===s);c&&(c.active=!0)}const a=this.overlay.create({disposeOnNavigation:!0,positionStrategy:this.overlay.position().global().top((0,ee.HM)(r)).left((0,ee.HM)(n))}),l=a.attach(new $.C5(hi));l.instance.componentPortal=new $.C5(t.component),l.instance.icon=t.icon,l.instance.dragEnded.pipe((0,V.R)(l.instance.windowClose.pipe((0,v.b)(()=>{"float"===t.position&&(t.position=s,delete t.rect),this.tabs.forEach(c=>{c.position===t.position&&(c.active=!1)}),t.active=!0,a.dispose(),this.updateSettings()})))).subscribe(c=>{const d=c.source.getRootElement().getBoundingClientRect();d.x<=10&&(t.position="left",l.instance.windowClose.emit()),d.x>=window.innerWidth-d.width-10&&(t.position="right",l.instance.windowClose.emit())})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(z.aV),e.LFG(q))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),$i=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[wt],imports:[p.u5,u.ez,z.U8,ui,pt,G._t,Bo,$.eL,Tt]}),o})(),U=(()=>{class o{constructor(t,n){this.gtNode=t,this.gt=n,this.gtClass=!0,this.subscriptions=[],this.property=this.gtNode.property}get gtSlot(){return"slot"===this.gtNode.type}get isHidden(){return!this.gtNode.property.show||this.property.disabled}get clearfix(){return this.gtNode.style&&this.gtNode.style.clearfix}get id(){return this.gtNode.id}get type(){return this.gtNode.type}get root(){return this.gtNode.parent?null:""}get draggable(){return"root"===this.gtNode.type||this.gtNode.template&&!this.gtNode.isTemplateRoot?null:""}get canHasChild(){return this.gtNode.core.canHasChild}get droppable(){return this.gtNode.template&&"slot"!==this.gtNode.type||!this.gtNode.core.canHasChild?null:""}get width(){return this.gtNode.style.width}get height(){return this.gtNode.style.height}get margin(){return this.gtNode.style.margin}get padding(){return this.gtNode.style.padding}get display(){return this.gtNode.style.display}get position(){return this.gtNode.style.position}get float(){return this.gtNode.style.float}get overflow(){return this.gtNode.style.overflow}get flexDirection(){return this.gtNode.style.flexDirection}get flexGrow(){return this.gtNode.style.flexGrow}get flexShrink(){return this.gtNode.style.flexShrink}get flexWrap(){return this.gtNode.style.flexWrap}get justifyContent(){return this.gtNode.style.justifyContent}get alignItems(){return this.gtNode.style.alignItems}get alignContent(){return this.gtNode.style.alignContent}get background(){return this.gtNode.style.background}get color(){return this.gtNode.style.color}get textAlign(){return this.gtNode.style.textAlign}get left(){return this.gtNode.style.left}get top(){return this.gtNode.style.top}get right(){return this.gtNode.style.right}get bottom(){return this.gtNode.style.bottom}get zIndex(){return this.gtNode.style.zIndex}get border(){if(this.gtNode.style.border&&this.gtNode.style.border.all)return this.gtNode.style.border.all}get borderLeft(){if(this.gtNode.style.border&&this.gtNode.style.border.left)return this.gtNode.style.border.left}get borderRight(){if(this.gtNode.style.border&&this.gtNode.style.border.right)return this.gtNode.style.border.right}get borderTop(){if(this.gtNode.style.border&&this.gtNode.style.border.top)return this.gtNode.style.border.top}get borderBottom(){if(this.gtNode.style.border&&this.gtNode.style.border.bottom)return this.gtNode.style.border.bottom}get fontWeight(){return this.gtNode.style.fontWeight}get fontSize(){return this.gtNode.style.fontSize}ngOnInit(){this.gtNode.core.dynamicTemplate||this.refresh()}ngAfterViewInit(){this.gtNode.core.dynamicTemplate&&this.refresh()}ngOnDestroy(){this.gtNode.componentRef=null,this.subscriptions.forEach(t=>t.unsubscribe())}refresh(){if(this.gtNode.core.canHasChild)if(this.gtNode.core.dynamicTemplate){const t=new Map;this.templates.forEach(n=>{n.clear(),t.set(n.templateID,n)}),this.gtNode.children.forEach(n=>{const r=t.get(n.outletID);r&&r.insert(n)})}else this.template.clear(),this.gtNode.children.forEach(t=>{this.template.insert(t)})}insert(t,n){if(this.gtNode.core.dynamicTemplate){const r=this.templates.find(s=>s.templateID===t.outletID);if(r){let s=0;for(let a=0;a<n;a++)this.gtNode.children[a].outletID===r.templateID&&s++;return r.insert(t,s)}throw new Error}return this.template.insert(t,n)}remove(t){if("number"==typeof t||void 0===t)this.template.remove(t);else{if(!this.gtNode.core.dynamicTemplate)return this.template.remove(t.parent.children.indexOf(t));{const n=this.templates.find(r=>r.templateID===t.outletID);if(n)return n.remove(t.parent.children.filter(r=>r.outletID===t.outletID).indexOf(t));console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}}}move(t,n){if(this.gtNode.core.dynamicTemplate){const r=this.templates.find(s=>s.templateID===t.outletID);r?r.move(t,t.parent.children.filter(s=>s.outletID===t.outletID).indexOf(t)):console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}else this.template.move(t,n)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Fo),e.Y36(q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ne,7),e.Gf(ne,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.templates=r)}},hostVars:74,hostBindings:function(t,n){2&t&&(e.uIk("data-id",n.id)("data-type",n.type)("data-root",n.root)("data-draggable",n.draggable)("data-can-has-child",n.canHasChild)("data-droppable",n.droppable),e.Udp("width",n.width)("height",n.height)("margin",n.margin)("padding",n.padding)("display",n.display)("position",n.position)("float",n.float)("overflow",n.overflow)("flex-direction",n.flexDirection)("flex-grow",n.flexGrow)("flex-shrink",n.flexShrink)("flex-wrap",n.flexWrap)("justify-content",n.justifyContent)("align-items",n.alignItems)("align-content",n.alignContent)("background",n.background)("color",n.color)("text-align",n.textAlign)("left",n.left)("top",n.top)("right",n.right)("bottom",n.bottom)("z-index",n.zIndex)("border",n.border)("border-left",n.borderLeft)("border-right",n.borderRight)("border-top",n.borderTop)("border-bottom",n.borderBottom)("font-weight",n.fontWeight)("font-size",n.fontSize),e.ekj("gt-node",n.gtClass)("gt-slot",n.gtSlot)("opacity-25",n.isHidden)("clearfix",n.clearfix))},decls:0,vars:0,template:function(t,n){},encapsulation:2}),o})();const Hi=["gt-division",""];function Ui(o,i){}let Le=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["div","gt-division",""]],features:[e.qOj],attrs:Hi,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Ui,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),o})();const qi=[q,W,{provide:Re,useValue:{title:"GHOSTEN",src:"assets/icons/128.png",alt:"Ghosten Logo",click(){}}},{provide:ht,useValue:()=>"light"},{provide:M,useValue:{exitUrl:"/test"}},{provide:K,useValue:{customComponent:!0,modal:!0,preview:!0,editProperty:!0,editVariable:!0,editStyle:!0,editRight:!0,editAction:!0,editDatasource:!0,editValidator:!0,editDirective:!0}},{provide:R,useValue:{},multi:!0},{provide:re,useValue:{},multi:!0},{provide:X,useValue:{},multi:!0},{provide:A,useFactory:o=>[{title:"\u64A4\u9500",icon:"rotate_ccw",get disabled(){return!o.history.get().length},onclick:()=>{o.undo()}},{title:"\u91CD\u505A",icon:"rotate_cw",get disabled(){return!o.undoHistory.get().length},onclick:()=>{o.redo()}},{title:"\u53C2\u8003\u7EBF",icon:"dashed_rect",get active(){return o.showReferenceLine},onclick(){o.showReferenceLine=!o.showReferenceLine}},{title:"\u9884\u89C8",icon:"preview",onclick:()=>{o.events.TOP_BUTTON_CLICK.emit({button:{name:"preview"},data:o.exportString()})}},{title:"\u4FDD\u5B58",icon:"save",onclick:()=>{o.events.TOP_BUTTON_CLICK.emit({button:{name:"save"},data:{config:o.exportString(),settings:o.exportSettings()}})}}],deps:[q]},{provide:R,useValue:{root:Le,division:Le,template:Le,slot:Le,outlet:Le},multi:!0},{provide:re,useFactory:g.Tf,multi:!0},{provide:O,useValue:{title:"\u5E03\u5C40",elements:[{label:"\u884C\u5E03\u5C40",type:"division",icon:"row",content:{style:{display:"flex"}}},{label:"\u5217\u5E03\u5C40",type:"division",icon:"column"},{label:"\u666E\u901A\u5E03\u5C40",type:"division",icon:"division"}]},multi:!0},{provide:ie,useFactory:(o,i,t,n,r)=>(i=Object.assign({},...i),t=Object.assign({},...t),n=Object.assign({},...n),o?(o.forEach(s=>{s.elements.forEach(a=>{const l=a.type;i[l]||(a.disabled=!0,r.log.next({type:"error",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e Component`,data:null})),t[l]||(a.disabled=!0,r.log.next({type:"error",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e`,data:null})),n[l]||r.log.next({type:"warning",message:`Type \u4e3a ${l} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9884\u89c8\u7ec4\u4ef6`,data:null})})}),o):(r.log.next({type:"error",message:`\u672a\u914d\u7f6e ${O.toString()}`,data:null}),[])),deps:[[new e.FiY,O],R,re,X,q]},{provide:gt,useFactory:o=>{const i=new Map;return o.forEach(t=>{for(const n in t)i.set(n,t[n])}),i},deps:[re]},{provide:Ft,useFactory:o=>{const i=new Map;return o.forEach(t=>{for(const n in t)i.set(n,{core:g.QY.create(t[n].get("core")),property:g.Z9.create(t[n].get("property").reduce((r,s)=>(r[s.name]=void 0===s.value?null:s.value,r),{})),style:g.bg.create(t[n].get("style").reduce((r,s)=>(r[s.name]=void 0===s.value?null:s.value,r),{})),action:t[n].get("action"),rights:t[n].get("rights"),validator:t[n].get("validator")})}),i},deps:[re]}];let Fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:qi,imports:[u.ez,$i,en,Tt,po,Mo,Oo,wo,Et]}),o})();var Y=b(9521),Vi=b(7521),te=b.n(Vi);const Qi=["page"];function zi(o,i){}let vn=(()=>{class o{constructor(t,n,r,s,a,l,c,d,_,m,f,x){this.el=t,this.gt=n,this.events=r,this.translateAnimation=s,this.viewContainerRef=a,this.cdr=l,this.direction=c,this.ngZone=d,this.contextmenu=_,this._document=m,this.gtContextMenu=f,this.gtNodeHover=new e.vpe,this.transform="matrix(1, 0, 0, 1, 0, 0)",this.itemName=null,this.isBrowser=(0,u.NF)(x),this.events.CHANGE_BOARD.subscribe(()=>this.init())}blackboardClick(t){if("move"!==this.gt.mode){const n=this.getTargetNode(t);n&&this.gt.changeSelect(n,t.metaKey||t.ctrlKey)}}blackBoardContextmenu(t){t.stopPropagation(),t.preventDefault();const n=this.getTargetNode(t);if(n&&(this.gt.selected.includes(n)||this.gt.changeSelect(n),this.gtContextMenu)){const r=this.gtContextMenu(this.gt,n);this.contextmenu.create(t,r)}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.initDragEvent()}),this.ngZone.runOutsideAngular(()=>{(0,D.R)(this.el.nativeElement,"mousemove").pipe(tn("target"),(0,y.U)(t=>"move"!==this.gt.mode?this.getTargetNode(t):null),Se()).subscribe(t=>{this.ngZone.run(()=>this.gtNodeHover.emit(t))})})}ngAfterViewInit(){this.isBrowser?this.resetPosition():(this.page.nativeElement.style.width="800px",this.page.nativeElement.style.minHeight="1000px",this.page.nativeElement.style.marginLeft="calc(50% - 400px)",this.transform="translate(0,60px)")}init(){this.template.clear(),this.gt.gt&&this.template.insert(this.gt.gt)}updateTransform(t){this.transform=t,this.cdr.detectChanges()}resetPosition(){const t=this.viewContainerRef.element.nativeElement.offsetWidth,n=this.viewContainerRef.element.nativeElement.offsetHeight;this.page.nativeElement.style.width=Math.min(t-100,800)+"px",this.page.nativeElement.style.minHeight=Math.max(n-100,1e3)+"px",this.transform=`matrix(1,0,0,1,${("ltr"===this.direction.value?1:-1)*Math.max(t/2-this.page.nativeElement.offsetWidth/2,50)},60)`,this.cdr.detectChanges()}getTargetNode(t){const n=$t(t.target,".gt-node");return n?this.gt.getNodeById(n.dataset.id):null}initDragEvent(){const t=new Un(this.el.nativeElement,this._document),n=this.gt;Object.defineProperty(t,"disabled",{get:()=>"move"===n.mode}),t.drop.subscribe(({parentElement:r,refChild:s,target:a,placeholder:l})=>{const c=Array.prototype.filter.call(r.children,m=>m!==a).map(m=>m.getBoundingClientRect());r.insertBefore(a,s);const d=a.getBoundingClientRect(),_=Array.prototype.filter.call(r.children,m=>m!==a).map(m=>m.getBoundingClientRect());Array.prototype.filter.call(r.children,m=>m!==a).forEach((m,f)=>{this.translateAnimation.add({element:m,from:{left:c[f].left-_[f].left,top:c[f].top-_[f].top}})}),l.style.width=d.width+"px",l.style.height=d.height+"px",this.translateAnimation.add({element:l,to:{left:d.left,top:d.top}})}),t.dragEnd.subscribe(({parentElement:r,refChild:s,target:a})=>{const l=a.dataset.id,c=Kt(r).dataset.id,d=this.gt.getNodeById(l),_=this.gt.getNodeById(c),m=s&&s.dataset.id?this.gt.getNodeById(s.dataset.id):null;if(!d||!_)return void console.error("something wrong!");let f=_.children.length-1;m&&(f=_.children.indexOf(m),m.parent===d.parent&&f>d.parent.children.indexOf(d)&&(f-=1)),this.gt.moveNode(d,_,f,r.dataset.droppable)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(q),e.Y36(W),e.Y36(et),e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(C.Is),e.Y36(e.R0b),e.Y36(Me),e.Y36(u.K0),e.Y36(k,8),e.Y36(e.Lbi))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-blackboard"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ne,7),e.Gf(Qi,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.page=r.first)}},hostAttrs:[1,"position-relative","d-flex","flex-column","flex-grow-1","overflow-hidden"],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n.blackboardClick(s)})("contextmenu",function(s){return n.blackBoardContextmenu(s)})},outputs:{gtNodeHover:"gtNodeHover"},features:[e._Bn([et])],decls:4,vars:16,consts:[["page-structure","","gtPan","",1,"oblique-stripes","overflow-auto","position-relative","h-100",3,"panTarget","panDisabled","updateTransform"],["gtResize","","gtZoom","","resizes","all","page-structure-source","",1,"gt-page",2,"margin-bottom","12rem",3,"minWidth","maxWidth","minHeight","maxHeight","setMin","transform","gtZoomDisabled","zoomZone","updateTransform"],["page",""],["gtTemplate",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("updateTransform",function(s){return n.updateTransform(s)}),e.TgZ(1,"div",1,2),e.NdJ("updateTransform",function(s){return n.updateTransform(s)}),e.YNc(3,zi,0,0,"ng-template",3),e.qZA()()),2&t){const r=e.MAs(2);e.ekj("overflow-auto","edit"===n.gt.mode)("overflow-hidden","move"===n.gt.mode),e.Q6J("panTarget",r)("panDisabled","move"!==n.gt.mode),e.xp6(1),e.Udp("transform",n.transform),e.Q6J("minWidth",300)("maxWidth",5e3)("minHeight",500)("maxHeight",5e3)("setMin",!0)("transform",!0)("gtZoomDisabled","move"!==n.gt.mode)("zoomZone",n.el.nativeElement)}},dependencies:[Qn,Zn,Yt,yt,to,ne],encapsulation:2}),o})();const ji=["tabsEle"];function Xi(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.sidebar.activeTab(r))})("dragstart",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.dragStart(s,r))}),e.TgZ(1,"i",8),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw();e.Udp("cursor",n.activeTab===t?"default":"pointer"),e.ekj("active",t.active),e.xp6(2),e.Oqu(t.icon)}}function Ki(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Xi,3,5,"button",6),e.BQk()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.position===n.type)}}function Wi(o,i){if(1&o&&e._UZ(0,"gt-accordion-element",9),2&o){const t=e.oxw();e.Udp("display",t.sidebar.tabs[0].active?"":"none")}}function er(o,i){if(1&o&&e._UZ(0,"gt-accordion-config",9),2&o){const t=e.oxw();e.Udp("display",t.sidebar.tabs[1].active?"":"none")}}function tr(o,i){if(1&o&&e._UZ(0,"gt-accordion-elTree",9),2&o){const t=e.oxw();e.Udp("display",t.sidebar.tabs[2].active?"":"none")}}function nr(o,i){if(1&o&&e._UZ(0,"gt-accordion-page",9),2&o){const t=e.oxw();e.Udp("display",t.sidebar.tabs[3].active?"":"none")}}let or=(()=>{class o{constructor(t,n,r,s){this.gt=t,this.sidebar=n,this.gtAuth=r,this._document=s,this.type="right"}dragStart(t,n){n.dataTransfer.dropEffect="move",(0,D.R)(this._document,"dragover").pipe((0,V.R)((0,D.R)(this._document,"drop").pipe((0,v.b)(r=>{r.preventDefault(),this.sidebar.createWindow(t,r.clientX,r.clientY)}))),(0,v.b)(r=>r.preventDefault())).subscribe()}shouldHide(){return!this.sidebar.tabs.find(t=>t.position===this.type)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(wt),e.Y36(K),e.Y36(u.K0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-sidebar"]],viewQuery:function(t,n){if(1&t&&e.Gf(ji,7),2&t){let r;e.iGM(r=e.CRH())&&(n.tabsEle=r.first)}},hostAttrs:[1,"gt-sidebar","flex-shrink-0"],hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("d-none",n.shouldHide())},inputs:{type:"type"},decls:9,vars:5,consts:[[1,"card","border-0","h-100"],[1,"card-header","bg-body"],[1,"nav","nav-pills","nav-justified","card-header-pills"],[4,"ngFor","ngForOf"],[1,"card-body","p-0",2,"overflow-y","scroll"],["class","tab-panel",3,"display",4,"ngIf"],["class","nav-link","type","button","draggable","true",3,"active","cursor","click","dragstart",4,"ngIf"],["type","button","draggable","true",1,"nav-link",3,"click","dragstart"],[1,"gt-icon"],[1,"tab-panel"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2),e.YNc(3,Ki,2,1,"ng-container",3),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,Wi,1,2,"gt-accordion-element",5),e.YNc(6,er,1,2,"gt-accordion-config",5),e.YNc(7,tr,1,2,"gt-accordion-elTree",5),e.YNc(8,nr,1,2,"gt-accordion-page",5),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.sidebar.tabs),e.xp6(2),e.Q6J("ngIf",n.sidebar.tabs[0].position===n.type),e.xp6(1),e.Q6J("ngIf",n.sidebar.tabs[1].position===n.type),e.xp6(1),e.Q6J("ngIf",n.sidebar.tabs[2].position===n.type),e.xp6(1),e.Q6J("ngIf",n.sidebar.tabs[3].position===n.type))},dependencies:[u.sg,u.O5,gn,fn,bn,Cn],encapsulation:2}),o})();function ir(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.switchBoard(s))}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw();e.Udp("cursor",n.gt.currentBoard===t?"default":"pointer"),e.ekj("active",n.gt.currentBoard===t),e.xp6(1),e.hij(" ",t.name||t.type," ")}}function rr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(r.onclick(s.gt))}),e.TgZ(1,"i",2),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.ekj("active",t.active),e.Q6J("tooltipTitle",t.title)("disabled",t.disabled),e.xp6(2),e.Oqu(t.icon)}}function sr(o,i){if(1&o&&(e.TgZ(0,"div",19)(1,"button",20)(2,"i",2),e._uU(3),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("title",t.title),e.xp6(2),e.Oqu(t.icon)}}function ar(o,i){if(1&o&&(e.ynx(0),e.YNc(1,rr,3,5,"button",16),e._uU(2,"\xa0 "),e.YNc(3,sr,4,2,"div",17),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",!t.children),e.xp6(2),e.Q6J("ngIf",t.children)}}let lr=(()=>{class o{constructor(t,n,r,s,a){this.gt=t,this.events=n,this.cdr=r,this.editorBrand=s,this.topBarButtons=a,this.subscription=I.w0.EMPTY}ngOnInit(){this.subscription=this.events.onEvent.subscribe(()=>this.cdr.detectChanges())}ngOnDestroy(){this.subscription.unsubscribe()}getLeftDropdown(){return this.gt.boards.concat(this.gt.customComponent).map(t=>({text:t.type,active:this.gt.currentBoard===t,data:t}))}getRightDropdown(){return this.topBarButtons.map(t=>({text:t.title,active:t.active,icon:t.icon,data:t}))}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(W),e.Y36(e.sBO),e.Y36(Re),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-navbar"]],hostAttrs:[1,"navbar","navbar-expand-md","border-bottom"],decls:22,vars:9,consts:[[1,"container-fluid","flex-nowrap"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-label","Toggle navigation","gt-dropdown","",1,"navbar-toggler","me-auto",3,"items","itemClick"],[1,"gt-icon"],[1,"navbar-brand","d-flex","align-items-center",2,"cursor","pointer",3,"click"],["width","32","height","32",1,"rounded",2,"width","2rem","height","2rem",3,"src","alt"],[1,"fw-bold","ms-2","d-md-inline","d-none"],[1,"vr","my-2","text-body"],[1,"nav","nav-pills","me-auto","ms-3","d-none","d-md-flex"],["class","nav-link","type","button",3,"active","cursor","click",4,"ngFor","ngForOf"],[1,"ms-3","me-auto","text-nowrap"],[1,"fw-bold","fs-5"],[1,"d-none","d-sm-inline"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-label","Toggle navigation","gt-dropdown","",1,"navbar-toggler",3,"items","itemClick"],[1,"text-nowrap","ms-3","d-none","d-md-block"],[4,"ngFor","ngForOf"],["type","button",1,"nav-link",3,"click"],["type","button","class","btn btn-light","tooltip","","tooltipPosition","bottom",3,"active","tooltipTitle","disabled","click",4,"ngIf"],["class","btn-group","role","group",4,"ngIf"],["type","button","tooltip","","tooltipPosition","bottom",1,"btn","btn-light",3,"tooltipTitle","disabled","click"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-link","dropdown-toggle",3,"title"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("itemClick",function(s){return n.switchBoard(s.data)}),e.TgZ(2,"i",2),e._uU(3,"list"),e.qZA()(),e.TgZ(4,"span",3),e.NdJ("click",function(){return n.editorBrand.click&&n.editorBrand.click()}),e._UZ(5,"img",4),e.TgZ(6,"span",5),e._uU(7),e.qZA()(),e._UZ(8,"div",6),e.TgZ(9,"nav",7),e.YNc(10,ir,2,5,"button",8),e.qZA(),e.TgZ(11,"div",9)(12,"span",10),e._uU(13),e.qZA(),e._uU(14," \xa0"),e.TgZ(15,"small",11),e._uU(16),e.qZA()(),e.TgZ(17,"button",12),e.NdJ("itemClick",function(s){return s.data.onclick(n.gt)}),e.TgZ(18,"i",2),e._uU(19,"dotted_line"),e.qZA()(),e.TgZ(20,"div",13),e.YNc(21,ar,4,2,"ng-container",14),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("items",n.getLeftDropdown()),e.xp6(4),e.Q6J("src",n.editorBrand.src,e.LSH)("alt",n.editorBrand.alt),e.xp6(2),e.Oqu(n.editorBrand.title),e.xp6(3),e.Q6J("ngForOf",n.gt.pages),e.xp6(3),e.Oqu(n.gt.settings.name),e.xp6(3),e.Oqu(n.gt.settings.description),e.xp6(1),e.Q6J("items",n.getRightDropdown()),e.xp6(4),e.Q6J("ngForOf",n.topBarButtons))},dependencies:[h,H,u.sg,u.O5],encapsulation:2,changeDetection:0}),o})();function cr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.gt.changeSelect(r))})("contextmenu",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onContextmenu(s,r))}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function dr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"span",22),e.NdJ("contextmenu",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onContextmenu(s,r))}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.type)}}function pr(o,i){if(1&o&&(e.TgZ(0,"li",18),e.YNc(1,cr,2,1,"a",19),e.YNc(2,dr,2,1,"span",20),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.ekj("active",t===(n.gt.selected[0]||n.gt.gt)),e.xp6(1),e.Q6J("ngIf",t!==(n.gt.selected[0]||n.gt.gt)),e.xp6(1),e.Q6J("ngIf",t===(n.gt.selected[0]||n.gt.gt))}}const ur=function(){return["r"]},_r=function(){return["l","t"]};let hr=(()=>{class o{constructor(t,n,r,s,a,l,c){this.gt=t,this.contextmenu=r,this.sidebar=s,this.gtContextMenu=a,this.event=new e.vpe,this.log=new e.vpe,this.init=new e.vpe,this.eventSubscription=I.w0.EMPTY,this.hoveredGtNode=null,this.isBrowser=(0,u.NF)(c),this.isBrowser&&("function"==typeof l&&l(n.target),this.eventSubscription=(0,L.T)(t.log.pipe((0,v.b)(d=>this.log.emit(d))),n.CHANGE_SELECT.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_SELECT",data:d}))),n.CHANGE_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_STYLE",data:d}))),n.CHANGE_PROPERTY.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_PROPERTY",data:d}))),n.CHANGE_ACTION.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_ACTION",data:d}))),n.CHANGE_BOARD.pipe((0,v.b)(d=>this.event.emit({type:"CHANGE_BOARD",data:d}))),n.COPY_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"COPY_STYLE",data:d}))),n.PASTE_STYLE.pipe((0,v.b)(d=>this.event.emit({type:"PASTE_STYLE",data:d}))),n.TOP_BUTTON_CLICK.pipe((0,v.b)(d=>this.event.emit({type:"TOP_BUTTON_CLICK",data:d}))),n.SAVE.pipe((0,v.b)(d=>this.event.emit({type:"SAVE",data:d}))),n.AUTO_SAVE.pipe((0,v.b)(d=>this.event.emit({type:"AUTO_SAVE",data:d}))),n.INSERT_NODE.pipe((0,v.b)(d=>this.event.emit({type:"INSERT_NODE",data:d}))),n.REMOVE_NODE.pipe((0,v.b)(d=>this.event.emit({type:"REMOVE_NODE",data:d}))),n.MOVE_NODE.pipe((0,v.b)(d=>this.event.emit({type:"MOVE_NODE",data:d}))),n.UNDO.pipe((0,v.b)(d=>this.event.emit({type:"UNDO",data:d}))),n.REDO.pipe((0,v.b)(d=>this.event.emit({type:"REDO",data:d}))),n.CUSTOM.pipe((0,v.b)(d=>this.event.emit({type:"CUSTOM",data:d}))),n.SAVE_COMPONENT.pipe((0,v.b)(d=>this.event.emit({type:"SAVE_COMPONENT",data:d}))),n.REMOVE_COMPONENT.pipe((0,v.b)(d=>this.event.emit({type:"REMOVE_COMPONENT",data:d})))).subscribe(),te().bind(["ctrl+c","meta+c"],d=>{d.preventDefault(),t.copyNode()}),te().bind(["ctrl+v","meta+v"],d=>{d.preventDefault(),t.pasteNode(t.selected[0])}),te().bind(["ctrl+shift+c","meta+shift+c"],d=>{d.preventDefault(),t.copyStyle()}),te().bind(["ctrl+shift+v","meta+shift+v"],d=>{d.preventDefault(),t.pasteStyle()}),te().bind(["ctrl+z","meta+z"],d=>{d.preventDefault(),t.undo()}),te().bind(["ctrl+shift+z","meta+shift+z"],d=>{d.preventDefault(),t.redo()}),te().bind("alt+1",d=>{d.preventDefault(),t.settings.activateRightTab(0)}),te().bind("alt+2",d=>{d.preventDefault(),t.settings.activateRightTab(1)}),te().bind("alt+3",d=>{d.preventDefault(),t.settings.activateRightTab(2)}),te().bind("alt+4",d=>{d.preventDefault(),t.settings.activateRightTab(3)}),te().bind("del",d=>{d.preventDefault(),t.removeNode()}),te().bind("m",d=>{d.preventDefault(),t.mode="move"}),te().bind("v",d=>{d.preventDefault(),t.mode="edit"}),(0,D.R)(document,"keypress").pipe((0,se.h)(()=>document.activeElement===document.body),(0,se.h)(d=>d.keyCode===Y.L_),(0,v.b)(d=>{d.preventDefault(),t.mode="move"}),(0,he.w)(()=>(0,D.R)(document,"keyup").pipe((0,se.h)(d=>d.keyCode===Y.L_),(0,v.b)(()=>t.mode="edit"),(0,N.q)(1)))).subscribe())}set data(t){t?(this.gt.init(t.config,t.components),this.gt.initSettings({name:t.title,description:t.description,...t.settings}),this.sidebar.initSettings()):this.gt.init()}ngOnDestroy(){this.eventSubscription.unsubscribe(),this.gt.destroy()}resetPosition(){this.blackboard.resetPosition()}onContextmenu(t,n){if(this.gtContextMenu){n.preventDefault();const r=this.gtContextMenu(this.gt,t);this.contextmenu.create(n,r)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q),e.Y36(W),e.Y36(Me),e.Y36(wt),e.Y36(k,8),e.Y36(Lt,8),e.Y36(e.Lbi))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-editor"]],viewQuery:function(t,n){if(1&t&&e.Gf(vn,7),2&t){let r;e.iGM(r=e.CRH())&&(n.blackboard=r.first)}},inputs:{data:"data"},outputs:{event:"event",log:"log",init:"init"},decls:29,vars:16,consts:function(){let i,t,n;return i="\u5149\u6807",t="\u5E73\u79FB",n="\u91CD\u7F6E",[[1,"d-flex","vh-100","flex-column",2,"padding","env(safe-area-inset-right) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)"],[1,"d-flex","flex-grow-1","flex-md-row","flex-column","overflow-hidden"],["gtResize","","type","left",2,"width","20rem",3,"maxWidth","minWidth","resizes"],[1,"vr","d-none","d-md-flex","h-100","text-body-secondary"],[1,"d-inline-flex","flex-md-column","flex-row","p-1",3,"mousedown"],["tooltip","","tooltipTitle",i,1,"btn","btn-text","mb-md-1","me-1","me-md-0",3,"click"],[1,"gt-icon"],["tooltip","","tooltipTitle",t,1,"btn","btn-text","mb-md-1","me-1","me-md-0",3,"click"],["tooltip","","tooltipTitle",n,1,"btn","btn-text",3,"click"],[1,"d-lg-none","text-body-secondary","m-0"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden"],[1,"flex-grow-1",3,"gtNodeHover"],["blackboard",""],[1,"d-flex","justify-content-between","align-items-center","border-top","px-2"],[1,"breadcrumb","mb-0","flex-shrink-0"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"badge","text-bg-primary"],["gtResize","","type","right",2,"width","20rem",3,"maxWidth","minWidth","resizes"],[1,"breadcrumb-item"],["href","javascript:void(0)",3,"click","contextmenu",4,"ngIf"],[3,"contextmenu",4,"ngIf"],["href","javascript:void(0)",3,"click","contextmenu"],[3,"contextmenu"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"gt-navbar"),e.TgZ(2,"div",1),e._UZ(3,"gt-sidebar",2)(4,"div",3),e.TgZ(5,"div",4),e.NdJ("mousedown",function(s){return s.stopPropagation()}),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.gt.mode="edit"}),e.TgZ(7,"i",6),e._uU(8,"mouse_pointer"),e.qZA()(),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.gt.mode="move",n.gt.selected=[]}),e.TgZ(10,"i",6),e._uU(11,"move"),e.qZA()(),e.TgZ(12,"button",8),e.NdJ("click",function(){return n.resetPosition()}),e.TgZ(13,"i",6),e._uU(14,"refresh_ccw"),e.qZA()()(),e._UZ(15,"div",3)(16,"hr",9),e.TgZ(17,"div",10)(18,"gt-blackboard",11,12),e.NdJ("gtNodeHover",function(s){return n.hoveredGtNode=s}),e.qZA(),e.TgZ(20,"div",13)(21,"ol",14),e.YNc(22,pr,3,4,"li",15),e.qZA(),e.TgZ(23,"span",16),e._uU(24),e.ALo(25,"uppercase"),e.qZA()()(),e._UZ(26,"div",3)(27,"hr",9)(28,"gt-sidebar",17),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("maxWidth",400)("minWidth",230)("resizes",e.DdM(14,ur)),e.xp6(3),e.ekj("active","edit"===n.gt.mode),e.xp6(3),e.ekj("active","move"===n.gt.mode),e.xp6(13),e.Q6J("ngForOf",null==(n.gt.selected[0]||n.gt.gt)?null:(n.gt.selected[0]||n.gt.gt).path),e.xp6(2),e.Oqu(e.lcZ(25,12,null==n.hoveredGtNode?null:n.hoveredGtNode.type)),e.xp6(4),e.Q6J("maxWidth",400)("minWidth",230)("resizes",e.DdM(15,_r)))},dependencies:[u.sg,u.O5,or,H,yt,vn,lr,u.gd],encapsulation:2}),o})(),Ge=(()=>{class o{transform(t){return t instanceof g.Sl||"string"==typeof t&&/\${.+?}/.test(t)?"~~\u6570\u636e\u7ed1\u5b9a~~":t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"dataBinding",type:o,pure:!1}),o})();var Je=b(2293);const mr=["gt-image",""];let gr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["img","gt-image",""]],hostVars:3,hostBindings:function(t,n){2&t&&e.Ikx("src",n.gtNode.property.src,e.LSH)("alt",n.gtNode.property.alt)("title",n.gtNode.property.title)},features:[e.qOj],attrs:mr,decls:0,vars:0,template:function(t,n){},encapsulation:2}),o})();const fr=["gt-text",""];let Cr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["span","gt-text",""]],features:[e.qOj],attrs:fr,decls:2,vars:3,template:function(t,n){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,n.property.text))},dependencies:[Ge],encapsulation:2}),o})(),br=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:O,useValue:{title:"\u901A\u7528",elements:[{label:"\u6587\u5B57",type:"text",icon:"text"},{label:"\u56FE\u7247",type:"image",icon:"picture"}]},multi:!0},{provide:R,useValue:{text:Cr,image:gr},multi:!0},{provide:X,useValue:{division:'<div class="gt-node" style="border: .15rem dashed"></div>',slot:'<div class="gt-node" style="border: .15rem dashed"></div>',text:"<span>Some Text</span>",image:'<img src="..." alt="..."/>'},multi:!0},{provide:re,multi:!0,useFactory:Je.Tf}],imports:[u.ez,Fe]}),o})();function vr(o,i){1&o&&(e.ynx(0),e.TgZ(1,"div",3)(2,"h2",4)(3,"button",5),e._uU(4," \u5360\u4f4d\u6807\u9898 "),e.qZA()(),e.TgZ(5,"div",6)(6,"div",7),e._uU(7,"\u5360\u4f4d\u6587\u672c"),e.qZA()()(),e.BQk())}function Tr(o,i){}function yr(o,i){if(1&o&&(e.TgZ(0,"div",3)(1,"h2",4)(2,"button",8),e._uU(3),e.qZA()(),e.TgZ(4,"div",6)(5,"div",7),e.YNc(6,Tr,0,0,"ng-template",9),e.qZA()()()),2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(2),e.uIk("data-droppable",t.id),e.xp6(1),e.Q6J("templateID",t.id)}}let xr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-accordion"]],features:[e.qOj],decls:3,vars:2,consts:[[1,"accordion"],[4,"ngIf"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["type","button","data-bs-toggle","collapse","aria-expanded","true",1,"accordion-button"],["gtTemplate","",3,"templateID"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,vr,8,0,"ng-container",1),e.YNc(2,yr,7,3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.property.accordionItems.length),e.xp6(1),e.Q6J("ngForOf",n.property.accordionItems))},dependencies:[u.sg,u.O5,ne],encapsulation:2}),o})();function Er(o,i){1&o&&(e.ynx(0),e._uU(1,"\u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01"),e.BQk())}function Nr(o,i){}function Sr(o,i){1&o&&e._UZ(0,"button",4)}let Mr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-alert"]],features:[e.qOj],decls:4,vars:5,consts:[["data-droppable","","role","alert",1,"alert",3,"ngClass"],[4,"ngIf"],["gtTemplate",""],["type","button","class","btn-close","data-bs-dismiss","alert","aria-label","Close",4,"ngIf"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Er,2,0,"ng-container",1),e.YNc(2,Nr,0,0,"ng-template",2),e.YNc(3,Sr,1,0,"button",3),e.qZA()),2&t&&(e.ekj("alert-dismissible",n.property.dismissible),e.Q6J("ngClass","alert-"+n.property.type),e.xp6(1),e.Q6J("ngIf",!n.gtNode.children.length),e.xp6(2),e.Q6J("ngIf",n.property.dismissible))},dependencies:[u.mk,u.O5,ne],encapsulation:2}),o})();const wr=["button-group",""];function Or(o,i){}let kr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["div","button-group",""]],hostVars:9,hostBindings:function(t,n){2&t&&(e.uIk("data-accept","buttonGroup,button"),e.ekj("btn-group","horizontal"===n.gtNode.property.orientation)("btn-group-vertical","vertical"===n.gtNode.property.orientation)("btn-group-lg","lg"===n.gtNode.property.size)("btn-group-sm","sm"===n.gtNode.property.size))},features:[e.qOj],attrs:wr,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Or,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),o})();function Ar(o,i){if(1&o&&e._UZ(0,"img",7),2&o){const t=e.oxw();e.Q6J("src",t.property.topImage,e.LSH)}}function Ir(o,i){}function Dr(o,i){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.YNc(2,Ir,0,0,"ng-template",9),e.qZA()),2&o){const t=e.oxw();e.uIk("data-droppable","header"),e.xp6(1),e.hij(" ",t.property.title," ")}}function Rr(o,i){}function Pr(o,i){1&o&&(e.TgZ(0,"div",10),e.YNc(1,Rr,0,0,"ng-template",11),e.qZA()),2&o&&e.uIk("data-droppable","body")}function Br(o,i){}function Zr(o,i){1&o&&(e.TgZ(0,"ul",12),e.YNc(1,Br,0,0,"ng-template",13),e.qZA()),2&o&&e.uIk("data-droppable","listGroup")("data-accept","listGroupItem")}function Lr(o,i){}function Fr(o,i){1&o&&(e.TgZ(0,"div",14),e.YNc(1,Lr,0,0,"ng-template",15),e.qZA()),2&o&&e.uIk("data-droppable","footer")}function Gr(o,i){if(1&o&&e._UZ(0,"img",16),2&o){const t=e.oxw();e.Q6J("src",t.property.bottomImage,e.LSH)}}const Jr=function(o,i){return[o,i]};let Yr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-card"]],features:[e.qOj],decls:7,vars:10,consts:[[1,"card",3,"ngClass"],["class","card-img-top","alt","",3,"src",4,"ngIf"],["class","card-header",4,"ngIf"],["class","card-body",4,"ngIf"],["class","list-group list-group-flush","style","min-height: 2rem",4,"ngIf"],["class","card-footer",4,"ngIf"],["class","card-img-bottom","alt","",3,"src",4,"ngIf"],["alt","",1,"card-img-top",3,"src"],[1,"card-header"],["gtTemplate","","templateID","header"],[1,"card-body"],["gtTemplate","","templateID","body"],[1,"list-group","list-group-flush",2,"min-height","2rem"],["gtTemplate","","templateID","listGroup"],[1,"card-footer"],["gtTemplate","","templateID","footer"],["alt","",1,"card-img-bottom",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ar,1,1,"img",1),e.YNc(2,Dr,3,2,"div",2),e.YNc(3,Pr,2,1,"div",3),e.YNc(4,Zr,2,2,"ul",4),e.YNc(5,Fr,2,1,"div",5),e.YNc(6,Gr,1,1,"img",6),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(7,Jr,n.property.style||"",n.property.align||"")),e.xp6(1),e.Q6J("ngIf",n.property.topImage),e.xp6(1),e.Q6J("ngIf",n.property.showHeader),e.xp6(1),e.Q6J("ngIf",n.property.showBody),e.xp6(1),e.Q6J("ngIf",n.property.showListGroup),e.xp6(1),e.Q6J("ngIf",n.property.showFooter),e.xp6(1),e.Q6J("ngIf",n.property.bottomImage))},dependencies:[u.mk,u.O5,ne],encapsulation:2}),o})();const $r=["gt-list-group",""];function Hr(o,i){}let Ur=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["ul","gt-list-group",""]],hostAttrs:[1,"list-group"],hostVars:6,hostBindings:function(t,n){2&t&&e.ekj("list-group-horizontal",n.property.horizontal)("list-group-flush",n.property.flush)("list-group-numbered",n.property.numbered)},features:[e.qOj],attrs:$r,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Hr,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),o})();const qr=["gt-list-group-item",""];function Vr(o,i){}let Qr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["li","gt-list-group-item",""]],hostAttrs:[1,"list-group-item"],hostVars:6,hostBindings:function(t,n){2&t&&(e.Tol(n.property.style),e.ekj("active",n.property.active)("list-group-item-action",n.property.active))},features:[e.qOj],attrs:qr,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Vr,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),o})();function zr(o,i){1&o&&(e.TgZ(0,"li",3)(1,"a",4),e._uU(2,"\u5360\u4f4dTab"),e.qZA()())}function jr(o,i){if(1&o&&(e.TgZ(0,"li",3)(1,"a",4),e._uU(2),e.qZA()()),2&o){const t=i.$implicit;e.xp6(1),e.ekj("active",t.active)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.tab," ")}}const Xr=function(o,i,t){return[o,i,t]};let Kr=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-nav"]],features:[e.qOj],decls:3,vars:7,consts:[[1,"nav",3,"ngClass"],["class","nav-item",4,"ngIf"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["href","javascript:void(0);",1,"nav-link"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,zr,3,0,"li",1),e.YNc(2,jr,3,5,"li",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(3,Xr,n.property.style||"",n.property.fill||"",n.property.align||"")),e.xp6(1),e.Q6J("ngIf",!n.property.items.length),e.xp6(1),e.Q6J("ngForOf",n.property.items))},dependencies:[u.mk,u.sg,u.O5],encapsulation:2}),o})(),Wr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:O,useValue:{title:"\u5BB9\u5668",elements:[{label:"\u5361\u7247",type:"card",icon:"panel"},{label:"List Group",type:"listGroup",icon:"list"},{label:"List Group Item",type:"listGroupItem",icon:"list"},{label:"Nav",type:"nav",icon:"tab"},{label:"\u6298\u53E0\u9762\u677F",type:"accordion",icon:"panel"},{label:"\u8B66\u544A",type:"alert",icon:"bell"},{label:"\u6309\u94AE\u7EC4",type:"buttonGroup",icon:"button_group"}]},multi:!0},{provide:R,useValue:{card:Yr,accordion:xr,alert:Mr,buttonGroup:kr,listGroup:Ur,listGroupItem:Qr,nav:Kr},multi:!0},{provide:re,useFactory:Je.rT,multi:!0},{provide:X,useValue:{card:'<div class="card">\n\t\t  <div class="card-header" *ngIf="gtNode.property.showTitle">\u6807\u9898</div>\n\t\t  <div class="card-body">\u5361\u7247\u5185\u5bb9</div>\n      <div class="card-footer"></div>\n\t  </div>',alert:'<div class="alert alert-primary" role="alert">\n  \u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01\n</div>',accordion:'<div class="accordion">\n  <div class="accordion-item">\n    <h2 class="accordion-header">\n      <button class="accordion-button" type="button">\n        \u5360\u4f4d\u6807\u9898\n      </button>\n    </h2>\n    <div class="accordion-collapse collapse show">\n      <div class="accordion-body">\u5360\u4f4d\u6587\u672c\n      </div>\n    </div>\n  </div>\n</div>',buttonGroup:'<div class="btn-group">\n  <button type="button" class="btn btn-primary">\u6309\u94ae1</button>\n  <button type="button" class="btn btn-primary">\u6309\u94ae2</button>\n</div>',listGroupItem:'<div class="gt-node" style="border: .15rem dashed"></div>',nav:'<ul class="nav" style="width: 20rem;"><li class="nav-item"><a class="nav-link active">Active</a></li><li class="nav-item"><a class="nav-link">Link</a></li><li class="nav-item"><a class="nav-link disabled">Disabled</a></li>\n</ul>',listGroup:'<ul class="list-group"><li class="list-group-item">An item</li><li class="list-group-item">A second item</li><li class="list-group-item">A third item</li></ul>'},multi:!0}],imports:[u.ez,Fe]}),o})();const es=["gt-button","","type","button"];let ts=(()=>{class o extends U{get className(){return["btn","gt-node",this.gtNode.property.buttonSize,this.gtNode.property.buttonColor,this.gtNode.property.buttonType].join(" ")}get buttonActive(){return this.property.active}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["button","gt-button","","type","button"]],hostVars:4,hostBindings:function(t,n){2&t&&(e.Tol(n.className),e.ekj("active",n.buttonActive))},features:[e.qOj],attrs:es,decls:2,vars:3,template:function(t,n){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,n.gtNode.property.text))},dependencies:[Ge],encapsulation:2}),o})();const ns=["gt-config-form",""];function os(o,i){}let is=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["config-form","gt-config-form",""]],features:[e.qOj],attrs:ns,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,os,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),o})();function rs(o,i){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}function ss(o,i){1&o&&(e.TgZ(0,"button",5),e._uU(1,"-"),e.qZA())}function as(o,i){1&o&&(e.TgZ(0,"button",5),e._uU(1,"+"),e.qZA())}let ls=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-input"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:5,vars:11,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],["type","button","class","btn btn-outline-secondary",4,"ngIf"],[1,"form-control",3,"type","ngClass","disabled","readonly"],[1,"form-label"],["type","button",1,"btn","btn-outline-secondary"]],template:function(t,n){1&t&&(e.YNc(0,rs,2,1,"label",0),e.TgZ(1,"div",1),e.YNc(2,ss,2,0,"button",2),e._UZ(3,"input",3),e.YNc(4,as,2,0,"button",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("ngIf","number"===n.property.inputType),e.xp6(1),e.Akn(n.property.inputType),e.Q6J("type",n.property.inputType)("ngClass",n.gtNode.property.inputSize)("disabled",n.gtNode.property.disabled)("readonly",n.gtNode.property.readonly),e.uIk("placeholder",n.gtNode.property.placeholder),e.xp6(1),e.Q6J("ngIf","number"===n.property.inputType))},dependencies:[u.mk,u.O5],encapsulation:2}),o})();function cs(o,i){if(1&o&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.property.labelText)}}function ds(o,i){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.inputType))}}function ps(o,i){if(1&o&&(e.TgZ(0,"div",4),e._UZ(1,"input",5),e.YNc(2,ds,3,3,"label",6),e.qZA()),2&o){const t=e.oxw();e.ekj("form-check-inline","config-form-check-inline"===t.property.layout)("form-check-reverse","config-form-check-reverse"===t.property.layout),e.xp6(1),e.Q6J("type",t.property.inputType),e.xp6(1),e.Q6J("ngIf",t.property.showLabel)}}function us(o,i){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function _s(o,i){if(1&o&&(e.TgZ(0,"div",4),e._UZ(1,"input",5),e.YNc(2,us,2,1,"label",6),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.ekj("form-check-inline","config-form-check-inline"===n.property.layout)("form-check-reverse","config-form-check-reverse"===n.property.layout),e.xp6(1),e.Q6J("type",n.property.inputType),e.xp6(1),e.Q6J("ngIf",t.label)}}let Tn=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-radio"]],features:[e.qOj],decls:4,vars:3,consts:[["class","form-label",4,"ngIf"],["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngIf"],["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngFor","ngForOf"],[1,"form-label"],[1,"form-check"],[1,"form-check-input",3,"type"],["class","form-check-label",4,"ngIf"],[1,"form-check-label"]],template:function(t,n){1&t&&(e.YNc(0,cs,2,1,"label",0),e.TgZ(1,"div"),e.YNc(2,ps,3,6,"div",1),e.YNc(3,_s,3,6,"div",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.property.showLabel),e.xp6(2),e.Q6J("ngIf",!n.property.options.length),e.xp6(1),e.Q6J("ngForOf",n.property.options))},dependencies:[u.sg,u.O5,u.gd],encapsulation:2}),o})();function hs(o,i){if(1&o&&(e.TgZ(0,"label",3),e._uU(1),e.ALo(2,"dataBinding"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.labelText))}}let ms=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-select"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:4,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-select",3,"ngClass","disabled"],[1,"form-label"]],template:function(t,n){1&t&&(e.YNc(0,hs,3,3,"label",0),e.TgZ(1,"div",1),e._UZ(2,"select",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("ngClass",n.property.inputSize)("disabled",n.property.disabled))},dependencies:[u.mk,u.O5,Ge],encapsulation:2}),o})();function gs(o,i){if(1&o&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}let fs=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-textarea"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:5,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-control",3,"rows","placeholder","disabled"],[1,"form-label"]],template:function(t,n){1&t&&(e.YNc(0,gs,2,1,"label",0),e.TgZ(1,"div",1),e._UZ(2,"textarea",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("rows",n.property.textareaRows)("placeholder",n.gtNode.property.placeholder||"")("disabled",n.gtNode.property.disabled))},dependencies:[u.mk,u.O5],encapsulation:2}),o})(),Cs=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-toggle"]],features:[e.qOj],decls:4,vars:0,consts:[[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input"],[1,"form-check-label"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"label",2),e._uU(3,"\u5207\u6362\u6309\u94ae"),e.qZA()())},encapsulation:2}),o})(),bs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:O,useValue:{title:"\u8868\u5355",elements:[{label:"\u8868\u5355",type:"form",icon:"form"},{label:"\u6309\u94AE",type:"button",icon:"button"},{label:"\u8F93\u5165\u6846",type:"input",icon:"input"},{label:"\u5355\u9009\u6309\u94AE",type:"radio",icon:"radio",content:{property:{inputType:"radio"}}},{label:"\u590D\u9009\u6309\u94AE",type:"checkbox",icon:"checkbox",content:{property:{inputType:"checkbox"}}},{label:"\u4E0B\u62C9\u6846",type:"select",icon:"select"},{label:"\u6587\u672C\u57DF",type:"textarea",icon:"textarea"},{label:"\u5207\u6362\u6309\u94AE",type:"toggle",icon:"toggle"}]},multi:!0},{provide:R,useValue:{radio:Tn,checkbox:Tn,toggle:Cs,button:ts,input:ls,form:is,textarea:fs,select:ms},multi:!0},{provide:X,useValue:{button:'<button class="btn btn-primary" type="button">Button</button>',select:'<select class="form-select"><option selected>Select</option></select>',input:'<input type="text" class="form-control" placeholder="Input">',datepicker:'<input type="text" class="form-control" placeholder="Datepicker">',textarea:'<textarea class="form-control"></textarea>',radio:'<div class="config-form-check"><input class="config-form-check-input" type="radio"><label class="config-form-check-label">RADIO</label></div>',checkbox:'<div class="config-form-check"><input class="config-form-check-input" type="checkbox"><label class="config-form-check-label">CHECKBOX</label></div>',form:'<div style="border: 1px dashed;width: 100px;height:100px;"></div>',toggle:'<div class="form-check form-switch"><input type="checkbox" class="form-check-input" role="switch"><label class="form-check-label">\u5207\u6362\u6309\u94ae</label></div>'},multi:!0},{provide:re,useFactory:Je.Am,multi:!0}],imports:[u.ez,p.u5,Fe]}),o})();var vs=b(2894);let Ts=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-battery"]],features:[e.qOj],decls:7,vars:10,consts:[[1,"text-center","text-truncate"],[1,"flex-grow-1","overflow-hidden","h-100"],["gt-battery","",1,"d-block",3,"data","title","direction","gaugeMax","gaugeMin"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"canvas",2),e.ALo(4,"dataBinding"),e.qZA(),e.TgZ(5,"div",0),e._uU(6),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",n.property.title," "),e.xp6(2),e.Q6J("data",e.lcZ(4,8,n.property.data))("title",n.property.title)("direction",n.property.direction)("gaugeMax",n.property.gaugeMax)("gaugeMin",n.property.gaugeMin),e.xp6(3),e.AsE("",n.property.data||0,"/",n.property.gaugeMax,""))},dependencies:[vs.j,Ge],encapsulation:2}),o})();var ys=b(2021);let xs=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-gauge"]],features:[e.qOj],decls:4,vars:8,consts:[["gt-gauge","",3,"data","max","min","startColor","endColor"],[1,"px-2","text-center"]],template:function(t,n){1&t&&(e._UZ(0,"canvas",0),e.ALo(1,"dataBinding"),e.TgZ(2,"div",1),e._uU(3),e.qZA()),2&t&&(e.Q6J("data",e.lcZ(1,6,n.property.data))("max",n.gtNode.property.gaugeMax)("min",n.gtNode.property.gaugeMin)("startColor",n.property.startColor)("endColor",n.property.endColor),e.xp6(3),e.Oqu(n.gtNode.property.title))},dependencies:[ys.Y,Ge],encapsulation:2}),o})();var Es=b(8870);let Ns=(()=>{class o extends U{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-water"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"h-100","d-flex","flex-column"],[1,"position-relative","flex-grow-1"],["gt-waterBall","",1,"d-block","mx-auto",3,"value","max","min","minColor","maxColor","background"],[1,"position-absolute","top-50","start-50","translate-middle","text-white"],[1,"text-truncate","text-center","p-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"canvas",2),e.TgZ(3,"span",3),e._uU(4),e.qZA()(),e.TgZ(5,"div",4),e._uU(6),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("value",n.property.data)("max",n.property.gaugeMax)("min",n.property.gaugeMin)("minColor",n.property.minColor)("maxColor",n.property.maxColor)("background",n.property.background),e.xp6(2),e.Oqu(n.property.data),e.xp6(2),e.Oqu(n.property.title))},dependencies:[Es.a],encapsulation:2}),o})(),Ss=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:O,useValue:{title:"\u7EC4\u4EF6",elements:[{label:"\u4EEA\u8868\u76D8",type:"gauge",icon:"gauge"},{label:"\u6C34\u4F4D\u56FE",type:"water",icon:"water"},{label:"\u5360\u4F4D\u7B26",type:"slot",icon:"slot"},{label:"\u7535\u6C60",type:"battery",icon:"battery"}]},multi:!0},{provide:R,useValue:{gauge:xs,water:Ns,battery:Ts},multi:!0},{provide:re,useFactory:Je.Nt,multi:!0},{provide:X,useValue:{gauge:"<div>Gauge</div>",water:"<div>Water</div>",battery:"<div>Battery</div>"},multi:!0}],imports:[Fe,Je.WU]}),o})(),Ms=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Wr,br,bs,Ss]}),o})();var ws=b(2757),lt=(b(9812),b(7188));function Os(o,i){1&o&&(e.TgZ(0,"div",17)(1,"span",18),e._uU(2,"Loading..."),e.qZA()())}function ks(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirm.emit())}),e.YNc(2,Os,3,0,"div",13),e.ynx(3),e.SDv(4,14),e.BQk(),e.qZA(),e.TgZ(5,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancel.emit())}),e.SDv(6,16),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.modalPending),e.xp6(1),e.Q6J("ngIf",t.modalPending)}}const As=["*"],Is=(0,E.X$)("fade",[(0,E.SB)("in",(0,E.oB)({transform:"matrix(1,0,0,1,0,0)",opacity:1})),(0,E.eR)("void => *",[(0,E.oB)({transform:"matrix(.9,0,0,.9,0,30)",opacity:0}),(0,E.jt)("200ms cubic-bezier(0, 0, 0.2, 1)")])]);let Ot=(()=>{class o{constructor(){this.modalSize="md",this.confirm=new e.vpe,this.cancel=new e.vpe}ngOnInit(){const t=window.innerWidth-document.documentElement.scrollWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=t+"px"}ngOnDestroy(){document.body.style.overflow="",document.body.style.paddingRight=""}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-modal"]],inputs:{modalTitle:"modalTitle",modalSize:"modalSize",modalFooter:"modalFooter",modalPending:"modalPending",fullscreen:"fullscreen"},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:As,decls:16,vars:9,consts:function(){let i,t;return i="\u786E\u5B9A",t="\u53D6\u6D88",[["cdkTrapFocus","","tabindex","-1","aria-modal","true","role","dialog",1,"modal","d-block",3,"cdkTrapFocusAutoCapture"],[1,"modal-dialog","modal-dialog-scrollable",3,"ngClass"],["cdkDrag","","cdkDragBoundary","body",1,"modal-content",3,"cdkDragStartDelay"],["cdkDrag","cdkDrag"],["cdkDragHandle","",1,"modal-header"],[1,"modal-title","flex-grow-1"],["type","button",1,"btn","btn-text",3,"mousedown","click"],[1,"gt-icon"],["type","button","data-bs-dismiss","modal","aria-label","Close","autofocus","",1,"btn","btn-text",3,"mousedown","click"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],i,["type","button",1,"btn","btn-text",3,"click"],t,["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"]]},template:function(t,n){if(1&t){const r=e.EpF();e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2,3)(4,"div",4)(5,"h4",5),e._uU(6),e.qZA(),e.TgZ(7,"button",6),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(){e.CHM(r);const a=e.MAs(3);return n.fullscreen=!n.fullscreen,e.KtG(a.reset())}),e.TgZ(8,"i",7),e._uU(9),e.qZA()(),e.TgZ(10,"button",8),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(){return n.cancel.emit()}),e.TgZ(11,"i",7),e._uU(12,"close"),e.qZA()()(),e.TgZ(13,"div",9),e.Hsn(14),e.qZA(),e.YNc(15,ks,7,2,"div",10),e.qZA()()()}2&t&&(e.Q6J("cdkTrapFocusAutoCapture",!0),e.xp6(1),e.ekj("modal-fullscreen",n.fullscreen),e.Q6J("ngClass","modal-"+n.modalSize),e.xp6(1),e.Q6J("@fade",void 0)("cdkDragStartDelay",50),e.xp6(4),e.Oqu(n.modalTitle),e.xp6(3),e.Oqu(n.fullscreen?"minimize":"maximize"),e.xp6(6),e.Q6J("ngIf",n.modalFooter))},dependencies:[G.Zt,G.Bh,u.mk,u.O5,lt.mK],encapsulation:2,data:{animation:[Is]}}),o})();b(8675);let Rs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var ct=b(4412);function Ps(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"span",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleMousedown(r))}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("id",t.uniqueId)("ngStyle",t.labelStyle),e.xp6(1),e.hij(" ",t.label," ")}}function Bs(o,i){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.qZA()),2&o){const t=e.oxw();e.Udp("left",t.left)("top",t.top),e.xp6(1),e.Q6J("ngStyle",t.pointer)}}const Zs=["*"];function Ls(o,i){1&o&&e._UZ(0,"color-checkboard",2)}const At={};let It=(()=>{class o{constructor(){this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}ngOnInit(){const t=function Gs(o,i,t){const n=`${o}-${i}-${t}`;if(At[n])return At[n];const r=function Fs(o,i,t){if(typeof document>"u")return null;const n=document.createElement("canvas");n.width=2*t,n.height=2*t;const r=n.getContext("2d");return r?(r.fillStyle=o,r.fillRect(0,0,n.width,n.height),r.fillStyle=i,r.fillRect(0,0,t,t),r.translate(t,t),r.fillRect(0,0,t,t),n.toDataURL()):null}(o,i,t);return r?(At[n]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:`url(${t}) center left`}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,n){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("ngStyle",n.gridStyles)},dependencies:[u.PC],styles:[".grid[_ngcontent-%COMP%]{top:0px;right:0px;bottom:0px;left:0px;position:absolute}"],changeDetection:0}),o})(),Dt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez]}),o})(),Rt=(()=>{class o{constructor(t){this.el=t,this.coordinatesChange=new T.x,this.mousechange=new T.x,this.mouseListening=!1}mousemove(t,n,r,s=!1){this.mouseListening&&(t.preventDefault(),this.mousechange.next({$event:t,x:n,y:r,isTouch:s}))}mouseup(){this.mouseListening=!1}mousedown(t,n,r,s=!1){t.preventDefault(),this.mouseListening=!0,this.mousechange.next({$event:t,x:n,y:r,isTouch:s})}ngOnInit(){this.sub=this.mousechange.pipe(Se((t,n)=>t.x===n.x&&t.y===n.y)).subscribe(t=>this.handleChange(t.x,t.y,t.$event,t.isTouch))}ngOnDestroy(){this.sub?.unsubscribe()}handleChange(t,n,r,s){const a=this.el.nativeElement.clientWidth,l=this.el.nativeElement.clientHeight,c=t-(this.el.nativeElement.getBoundingClientRect().left+window.pageXOffset);let d=n-this.el.nativeElement.getBoundingClientRect().top;s||(d-=window.pageYOffset),this.coordinatesChange.next({x:t,y:n,top:d,left:c,containerWidth:a,containerHeight:l,$event:r})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","ngx-color-coordinates",""]],hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(s){return n.mousemove(s,s.pageX,s.pageY)},!1,e.Jf7)("touchmove",function(s){return n.mousemove(s,s.touches[0].clientX,s.touches[0].clientY,!0)},!1,e.Jf7)("mouseup",function(){return n.mouseup()},!1,e.Jf7)("touchend",function(){return n.mouseup()},!1,e.Jf7)("mousedown",function(s){return n.mousedown(s,s.pageX,s.pageY)})("touchstart",function(s){return n.mousedown(s,s.touches[0].clientX,s.touches[0].clientY,!0)})},outputs:{coordinatesChange:"coordinatesChange"}}),o})(),Pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),Js=(()=>{class o{constructor(){this.direction="horizontal",this.onChange=new e.vpe}ngOnChanges(){"vertical"===this.direction?(this.pointerLeft=0,this.pointerTop=100*this.rgb.a,this.gradient={background:`linear-gradient(to bottom, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`}):(this.gradient={background:`linear-gradient(to right, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`},this.pointerLeft=100*this.rgb.a)}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?0:t>r?1:Math.round(100*t/r)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}else{let c;c=n<0?0:n>s?1:Math.round(100*n/s)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-alpha"]],inputs:{hsl:"hsl",rgb:"rgb",pointer:"pointer",shadow:"shadow",radius:"radius",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:7,vars:15,consts:[[1,"alpha"],[1,"alpha-checkboard"],[1,"alpha-gradient",3,"ngStyle"],["ngx-color-coordinates","",3,"coordinatesChange"],[1,"alpha-pointer"],[1,"alpha-slider",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"color-checkboard"),e.qZA(),e._UZ(3,"div",2),e.TgZ(4,"div",3),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.TgZ(5,"div",4),e._UZ(6,"div",5),e.qZA()()()),2&t&&(e.Udp("border-radius",n.radius),e.xp6(3),e.Udp("box-shadow",n.shadow)("border-radius",n.radius),e.Q6J("ngStyle",n.gradient),e.xp6(1),e.Gre("alpha-container color-alpha-",n.direction,""),e.xp6(1),e.Udp("left",n.pointerLeft,"%")("top",n.pointerTop,"%"),e.xp6(1),e.Q6J("ngStyle",n.pointer))},dependencies:[u.PC,It,Rt],styles:[".alpha[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-checkboard[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.alpha-gradient[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-container[_ngcontent-%COMP%]{position:relative;height:100%;margin:0 3px}.alpha-pointer[_ngcontent-%COMP%]{position:absolute}.alpha-slider[_ngcontent-%COMP%]{width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;margin-top:1px;transform:translate(-2px)}"],changeDetection:0}),o})(),Ys=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Dt,Pt]}),o})();function Nn(o){let t=0,n=0;return["r","g","b","a","h","s","l","v"].forEach(r=>{!o[r]||(t+=1,isNaN(o[r])||(n+=1),("s"===r||"l"===r)&&/^\d+%$/.test(o[r])&&(n+=1))}),t===n&&o}function Ye(o,i,t){const n=new ct.C(o.hex?o.hex:o);t&&n.setAlpha(1);const r=n.toHsl(),s=n.toHsv(),a=n.toRgb(),l=n.toHex();return 0===r.s&&(r.h=i||0,s.h=i||0),{hsl:r,hex:"000000"===l&&0===a.a?"transparent":n.toHexString(),rgb:a,hsv:s,oldHue:o.h||i||r.h,source:o.source}}function Sn(o){return new ct.C(o).isValid}var ge=(()=>{return(o=ge||(ge={})).HEX="hex",o.HSL="hsl",o.HSV="hsv",o.RGB="rgb",ge;var o})();let Mn=(()=>{class o{constructor(){this.mode=ge.HEX,this.color={h:250,s:.5,l:.2,a:1},this.colorChange=new e.vpe,this.onChange=new e.vpe,this.onChangeComplete=new e.vpe,this.onSwatchHover=new e.vpe,this._onChangeCompleteSubscription=new I.w0,this._onSwatchHoverSubscription=new I.w0}ngOnInit(){this.changes=this.onChange.pipe((0,j.b)(100),(0,v.b)(t=>{switch(this.onChangeComplete.emit(t),this.mode){case ge.HEX:this.colorChange.emit(t.color.hex);break;case ge.HSL:this.colorChange.emit(t.color.hsl);break;case ge.HSV:this.colorChange.emit(t.color.hsv);break;case ge.RGB:this.colorChange.emit(t.color.rgb);break;default:const n=`The mode '${this.mode}' is not supported`;if((0,e.X6Q)())throw new Error(n);console.warn(n)}})).subscribe(),this.setState(Ye(this.color,0)),this.currentColor=this.hex}ngOnChanges(){this.setState(Ye(this.color,this.oldHue))}ngOnDestroy(){this.changes?.unsubscribe(),this._onChangeCompleteSubscription?.unsubscribe(),this._onSwatchHoverSubscription?.unsubscribe()}setState(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}handleChange(t,n){if(Nn(t)){const s=Ye(t,t.h||this.oldHue,this.disableAlpha);this.setState(s),this.onChange.emit({color:s,$event:n}),this.afterValidChange()}}afterValidChange(){}handleSwatchHover(t,n){if(Nn(t)){const s=Ye(t,t.h||this.oldHue);this.setState(s),this.onSwatchHover.emit({color:s,$event:n})}}registerOnChange(t){this._onChangeCompleteSubscription.add(this.onChangeComplete.pipe((0,v.b)(n=>t(n.color.hex))).subscribe())}registerOnTouched(t){this._onSwatchHoverSubscription.add(this.onSwatchHover.pipe((0,v.b)(()=>t())).subscribe())}setDisabledState(t){}writeValue(t){this.color=t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-wrap"]],inputs:{className:"className",mode:"mode",color:"color"},outputs:{colorChange:"colorChange",onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:0,vars:0,template:function(t,n){},encapsulation:2}),o})(),$s=0,Hs=(()=>{class o{constructor(){this.placeholder="",this.onChange=new e.vpe,this.focus=!1,this.uniqueId="editableInput-"+ ++$s}ngOnInit(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}handleFocus(t){this.focus=!0}handleFocusOut(t){this.focus=!1,this.currentValue=this.blurValue}handleKeydown(t){const n=String(t.target.value),r=n.indexOf("%")>-1,s=Number(n.replace(/%/g,""));if(isNaN(s))return;const a=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s+a},$event:t}:{data:s+a,$event:t}),this.currentValue=r?`${s+a}%`:s+a),40===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s-a},$event:t}:{data:s-a,$event:t}),this.currentValue=r?s-a+"%":s-a)}handleKeyup(t){40===t.keyCode||38===t.keyCode||`${this.currentValue}`!==t.target.value&&this.onChange.emit(this.label?{data:{[this.label]:t.target.value},$event:t}:{data:t.target.value,$event:t})}ngOnChanges(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.mousemove=(0,D.R)(document,"mousemove").subscribe(t=>this.handleDrag(t)),this.mouseup=(0,D.R)(document,"mouseup").subscribe(()=>this.unsubscribe())}unsubscribe(){this.mousemove?.unsubscribe(),this.mouseup?.unsubscribe()}handleMousedown(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}handleDrag(t){if(this.dragLabel){const n=Math.round(this.value+t.movementX);n>=0&&n<=this.dragMax&&this.onChange.emit({data:{[this.label]:n},$event:t})}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-editable-input"]],inputs:{style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax",placeholder:"placeholder"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:6,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"id","ngStyle","mousedown",4,"ngIf"],[3,"id","ngStyle","mousedown"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("keydown",function(s){return n.handleKeydown(s)})("keyup",function(s){return n.handleKeyup(s)})("focus",function(s){return n.handleFocus(s)})("focusout",function(s){return n.handleFocusOut(s)}),e.qZA(),e.YNc(2,Ps,2,3,"span",2),e.qZA()),2&t&&(e.Q6J("ngStyle",n.wrapStyle),e.xp6(1),e.Q6J("ngStyle",n.inputStyle)("value",n.currentValue)("placeholder",n.placeholder),e.uIk("aria-labelledby",n.uniqueId),e.xp6(1),e.Q6J("ngIf",n.label))},dependencies:[u.O5,u.PC],styles:["[_nghost-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]{position:relative}"],changeDetection:0}),o})(),Us=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez]}),o})(),qs=(()=>{class o{constructor(){this.hidePointer=!1,this.direction="horizontal",this.onChange=new e.vpe,this.left="0px",this.top=""}ngOnChanges(){"horizontal"===this.direction?this.left=100*this.hsl.h/360+"%":this.top=-100*this.hsl.h/360+100+"%"}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?359:t>r?0:360*(-100*t/r+100)/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}else{let c;c=n<0?0:n>s?359:100*n/s*360/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-hue"]],inputs:{hsl:"hsl",pointer:"pointer",radius:"radius",shadow:"shadow",hidePointer:"hidePointer",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:8,consts:[["ngx-color-coordinates","",1,"color-hue-container",3,"coordinatesChange"],["class","color-hue-pointer",3,"left","top",4,"ngIf"],[1,"color-hue-pointer"],[1,"color-hue-slider",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.YNc(2,Bs,2,5,"div",1),e.qZA()()),2&t&&(e.Gre("color-hue color-hue-",n.direction,""),e.Udp("border-radius",n.radius,"px")("box-shadow",n.shadow),e.xp6(2),e.Q6J("ngIf",!n.hidePointer))},dependencies:[u.O5,u.PC,Rt],styles:[".color-hue[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.color-hue-container[_ngcontent-%COMP%]{margin:0 2px;position:relative;height:100%}.color-hue-pointer[_ngcontent-%COMP%]{position:absolute}.color-hue-slider[_ngcontent-%COMP%]{margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;transform:translate(-2px)}.color-hue-horizontal[_ngcontent-%COMP%]{background:linear-gradient(to right,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}.color-hue-vertical[_ngcontent-%COMP%]{background:linear-gradient(to top,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}"],changeDetection:0}),o})(),Vs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Pt]}),o})(),Qs=(()=>{class o{constructor(){this.onChange=new e.vpe}ngOnChanges(){this.background=`hsl(${this.hsl.h}, 100%, 50%)`,this.pointerTop=-100*this.hsv.v+1+100+"%",this.pointerLeft=100*this.hsv.s+"%"}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){n<0?n=0:n>s?n=s:t<0?t=0:t>r&&(t=r);let c=-t/r+1;c=c>0?c:0,c=c>1?1:c,this.onChange.emit({data:{h:this.hsl.h,s:n/s,v:c,a:this.hsl.a,source:"hsva"},$event:a})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-saturation"]],inputs:{hsl:"hsl",hsv:"hsv",radius:"radius",pointer:"pointer",circle:"circle"},outputs:{onChange:"onChange"},features:[e.TTD],decls:5,vars:8,consts:[["ngx-color-coordinates","",1,"color-saturation",3,"coordinatesChange"],[1,"saturation-white"],[1,"saturation-black"],[1,"saturation-pointer",3,"ngStyle"],[1,"saturation-circle",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"div",4),e.qZA()()()),2&t&&(e.Udp("background",n.background),e.xp6(3),e.Udp("top",n.pointerTop)("left",n.pointerLeft),e.Q6J("ngStyle",n.pointer),e.xp6(1),e.Q6J("ngStyle",n.circle))},dependencies:[u.PC,Rt],styles:[".saturation-white[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,rgba(255,255,255,0));position:absolute;top:0;bottom:0;left:0;right:0}.saturation-black[_ngcontent-%COMP%]{background:linear-gradient(to top,#000,rgba(0,0,0,0));position:absolute;top:0;bottom:0;left:0;right:0}.color-saturation[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.saturation-pointer[_ngcontent-%COMP%]{position:absolute;cursor:default}.saturation-circle[_ngcontent-%COMP%]{width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px #0000004d,0 0 1px 2px #0006;border-radius:50%;cursor:hand;transform:translate(-2px,-4px)}"],changeDetection:0}),o})(),zs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Pt]}),o})(),js=(()=>{class o{constructor(){this.style={},this.focusStyle={},this.onClick=new e.vpe,this.onHover=new e.vpe,this.divStyles={},this.focusStyles={},this.inFocus=!1}ngOnInit(){this.divStyles={background:this.color,...this.style}}currentStyles(){return this.focusStyles={...this.divStyles,...this.focusStyle},this.focus||this.inFocus?this.focusStyles:this.divStyles}handleFocusOut(){this.inFocus=!1}handleFocus(){this.inFocus=!0}handleHover(t,n){this.onHover.emit({hex:t,$event:n})}handleClick(t,n){this.onClick.emit({hex:t,$event:n})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-swatch"]],inputs:{color:"color",style:"style",focusStyle:"focusStyle",focus:"focus"},outputs:{onClick:"onClick",onHover:"onHover"},ngContentSelectors:Zs,decls:3,vars:3,consts:[["tabindex","0",1,"swatch",3,"ngStyle","click","keydown.enter","focus","blur","mouseover"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)",4,"ngIf"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(s){return n.handleClick(n.color,s)})("keydown.enter",function(s){return n.handleClick(n.color,s)})("focus",function(){return n.handleFocus()})("blur",function(){return n.handleFocusOut()})("mouseover",function(s){return n.handleHover(n.color,s)}),e.Hsn(1),e.YNc(2,Ls,1,0,"color-checkboard",1),e.qZA()),2&t&&(e.Q6J("ngStyle",n.currentStyles()),e.uIk("title",n.color),e.xp6(2),e.Q6J("ngIf","transparent"===n.color))},dependencies:[u.O5,u.PC,It],styles:[".swatch[_ngcontent-%COMP%]{outline:none;height:100%;width:100%;cursor:pointer;position:relative}"],changeDetection:0}),o})(),Xs=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Dt]}),o})();const $e=function(o,i){return{input:o,label:i}};function Ks(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"color-editable-input",9),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleChange(r))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Akn(e.WLB(5,$e,t.input,t.label)),e.Q6J("value",t.round(100*t.rgb.a))("dragLabel",!0)("dragMax",100)}}function Ws(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"color-swatch",3),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleClick(r))})("onHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(1),e.Akn(n.swatchStyle),e.Q6J("color",n.normalizeValue(t).color)("focusStyle",n.focusStyle(t))}}function ea(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"color-alpha",13),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleValueChange(r))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("radius",2)("rgb",t.rgb)("hsl",t.hsl)}}function ta(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"color-sketch-preset-colors",15),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleBlockChange(r))})("onSwatchHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("colors",t.presetColors)}}let na=(()=>{class o{constructor(){this.disableAlpha=!1,this.onChange=new e.vpe,this.input={width:"100%",padding:"4px 10% 3px",border:"none",boxSizing:"border-box",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},this.label={display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}}round(t){return Math.round(t)}handleChange({data:t,$event:n}){if(t.hex){if(Sn(t.hex)){const r=new ct.C(t.hex);this.onChange.emit({data:{hex:this.disableAlpha||t.hex.length<=6?r.toHex():r.toHex8(),source:"hex"},$event:n})}}else t.r||t.g||t.b?this.onChange.emit({data:{r:t.r||this.rgb.r,g:t.g||this.rgb.g,b:t.b||this.rgb.b,source:"rgb"},$event:n}):t.a?(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,this.disableAlpha&&(t.a=1),this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},$event:n})):(t.h||t.s||t.l)&&this.onChange.emit({data:{h:t.h||this.hsl.h,s:Number(t.s&&t.s||this.hsl.s),l:Number(t.l&&t.l||this.hsl.l),source:"hsl"},$event:n})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-sketch-fields"]],inputs:{hsl:"hsl",rgb:"rgb",hex:"hex",disableAlpha:"disableAlpha"},outputs:{onChange:"onChange"},decls:10,vars:31,consts:[[1,"sketch-fields"],[1,"sketch-double"],["label","hex",3,"value","onChange"],[1,"sketch-single"],["label","r",3,"value","dragLabel","dragMax","onChange"],["label","g",3,"value","dragLabel","dragMax","onChange"],["label","b",3,"value","dragLabel","dragMax","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-alpha"],["label","a",3,"value","dragLabel","dragMax","onChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"color-editable-input",2),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(3,"div",3)(4,"color-editable-input",4),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(5,"div",3)(6,"color-editable-input",5),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(7,"div",3)(8,"color-editable-input",6),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.YNc(9,Ks,2,8,"div",7),e.qZA()),2&t&&(e.xp6(2),e.Akn(e.WLB(19,$e,n.input,n.label)),e.Q6J("value",n.hex.replace("#","")),e.xp6(2),e.Akn(e.WLB(22,$e,n.input,n.label)),e.Q6J("value",n.rgb.r)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(25,$e,n.input,n.label)),e.Q6J("value",n.rgb.g)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(28,$e,n.input,n.label)),e.Q6J("value",n.rgb.b)("dragLabel",!0)("dragMax",255),e.xp6(1),e.Q6J("ngIf",!1===n.disableAlpha))},dependencies:[u.O5,Hs],styles:[".sketch-fields[_ngcontent-%COMP%]{display:flex;padding-top:4px}.sketch-double[_ngcontent-%COMP%]{flex:2 1 0%}.sketch-single[_ngcontent-%COMP%], .sketch-alpha[_ngcontent-%COMP%]{flex:1 1 0%;padding-left:6px}[dir=rtl][_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}"],changeDetection:0}),o})(),oa=(()=>{class o{constructor(){this.onClick=new e.vpe,this.onSwatchHover=new e.vpe,this.swatchStyle={borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}}handleClick({hex:t,$event:n}){this.onClick.emit({hex:t,$event:n})}normalizeValue(t){return"string"==typeof t?{color:t}:t}focusStyle(t){return{boxShadow:`inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ${this.normalizeValue(t).color}`}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-sketch-preset-colors"]],inputs:{colors:"colors"},outputs:{onClick:"onClick",onSwatchHover:"onSwatchHover"},decls:2,vars:1,consts:[[1,"sketch-swatches"],["class","sketch-wrap",4,"ngFor","ngForOf"],[1,"sketch-wrap"],[1,"swatch",3,"color","focusStyle","onClick","onHover"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ws,2,4,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.colors))},dependencies:[u.sg,js],styles:[".sketch-swatches[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;margin:0 -10px;padding:10px 0 0 10px;border-top:1px solid rgb(238,238,238)}.sketch-wrap[_ngcontent-%COMP%]{width:16px;height:16px;margin:0 10px 10px 0}[dir=rtl][_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%]{padding-right:10px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}"],changeDetection:0}),o})(),ia=(()=>{class o extends Mn{constructor(){super(),this.disableAlpha=!1,this.presetColors=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],this.width=200}afterValidChange(){this.activeBackground=`rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, ${this.disableAlpha?1:this.rgb.a})`}handleValueChange({data:t,$event:n}){this.handleChange(t,n)}handleBlockChange({hex:t,$event:n}){Sn(t)&&this.handleChange({hex:t,source:"hex"},n)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["color-sketch"]],inputs:{disableAlpha:"disableAlpha",presetColors:"presetColors",width:"width"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:Mn,useExisting:(0,e.Gpc)(()=>o)}]),e.qOj],decls:14,vars:16,consts:[[1,"sketch-saturation"],[3,"hsl","hsv","onChange"],[1,"sketch-controls"],[1,"sketch-sliders"],[1,"sketch-hue"],[3,"hsl","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-color"],[1,"sketch-active"],[1,"sketch-fields-container"],[3,"rgb","hsl","hex","disableAlpha","onChange"],["class","sketch-swatches-container",4,"ngIf"],[1,"sketch-alpha"],[3,"radius","rgb","hsl","onChange"],[1,"sketch-swatches-container"],[3,"colors","onClick","onSwatchHover"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"color-saturation",1),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"color-hue",5),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.YNc(7,ea,2,3,"div",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"color-checkboard")(10,"div",8),e.qZA()(),e.TgZ(11,"div",9)(12,"color-sketch-fields",10),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.YNc(13,ta,2,1,"div",11),e.qZA()),2&t&&(e.Gre("sketch-picker ",n.className,""),e.Udp("width",n.width,"px"),e.xp6(2),e.Q6J("hsl",n.hsl)("hsv",n.hsv),e.xp6(4),e.Q6J("hsl",n.hsl),e.xp6(1),e.Q6J("ngIf",!1===n.disableAlpha),e.xp6(3),e.Udp("background",n.activeBackground),e.xp6(2),e.Q6J("rgb",n.rgb)("hsl",n.hsl)("hex",n.hex)("disableAlpha",n.disableAlpha),e.xp6(1),e.Q6J("ngIf",n.presetColors&&n.presetColors.length))},dependencies:function(){return[u.O5,Js,It,qs,Qs,na,oa]},styles:[".sketch-picker[_ngcontent-%COMP%]{padding:10px 10px 3px;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px #00000026,0 8px 16px #00000026}.sketch-saturation[_ngcontent-%COMP%]{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.sketch-fields-container[_ngcontent-%COMP%], .sketch-swatches-container[_ngcontent-%COMP%]{display:block}.sketch-controls[_ngcontent-%COMP%]{display:flex}.sketch-sliders[_ngcontent-%COMP%]{padding:4px 0;flex:1 1 0%}.sketch-hue[_ngcontent-%COMP%]{position:relative;height:10px;overflow:hidden}.sketch-alpha[_ngcontent-%COMP%]{position:relative;height:10px;margin-top:4px;overflow:hidden}.sketch-color[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.sketch-active[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;bottom:0px;left:0px;border-radius:2px;box-shadow:#00000026 0 0 0 1px inset,#00000040 0 0 4px inset}[dir=rtl][_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%]{margin-right:4px;margin-left:0}"],changeDetection:0}),o})(),ra=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Ys,Dt,Us,Vs,zs,Xs]}),o})(),wn=(()=>{class o{constructor(t,n,r,s,a){this.overlay=t,this.elementRef=n,this.formItem=r,this.formControl=s,this.formGroup=a,this.color="transparent",this.onchange=new e.vpe}set value(t){this.color=t||""}showColorPicker(){const t=this.overlay.create({width:"16rem",hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:8},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-8},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8}])});t.backdropClick().subscribe(()=>t.dispose()),t.attach(new $.C5(ia)).instance.onChangeComplete.subscribe(r=>{const{r:s,g:a,b:l,a:c}=r.color.rgb,d=1===c?r.color.hex:`rgba(${s}, ${a}, ${l}, ${c})`;this.color=d,this.formControl.setValue(d)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(z.aV),e.Y36(e.SBq),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-color"]],inputs:{disabled:"disabled",value:"value"},outputs:{onchange:"onchange"},decls:5,vars:7,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],[1,"input-group-text"],["type","hidden",3,"formControlName"],[1,"form-control","text-truncate",2,"height","calc(2.5rem - 2px)",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1)(2,"input",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.showColorPicker()}),e._uU(4),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Udp("background-color",n.formControl.value||"transparent"),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(1),e.ekj("disabled",n.disabled),e.xp6(1),e.hij(" ",n.formControl.value," "))},dependencies:[p.Fj,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),o})();const sa=["dropdown"];function aa(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw().type,l=e.oxw();return e.KtG(l.changeDropdown(a,s))}),e.TgZ(1,"a",15),e._uU(2),e.qZA()()}if(2&o){const t=i.$implicit,n=e.oxw().active;e.ekj("active",t===n),e.xp6(1),e.ekj("active",t===n),e.xp6(1),e.Oqu(t)}}function la(o,i){if(1&o&&(e.TgZ(0,"ul",12),e.YNc(1,aa,3,5,"li",13),e.qZA()),2&o){const t=i.items;e.xp6(1),e.Q6J("ngForOf",t)}}let ca=(()=>{class o{constructor(t,n,r,s,a){this.overlay=t,this.vcr=n,this.formItem=r,this.formControl=s,this.formGroup=a,this.onchange=new e.vpe,this.overlayRef=null,this.units=["px","%","em"],this.active="",this.border={left:"1px solid #ccc",top:"2px dashed #000",right:"3px dotted pink",bottom:"3px none red",all:"3px dashed #123456"},this.borderStyles=["solid","dashed","dotted","none"],this.borderIconMap={solid:"solid_line",dashed:"dashed_line",dotted:"dotted_line",none:"close"}}set value(t){this.border=t||{}}switchBorder(t){this.active=t;const n=this.border[t]?this.border[t].split(" "):[];if(n[0]){const r=n[0].match(/\d*/);this.borderWidth=r?r[0]:null,this.borderUnit=n[0].replace(/\d*/,"")}else this.borderWidth=null,this.borderUnit=null;this.borderStyle=n[1]||"none",this.borderColor=n[2]}changeColor(t){this.borderColor=t,this.change()}changeWidth(t){this.borderWidth=t,this.change()}changeStyle(t){"none"===t?(this.borderWidthDisabled=!0,this.borderColorDisabled=!0):(this.borderWidthDisabled=!1,this.borderColorDisabled=!1),this.borderStyle=t.value,this.change()}change(){this.border[this.active]=[this.borderWidth+this.borderUnit,this.borderStyle,this.borderColor].join(" "),this.formItem.value=this.border,this.formGroup.get(this.formItem.name).setValue(this.formItem.value),this.onchange.emit(this.border)}showDropdown(t,n){const r={type:n};switch(n){case"borderStyle":r.items=this.borderStyles,r.active=this.borderStyle;break;case"borderUnit":r.items=this.units,r.active=this.borderUnit}const s=new $.UE(this.dropdown,this.vcr,r);this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:this.overlay.position().flexibleConnectedTo(t.target).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}),this.overlayRef.attach(s),this.overlayRef.backdropClick().pipe((0,N.q)(1)).subscribe(()=>{this.overlayRef.dispose(),this.overlayRef=null})}changeDropdown(t,n){switch(t){case"borderStyle":this.borderStyle=n;break;case"borderUnit":this.borderUnit=n}this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.change()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(z.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-border"]],viewQuery:function(t,n){if(1&t&&e.Gf(sa,5),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{value:"value"},outputs:{onchange:"onchange"},decls:16,vars:18,consts:[[1,"border-box","mb-2"],[1,"border-item","border-all",3,"click"],[1,"border-item","border-left",3,"click"],[1,"border-item","border-top",3,"click"],[1,"border-item","border-right",3,"click"],[1,"border-item","border-bottom",3,"click"],[1,"mb-2","input-group","input-group-sm",2,"flex-wrap","nowrap"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"gt-icon"],["type","text","title","","size","1","name","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[3,"value","disabled","onchange"],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return n.switchBorder("all")}),e.qZA(),e.TgZ(2,"div",2),e.NdJ("click",function(){return n.switchBorder("left")}),e.qZA(),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.switchBorder("top")}),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(){return n.switchBorder("right")}),e.qZA(),e.TgZ(5,"div",5),e.NdJ("click",function(){return n.switchBorder("bottom")}),e.qZA()(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(s){return n.showDropdown(s,"borderStyle")}),e.TgZ(8,"i",8),e._uU(9),e.qZA()(),e.TgZ(10,"input",9),e.NdJ("ngModelChange",function(s){return n.borderWidth=s})("ngModelChange",function(){return n.changeWidth(n.borderWidth)}),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(s){return n.showDropdown(s,"borderUnit")}),e._uU(12),e.qZA()(),e.TgZ(13,"properties-color",10),e.NdJ("onchange",function(s){return n.changeColor(s)}),e.qZA(),e.YNc(14,la,2,1,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.ekj("active","all"===n.active),e.xp6(1),e.ekj("active","left"===n.active),e.xp6(1),e.ekj("active","top"===n.active),e.xp6(1),e.ekj("active","right"===n.active),e.xp6(1),e.ekj("active","bottom"===n.active),e.xp6(2),e.Q6J("disabled",!n.active),e.xp6(2),e.Oqu(n.borderIconMap[n.borderStyle]),e.xp6(1),e.Q6J("disabled",!n.active||"none"===n.borderStyle)("ngModel",n.borderWidth),e.xp6(1),e.Q6J("disabled",!n.active||"none"===n.borderStyle),e.xp6(1),e.hij(" ",n.borderUnit," "),e.xp6(1),e.Q6J("value",n.borderColor)("disabled",!n.active||"none"===n.borderStyle))},dependencies:[p.Fj,p.JJ,u.sg,p.On,wn],encapsulation:2}),o})();const da=function(){return{updateOn:"blur"}};function pa(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",1),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r._onchange())}),e.qZA()}if(2&o){const t=i.$implicit,n=i.index,r=e.oxw();e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(3,da))("disabled",!!n&&null===r.values[n-1].value)}}let ua=(()=>{class o{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.subscription=I.w0.EMPTY,this.setValue(),this.subscription=this.formControl.valueChanges.subscribe(()=>this.setValue())}ngOnDestroy(){this.subscription.unsubscribe()}setValue(){const t=null===this.formControl.value?[]:this.formControl.value.split(" ");this.values=[{value:t[0]?+t[0].match(/(-|\d)+/)[0]:null},{value:t[1]?+t[1].match(/(-|\d)+/)[0]:null},{value:t[2]?+t[2].match(/(-|\d)+/)[0]:null},{value:t[3]?+t[3].match(/(-|\d)+/)[0]:null}]}_onchange(){this.formControl.setValue(this.values.reduce((t,{value:n})=>0===n?t+n+" ":null===n?t:t+n+"px ","").trim()||null)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-four-numbers"]],hostAttrs:[1,"input-group"],decls:1,vars:1,consts:[["class","form-control","title","","type","number","pattern","[0-9]*",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngFor","ngForOf"],["title","","type","number","pattern","[0-9]*",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"]],template:function(t,n){1&t&&e.YNc(0,pa,1,4,"input",0),2&t&&e.Q6J("ngForOf",n.values)},dependencies:[p.Fj,p.wV,p.JJ,p.c5,u.sg,p.On],encapsulation:2}),o})();function _a(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",5),e._uU(2),e.qZA(),e.TgZ(3,"td",5),e._uU(4),e.qZA(),e.TgZ(5,"td",6)(6,"a")(7,"i",4),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteRow(s))}),e._uU(8,"minus"),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q6J("title",t.key),e.xp6(1),e.Oqu(t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}let ha=(()=>{class o{constructor(){this.onchange=new e.vpe}add(){this.formItem.value[this.key]=this.value&&this.value.trim()||"",this.onchange.emit(this.formItem),this.key=this.value=""}deleteRow({key:t}){delete this.formItem.value[t],this.onchange.emit(this.formItem)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-object"]],inputs:{formItem:"formItem",relateList:"relateList"},outputs:{onchange:"onchange"},decls:20,vars:5,consts:[[1,"table","table-bordered","table-condensed","table-sm"],[2,"width","20px"],[4,"ngFor","ngForOf"],["type","text","title","",1,"form-control","input-xs",3,"ngModel","ngModelChange"],[1,"gt-icon",3,"click"],[1,"text-truncate",3,"title"],[2,"padding","4px"]],template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Key"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Value"),e.qZA(),e._UZ(7,"th",1),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,_a,9,4,"tr",2),e.ALo(10,"keyvalue"),e.TgZ(11,"tr")(12,"td")(13,"input",3),e.NdJ("ngModelChange",function(s){return n.key=s}),e.qZA()(),e.TgZ(14,"td")(15,"input",3),e.NdJ("ngModelChange",function(s){return n.value=s}),e.qZA()(),e.TgZ(16,"td")(17,"a")(18,"i",4),e.NdJ("click",function(){return n.add()}),e._uU(19,"plus"),e.qZA()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,3,n.formItem.value)),e.xp6(4),e.Q6J("ngModel",n.key),e.xp6(2),e.Q6J("ngModel",n.value))},dependencies:[p.Fj,p.JJ,u.sg,p.On,u.Nd],encapsulation:2}),o})();function ma(o,i){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.value)}}const On=function(){return{updateOn:"blur"}};function ga(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",6),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(2,On))}}function fa(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",7),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.value)("ngModelOptions",e.DdM(2,On))}}function Ca(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.value)}}function ba(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"input",10),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.value=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.valueChange.emit(r.value))})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cellBlur.emit())}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.value)}}function va(o,i){if(1&o&&(e.ynx(0)(1,1),e.YNc(2,ga,1,3,"input",2),e.YNc(3,fa,1,3,"input",3),e.YNc(4,Ca,2,1,"div",4),e.YNc(5,ba,1,1,"input",5),e.BQk()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","switch")}}let Ta=(()=>{class o{constructor(){this.mode="view",this.cellBlur=new e.vpe,this.valueChange=new e.vpe}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-table-cell"]],inputs:{mode:"mode",type:"type",value:"value"},outputs:{cellBlur:"cellBlur",valueChange:"valueChange"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSwitch"],["class","form-control","style","min-width: 10rem","type","text","autofocus","",3,"ngModel","ngModelOptions","ngModelChange","blur",4,"ngSwitchCase"],["class","form-control","style","min-width: 10rem","type","number","autofocus","",3,"ngModel","ngModelOptions","ngModelChange","blur",4,"ngSwitchCase"],["class","form-check form-switch",4,"ngSwitchCase"],["class","form-control","type","text","autofocus","",3,"ngModel","ngModelChange","blur",4,"ngSwitchDefault"],["type","text","autofocus","",1,"form-control",2,"min-width","10rem",3,"ngModel","ngModelOptions","ngModelChange","blur"],["type","number","autofocus","",1,"form-control",2,"min-width","10rem",3,"ngModel","ngModelOptions","ngModelChange","blur"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","blur"],["type","text","autofocus","",1,"form-control",3,"ngModel","ngModelChange","blur"]],template:function(t,n){1&t&&(e.YNc(0,ma,2,1,"ng-container",0),e.YNc(1,va,6,4,"ng-container",0)),2&t&&(e.Q6J("ngIf","view"===n.mode),e.xp6(1),e.Q6J("ngIf","edit"===n.mode))},dependencies:[p.Fj,p.wV,p.Wl,p.JJ,u.O5,u.RF,u.n9,u.ED,p.On],encapsulation:2}),o})();function ya(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.maximize())}),e.TgZ(1,"i",7),e._uU(2,"maximize"),e.qZA()()}}function xa(o,i){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.name)}}function Ea(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",12),e.NdJ("dblclick",function(){const s=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.editMap[s.prop+a]=!0)}),e.TgZ(1,"properties-table-cell",13),e.NdJ("valueChange",function(r){const a=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.KtG(l[a.prop]=r)})("cellBlur",function(){const s=e.CHM(t).$implicit,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.editMap[s.prop+a]=!1)}),e.qZA()()}if(2&o){const t=i.$implicit,n=e.oxw(),r=n.$implicit,s=n.index,a=e.oxw(2);e.Q6J("title",r[t.prop]),e.xp6(1),e.Q6J("mode",a.editMap[t.prop+s]?"edit":"view")("type",t.type)("value",r[t.prop])}}function Na(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,Ea,2,4,"td",8),e.TgZ(2,"td",9)(3,"button",10)(4,"i",11),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.delete(s))}),e._uU(5,"minus"),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.formItem.columns)}}function Sa(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Na,6,1,"tr",3),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.formControl.value)}}function Ma(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"properties-table-cell",14),e.NdJ("valueChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.value=r)})("valueChange",function(r){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l._onchange(r,a))}),e.qZA()()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q6J("mode","edit")("type",t.type)("value",t.value)}}function wa(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,Ma,2,3,"td",3),e.TgZ(2,"td",9)(3,"button",10)(4,"i",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.add())}),e._uU(5,"plus"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.formItem.columns)}}let Oa=(()=>{class o{constructor(t,n,r,s,a,l){this.formItem=t,this.formControl=n,this.formGroup=r,this.overlay=s,this.elementRef=a,this.injector=l,this.onclick=new e.vpe,this.editMap={},this.isMaximize=!1}add(){this.formControl.value.push(this.formItem.columns.reduce((t,n)=>(t[n.prop]=n.value,n.value=null,t),{})),this.formControl.setValue([...this.formControl.value])}delete(t){this.formControl.value.splice(this.formControl.value.indexOf(t),1),this.formControl.setValue([...this.formControl.value])}_onchange(t,n){this.formItem.columns[n].value=t}maximize(){const t=this.overlay.create({hasBackdrop:!0,disposeOnNavigation:!0,backdropClass:"",positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([{overlayX:"end",overlayY:"top",originX:"end",originY:"top",offsetX:12,offsetY:-6}])});t.attach(new $.C5(o,null,e.zs3.create({providers:[],parent:this.injector}))).instance.isMaximize=!0,t.backdropClick().pipe((0,N.q)(1)).subscribe(()=>t.dispose())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw),e.Y36(z.aV),e.Y36(e.SBq),e.Y36(e.zs3))},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-table"]],outputs:{onclick:"onclick"},decls:10,vars:14,consts:[[2,"overflow-x","auto","margin-bottom","10px"],["type","button","class","btn btn-light btn-sm position-absolute top-0 end-0",3,"click",4,"ngIf"],[1,"table","table-bordered","table-condensed","table-sm",2,"margin","0"],[4,"ngFor","ngForOf"],[2,"width","1.25rem"],[4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm","position-absolute","top-0","end-0",3,"click"],[1,"gt-icon"],[3,"title","dblclick",4,"ngFor","ngForOf"],[2,"padding","4px"],["type","button",1,"btn","btn-link"],[1,"gt-icon",3,"click"],[3,"title","dblclick"],[3,"mode","type","value","valueChange","cellBlur"],[3,"mode","type","value","valueChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ya,3,0,"button",1),e.TgZ(2,"table",2)(3,"thead")(4,"tr"),e.YNc(5,xa,2,1,"th",3),e._UZ(6,"th",4),e.qZA()(),e.TgZ(7,"tbody"),e.YNc(8,Sa,2,1,"ng-container",5),e.YNc(9,wa,6,1,"tr",5),e.qZA()()()),2&t&&(e.ekj("bg-body",n.isMaximize)("p-3",n.isMaximize)("shadow",n.isMaximize)("border",n.isMaximize)("rounded",n.isMaximize),e.xp6(1),e.Q6J("ngIf",!n.isMaximize),e.xp6(4),e.Q6J("ngForOf",n.formItem.columns),e.xp6(3),e.Q6J("ngIf",n.formControl.value.length),e.xp6(1),e.Q6J("ngIf","button"!==n.formItem.tableAddType))},dependencies:[u.sg,u.O5,Ta],encapsulation:2}),o})();const ka=["dropdown"],Aa=["unitEl"];function Ia(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",8),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.change(s))}),e.TgZ(1,"a",9),e._uU(2),e.qZA()()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",t===n.unit),e.xp6(1),e.ekj("active",t===n.unit),e.xp6(1),e.Oqu(t)}}function Da(o,i){if(1&o&&(e.TgZ(0,"ul",6),e.YNc(1,Ia,3,5,"li",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.units)}}const Ra=function(){return{standalone:!0}};let Pa=(()=>{class o{constructor(t,n,r,s,a,l){this.cdf=t,this.overlay=n,this.vcr=r,this.formItem=s,this.formControl=a,this.formGroup=l,this.onchange=new e.vpe,this.unit="\\",this.units=["px","%","em","rem"],this.setValue(a.value),this.formControl.valueChanges.subscribe(c=>this.setValue(c))}setValue(t){t?(this.input=t.match(/([\d.-]|auto)/)?t.match(/([\d.-]+|auto)/)[0]:"",this.unit=t.match(/(px|%|em|rem|vw|vh)$/)?t.match(/(px|%|em|rem|vw|vh)$/)[0]:"\\"):(this.input="",this.unit="\\")}switchUnit(){if(this.disabled)return;const t=this.overlay.position().flexibleConnectedTo(this.unitEl).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({positionStrategy:t,disposeOnNavigation:!0,scrollStrategy:this.overlay.scrollStrategies.block(),backdropClass:"",hasBackdrop:!0});const n=new $.UE(this.dropdown,this.vcr);this.overlayRef.attach(n),this.overlayRef.backdropClick().pipe((0,N.q)(1)).subscribe(()=>this.overlayRef&&this.overlayRef.dispose())}onwheel(t){if(document.activeElement!==t.target)return;t.preventDefault();const n=this.input?+this.input:0;Number.isNaN(n)||(this.input=n-Math.sign(t.deltaY),this.change())}change(t){void 0!==t&&(this.unit=t);const n=this.formControl;"auto"===this.input?(this.unit="\\",n.setValue(this.input),this.onchange.emit(this.input)):(n.setValue(this.input+this.unit),this.onchange.emit(this.input+this.unit)),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.cdf.detectChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(z.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(p.NI),e.Y36(p.cw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["properties-unit-input"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ka,7),e.Gf(Aa,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first),e.iGM(r=e.CRH())&&(n.unitEl=r.first)}},inputs:{disabled:"disabled"},outputs:{onchange:"onchange"},decls:8,vars:7,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],["type","number","title","","size","1","name","","pattern","[0-9]*",1,"form-control",3,"ngModel","disabled","ngModelOptions","ngModelChange","wheel","change"],["type","hidden",3,"formControlName","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["unitEl",""],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(s){return n.input=s})("wheel",function(s){return n.onwheel(s)})("change",function(){return n.change()}),e.qZA(),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(s){return n.setValue(s)}),e.qZA(),e.TgZ(3,"button",3,4),e.NdJ("click",function(){return n.switchUnit()}),e._uU(5),e.qZA()(),e.YNc(6,Da,2,1,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngModel",n.input)("disabled",n.disabled)("ngModelOptions",e.DdM(6,Ra)),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(3),e.hij(" ",n.unit," "))},dependencies:[p.Fj,p.wV,p.JJ,p.JL,p.c5,p.sg,p.u,u.sg,p.On],encapsulation:2}),o})(),Ba=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:mt,useValue:{color:wn,border:ca,fourNumbers:ua,object:ha,table:Oa,numberHasUnit:Pa},multi:!0}],imports:[p.UX,ra,u.ez,p.u5,z.U8,$.eL]}),o})(),Za=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[G._t,u.ez,lt.rt]}),o})();var Bt=b(529);function La(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td")(7,"button",4),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.confirm.emit(s))}),e.TgZ(8,"i",5),e._uU(9,"rotate_ccw"),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.xi3(5,2,t.timestamp,"medium"))}}let kn=(()=>{class o{constructor(t,n){this.http=t,this.gt=n,this.confirm=new e.vpe,this.cancel=new e.vpe,this.data=this.http?this.http.get("getHistoryByID",{params:{id:this.gt.metadata.id||0}}):Ct.E,console.info(n)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Bt.eN,8),e.Y36(q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["history-component"]],outputs:{confirm:"confirm",cancel:"cancel"},decls:12,vars:3,consts:function(){let i;return i="\u5386\u53F2",[["modalTitle",i,3,"cancel"],[1,"table","table-striped","table-bordered","table-hover"],[1,"position-sticky","bg-body",2,"top","-1rem"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"],[1,"gt-icon"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("cancel",function(){return n.cancel.emit()}),e.TgZ(1,"table",1)(2,"thead",2)(3,"tr")(4,"th"),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"timestamp"),e.qZA(),e._UZ(8,"th"),e.qZA()(),e.TgZ(9,"tbody"),e.YNc(10,La,10,5,"tr",3),e.ALo(11,"async"),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",e.lcZ(11,1,n.data)))},dependencies:[u.sg,Ot,u.Ov,u.uU],encapsulation:2}),o})();var Fa=b(2076),Ga=b(6063);class Ja extends T.x{constructor(i=1/0,t=1/0,n=Ga.l){super(),this._bufferSize=i,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,t)}next(i){const{isStopped:t,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;t||(n.push(i),!r&&n.push(s.now()+a)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!i.closed;a+=n?1:2)i.next(s[a]);return this._checkFinalizedStatuses(i),t}_trimBuffer(){const{_bufferSize:i,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*i;if(i<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const a=t.now();let l=0;for(let c=1;c<n.length&&n[c]<=a;c+=2)l=c;l&&n.splice(0,l+1)}}}var Ya=b(3099);const Ha=["editor"],An="https://cdn.jsdelivr.net/npm/monaco-editor@0.34.1/min/vs",Ua=(0,ye.of)(null).pipe((0,y.U)(()=>{const o=document.createElement("script");return o.type="text/javascript",o.src=`${An}/loader.js`,document.body.appendChild(o),o}),(0,he.w)(o=>(0,D.R)(o,"load")),(0,he.w)(()=>(window.require.config({paths:{vs:An}}),(0,Fa.D)(new Promise(o=>window.require(["vs/editor/editor.main"],o))))),function $a(o,i,t){let n,r=!1;return o&&"object"==typeof o?({bufferSize:n=1/0,windowTime:i=1/0,refCount:r=!1,scheduler:t}=o):n=o??1/0,(0,Ya.B)({connector:()=>new Ja(n,i,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1));let Zt=(()=>{class o{constructor(t){this.gt=t,this.confirm=new e.vpe,this.cancel=new e.vpe}ngAfterViewInit(){Ua.subscribe(()=>{const t=monaco.editor.create(this.editor.nativeElement,{value:this.script||"",language:"typescript",lineNumbersMinChars:2,theme:this.gt.darkMode?"vs-dark":"vs"});t.onDidChangeModelContent(()=>this.script=t.getValue())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-action-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ha,7),2&t){let r;e.iGM(r=e.CRH())&&(n.editor=r.first)}},inputs:{script:"script"},outputs:{confirm:"confirm",cancel:"cancel"},decls:3,vars:1,consts:function(){let i;return i="\u4E8B\u4EF6\u7F16\u8F91\u5668",[["modalTitle",i,"modalSize","xl",3,"modalFooter","confirm","cancel"],[1,"overflow-hidden","border",2,"height","36rem"],["editor",""]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n.confirm.emit(n.script)})("cancel",function(){return n.cancel.emit()}),e._UZ(1,"div",1,2),e.qZA()),2&t&&e.Q6J("modalFooter",!0)},dependencies:[Ot],encapsulation:2}),o})(),In=(()=>{class o{constructor(){this.confirm=new e.vpe,this.cancel=new e.vpe,this.formGroup=new p.cw({fontSize:new p.NI(16),autoSaveFrequency:new p.NI(3e3),theme:new p.NI("auto")})}ngOnInit(){this.formGroup.get("fontSize").valueChanges.subscribe(t=>{document.documentElement.style.setProperty("font-size",t+"px")})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["settings"]],outputs:{confirm:"confirm",cancel:"cancel"},decls:35,vars:1,consts:function(){let i;return i="\u8BBE\u7F6E",[["modalTitle",i,3,"confirm","cancel"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],[1,"form-label"],["type","range","min","12","max","20","step","1","formControlName","fontSize",1,"form-range"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input"],[1,"input-group"],["type","numer","formControlName","autoSaveFrequency",1,"form-control"],[1,"input-group-text"],[1,"col"],[1,"form-check","form-check-inline"],["id","gt-settings-theme-light","type","radio","value","light","formControlName","theme",1,"form-check-input"],["for","gt-settings-theme-light",1,"form-check-label"],["id","gt-settings-theme-dark","type","radio","value","dark","formControlName","theme",1,"form-check-input"],["for","gt-settings-theme-dark",1,"form-check-label"],["id","gt-settings-theme-auto","type","radio","value","auto","formControlName","theme",1,"form-check-input"],["for","gt-settings-theme-auto",1,"form-check-label"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n.confirm.emit()})("cancel",function(){return n.cancel.emit()}),e.TgZ(1,"form",1)(2,"div",2)(3,"label",3),e._uU(4,"\u5b57\u4f53\u5927\u5c0f"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e._UZ(6,"div"),e.TgZ(7,"div",2)(8,"label",3),e._uU(9,"\u81ea\u52a8\u4fdd\u5b58"),e.qZA(),e.TgZ(10,"div",5),e._UZ(11,"input",6),e.qZA()(),e.TgZ(12,"div",2)(13,"label",3),e._uU(14,"\u81ea\u52a8\u4fdd\u5b58\u9891\u7387"),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"input",8),e.TgZ(17,"span",9),e._uU(18,"ms"),e.qZA()()(),e.TgZ(19,"div",10)(20,"label",3),e._uU(21,"\u4e3b\u9898"),e.qZA(),e.TgZ(22,"div")(23,"div",11),e._UZ(24,"input",12),e.TgZ(25,"label",13),e._uU(26,"Light"),e.qZA()(),e.TgZ(27,"div",11),e._UZ(28,"input",14),e.TgZ(29,"label",15),e._uU(30,"Dark"),e.qZA()(),e.TgZ(31,"div",11),e._UZ(32,"input",16),e.TgZ(33,"label",17),e._uU(34,"Auto"),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.formGroup))},dependencies:[p._Y,p.Fj,p.eT,p._,p.JJ,p.JL,p.sg,p.u,Ot],encapsulation:2}),o})();const qa={provide:Lt,useFactory:o=>i=>{i.addEventListener("changeactionstart",t=>{t.preventDefault();const n=o.create({hasBackdrop:!0,disposeOnNavigation:!0}),r=n.attach(new $.C5(Zt));r.instance.script=t.action.script,(0,L.T)(r.instance.confirm.pipe((0,v.b)(s=>{i.dispatchEvent(new Jt(t.action,s))})),r.instance.cancel).pipe((0,N.q)(1)).subscribe(()=>n.dispose())}),i.addEventListener("editexpressionstart",t=>{t.preventDefault();const n=o.create({hasBackdrop:!0,disposeOnNavigation:!0}),r=n.attach(new $.C5(Zt));r.instance.script=t.expression,(0,L.T)(r.instance.confirm.pipe((0,v.b)(s=>i.dispatchEvent(new Bn(s)))),r.instance.cancel).pipe((0,N.q)(1)).subscribe(()=>n.dispose())})},deps:[z.aV]};function Va(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("mouseenter",function(){const s=e.CHM(t).index,a=e.oxw().index,l=e.oxw();return e.KtG(l.current=[a,s])}),e.qZA()}if(2&o){const t=i.index,n=e.oxw().index,r=e.oxw();e.ekj("bg-body-tertiary",n<=r.current[0]&&t<=r.current[1])}}function Qa(o,i){if(1&o&&(e.TgZ(0,"div",2),e.YNc(1,Va,1,2,"div",3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rows)}}let za=(()=>{class o{constructor(){this.rows=Array(10).fill(0),this.current=[0,0],this.modalClose=new e.vpe}onclick(){this.modalClose.emit(this.current)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["gt-create-table"]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.onclick()})},outputs:{modalClose:"modalClose"},decls:2,vars:1,consts:[[1,"p-2","bg-body","rounded","border","shadow"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["class","table-cell border",3,"bg-body-tertiary","mouseenter",4,"ngFor","ngForOf"],[1,"table-cell","border",3,"mouseenter"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qa,2,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.rows))},dependencies:[u.sg],styles:[".table-cell[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;margin:.15rem}"]}),o})();const Xa=[{provide:A,useFactory:(o,i)=>[{title:"\u64A4\u9500",icon:"rotate_ccw",get disabled(){return!o.history.get().length},onclick:()=>{o.undo()}},{title:"\u91CD\u505A",icon:"rotate_cw",get disabled(){return!o.undoHistory.get().length},onclick:()=>{o.redo()}},{title:"\u53C2\u8003\u7EBF",icon:"dashed_rect",get active(){return o.showReferenceLine},onclick(){o.showReferenceLine=!o.showReferenceLine}},{title:"\u6DFB\u52A0\u6570\u636E\u6E90",icon:"bind",onclick:()=>{}},{title:"\u9884\u89C8",icon:"preview",onclick:()=>{o.events.TOP_BUTTON_CLICK.emit({button:{name:"preview"},data:{config:o.exportString(),components:o.remoteCustomComponent.map(t=>JSON.stringify(t.export()))}})}},{title:"\u4FDD\u5B58",icon:"save",onclick:()=>{o.events.SAVE.emit({config:o.exportString(),settings:o.exportSettings()})}},{title:"\u5386\u53F2",icon:"history",onclick:()=>{const t=i.create({hasBackdrop:!0,disposeOnNavigation:!0}),n=t.attach(new $.C5(kn)).instance;(0,L.T)(n.confirm.pipe((0,v.b)(r=>o.events.CUSTOM.emit({type:"rollback",callback(s){o.init(s.config),o.initSettings({name:s.title,description:s.description,...s.settings})},data:r}))),n.cancel).pipe((0,N.q)(1)).subscribe(()=>t.dispose())}},{title:"\u8BBE\u7F6E",icon:"tools",onclick:()=>{const t=i.create({hasBackdrop:!0,disposeOnNavigation:!0}),n=t.attach(new $.C5(In)).instance;(0,L.T)(n.confirm,n.cancel).pipe((0,N.q)(1)).subscribe(()=>t.dispose())}}],deps:[q,z.aV]},{provide:k,useFactory:o=>(i,t)=>[{label:"\u5411\u524D\u79FB\u52A8",desc:"\u2318\u2190",disabled:!(t.parent&&t.parent.children.indexOf(t)>0),onclick:()=>i.moveNode(t,t.parent,t.parent.children.indexOf(t)-1)},{label:"\u5411\u540E\u79FB\u52A8",desc:"\u2318\u2192",disabled:!(t.parent&&t.parent.children.indexOf(t)<t.parent.children.length-1),onclick:()=>i.moveNode(t,t.parent,t.parent.children.indexOf(t)+1)},{label:"\u5411\u4E0A\u79FB\u52A8",desc:"\u2318\u2191\ufe0f",disabled:!(t.parent&&t.parent.parent),onclick:()=>i.moveNode(t,t.parent.parent,t.parent.parent.children.indexOf(t.parent)+1)},{divider:!0},{label:"\u590D\u5236",desc:"\u2318C",disabled:!i.selected.length||!i.selected[0].core.canCopy,onclick:()=>i.copyNode()},{label:"\u7C98\u8D34",desc:"\u2318V",disabled:1!==i.selected.length||!i.copiedNode.length,onclick:()=>{i.pasteNode(t)}},{label:"\u526A\u5207",desc:"Todo",disabled:!0},{label:"\u5220\u9664",desc:"DEL",disabled:!i.selected.length||!i.selected[0].core.canDelete,onclick:()=>i.removeNode()},{divider:!0},{label:"\u590D\u5236\u6837\u5F0F",desc:"\u2318\u21e7C",disabled:1!==i.selected.length||!i.selected[0].core.canCopyStyle,onclick:()=>i.copyStyle()},{label:"\u7C98\u8D34\u6837\u5F0F",desc:"\u2318\u21e7V",disabled:!i.copiedStyle||!i.selected.length,onclick:()=>i.pasteStyle()},{divider:!0},{label:"\u751F\u6210\u7F51\u683C",disabled:0===i.selected.filter(({core:n})=>n.canHasChild).length,onclick:(n,r)=>{const s=o.create({hasBackdrop:!0,backdropClass:"",disposeOnNavigation:!0,positionStrategy:o.position().flexibleConnectedTo({x:r.clientX,y:r.clientY}).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])}),a=new $.C5(za),l=s.attach(a);(0,L.T)(s.backdropClick(),l.instance.modalClose.pipe((0,v.b)(([c,d])=>{i.selected.forEach(_=>{i.addNode("division",_,-1,{type:"division",style:{},children:new Array(c+1).fill({type:"division",style:{display:"flex",flexDirection:"row",width:"100%"},children:new Array(d+1).fill({type:"division",style:{width:100/d+"%"}})})})})}))).pipe((0,N.q)(1),(0,v.b)(()=>s.dispose())).subscribe()}}],deps:[z.aV]},qa];let Ka=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:Xa,imports:[u.ez,p.u5,G._t,lt.rt,Rs,p.UX,Za,Ba]}),o})();var Wa=b(1129),el=b(9162),tl=b(2125);let nl=(()=>{class o{constructor(){this.modalDismiss=new e.vpe}log({type:t,message:n,data:r}){switch(t){case"info":console.info("[GHOSTEN  INFO]: "+n+" %O",r);break;case"error":console.error("[GHOSTEN ERROR]: "+n,r);break;case"warning":console.warn("[GHOSTEN WARNING]: "+n,r)}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gt-render"]],inputs:{data:"data"},outputs:{modalDismiss:"modalDismiss"},decls:2,vars:1,consts:function(){let i;return i="\u9884\u89C8",[["modalTitle",i,"modalSize","xl",3,"cancel"],[3,"data","log"]]},template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0),e.NdJ("cancel",function(){return n.modalDismiss.emit()}),e.TgZ(1,"gt-renderer",1),e.NdJ("log",function(s){return n.log(s)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("data",n.data))},dependencies:[el.b,tl.z],encapsulation:2}),o})();var ol=b(3498);let il=(()=>{class o{constructor(t,n,r,s){this.overlay=t,this.http=n,this.route=r,this.toast=s}save(t,n){return this.http.post("save",{config:t.config,settings:t.settings,id:this.route.snapshot.params.id,type:n}).subscribe(()=>this.toast.show({type:"primary",message:"auto"===n?"\u81ea\u52a8\u4fdd\u5b58":"manual"===n?"\u4fdd\u5b58\u6210\u529f":"Rollback \u6210\u529f",duration:1e4,position:"top_center"}))}onEvent(t){switch(t.type){case"TOP_BUTTON_CLICK":if("preview"===t.data.button.name){const n=this.overlay.create({hasBackdrop:!0,width:"90%",maxHeight:"90%",disposeOnNavigation:!0,panelClass:"",positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically()}),r=n.attach(new $.C5(nl));r.instance.data=t.data.data,r.instance.modalDismiss.subscribe(()=>n.dispose())}break;case"SAVE":this.save(t.data,"manual");break;case"AUTO_SAVE":this.save(t.data,"auto");break;case"SAVE_COMPONENT":this.http.post("saveComponent",t.data).subscribe(()=>this.toast.show({type:"primary",message:"\u7ec4\u4ef6\u4fdd\u5b58\u6210\u529f",duration:1e4,position:"top_center"}));break;case"REMOVE_COMPONENT":this.http.post("removeComponent",t.data).subscribe(()=>this.toast.show({type:"primary",message:"\u7ec4\u4ef6\u5220\u9664\u6210\u529f",duration:1e4,position:"top_center"}));break;case"CUSTOM":"rollback"===t.data.type&&this.http.get("getLatestConfigByID",{params:{id:this.route.snapshot.params.id,timestamp:t.data.timestamp}}).pipe((0,v.b)(n=>this.save(n,"rollback "+n.timestamp))).subscribe(n=>t.data.callback(n))}console.info("[GHOSTEN EVENT]: "+t.type+" %O",t.data)}log({type:t,message:n,data:r}){switch(t){case"info":r.metadata.id=this.route.snapshot.data.data.id,console.info("[GHOSTEN  INFO]: "+n+" %O",r);break;case"error":console.error("[GHOSTEN ERROR]: "+n,r);break;case"warning":console.warn("[GHOSTEN WARNING]: "+n,r)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(z.aV),e.Y36(Bt.eN),e.Y36(ue.gz),e.Y36(ol.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gt-edit"]],decls:1,vars:1,consts:[[3,"data","event","log"]],template:function(t,n){1&t&&(e.TgZ(0,"gt-editor",0),e.NdJ("event",function(s){return n.onEvent(s)})("log",function(s){return n.log(s)}),e.qZA()),2&t&&e.Q6J("data",n.route.snapshot.data.data)},dependencies:[hr],encapsulation:2}),o})(),Dn=(()=>{class o{constructor(t,n){this.http=t,this.router=n}resolve(t){return this.http.get("getLatestConfigByID",{params:{id:t.params.id}}).pipe((0,v.b)(n=>{n||this.router.navigate(["404"]).catch()}))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Bt.eN),e.LFG(ue.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var rl=b(3712);let sl=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Dn,{provide:Re,useFactory:i=>({title:"GHOSTEN",href:"/",src:"assets/icons/128.png",alt:"Ghosten Logo",click(){i.navigateByUrl("/").then()}}),deps:[ue.F0]},{provide:ht,useValue:()=>document.documentElement.dataset.bsTheme}],imports:[Fe,Wa.Bp,Ms,ws.h3,Ka,rl.z,ue.Bz.forChild([{path:"",redirectTo:"/404",pathMatch:"full"},{path:":id",component:il,resolve:{data:Dn}}])]}),o})()},7521:(we,Oe,b)=>{var ue;!function(dt,e,Ne){if(dt){for(var ve,E={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ve={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qe={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},ze={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},oe=1;oe<20;++oe)E[111+oe]="f"+oe;for(oe=0;oe<=9;++oe)E[oe+96]=oe.toString();N.prototype.bind=function(h,C,S){var F=this;return F._bindMultiple.call(F,h=h instanceof Array?h:[h],C,S),F},N.prototype.unbind=function(h,C){return this.bind.call(this,h,function(){},C)},N.prototype.trigger=function(h,C){var S=this;return S._directMap[h+":"+C]&&S._directMap[h+":"+C]({},h),S},N.prototype.reset=function(){var h=this;return h._callbacks={},h._directMap={},h},N.prototype.stopCallback=function(h,C){if((" "+C.className+" ").indexOf(" mousetrap ")>-1||v(C,this.target))return!1;if("composedPath"in h&&"function"==typeof h.composedPath){var F=h.composedPath()[0];F!==h.target&&(C=F)}return"INPUT"==C.tagName||"SELECT"==C.tagName||"TEXTAREA"==C.tagName||C.isContentEditable},N.prototype.handleKey=function(){var h=this;return h._handleKey.apply(h,arguments)},N.addKeycodes=function(h){for(var C in h)h.hasOwnProperty(C)&&(E[C]=h[C]);ve=null},N.init=function(){var h=N(e);for(var C in h)"_"!==C.charAt(0)&&(N[C]=function(S){return function(){return h[S].apply(h,arguments)}}(C))},N.init(),dt.Mousetrap=N,we.exports&&(we.exports=N),void 0!==(ue=function(){return N}.call(Oe,b,Oe,we))&&(we.exports=ue)}function _e(h,C,S){h.addEventListener?h.addEventListener(C,S,!1):h.attachEvent("on"+C,S)}function u(h){if("keypress"==h.type){var C=String.fromCharCode(h.which);return h.shiftKey||(C=C.toLowerCase()),C}return E[h.which]?E[h.which]:Ve[h.which]?Ve[h.which]:String.fromCharCode(h.which).toLowerCase()}function pt(h,C){return h.sort().join(",")===C.sort().join(",")}function ke(h){return"shift"==h||"ctrl"==h||"alt"==h||"meta"==h}function $(h,C,S){return S||(S=function _t(){if(!ve)for(var h in ve={},E)h>95&&h<112||E.hasOwnProperty(h)&&(ve[E[h]]=h);return ve}()[h]?"keydown":"keypress"),"keypress"==S&&C.length&&(S="keydown"),S}function L(h,C){var S,F,j,de=[];for(S=function I(h){return"+"===h?["+"]:(h=h.replace(/\+{2}/g,"+plus")).split("+")}(h),j=0;j<S.length;++j)ze[F=S[j]]&&(F=ze[F]),C&&"keypress"!=C&&Qe[F]&&(F=Qe[F],de.push("shift")),ke(F)&&de.push(F);return{key:F,modifiers:de,action:C=$(F,de,C)}}function v(h,C){return null!==h&&h!==e&&(h===C||v(h.parentNode,C))}function N(h){var C=this;if(h=h||e,!(C instanceof N))return new N(h);C.target=h,C._callbacks={},C._directMap={};var F,S={},j=!1,de=!1,Ae=!1;function Ie(g){g=g||{};var k,w=!1;for(k in S)g[k]?w=!0:S[k]=0;w||(Ae=!1)}function Xe(g,w,k,M,O,K){var A,R,X=[],ie=k.type;if(!C._callbacks[g])return[];for("keyup"==ie&&ke(g)&&(w=[g]),A=0;A<C._callbacks[g].length;++A)R=C._callbacks[g][A],!M&&R.seq&&S[R.seq]!=R.level||ie!=R.action||("keypress"!=ie||k.metaKey||k.ctrlKey)&&!pt(w,R.modifiers)||((!M&&R.combo==O||M&&R.seq==M&&R.level==K)&&C._callbacks[g].splice(A,1),X.push(R));return X}function De(g,w,k,M){C.stopCallback(w,w.target||w.srcElement,k,M)||!1===g(w,k)&&(function je(h){h.preventDefault?h.preventDefault():h.returnValue=!1}(w),function ut(h){h.stopPropagation?h.stopPropagation():h.cancelBubble=!0}(w))}function Te(g){"number"!=typeof g.which&&(g.which=g.keyCode);var w=u(g);if(w){if("keyup"==g.type&&j===w)return void(j=!1);C.handleKey(w,function z(h){var C=[];return h.shiftKey&&C.push("shift"),h.altKey&&C.push("alt"),h.ctrlKey&&C.push("ctrl"),h.metaKey&&C.push("meta"),C}(g),g)}}function y(g,w,k,M,O){C._directMap[g+":"+k]=w;var A,K=(g=g.replace(/\s+/g," ")).split(" ");K.length>1?function T(g,w,k,M){function O(ie){return function(){Ae=ie,++S[g],function Ke(){clearTimeout(F),F=setTimeout(Ie,1e3)}()}}function K(ie){De(k,ie,g),"keyup"!==M&&(j=u(ie)),setTimeout(Ie,10)}S[g]=0;for(var A=0;A<w.length;++A){var X=A+1===w.length?K:O(M||L(w[A+1]).action);y(w[A],X,M,g,A)}}(g,K,w,k):(A=L(g,k),C._callbacks[A.key]=C._callbacks[A.key]||[],Xe(A.key,A.modifiers,{type:A.action},M,g,O),C._callbacks[A.key][M?"unshift":"push"]({callback:w,modifiers:A.modifiers,action:A.action,seq:M,level:O,combo:g}))}C._handleKey=function(g,w,k){var O,M=Xe(g,w,k),K={},A=0,R=!1;for(O=0;O<M.length;++O)M[O].seq&&(A=Math.max(A,M[O].level));for(O=0;O<M.length;++O)if(M[O].seq){if(M[O].level!=A)continue;R=!0,K[M[O].seq]=1,De(M[O].callback,k,M[O].combo,M[O].seq)}else R||De(M[O].callback,k,M[O].combo);var X="keypress"==k.type&&de;k.type==Ae&&!ke(g)&&!X&&Ie(K),de=R&&"keydown"==k.type},C._bindMultiple=function(g,w,k){for(var M=0;M<g.length;++M)y(g[M],w,k)},_e(h,"keypress",Te),_e(h,"keydown",Te),_e(h,"keyup",Te)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},6198:()=>{},9812:()=>{}}]);