(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[893],{2893:(Le,Ge,b)=>{"use strict";b.r(Ge),b.d(Ge,{GtModule:()=>bd});var Fe=b(8795),h=b(6895),e=(b(6198),b(4650)),ee=b(8580),I=b(7340);const at=(0,I.X$)("bodyExpansion",[(0,I.SB)("collapsed, void",(0,I.oB)({height:"0px",visibility:"hidden"})),(0,I.SB)("expanded",(0,I.oB)({height:"*",visibility:"visible"})),(0,I.eR)("expanded <=> collapsed, void => collapsed",(0,I.jt)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),lt=[[["",8,"accordion-header-buttons"]],"*"],ye=[".accordion-header-buttons","*"];let K=(()=>{class i{constructor(){this.opened=new e.vpe,this.closed=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-item"]],viewQuery:function(t,n){if(1&t&&e.Gf(ee.dD,5),2&t){let r;e.iGM(r=e.CRH())&&(n.accordion=r.first)}},hostAttrs:[1,"accordion-item","d-block"],inputs:{cardTitle:"cardTitle",expanded:"expanded"},outputs:{opened:"opened",closed:"closed"},ngContentSelectors:ye,decls:10,vars:6,consts:[["cdkAccordionItem","",3,"expanded","opened","closed"],["accordionItem","cdkAccordionItem"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse",1,"accordion-button",3,"click"],[1,"flex-grow-1"],[1,"accordion-collapse",2,"overflow","hidden"],[1,"accordion-body"]],template:function(t,n){if(1&t){const r=e.EpF();e.F$t(lt),e.ynx(0,0,1),e.NdJ("opened",function(){return n.opened.emit()})("closed",function(){return n.closed.emit()}),e.TgZ(2,"h2",2)(3,"button",3),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(1);return e.KtG(a.toggle())}),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.Hsn(6),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.Hsn(9,1),e.qZA()(),e.BQk()}if(2&t){const r=e.MAs(1);e.Q6J("expanded",n.expanded),e.xp6(3),e.ekj("collapsed",!r.expanded),e.uIk("aria-expanded",r.expanded),e.xp6(2),e.Oqu(n.cardTitle),e.xp6(2),e.Q6J("@bodyExpansion",r.expanded?"expanded":"collapsed")}},dependencies:[ee.dD],encapsulation:2,data:{animation:[at]}}),i})(),Re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,ee.XD]}),i})();var y=b(8403);let ne=(()=>{class i{constructor(t,n,r){this.viewContainerRef=t,this.cdr=n,this.injector=r}insert(t,n){const r=e.zs3.create({providers:[{provide:y.Fo,useValue:t}],parent:this.injector}),s=this.viewContainerRef.createComponent(t.component,{index:n,injector:r});return t.componentRef=s,this.cdr.detectChanges(),s}remove(t){this.viewContainerRef.remove(t),this.cdr.detectChanges()}move(t,n){const r=this.viewContainerRef.move(t.componentRef.hostView,n);return this.cdr.detectChanges(),r}clear(){this.viewContainerRef.clear(),this.cdr.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(e.zs3))},i.\u0275dir=e.lG2({type:i,selectors:[["","gtTemplate",""]],inputs:{templateID:"templateID"}}),i})();const ge=new e.OlP("Gt ContextMenu"),Ze=new e.OlP("gt-default-options"),Je=new e.OlP("gt-element-lists"),Ue=new e.OlP("gt-auth-config"),He=new e.OlP("Top Bar Buttons"),v=new e.OlP("Property edit event trigger"),x=new e.OlP("Ghosten Edit Component Map"),M=new e.OlP("Ghosten Template Map"),O=new e.OlP("Ghosten Internal Element Lists"),w=new e.OlP("Gt Node Default Config"),ie=new e.OlP("Ghosten Editor Brand"),R=new e.OlP("Ghosten Node \u914d\u7f6e\u5217\u8868"),H=new e.OlP("Ghosten Node \u9ed8\u8ba4\u5c5e\u6027\u914d\u7f6e");class de{constructor(){this.historyMaxLength=10,this.history=[]}get(){return this.history}push(o){this.history.length>=this.historyMaxLength&&(this.history=this.history.slice(this.history.length-this.historyMaxLength-1)),this.history.push(o)}pop(){return this.history.pop()}clear(){this.history=[]}}var m=b(7579),F=b(6451),J=b(4004);let _e=(()=>{class i{constructor(){this.CHANGE_SELECT=new m.x,this.CHANGE_STYLE=new m.x,this.CHANGE_PROPERTY=new m.x,this.CHANGE_DATASOURCE=new m.x,this.CHANGE_ACTION=new m.x,this.CHANGE_RIGHTS=new m.x,this.CHANGE_VALIDATOR=new m.x,this.CHANGE_BOARD=new m.x,this.COPY_STYLE=new m.x,this.PASTE_STYLE=new m.x,this.RENDER_START=new m.x,this.RENDER_STOP=new m.x,this.CUSTOM_EDIT_START=new m.x,this.CUSTOM_EDIT_STOP=new m.x,this.WINDOW_CREATE=new m.x,this.WINDOW_MOVE=new m.x,this.WINDOW_DESTROY=new m.x,this.INSERT_NODE=new m.x,this.REMOVE_NODE=new m.x,this.MOVE_NODE=new m.x,this.UNDO=new m.x,this.REDO=new m.x,this.UPDATE_TEMPLATE=new m.x,this.BLACKBOARD_RESIZE=new m.x,this.onEvent=(0,F.T)(...["CHANGE_SELECT","CHANGE_STYLE","CHANGE_PROPERTY","CHANGE_DATASOURCE","CHANGE_ACTION","CHANGE_RIGHTS","CHANGE_VALIDATOR","CHANGE_BOARD","COPY_STYLE","PASTE_STYLE","RENDER_START","RENDER_STOP","CUSTOM_EDIT_START","CUSTOM_EDIT_STOP","WINDOW_CREATE","WINDOW_MOVE","WINDOW_DESTROY","INSERT_NODE","REMOVE_NODE","MOVE_NODE","UPDATE_TEMPLATE","UNDO","REDO"].map(t=>this[t].pipe((0,J.U)(n=>({type:t,data:n})))))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),V=(()=>{class i extends y.Gt{constructor(t,n,r){super(),this.events=t,this.defaultConfigMap=r,this.mode="edit",this.showReferenceLine=!0,this.copiedNode=[],this.remoteCustomComponent={},this.selected=[],this.onEvents=new e.vpe,this.history=new de,this.undoHistory=new de,this.componentMap=Object.assign({},...n),this.events.onEvent.subscribe(s=>{switch(s.type){case"CHANGE_PROPERTY":case"INSERT_NODE":case"MOVE_NODE":case"REMOVE_NODE":this.history.push(s),this.undoHistory.clear()}}),this.events.UPDATE_TEMPLATE.subscribe(({})=>{})}get darkMode(){return i.darkMode}undo(){const t=this.history.get();if(t.length){const n=t.pop();if("CHANGE_PROPERTY"===n.type){const{name:r,gtNode:s,previousValue:a,value:l}=n.data;s.property[r]=a,this.undoHistory.push({type:n.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.UNDO.next(n)}if("INSERT_NODE"===n.type){const{gtNode:r,parent:s,index:a}=n.data;s.children.splice(a,1),s.componentRef.instance.remove(a),this._removeGtNode(r),this.undoHistory.push(n),this.events.UNDO.next(n)}if("REMOVE_NODE"===n.type&&(this.undoHistory.push(n),n.data.forEach(({gtNode:r,parent:s,index:a})=>{s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a)}),this.events.UNDO.next(n)),"MOVE_NODE"===n.type){this.undoHistory.push(n);const{gtNode:r,previousParent:s,previousIndex:a}=n.data;r.setParent(s,a),this.events.UNDO.next(n)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\uff01",data:null})}redo(){const t=this.undoHistory.get();if(t.length){const n=t.pop();if("CHANGE_PROPERTY"===n.type){const{name:r,gtNode:s,previousValue:a,value:l}=n.data;s.property[r]=a,this.history.push({type:n.type,data:{name:r,gtNode:s,previousValue:l,value:a}}),this.events.REDO.next(n)}if("INSERT_NODE"===n.type){this.history.push(n);const{gtNode:r,parent:s,index:a}=n.data;s.children.splice(a,0,r),this.nodeList.set(r.id,r),this.currentBoard.nodeList.set(r.id,r),s.componentRef.instance.insert(r,a),this.events.REDO.next(n)}if("MOVE_NODE"===n.type){this.history.push(n);const{gtNode:r,parent:s,index:a}=n.data;r.setParent(s,a),this.events.REDO.next(n)}}else this.log.next({type:"info",message:"\u6682\u65e0\u53ef\u91cd\u505a\u7684\u64cd\u4f5c\uff01",data:null})}changeSelect(t,n){if(t){if(!this.currentBoard.nodeList.has(t.id))return;this.selected.includes(t)?n?this.selected.splice(this.selected.indexOf(t),1):this.selected=1===this.selected.length?[]:[t]:n?this.selected.unshift(t):this.selected=[t]}else this.selected=[];this.events.CHANGE_SELECT.next(this.selected)}addBoard(){const t=new y.$l({name:"Modal",type:"modal",url:"",id:(0,y.gj)(),size:"xl",events:null,description:"",noFooter:!0});return t.gt=this.createGtNode({type:"root"},void 0,void 0,void 0,t),this.boards.push(t),this.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t),t}addCustomComponent(t="custom"){const n=new y.$l({type:t,id:(0,y.gj)(),name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",events:null,description:"",noFooter:!0,size:null,url:""});n.gt=this.createGtNode({type:"template"},void 0,void 0,void 0,n),n.gt.isTemplate=!0,this.customComponent.push(n),this.setCurrentBoard(n)}addRemoteCustomComponent(t,n,r,{type:s="custom",id:a=(0,y.gj)(),gt:l}){const c={type:s,id:a,gt:this.createGtNode(l),name:n,description:r};c.gt.isTemplate=!0,Object.defineProperty(this.remoteCustomComponent,t,{value:c,enumerable:!0}),this.customComponent.push(c)}removeBoard(t){const n=this.boards.indexOf(t),r=this.boards.indexOf(this.currentBoard);this.boards.splice(n,1),n===r&&this.setCurrentBoard(this.boards[n-1]||this.boards[0]),this._removeGtNode(t.gt)}dropNode(t,n,r,s){const a=t.parent,l=a.children.indexOf(t);t.setParent(n,r,s),this.events.MOVE_NODE.next({gtNode:t,parent:n,index:r,previousParent:a,previousIndex:-1===l?void 0:l})}addNode(t,n,r=-1,s={},a){const l=this.createGtNode({type:t,outletID:a,...s},n,void 0,r);return l?(this.selected=[l],this.events.INSERT_NODE.next({gtNode:l,parent:n,index:r}),this.events.CHANGE_SELECT.next(this.selected),l):null}addCustomNode(t,n,r=-1){const s=this.customComponent.filter(a=>a.id===t)[0].gt;return this.createGtNode({type:"template",template:s.id},n)}removeNode(){const t=[];if(!this.selected||this.selected.some(n=>"root"===n.type))return this.log.next({type:"error",message:"\u65e0\u6cd5\u5220\u9664",data:null});this.selected.forEach(n=>{n.template&&n.isTemplateRoot&&n.template.inheritList&&n.template.inheritList.splice(n.template.inheritList.indexOf(n),1),this._removeGtNode(n);const r=n.parent.children.indexOf(n);n.parent.componentRef.instance.remove(n),n.parent.children.splice(r,1),t.push({gtNode:n,parent:n.parent,index:r})}),this.selected=[],this.events.REMOVE_NODE.next(t),this.events.CHANGE_SELECT.next(this.selected)}setCurrentBoard(t){super.setCurrentBoard(t),this.events.CHANGE_BOARD.next(t)}copyStyle(){this.copiedStyle=JSON.stringify(this.selected[0].style),this.events.COPY_STYLE.next(this.copiedStyle)}pasteStyle(){const t=JSON.parse(this.copiedStyle);this.selected.forEach(({style:n})=>Object.keys(n).forEach(r=>{void 0!==t[r]&&(n[r]=t[r])})),this.events.PASTE_STYLE.next({pastedNodes:this.selected,pastedStyle:this.copiedStyle})}copyNode(){this.copiedNode=this.selected.map(({id:t})=>t)}pasteNode(t,n){const r=s=>{const a=s.export();if(s.isTemplateRoot)for(const l in a.slot)a.slot[l].forEach(c=>delete c.id);else a.children=s.children.map(l=>r(l));return delete a.id,a};this.copiedNode.forEach(s=>{const a=this.createGtNode(r(this.getNodeById(s)),t);this.events.INSERT_NODE.next({parent:t,gtNode:a,index:n})})}removeCustomComponent(t){this.selected=[t.gt],this.removeNode(),this.customComponent.splice(this.customComponent.indexOf(t),1)}_removeGtNode(t){this.currentBoard.nodeList.delete(t.id),this.nodeList.delete(t.id),t.children.forEach(n=>this._removeGtNode(n))}}return i.darkMode=!1,i.\u0275fac=function(t){return new(t||i)(e.LFG(_e),e.LFG(x),e.LFG(H))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const fn=matchMedia("(prefers-color-scheme: dark)");V.darkMode=fn.matches,fn.addEventListener("change",function(){V.darkMode=this.matches});var se=b(445),Lt=b(6270),j=b(3353),E=b(1281),k=b(727),N=b(8505),to=b(4986),Bt=b(4482),Zt=b(5403);function me(i,o=to.z){return(0,Bt.e)((t,n)=>{let r=null,s=null,a=null;const l=()=>{if(r){r.unsubscribe(),r=null;const d=s;s=null,n.next(d)}};function c(){const d=a+i,p=o.now();if(p<d)return r=this.schedule(void 0,d-p),void n.add(r);l()}t.subscribe((0,Zt.x)(n,d=>{s=d,a=o.now(),r||(r=o.schedule(c,i),n.add(r))},()=>{l(),n.complete()},void 0,()=>{s=r=null}))})}var te=b(9300),Q=b(5698);let no=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),io=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[no]}),i})();var yn=b(9841),oo=b(7272),ht=b(9751),Oe=b(8675),B=b(2722);const xn=new Set;let Ie,so=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lo}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function ao(i){if(!xn.has(i))try{Ie||(Ie=document.createElement("style"),Ie.setAttribute("type","text/css"),document.head.appendChild(Ie)),Ie.sheet&&(Ie.sheet.insertRule(`@media ${i} {body{ }}`,0),xn.add(i))}catch(o){console.error(o)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(j.t4))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lo(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let co=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new m.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return On((0,E.Eq)(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){const r=On((0,E.Eq)(t)).map(a=>this._registerQuery(a).observable);let s=(0,yn.a)(r);return s=(0,oo.z)(s.pipe((0,Q.q)(1)),s.pipe(function ro(i){return(0,te.h)((o,t)=>i<=t)}(1),me(0))),s.pipe((0,J.U)(a=>{const l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:d})=>{l.matches=l.matches||c,l.breakpoints[d]=c}),l}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new ht.y(a=>{const l=c=>this._zone.run(()=>a.next(c));return n.addListener(l),()=>{n.removeListener(l)}}).pipe((0,Oe.O)(n),(0,J.U)(({matches:a})=>({query:t,matches:a})),(0,B.R)(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(so),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function On(i){return i.map(o=>o.split(",")).reduce((o,t)=>o.concat(t)).map(o=>o.trim())}let go=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function fo(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function mo(i){try{return i.frameElement}catch{return null}}(function xo(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===wn(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=wn(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Eo(i){let o=i.nodeName.toLowerCase(),t="input"===o&&i.type;return"text"===t||"password"===t||"select"===o||"textarea"===o}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function yo(i){return!function bo(i){return function To(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Co(i){let o=i.nodeName.toLowerCase();return"input"===o||"select"===o||"button"===o||"textarea"===o}(i)||function vo(i){return function So(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||Dn(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(j.t4))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dn(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let o=i.getAttribute("tabindex");return!(!o||isNaN(parseInt(o,10)))}function wn(i){if(!Dn(i))return null;const o=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(o)?-1:o}class Oo{constructor(o,t,n,r,s=!1){this._element=o,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(o){this._enabled=o,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(o,this._startAnchor),this._toggleAnchorTabIndex(o,this._endAnchor))}destroy(){const o=this._startAnchor,t=this._endAnchor;o&&(o.removeEventListener("focus",this.startAnchorListener),o.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(o){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(o)))})}focusFirstTabbableElementWhenReady(o){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(o)))})}focusLastTabbableElementWhenReady(o){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(o)))})}_getRegionBoundary(o){const t=this._element.querySelectorAll(`[cdk-focus-region-${o}], [cdkFocusRegion${o}], [cdk-focus-${o}]`);return"start"==o?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(o){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(o),!!n}return t.focus(o),!0}return this.focusFirstTabbableElement(o)}focusFirstTabbableElement(o){const t=this._getRegionBoundary("start");return t&&t.focus(o),!!t}focusLastTabbableElement(o){const t=this._getRegionBoundary("end");return t&&t.focus(o),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(o){if(this._checker.isFocusable(o)&&this._checker.isTabbable(o))return o;const t=o.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(o){if(this._checker.isFocusable(o)&&this._checker.isTabbable(o))return o;const t=o.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const o=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,o),o.classList.add("cdk-visually-hidden"),o.classList.add("cdk-focus-trap-anchor"),o.setAttribute("aria-hidden","true"),o}_toggleAnchorTabIndex(o,t){o?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(o){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(o,this._startAnchor),this._toggleAnchorTabIndex(o,this._endAnchor))}_executeOnStable(o){this._ngZone.isStable?o():this._ngZone.onStable.pipe((0,Q.q)(1)).subscribe(o)}}let No=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new Oo(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(go),e.LFG(e.R0b),e.LFG(h.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mo=(()=>{class i{constructor(t,n,r){this._elementRef=t,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=(0,E.Ig)(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=(0,E.Ig)(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const n=t.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=(0,j.ht)(),this.focusTrap.focusInitialElementWhenReady()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(No),e.Y36(h.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[e.TTD]}),i})();const An="cdk-high-contrast-black-on-white",Rn="cdk-high-contrast-white-on-black",Jt="cdk-high-contrast-active";let Ro=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=(0,e.f3M)(co).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Jt,An,Rn),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(Jt,An):2===n&&t.add(Jt,Rn)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(j.t4),e.LFG(h.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),In=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ro))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[io]}),i})();var Io=b(7445),ko=b(29),ae=b(3900);function Ut(i,o,t){for(let n in o)if(o.hasOwnProperty(n)){const r=o[n];r?i.setProperty(n,r,t?.has(n)?"important":""):i.removeProperty(n)}return i}function ke(i,o){const t=o?"":"none";Ut(i.style,{"touch-action":o?"":"none","-webkit-user-drag":o?"":"none","-webkit-tap-highlight-color":o?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function kn(i,o,t){Ut(i.style,{position:o?"":"fixed",top:o?"":"0",opacity:o?"":"0",left:o?"":"-999em"},t)}function gt(i,o){return o&&"none"!=o?i+" "+o:i}function Pn(i){const o=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*o}function Ht(i,o){return i.getPropertyValue(o).split(",").map(n=>n.trim())}function Yt(i){const o=i.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}function $t(i,o,t){const{top:n,bottom:r,left:s,right:a}=i;return t>=n&&t<=r&&o>=s&&o<=a}function Ye(i,o,t){i.top+=o,i.bottom=i.top+i.height,i.left+=t,i.right=i.left+i.width}function Ln(i,o,t,n){const{top:r,right:s,bottom:a,left:l,width:c,height:d}=i,p=c*o,u=d*o;return n>r-u&&n<a+u&&t>l-p&&t<s+p}class Gn{constructor(o){this._document=o,this.positions=new Map}clear(){this.positions.clear()}cache(o){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),o.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Yt(t)})})}handleScroll(o){const t=(0,j.sA)(o),n=this.positions.get(t);if(!n)return null;const r=n.scrollPosition;let s,a;if(t===this._document){const d=this.getViewportScrollPosition();s=d.top,a=d.left}else s=t.scrollTop,a=t.scrollLeft;const l=r.top-s,c=r.left-a;return this.positions.forEach((d,p)=>{d.clientRect&&t!==p&&t.contains(p)&&Ye(d.clientRect,l,c)}),r.top=s,r.left=a,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Fn(i){const o=i.cloneNode(!0),t=o.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();o.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===n?Jn(i,o):("input"===n||"select"===n||"textarea"===n)&&Zn(i,o),Bn("canvas",i,o,Jn),Bn("input, textarea, select",i,o,Zn),o}function Bn(i,o,t,n){const r=o.querySelectorAll(i);if(r.length){const s=t.querySelectorAll(i);for(let a=0;a<r.length;a++)n(r[a],s[a])}}let Lo=0;function Zn(i,o){"file"!==o.type&&(o.value=i.value),"radio"===o.type&&o.name&&(o.name=`mat-clone-${o.name}-${Lo++}`)}function Jn(i,o){const t=o.getContext("2d");if(t)try{t.drawImage(i,0,0)}catch{}}const Un=(0,j.i$)({passive:!0}),mt=(0,j.i$)({passive:!1}),qt=new Set(["position"]);class Fo{constructor(o,t,n,r,s,a){this._config=t,this._document=n,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new m.x,this._pointerMoveSubscription=k.w0.EMPTY,this._pointerUpSubscription=k.w0.EMPTY,this._scrollSubscription=k.w0.EMPTY,this._resizeSubscription=k.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new m.x,this.started=new m.x,this.released=new m.x,this.ended=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const T=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),L=this._dropContainer;if(!T)return void this._endDragSequence(l);(!L||!L.isDragging()&&!L.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{const p=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,u=this._activeTransform;u.x=d.x-p.x+this._passiveTransform.x,u.y=d.y-p.y+this._passiveTransform.y,this._applyRootElementTransform(u.x,u.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:l,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(o).withParent(t.parentDragRef||null),this._parentPositions=new Gn(n),a.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(o){const t=(0,E.Ig)(o);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>ke(n,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(o){this._handles=o.map(n=>(0,E.fI)(n)),this._handles.forEach(n=>ke(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(o){return this._previewTemplate=o,this}withPlaceholderTemplate(o){return this._placeholderTemplate=o,this}withRootElement(o){const t=(0,E.fI)(o);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,mt),t.addEventListener("touchstart",this._pointerDown,Un),t.addEventListener("dragstart",this._nativeDragStart,mt)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(o){return this._boundaryElement=o?(0,E.fI)(o):null,this._resizeSubscription.unsubscribe(),o&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(o){return this._parentDragRef=o,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(o){!this._disabledHandles.has(o)&&this._handles.indexOf(o)>-1&&(this._disabledHandles.add(o),ke(o,!0))}enableHandle(o){this._disabledHandles.has(o)&&(this._disabledHandles.delete(o),ke(o,this.disabled))}withDirection(o){return this._direction=o,this}_withDropContainer(o){this._dropContainer=o}getFreeDragPosition(){const o=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:o.x,y:o.y}}setFreeDragPosition(o){return this._activeTransform={x:0,y:0},this._passiveTransform.x=o.x,this._passiveTransform.y=o.y,this._dropContainer||this._applyRootElementTransform(o.x,o.y),this}withPreviewContainer(o){return this._previewContainer=o,this}_sortFromLastPointerPosition(){const o=this._lastKnownPointerPosition;o&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(o),o)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(o){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:o}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(o),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(o);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:o})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(o){$e(o)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,r=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();r.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),kn(n,!1,qt),this._document.body.appendChild(r.replaceChild(s,n)),this._getPreviewInsertionPoint(r,l).appendChild(this._preview),this.started.next({source:this,event:o}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:o}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(o,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),r=$e(t),s=!r&&0!==t.button,a=this._rootElement,l=(0,j.sA)(t),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=r?function wo(i){const o=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!o||-1!==o.identifier||null!=o.radiusX&&1!==o.radiusX||null!=o.radiusY&&1!==o.radiusY)}(t):function Do(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}(t);if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||c||d)return;if(this._handles.length){const f=a.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=Yt(this._boundaryElement));const p=this._previewTemplate;this._pickupPositionInElement=p&&p.template&&!p.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,o,t);const u=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(o){kn(this._rootElement,!0,qt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),r=this._getPointerPositionOnPage(o),s=this._getDragDistance(r),a=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:o}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:r,event:o}),t.drop(this,n,this._initialIndex,this._initialContainer,a,s,r,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:o,y:t},{x:n,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,o,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(o,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,o,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,o,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(o,t):this._applyPreviewTransform(o-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const o=this._previewTemplate,t=this.previewClass,n=o?o.template:null;let r;if(n&&o){const s=o.matchSize?this._initialClientRect:null,a=o.viewContainer.createEmbeddedView(n,o.context);a.detectChanges(),r=Yn(a,this._document),this._previewRef=a,o.matchSize?$n(r,s):r.style.transform=ft(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Fn(this._rootElement),$n(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Ut(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},qt),ke(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const o=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(o.left,o.top);const t=function Po(i){const o=getComputedStyle(i),t=Ht(o,"transition-property"),n=t.find(l=>"transform"===l||"all"===l);if(!n)return 0;const r=t.indexOf(n),s=Ht(o,"transition-duration"),a=Ht(o,"transition-delay");return Pn(s[r])+Pn(a[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=a=>{(!a||(0,j.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",r),n(),clearTimeout(s))},s=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const o=this._placeholderTemplate,t=o?o.template:null;let n;return t?(this._placeholderRef=o.viewContainer.createEmbeddedView(t,o.context),this._placeholderRef.detectChanges(),n=Yn(this._placeholderRef,this._document)):n=Fn(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(o,t,n){const r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():o,a=$e(n)?n.targetTouches[0]:n,l=this._getViewportScrollPosition();return{x:s.left-o.left+(a.pageX-s.left-l.left),y:s.top-o.top+(a.pageY-s.top-l.top)}}_getPointerPositionOnPage(o){const t=this._getViewportScrollPosition(),n=$e(o)?o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0}:o,r=n.pageX-t.left,s=n.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=s,l.matrixTransform(a.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(o){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(o,this,this._initialClientRect,this._pickupPositionInElement):o;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:a}=this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),p=l.top+a,u=l.bottom-(d-a);n=Hn(n,l.left+s,l.right-(c-s)),r=Hn(r,p,u)}return{x:n,y:r}}_updatePointerDirectionDelta(o){const{x:t,y:n}=o,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-s.x),l=Math.abs(n-s.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),l>this._config.pointerDirectionChangeThreshold&&(r.y=n>s.y?1:-1,s.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const o=this._handles.length>0||!this.isDragging();o!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=o,ke(this._rootElement,o))}_removeRootElementListeners(o){o.removeEventListener("mousedown",this._pointerDown,mt),o.removeEventListener("touchstart",this._pointerDown,Un),o.removeEventListener("dragstart",this._nativeDragStart,mt)}_applyRootElementTransform(o,t){const n=ft(o,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=gt(n,this._initialTransform)}_applyPreviewTransform(o,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=ft(o,t);this._preview.style.transform=gt(r,n)}_getDragDistance(o){const t=this._pickupPositionOnPage;return t?{x:o.x-t.x,y:o.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:o,y:t}=this._passiveTransform;if(0===o&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===n.width&&0===n.height)return;const s=r.left-n.left,a=n.right-r.right,l=r.top-n.top,c=n.bottom-r.bottom;r.width>n.width?(s>0&&(o+=s),a>0&&(o-=a)):o=0,r.height>n.height?(l>0&&(t+=l),c>0&&(t-=c)):t=0,(o!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:o})}_getDragStartDelay(o){const t=this.dragStartDelay;return"number"==typeof t?t:$e(o)?t.touch:t?t.mouse:0}_updateOnScroll(o){const t=this._parentPositions.handleScroll(o);if(t){const n=(0,j.sA)(o);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Ye(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,j.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(o,t){const n=this._previewContainer||"global";if("parent"===n)return o;if("global"===n){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,E.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(o){return this._handles.find(t=>o.target&&(o.target===t||t.contains(o.target)))}}function ft(i,o){return`translate3d(${Math.round(i)}px, ${Math.round(o)}px, 0)`}function Hn(i,o,t){return Math.max(o,Math.min(t,i))}function $e(i){return"t"===i.type[0]}function Yn(i,o){const t=i.rootNodes;if(1===t.length&&t[0].nodeType===o.ELEMENT_NODE)return t[0];const n=o.createElement("div");return t.forEach(r=>n.appendChild(r)),n}function $n(i,o){i.style.width=`${o.width}px`,i.style.height=`${o.height}px`,i.style.transform=ft(o.left,o.top)}function qe(i,o,t){const n=Ve(o,i.length-1),r=Ve(t,i.length-1);if(n===r)return;const s=i[n],a=r<n?-1:1;for(let l=n;l!==r;l+=a)i[l]=i[l+a];i[r]=s}function Ve(i,o){return Math.max(0,Math.min(o,i))}class Bo{constructor(o,t){this._element=o,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(o){this.withItems(o)}sort(o,t,n,r){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(o,t,n,r);if(-1===a&&s.length>0)return null;const l="horizontal"===this.orientation,c=s.findIndex(S=>S.drag===o),d=s[a],u=d.clientRect,f=c>a?1:-1,T=this._getItemOffsetPx(s[c].clientRect,u,f),L=this._getSiblingOffsetPx(c,s,f),A=s.slice();return qe(s,c,a),s.forEach((S,$)=>{if(A[$]===S)return;const Z=S.drag===o,W=Z?T:L,ve=Z?o.getPlaceholderElement():S.drag.getRootElement();S.offset+=W,l?(ve.style.transform=gt(`translate3d(${Math.round(S.offset)}px, 0, 0)`,S.initialTransform),Ye(S.clientRect,0,W)):(ve.style.transform=gt(`translate3d(0, ${Math.round(S.offset)}px, 0)`,S.initialTransform),Ye(S.clientRect,W,0))}),this._previousSwap.overlaps=$t(u,t,n),this._previousSwap.drag=d.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:c,currentIndex:a}}enter(o,t,n,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(o,t,n):r,a=this._activeDraggables,l=a.indexOf(o),c=o.getPlaceholderElement();let d=a[s];if(d===o&&(d=a[s+1]),!d&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(d=a[0]),l>-1&&a.splice(l,1),d&&!this._dragDropRegistry.isDragging(d)){const p=d.getRootElement();p.parentElement.insertBefore(c,p),a.splice(s,0,o)}else(0,E.fI)(this._element).appendChild(c),a.push(o);c.style.transform="",this._cacheItemPositions()}withItems(o){this._activeDraggables=o.slice(),this._cacheItemPositions()}withSortPredicate(o){this._sortPredicate=o}reset(){this._activeDraggables.forEach(o=>{const t=o.getRootElement();if(t){const n=this._itemPositions.find(r=>r.drag===o)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(o){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===o)}updateOnScroll(o,t){this._itemPositions.forEach(({clientRect:n})=>{Ye(n,o,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const o="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:Yt(n)}}).sort((t,n)=>o?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(o,t,n){const r="horizontal"===this.orientation;let s=r?t.left-o.left:t.top-o.top;return-1===n&&(s+=r?t.width-o.width:t.height-o.height),s}_getSiblingOffsetPx(o,t,n){const r="horizontal"===this.orientation,s=t[o].clientRect,a=t[o+-1*n];let l=s[r?"width":"height"]*n;if(a){const c=r?"left":"top",d=r?"right":"bottom";-1===n?l-=a.clientRect[c]-s[d]:l+=s[c]-a.clientRect[d]}return l}_shouldEnterAsFirstChild(o,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return r?o>=a.right:t>=a.bottom}{const a=n[0].clientRect;return r?o<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(o,t,n,r){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>{if(l===o)return!1;if(r){const d=s?r.x:r.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):n>=Math.floor(c.top)&&n<Math.floor(c.bottom)});return-1!==a&&this._sortPredicate(a,o)?a:-1}}class Zo{constructor(o,t,n,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.sorted=new m.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=k.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new m.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,Io.F)(0,ko.Z).pipe((0,B.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,E.fI)(o),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Gn(n),this._sortStrategy=new Bo(this.element,t),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(o,t,n,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(o)),this._sortStrategy.enter(o,t,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:o,container:this,currentIndex:this.getItemIndex(o)})}exit(o){this._reset(),this.exited.next({item:o,container:this})}drop(o,t,n,r,s,a,l,c={}){this._reset(),this.dropped.next({item:o,currentIndex:t,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:s,distance:a,dropPoint:l,event:c})}withItems(o){const t=this._draggables;return this._draggables=o,o.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===o.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(o){return this._sortStrategy.direction=o,this}connectedTo(o){return this._siblings=o.slice(),this}withOrientation(o){return this._sortStrategy.orientation=o,this}withScrollableParents(o){const t=(0,E.fI)(this.element);return this._scrollableElements=-1===o.indexOf(t)?[t,...o]:o.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(o){return this._isDragging?this._sortStrategy.getItemIndex(o):this._draggables.indexOf(o)}isReceiving(){return this._activeSiblings.size>0}_sortItem(o,t,n,r){if(this.sortingDisabled||!this._clientRect||!Ln(this._clientRect,.05,t,n))return;const s=this._sortStrategy.sort(o,t,n,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:o})}_startScrollingIfNecessary(o,t){if(this.autoScrollDisabled)return;let n,r=0,s=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||n||Ln(a.clientRect,.05,o,t)&&([r,s]=function Jo(i,o,t,n){const r=Qn(o,n),s=zn(o,t);let a=0,l=0;if(r){const c=i.scrollTop;1===r?c>0&&(a=1):i.scrollHeight-c>i.clientHeight&&(a=2)}if(s){const c=i.scrollLeft;1===s?c>0&&(l=1):i.scrollWidth-c>i.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,o,t),(r||s)&&(n=l))}),!r&&!s){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};r=Qn(c,t),s=zn(c,o),n=window}n&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const o=(0,E.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=o.msScrollSnapType||o.scrollSnapType||"",o.scrollSnapType=o.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const o=(0,E.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(o).clientRect}_reset(){this._isDragging=!1;const o=(0,E.fI)(this.element).style;o.scrollSnapType=o.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(o,t){return null!=this._clientRect&&$t(this._clientRect,o,t)}_getSiblingContainerFromPosition(o,t,n){return this._siblings.find(r=>r._canReceive(o,t,n))}_canReceive(o,t,n){if(!this._clientRect||!$t(this._clientRect,t,n)||!this.enterPredicate(o,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,n);if(!r)return!1;const s=(0,E.fI)(this.element);return r===s||s.contains(r)}_startReceiving(o,t){const n=this._activeSiblings;!n.has(o)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(o),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(o){this._activeSiblings.delete(o),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(o=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(o);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const o=(0,j.kV)((0,E.fI)(this.element));this._cachedShadowRoot=o||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const o=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,o))}}function Qn(i,o){const{top:t,bottom:n,height:r}=i,s=.05*r;return o>=t-s&&o<=t+s?1:o>=n-s&&o<=n+s?2:0}function zn(i,o){const{left:t,right:n,width:r}=i,s=.05*r;return o>=t-s&&o<=t+s?1:o>=n-s&&o<=n+s?2:0}const Ct=(0,j.i$)({passive:!1,capture:!0});let Uo=(()=>{class i{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new m.x,this.pointerUp=new m.x,this.scroll=new m.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ct)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ct)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ct}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Ct}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new ht.y(r=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&r.next(l)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,F.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(h.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ho={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Vt=(()=>{class i{constructor(t,n,r,s){this._document=t,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,n=Ho){return new Fo(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Zo(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(h.K0),e.LFG(e.R0b),e.LFG(Lt.rL),e.LFG(Uo))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Qt=new e.OlP("CDK_DRAG_PARENT"),jn=new e.OlP("CdkDropListGroup"),Wn=new e.OlP("CDK_DRAG_CONFIG");let Yo=0;const Kn=new e.OlP("CdkDropList");let bt=(()=>{class i{constructor(t,n,r,s,a,l,c){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=a,this._group=l,this._destroyed=new m.x,this.connectedTo=[],this.id="cdk-drop-list-"+Yo++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(d,p)=>this.enterPredicate(d.data,p.data),this._dropListRef.sortPredicate=(d,p,u)=>this.sortPredicate(d,p.data,u.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),l&&l._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,E.Ig)(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=i._dropLists.indexOf(this);t>-1&&i._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,Oe.O)(this._dir.value),(0,B.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=(0,E.Eq)(this.connectedTo).map(r=>"string"==typeof r?i._dropLists.find(a=>a.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===n.indexOf(r)&&n.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,E.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,E.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,E.su)(this.autoScrollStep,2),t.connectedTo(n.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:n,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:l}=t;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return i._dropLists=[],i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(Vt),e.Y36(e.sBO),e.Y36(Lt.mF),e.Y36(se.Is,8),e.Y36(jn,12),e.Y36(Wn,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[e._Bn([{provide:jn,useValue:void 0},{provide:Kn,useExisting:i}])]}),i})();const zt=new e.OlP("CdkDragHandle");let Qe=(()=>{class i{constructor(t,n){this.element=t,this._stateChanges=new m.x,this._disabled=!1,this._parentDrag=n}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,E.Ig)(t),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(Qt,12))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[e._Bn([{provide:zt,useExisting:i}])]}),i})();const $o=new e.OlP("CdkDragPlaceholder"),qo=new e.OlP("CdkDragPreview");let Ne=(()=>{class i{constructor(t,n,r,s,a,l,c,d,p,u,f){this.element=t,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=p,this._selfHandle=u,this._parentDrag=f,this._destroyed=new m.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new ht.y(T=>{const L=this._dragRef.moved.pipe((0,J.U)(A=>({source:this,pointerPosition:A.pointerPosition,event:A.event,delta:A.delta,distance:A.distance}))).subscribe(T);return()=>{L.unsubscribe()}}),this._dragRef=d.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),l&&this._assignDefaults(l),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,E.Ig)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Q.q)(1),(0,B.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,r=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=i._dragInstances.indexOf(this);t>-1&&i._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,E.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:(0,E.su)(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,Q.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(i._dragInstances.find(r=>r.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:r,constrainPosition:s,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:d,previewContainer:p}=t;this.disabled=c??!1,this.dragStartDelay=r||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),a&&(this.previewClass=a),l&&(this.boundaryElement=l),d&&(this.rootElementSelector=d),p&&(this.previewContainer=p)}_setupHandlesListener(){this._handles.changes.pipe((0,Oe.O)(this._handles),(0,N.b)(t=>{const n=t.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,ae.w)(t=>(0,F.T)(...t.map(n=>n._stateChanges.pipe((0,Oe.O)(n))))),(0,B.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,r=t.element.nativeElement;t.disabled?n.disableHandle(r):n.enableHandle(r)})}}return i._dragInstances=[],i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(Kn,12),e.Y36(h.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Wn,8),e.Y36(se.Is,8),e.Y36(Vt),e.Y36(e.sBO),e.Y36(zt,10),e.Y36(Qt,12))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,r){if(1&t&&(e.Suo(r,qo,5),e.Suo(r,$o,5),e.Suo(r,zt,5)),2&t){let s;e.iGM(s=e.CRH())&&(n._previewTemplate=s.first),e.iGM(s=e.CRH())&&(n._placeholderTemplate=s.first),e.iGM(s=e.CRH())&&(n._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e._Bn([{provide:Qt,useExisting:i}]),e.TTD]}),i})(),Pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Vt],imports:[Lt.ZD]}),i})();var X=b(8184),Y=b(4080),vt=b(5017),Tt=b(1135),Xn=b(5191),Me=b(9646);class zo extends class Qo{constructor(){this.expansionModel=new vt.Ov(!0)}toggle(o){this.expansionModel.toggle(this._trackByValue(o))}expand(o){this.expansionModel.select(this._trackByValue(o))}collapse(o){this.expansionModel.deselect(this._trackByValue(o))}isExpanded(o){return this.expansionModel.isSelected(this._trackByValue(o))}toggleDescendants(o){this.expansionModel.isSelected(this._trackByValue(o))?this.collapseDescendants(o):this.expandDescendants(o)}collapseAll(){this.expansionModel.clear()}expandDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.select(...t.map(n=>this._trackByValue(n)))}collapseDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.deselect(...t.map(n=>this._trackByValue(n)))}_trackByValue(o){return this.trackBy?this.trackBy(o):o}}{constructor(o,t,n){super(),this.getLevel=o,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(o){const n=[];for(let r=this.dataNodes.indexOf(o)+1;r<this.dataNodes.length&&this.getLevel(o)<this.getLevel(this.dataNodes[r]);r++)n.push(this.dataNodes[r]);return n}expandAll(){this.expansionModel.select(...this.dataNodes.map(o=>this._trackByValue(o)))}}const ei=new e.OlP("CDK_TREE_NODE_OUTLET_NODE");let St=(()=>{class i{constructor(t,n){this.viewContainer=t,this._node=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(ei,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeOutlet",""]]}),i})();class jo{constructor(o){this.$implicit=o}}let jt=(()=>{class i{constructor(t){this.template=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),i})(),De=(()=>{class i{constructor(t,n){this._differs=t,this._changeDetectorRef=n,this._onDestroy=new m.x,this._levels=new Map,this.viewChange=new Tt.X({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(n=>!n.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;(0,vt.Z9)(this._dataSource)?t=this._dataSource.connect(this):(0,Xn.b)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,Me.of)(this._dataSource)),t&&(this._dataSubscription=t.pipe((0,B.R)(this._onDestroy)).subscribe(n=>this.renderNodeChanges(n)))}renderNodeChanges(t,n=this._dataDiffer,r=this._nodeOutlet.viewContainer,s){const a=n.diff(t);!a||(a.forEachOperation((l,c,d)=>{if(null==l.previousIndex)this.insertNode(t[d],d,r,s);else if(null==d)r.remove(c),this._levels.delete(l.item);else{const p=r.get(c);r.move(p,d)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,n){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(n,t))||this._defaultNodeDef}insertNode(t,n,r,s){const a=this._getNodeDef(t,n),l=new jo(t);l.level=this.treeControl.getLevel?this.treeControl.getLevel(t):typeof s<"u"&&this._levels.has(s)?this._levels.get(s)+1:0,this._levels.set(t,l.level),(r||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,l,n),fe.mostRecentTreeNode&&(fe.mostRecentTreeNode.data=t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.ZZ4),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cdk-tree"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,jt,5),2&t){let s;e.iGM(s=e.CRH())&&(n._nodeDefs=s)}},viewQuery:function(t,n){if(1&t&&e.Gf(St,7),2&t){let r;e.iGM(r=e.CRH())&&(n._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,n){1&t&&e.GkF(0,0)},dependencies:[St],encapsulation:2}),i})(),fe=(()=>{class i{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new m.x,this._dataChanges=new m.x,i.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function Wo(i){let o=i.parentElement;for(;o&&!Ko(o);)o=o.parentElement;return o?o.classList.contains("cdk-nested-tree-node")?(0,E.su)(o.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){i.mostRecentTreeNode===this&&(i.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return i.mostRecentTreeNode=null,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(De))},i.\u0275dir=e.lG2({type:i,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,n){2&t&&e.uIk("aria-expanded",n.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),i})();function Ko(i){const o=i.classList;return!(!o?.contains("cdk-nested-tree-node")&&!o?.contains("cdk-tree"))}let ti=(()=>{class i extends fe{constructor(t,n,r){super(t,n),this._differs=r}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);const t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):(0,Xn.b)(t)&&t.pipe((0,B.R)(this._destroyed)).subscribe(n=>this.updateChildrenNodes(n)),this.nodeOutlet.changes.pipe((0,B.R)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(t){const n=this._getNodeOutlet();t&&(this._children=t),n&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,n.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const t=this.nodeOutlet;return t&&t.find(n=>!n._node||n._node===this)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(De),e.Y36(e.ZZ4))},i.\u0275dir=e.lG2({type:i,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,St,5),2&t){let s;e.iGM(s=e.CRH())&&(n.nodeOutlet=s)}},hostAttrs:[1,"cdk-nested-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[e._Bn([{provide:fe,useExisting:i},{provide:ei,useExisting:i}]),e.qOj]}),i})();const Xo=/([A-Za-z%]+)$/;let ni=(()=>{class i{constructor(t,n,r,s){this._treeNode=t,this._tree=n,this._element=r,this._dir=s,this._destroyed=new m.x,this.indentUnits="px",this._indent=40,this._setPadding(),s&&s.change.pipe((0,B.R)(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,n=this._level??t;return"number"==typeof n?`${n*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const n=this._paddingIndent();if(n!==this._currentPadding||t){const r=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===s?"paddingRight":"paddingLeft";r.style[s]=n||"",r.style[a]="",this._currentPadding=n}}_setLevelInput(t){this._level=(0,E.su)(t,null),this._setPadding()}_setIndentInput(t){let n=t,r="px";if("string"==typeof t){const s=t.split(Xo);n=s[0],r=s[1]||r}this.indentUnits=r,this._indent=(0,E.su)(n),this._setPadding()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(fe),e.Y36(De),e.Y36(e.SBq),e.Y36(se.Is,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),i})(),ii=(()=>{class i{constructor(t,n){this._tree=t,this._treeNode=n,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=(0,E.Ig)(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(De),e.Y36(fe))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n._toggle(s)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),i})(),er=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var _=b(433);let tr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,X.U8]}),i})();var P=b(4968),nr=b(4671);function ze(i,o=nr.y){return i=i??ir,(0,Bt.e)((t,n)=>{let r,s=!0;t.subscribe((0,Zt.x)(n,a=>{const l=o(a);(s||!i(r,l))&&(s=!1,r=l,n.next(a))}))})}function ir(i,o){return i===o}var Et=b(4412);function or(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",3),e.NdJ("mousedown",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleMousedown(r))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("id",t.uniqueId)("ngStyle",t.labelStyle),e.xp6(1),e.hij(" ",t.label," ")}}function rr(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.qZA()),2&i){const t=e.oxw();e.Udp("left",t.left)("top",t.top),e.xp6(1),e.Q6J("ngStyle",t.pointer)}}const sr=["*"];function ar(i,o){1&i&&e._UZ(0,"color-checkboard",2)}const Wt={};let Kt=(()=>{class i{constructor(){this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}ngOnInit(){const t=function cr(i,o,t){const n=`${i}-${o}-${t}`;if(Wt[n])return Wt[n];const r=function lr(i,o,t){if(typeof document>"u")return null;const n=document.createElement("canvas");n.width=2*t,n.height=2*t;const r=n.getContext("2d");return r?(r.fillStyle=i,r.fillRect(0,0,n.width,n.height),r.fillStyle=o,r.fillRect(0,0,t,t),r.translate(t,t),r.fillRect(0,0,t,t),n.toDataURL()):null}(i,o,t);return r?(Wt[n]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:`url(${t}) center left`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,n){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("ngStyle",n.gridStyles)},dependencies:[h.PC],styles:[".grid[_ngcontent-%COMP%]{top:0px;right:0px;bottom:0px;left:0px;position:absolute}"],changeDetection:0}),i})(),Xt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez]}),i})(),en=(()=>{class i{constructor(t){this.el=t,this.coordinatesChange=new m.x,this.mousechange=new m.x,this.mouseListening=!1}mousemove(t,n,r,s=!1){this.mouseListening&&(t.preventDefault(),this.mousechange.next({$event:t,x:n,y:r,isTouch:s}))}mouseup(){this.mouseListening=!1}mousedown(t,n,r,s=!1){t.preventDefault(),this.mouseListening=!0,this.mousechange.next({$event:t,x:n,y:r,isTouch:s})}ngOnInit(){this.sub=this.mousechange.pipe(ze((t,n)=>t.x===n.x&&t.y===n.y)).subscribe(t=>this.handleChange(t.x,t.y,t.$event,t.isTouch))}ngOnDestroy(){this.sub?.unsubscribe()}handleChange(t,n,r,s){const a=this.el.nativeElement.clientWidth,l=this.el.nativeElement.clientHeight,c=t-(this.el.nativeElement.getBoundingClientRect().left+window.pageXOffset);let d=n-this.el.nativeElement.getBoundingClientRect().top;s||(d-=window.pageYOffset),this.coordinatesChange.next({x:t,y:n,top:d,left:c,containerWidth:a,containerHeight:l,$event:r})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","ngx-color-coordinates",""]],hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(s){return n.mousemove(s,s.pageX,s.pageY)},!1,e.Jf7)("touchmove",function(s){return n.mousemove(s,s.touches[0].clientX,s.touches[0].clientY,!0)},!1,e.Jf7)("mouseup",function(){return n.mouseup()},!1,e.Jf7)("touchend",function(){return n.mouseup()},!1,e.Jf7)("mousedown",function(s){return n.mousedown(s,s.pageX,s.pageY)})("touchstart",function(s){return n.mousedown(s,s.touches[0].clientX,s.touches[0].clientY,!0)})},outputs:{coordinatesChange:"coordinatesChange"}}),i})(),tn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),dr=(()=>{class i{constructor(){this.direction="horizontal",this.onChange=new e.vpe}ngOnChanges(){"vertical"===this.direction?(this.pointerLeft=0,this.pointerTop=100*this.rgb.a,this.gradient={background:`linear-gradient(to bottom, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`}):(this.gradient={background:`linear-gradient(to right, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`},this.pointerLeft=100*this.rgb.a)}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?0:t>r?1:Math.round(100*t/r)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}else{let c;c=n<0?0:n>s?1:Math.round(100*n/s)/100,this.hsl.a!==c&&(l={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:c,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-alpha"]],inputs:{hsl:"hsl",rgb:"rgb",pointer:"pointer",shadow:"shadow",radius:"radius",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:7,vars:15,consts:[[1,"alpha"],[1,"alpha-checkboard"],[1,"alpha-gradient",3,"ngStyle"],["ngx-color-coordinates","",3,"coordinatesChange"],[1,"alpha-pointer"],[1,"alpha-slider",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"color-checkboard"),e.qZA(),e._UZ(3,"div",2),e.TgZ(4,"div",3),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.TgZ(5,"div",4),e._UZ(6,"div",5),e.qZA()()()),2&t&&(e.Udp("border-radius",n.radius),e.xp6(3),e.Udp("box-shadow",n.shadow)("border-radius",n.radius),e.Q6J("ngStyle",n.gradient),e.xp6(1),e.Gre("alpha-container color-alpha-",n.direction,""),e.xp6(1),e.Udp("left",n.pointerLeft,"%")("top",n.pointerTop,"%"),e.xp6(1),e.Q6J("ngStyle",n.pointer))},dependencies:[h.PC,Kt,en],styles:[".alpha[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-checkboard[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.alpha-gradient[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.alpha-container[_ngcontent-%COMP%]{position:relative;height:100%;margin:0 3px}.alpha-pointer[_ngcontent-%COMP%]{position:absolute}.alpha-slider[_ngcontent-%COMP%]{width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;margin-top:1px;transform:translate(-2px)}"],changeDetection:0}),i})(),_r=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,Xt,tn]}),i})();function oi(i){let t=0,n=0;return["r","g","b","a","h","s","l","v"].forEach(r=>{!i[r]||(t+=1,isNaN(i[r])||(n+=1),("s"===r||"l"===r)&&/^\d+%$/.test(i[r])&&(n+=1))}),t===n&&i}function je(i,o,t){const n=new Et.C(i.hex?i.hex:i);t&&n.setAlpha(1);const r=n.toHsl(),s=n.toHsv(),a=n.toRgb(),l=n.toHex();return 0===r.s&&(r.h=o||0,s.h=o||0),{hsl:r,hex:"000000"===l&&0===a.a?"transparent":n.toHexString(),rgb:a,hsv:s,oldHue:i.h||o||r.h,source:i.source}}function ri(i){return new Et.C(i).isValid}var Ce=(()=>{return(i=Ce||(Ce={})).HEX="hex",i.HSL="hsl",i.HSV="hsv",i.RGB="rgb",Ce;var i})();let si=(()=>{class i{constructor(){this.mode=Ce.HEX,this.color={h:250,s:.5,l:.2,a:1},this.colorChange=new e.vpe,this.onChange=new e.vpe,this.onChangeComplete=new e.vpe,this.onSwatchHover=new e.vpe,this._onChangeCompleteSubscription=new k.w0,this._onSwatchHoverSubscription=new k.w0}ngOnInit(){this.changes=this.onChange.pipe(me(100),(0,N.b)(t=>{switch(this.onChangeComplete.emit(t),this.mode){case Ce.HEX:this.colorChange.emit(t.color.hex);break;case Ce.HSL:this.colorChange.emit(t.color.hsl);break;case Ce.HSV:this.colorChange.emit(t.color.hsv);break;case Ce.RGB:this.colorChange.emit(t.color.rgb);break;default:const n=`The mode '${this.mode}' is not supported`;if((0,e.X6Q)())throw new Error(n);console.warn(n)}})).subscribe(),this.setState(je(this.color,0)),this.currentColor=this.hex}ngOnChanges(){this.setState(je(this.color,this.oldHue))}ngOnDestroy(){this.changes?.unsubscribe(),this._onChangeCompleteSubscription?.unsubscribe(),this._onSwatchHoverSubscription?.unsubscribe()}setState(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}handleChange(t,n){if(oi(t)){const s=je(t,t.h||this.oldHue,this.disableAlpha);this.setState(s),this.onChange.emit({color:s,$event:n}),this.afterValidChange()}}afterValidChange(){}handleSwatchHover(t,n){if(oi(t)){const s=je(t,t.h||this.oldHue);this.setState(s),this.onSwatchHover.emit({color:s,$event:n})}}registerOnChange(t){this._onChangeCompleteSubscription.add(this.onChangeComplete.pipe((0,N.b)(n=>t(n.color.hex))).subscribe())}registerOnTouched(t){this._onSwatchHoverSubscription.add(this.onSwatchHover.pipe((0,N.b)(()=>t())).subscribe())}setDisabledState(t){}writeValue(t){this.color=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-wrap"]],inputs:{className:"className",mode:"mode",color:"color"},outputs:{colorChange:"colorChange",onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[e._Bn([{provide:_.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}]),e.TTD],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),ur=0,pr=(()=>{class i{constructor(){this.placeholder="",this.onChange=new e.vpe,this.focus=!1,this.uniqueId="editableInput-"+ ++ur}ngOnInit(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}handleFocus(t){this.focus=!0}handleFocusOut(t){this.focus=!1,this.currentValue=this.blurValue}handleKeydown(t){const n=String(t.target.value),r=n.indexOf("%")>-1,s=Number(n.replace(/%/g,""));if(isNaN(s))return;const a=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s+a},$event:t}:{data:s+a,$event:t}),this.currentValue=r?`${s+a}%`:s+a),40===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:s-a},$event:t}:{data:s-a,$event:t}),this.currentValue=r?s-a+"%":s-a)}handleKeyup(t){40===t.keyCode||38===t.keyCode||`${this.currentValue}`!==t.target.value&&this.onChange.emit(this.label?{data:{[this.label]:t.target.value},$event:t}:{data:t.target.value,$event:t})}ngOnChanges(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.mousemove=(0,P.R)(document,"mousemove").subscribe(t=>this.handleDrag(t)),this.mouseup=(0,P.R)(document,"mouseup").subscribe(()=>this.unsubscribe())}unsubscribe(){this.mousemove?.unsubscribe(),this.mouseup?.unsubscribe()}handleMousedown(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}handleDrag(t){if(this.dragLabel){const n=Math.round(this.value+t.movementX);n>=0&&n<=this.dragMax&&this.onChange.emit({data:{[this.label]:n},$event:t})}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-editable-input"]],inputs:{style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax",placeholder:"placeholder"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:6,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"id","ngStyle","mousedown",4,"ngIf"],[3,"id","ngStyle","mousedown"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("keydown",function(s){return n.handleKeydown(s)})("keyup",function(s){return n.handleKeyup(s)})("focus",function(s){return n.handleFocus(s)})("focusout",function(s){return n.handleFocusOut(s)}),e.qZA(),e.YNc(2,or,2,3,"span",2),e.qZA()),2&t&&(e.Q6J("ngStyle",n.wrapStyle),e.xp6(1),e.Q6J("ngStyle",n.inputStyle)("value",n.currentValue)("placeholder",n.placeholder),e.uIk("aria-labelledby",n.uniqueId),e.xp6(1),e.Q6J("ngIf",n.label))},dependencies:[h.O5,h.PC],styles:["[_nghost-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]{position:relative}"],changeDetection:0}),i})(),hr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez]}),i})(),gr=(()=>{class i{constructor(){this.hidePointer=!1,this.direction="horizontal",this.onChange=new e.vpe,this.left="0px",this.top=""}ngOnChanges(){"horizontal"===this.direction?this.left=100*this.hsl.h/360+"%":this.top=-100*this.hsl.h/360+100+"%"}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){let l;if("vertical"===this.direction){let c;c=t<0?359:t>r?0:360*(-100*t/r+100)/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}else{let c;c=n<0?0:n>s?359:100*n/s*360/100,this.hsl.h!==c&&(l={h:c,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}!l||this.onChange.emit({data:l,$event:a})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-hue"]],inputs:{hsl:"hsl",pointer:"pointer",radius:"radius",shadow:"shadow",hidePointer:"hidePointer",direction:"direction"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:8,consts:[["ngx-color-coordinates","",1,"color-hue-container",3,"coordinatesChange"],["class","color-hue-pointer",3,"left","top",4,"ngIf"],[1,"color-hue-pointer"],[1,"color-hue-slider",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.YNc(2,rr,2,5,"div",1),e.qZA()()),2&t&&(e.Gre("color-hue color-hue-",n.direction,""),e.Udp("border-radius",n.radius,"px")("box-shadow",n.shadow),e.xp6(2),e.Q6J("ngIf",!n.hidePointer))},dependencies:[h.O5,h.PC,en],styles:[".color-hue[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.color-hue-container[_ngcontent-%COMP%]{margin:0 2px;position:relative;height:100%}.color-hue-pointer[_ngcontent-%COMP%]{position:absolute}.color-hue-slider[_ngcontent-%COMP%]{margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px #0009;background:#fff;transform:translate(-2px)}.color-hue-horizontal[_ngcontent-%COMP%]{background:linear-gradient(to right,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}.color-hue-vertical[_ngcontent-%COMP%]{background:linear-gradient(to top,#f00 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,#f00 100%)}"],changeDetection:0}),i})(),mr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,tn]}),i})(),fr=(()=>{class i{constructor(){this.onChange=new e.vpe}ngOnChanges(){this.background=`hsl(${this.hsl.h}, 100%, 50%)`,this.pointerTop=-100*this.hsv.v+1+100+"%",this.pointerLeft=100*this.hsv.s+"%"}handleChange({top:t,left:n,containerHeight:r,containerWidth:s,$event:a}){n<0?n=0:n>s?n=s:t<0?t=0:t>r&&(t=r);let c=-t/r+1;c=c>0?c:0,c=c>1?1:c,this.onChange.emit({data:{h:this.hsl.h,s:n/s,v:c,a:this.hsl.a,source:"hsva"},$event:a})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-saturation"]],inputs:{hsl:"hsl",hsv:"hsv",radius:"radius",pointer:"pointer",circle:"circle"},outputs:{onChange:"onChange"},features:[e.TTD],decls:5,vars:8,consts:[["ngx-color-coordinates","",1,"color-saturation",3,"coordinatesChange"],[1,"saturation-white"],[1,"saturation-black"],[1,"saturation-pointer",3,"ngStyle"],[1,"saturation-circle",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("coordinatesChange",function(s){return n.handleChange(s)}),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"div",4),e.qZA()()()),2&t&&(e.Udp("background",n.background),e.xp6(3),e.Udp("top",n.pointerTop)("left",n.pointerLeft),e.Q6J("ngStyle",n.pointer),e.xp6(1),e.Q6J("ngStyle",n.circle))},dependencies:[h.PC,en],styles:[".saturation-white[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,rgba(255,255,255,0));position:absolute;top:0;bottom:0;left:0;right:0}.saturation-black[_ngcontent-%COMP%]{background:linear-gradient(to top,#000,rgba(0,0,0,0));position:absolute;top:0;bottom:0;left:0;right:0}.color-saturation[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.saturation-pointer[_ngcontent-%COMP%]{position:absolute;cursor:default}.saturation-circle[_ngcontent-%COMP%]{width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px #0000004d,0 0 1px 2px #0006;border-radius:50%;cursor:hand;transform:translate(-2px,-4px)}"],changeDetection:0}),i})(),Cr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,tn]}),i})(),br=(()=>{class i{constructor(){this.style={},this.focusStyle={},this.onClick=new e.vpe,this.onHover=new e.vpe,this.divStyles={},this.focusStyles={},this.inFocus=!1}ngOnInit(){this.divStyles={background:this.color,...this.style}}currentStyles(){return this.focusStyles={...this.divStyles,...this.focusStyle},this.focus||this.inFocus?this.focusStyles:this.divStyles}handleFocusOut(){this.inFocus=!1}handleFocus(){this.inFocus=!0}handleHover(t,n){this.onHover.emit({hex:t,$event:n})}handleClick(t,n){this.onClick.emit({hex:t,$event:n})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-swatch"]],inputs:{color:"color",style:"style",focusStyle:"focusStyle",focus:"focus"},outputs:{onClick:"onClick",onHover:"onHover"},ngContentSelectors:sr,decls:3,vars:3,consts:[["tabindex","0",1,"swatch",3,"ngStyle","click","keydown.enter","focus","blur","mouseover"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)",4,"ngIf"],["boxShadow","inset 0 0 0 1px rgba(0,0,0,0.1)"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(s){return n.handleClick(n.color,s)})("keydown.enter",function(s){return n.handleClick(n.color,s)})("focus",function(){return n.handleFocus()})("blur",function(){return n.handleFocusOut()})("mouseover",function(s){return n.handleHover(n.color,s)}),e.Hsn(1),e.YNc(2,ar,1,0,"color-checkboard",1),e.qZA()),2&t&&(e.Q6J("ngStyle",n.currentStyles()),e.uIk("title",n.color),e.xp6(2),e.Q6J("ngIf","transparent"===n.color))},dependencies:[h.O5,h.PC,Kt],styles:[".swatch[_ngcontent-%COMP%]{outline:none;height:100%;width:100%;cursor:pointer;position:relative}"],changeDetection:0}),i})(),vr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,Xt]}),i})();const We=function(i,o){return{input:i,label:o}};function Tr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"color-editable-input",9),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleChange(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Akn(e.WLB(5,We,t.input,t.label)),e.Q6J("value",t.round(100*t.rgb.a))("dragLabel",!0)("dragMax",100)}}function Sr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"color-swatch",3),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleClick(r))})("onHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Akn(n.swatchStyle),e.Q6J("color",n.normalizeValue(t).color)("focusStyle",n.focusStyle(t))}}function Er(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"color-alpha",13),e.NdJ("onChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleValueChange(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("radius",2)("rgb",t.rgb)("hsl",t.hsl)}}function yr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"color-sketch-preset-colors",15),e.NdJ("onClick",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleBlockChange(r))})("onSwatchHover",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSwatchHover.emit(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("colors",t.presetColors)}}let xr=(()=>{class i{constructor(){this.disableAlpha=!1,this.onChange=new e.vpe,this.input={width:"100%",padding:"4px 10% 3px",border:"none",boxSizing:"border-box",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},this.label={display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}}round(t){return Math.round(t)}handleChange({data:t,$event:n}){if(t.hex){if(ri(t.hex)){const r=new Et.C(t.hex);this.onChange.emit({data:{hex:this.disableAlpha||t.hex.length<=6?r.toHex():r.toHex8(),source:"hex"},$event:n})}}else t.r||t.g||t.b?this.onChange.emit({data:{r:t.r||this.rgb.r,g:t.g||this.rgb.g,b:t.b||this.rgb.b,source:"rgb"},$event:n}):t.a?(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,this.disableAlpha&&(t.a=1),this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},$event:n})):(t.h||t.s||t.l)&&this.onChange.emit({data:{h:t.h||this.hsl.h,s:Number(t.s&&t.s||this.hsl.s),l:Number(t.l&&t.l||this.hsl.l),source:"hsl"},$event:n})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-sketch-fields"]],inputs:{hsl:"hsl",rgb:"rgb",hex:"hex",disableAlpha:"disableAlpha"},outputs:{onChange:"onChange"},decls:10,vars:31,consts:[[1,"sketch-fields"],[1,"sketch-double"],["label","hex",3,"value","onChange"],[1,"sketch-single"],["label","r",3,"value","dragLabel","dragMax","onChange"],["label","g",3,"value","dragLabel","dragMax","onChange"],["label","b",3,"value","dragLabel","dragMax","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-alpha"],["label","a",3,"value","dragLabel","dragMax","onChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"color-editable-input",2),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(3,"div",3)(4,"color-editable-input",4),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(5,"div",3)(6,"color-editable-input",5),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.TgZ(7,"div",3)(8,"color-editable-input",6),e.NdJ("onChange",function(s){return n.handleChange(s)}),e.qZA()(),e.YNc(9,Tr,2,8,"div",7),e.qZA()),2&t&&(e.xp6(2),e.Akn(e.WLB(19,We,n.input,n.label)),e.Q6J("value",n.hex.replace("#","")),e.xp6(2),e.Akn(e.WLB(22,We,n.input,n.label)),e.Q6J("value",n.rgb.r)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(25,We,n.input,n.label)),e.Q6J("value",n.rgb.g)("dragLabel",!0)("dragMax",255),e.xp6(2),e.Akn(e.WLB(28,We,n.input,n.label)),e.Q6J("value",n.rgb.b)("dragLabel",!0)("dragMax",255),e.xp6(1),e.Q6J("ngIf",!1===n.disableAlpha))},dependencies:[h.O5,pr],styles:[".sketch-fields[_ngcontent-%COMP%]{display:flex;padding-top:4px}.sketch-double[_ngcontent-%COMP%]{flex:2 1 0%}.sketch-single[_ngcontent-%COMP%], .sketch-alpha[_ngcontent-%COMP%]{flex:1 1 0%;padding-left:6px}[dir=rtl][_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-single[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-alpha[_ngcontent-%COMP%]{padding-right:6px;padding-left:0}"],changeDetection:0}),i})(),Or=(()=>{class i{constructor(){this.onClick=new e.vpe,this.onSwatchHover=new e.vpe,this.swatchStyle={borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}}handleClick({hex:t,$event:n}){this.onClick.emit({hex:t,$event:n})}normalizeValue(t){return"string"==typeof t?{color:t}:t}focusStyle(t){return{boxShadow:`inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ${this.normalizeValue(t).color}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-sketch-preset-colors"]],inputs:{colors:"colors"},outputs:{onClick:"onClick",onSwatchHover:"onSwatchHover"},decls:2,vars:1,consts:[[1,"sketch-swatches"],["class","sketch-wrap",4,"ngFor","ngForOf"],[1,"sketch-wrap"],[1,"swatch",3,"color","focusStyle","onClick","onHover"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Sr,2,4,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.colors))},dependencies:[h.sg,br],styles:[".sketch-swatches[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;margin:0 -10px;padding:10px 0 0 10px;border-top:1px solid rgb(238,238,238)}.sketch-wrap[_ngcontent-%COMP%]{width:16px;height:16px;margin:0 10px 10px 0}[dir=rtl][_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-swatches[_ngcontent-%COMP%]{padding-right:10px;padding-left:0}[dir=rtl][_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-wrap[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}"],changeDetection:0}),i})(),Nr=(()=>{class i extends si{constructor(){super(),this.disableAlpha=!1,this.presetColors=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],this.width=200}afterValidChange(){this.activeBackground=`rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, ${this.disableAlpha?1:this.rgb.a})`}handleValueChange({data:t,$event:n}){this.handleChange(t,n)}handleBlockChange({hex:t,$event:n}){ri(t)&&this.handleChange({hex:t,source:"hex"},n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-sketch"]],inputs:{disableAlpha:"disableAlpha",presetColors:"presetColors",width:"width"},features:[e._Bn([{provide:_.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0},{provide:si,useExisting:(0,e.Gpc)(()=>i)}]),e.qOj],decls:14,vars:16,consts:[[1,"sketch-saturation"],[3,"hsl","hsv","onChange"],[1,"sketch-controls"],[1,"sketch-sliders"],[1,"sketch-hue"],[3,"hsl","onChange"],["class","sketch-alpha",4,"ngIf"],[1,"sketch-color"],[1,"sketch-active"],[1,"sketch-fields-container"],[3,"rgb","hsl","hex","disableAlpha","onChange"],["class","sketch-swatches-container",4,"ngIf"],[1,"sketch-alpha"],[3,"radius","rgb","hsl","onChange"],[1,"sketch-swatches-container"],[3,"colors","onClick","onSwatchHover"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"color-saturation",1),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"color-hue",5),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.YNc(7,Er,2,3,"div",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"color-checkboard")(10,"div",8),e.qZA()(),e.TgZ(11,"div",9)(12,"color-sketch-fields",10),e.NdJ("onChange",function(s){return n.handleValueChange(s)}),e.qZA()(),e.YNc(13,yr,2,1,"div",11),e.qZA()),2&t&&(e.Gre("sketch-picker ",n.className,""),e.Udp("width",n.width,"px"),e.xp6(2),e.Q6J("hsl",n.hsl)("hsv",n.hsv),e.xp6(4),e.Q6J("hsl",n.hsl),e.xp6(1),e.Q6J("ngIf",!1===n.disableAlpha),e.xp6(3),e.Udp("background",n.activeBackground),e.xp6(2),e.Q6J("rgb",n.rgb)("hsl",n.hsl)("hex",n.hex)("disableAlpha",n.disableAlpha),e.xp6(1),e.Q6J("ngIf",n.presetColors&&n.presetColors.length))},dependencies:function(){return[h.O5,dr,Kt,gr,fr,xr,Or]},styles:[".sketch-picker[_ngcontent-%COMP%]{padding:10px 10px 3px;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px #00000026,0 8px 16px #00000026}.sketch-saturation[_ngcontent-%COMP%]{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.sketch-fields-container[_ngcontent-%COMP%], .sketch-swatches-container[_ngcontent-%COMP%]{display:block}.sketch-controls[_ngcontent-%COMP%]{display:flex}.sketch-sliders[_ngcontent-%COMP%]{padding:4px 0;flex:1 1 0%}.sketch-hue[_ngcontent-%COMP%]{position:relative;height:10px;overflow:hidden}.sketch-alpha[_ngcontent-%COMP%]{position:relative;height:10px;margin-top:4px;overflow:hidden}.sketch-color[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.sketch-active[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;bottom:0px;left:0px;border-radius:2px;box-shadow:#00000026 0 0 0 1px inset,#00000040 0 0 4px inset}[dir=rtl][_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sketch-color[_ngcontent-%COMP%]{margin-right:4px;margin-left:0}"],changeDetection:0}),i})(),Mr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,_r,Xt,hr,mr,Cr,vr]}),i})(),Dr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,_.u5,_.UX,X.U8,Y.eL,Mr]}),i})();function wr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li")(1,"a",2),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.itemClick.emit(s))}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.text)}}let Ar=(()=>{class i{constructor(){this.itemClick=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-dropdown"]],hostAttrs:[1,"w-100"],inputs:{items:"items"},outputs:{itemClick:"itemClick"},decls:2,vars:1,consts:[[1,"dropdown-menu","d-block","position-static","w-100","shadow"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,wr,3,1,"li",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.items))},dependencies:[h.sg],encapsulation:2}),i})(),nn=(()=>{class i{constructor(t,n){this.elementRef=t,this.overlay=n,this.itemClick=new e.vpe,this.overlayRef=null,this.overlaySubscription=k.w0.EMPTY}click(){this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",width:this.elementRef.nativeElement.offsetWidth,positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"bottom",offsetY:6},{overlayX:"start",overlayY:"bottom",originX:"start",originY:"top",offsetY:-6}])});const t=this.overlayRef.attach(new Y.C5(Ar)).instance;t.items=this.items,this.overlaySubscription=(0,F.T)(this.overlayRef.backdropClick(),t.itemClick.pipe((0,N.b)(n=>this.itemClick.emit(n)))).pipe((0,Q.q)(1)).subscribe(()=>this.closeOverlay())}closeOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlaySubscription.unsubscribe(),this.overlayRef=null,this.overlaySubscription=k.w0.EMPTY)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(X.aV))},i.\u0275dir=e.lG2({type:i,selectors:[["","gt-dropdown",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.click()})},inputs:{items:"items"},outputs:{itemClick:"itemClick"}}),i})();function Rr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editAction(s))}),e.TgZ(9,"i",11),e._uU(10,"edit"),e.qZA()(),e.TgZ(11,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeAction(s))}),e.TgZ(12,"i",11),e._uU(13,"close"),e.qZA()()()()(),e.TgZ(14,"div",13)(15,"div",14)(16,"label",15),e._uU(17,"Description"),e.qZA(),e.TgZ(18,"input",16),e.NdJ("ngModelChange",function(r){const a=e.CHM(t).$implicit;return e.KtG(a.desc=r)}),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t.type," "),e.xp6(15),e.Q6J("ngModel",t.desc)}}function Ir(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("cdkDropListDropped",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.dropped(r,a.actions))}),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,Rr,19,2,"div",5),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("ngForOf",t.actions)}}let ai=(()=>{class i{constructor(t,n,r){this.configMap=t,this.editEvent=n,this.cdr=r}set gtNode(t){this.updateGtNode(t)}get gtNode(){return this._gtNode}updateGtNode(t){const n=this.configMap.get(t.type);if(n){const r=n.get("action");this.actionTypes=r?Object.keys(r).map(s=>({text:s})):[]}else this.actionTypes=[];this._gtNode=t,this.actions=Object.entries(this.gtNode.action).map(([r,s])=>({type:r,actions:s})),this.cdr.detectChanges()}addAction(t){this.editEvent.forEach(n=>{n&&n({gtNode:this.gtNode,type:"action",args:[],cb:r=>{this.gtNode.action.hasOwnProperty(t.text)||(this.gtNode.action[t.text]=[]),this.gtNode.action[t.text].push({type:t.text,desc:null,script:r,scopes:[]}),this.updateGtNode(this.gtNode)}})})}editAction(t){this.editEvent.forEach(n=>{n&&n({gtNode:this.gtNode,type:"action",args:[t.script],cb:r=>{t.script=r}})})}removeAction(t){const n=this.gtNode.action[t.type],r=n.indexOf(t);n.splice(r,1),this.updateGtNode(this.gtNode)}dropped(t,n){qe(n,t.previousIndex,t.currentIndex)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(v),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-action"]],inputs:{gtNode:"gtNode"},decls:4,vars:2,consts:function(){let o;return o=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],o,["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]]},template:function(t,n){1&t&&(e.YNc(0,Ir,4,2,"div",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("itemClick",function(s){return n.addAction(s)}),e.SDv(3,3),e.qZA()()),2&t&&(e.Q6J("ngForOf",n.actions),e.xp6(2),e.Q6J("items",n.actionTypes))},dependencies:[h.sg,_.Fj,_.JJ,_.On,bt,Ne,Qe,nn],encapsulation:2}),i})();const kr=["*"];let li=(()=>{class i{constructor(){this.removeItem=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-card"]],inputs:{item:"item"},outputs:{removeItem:"removeItem"},ngContentSelectors:kr,decls:13,vars:1,consts:[["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"card-body"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.TgZ(4,"div",3)(5,"button",4)(6,"i",5),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.removeItem.emit(n.item)}),e.TgZ(9,"i",5),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"div",7),e.Hsn(12),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",n.item.title," "))},dependencies:[Ne,Qe],encapsulation:2}),i})();function Pr(i,o){1&i&&(e.TgZ(0,"div",9),e._uU(1," ~~DataBinding~~ "),e.qZA())}function Lr(i,o){if(1&i&&e._UZ(0,"input",14),2&i){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function Gr(i,o){if(1&i&&e._UZ(0,"input",15),2&i){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name)}}function Fr(i,o){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Br(i,o){if(1&i&&(e.TgZ(0,"select",16),e.YNc(1,Fr,2,2,"option",17),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.ekj("is-invalid",t.control.touched&&t.control.invalid),e.Q6J("formControlName",t.name),e.xp6(1),e.Q6J("ngForOf",t.options)}}function Zr(i,o){if(1&i&&(e.ynx(0)(1,10),e.YNc(2,Lr,1,3,"input",11),e.YNc(3,Gr,1,3,"input",12),e.YNc(4,Br,2,4,"select",13),e.BQk()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","select")}}function Jr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.control.reset())}),e.TgZ(1,"i",20),e._uU(2,"close"),e.qZA()()}}function Ur(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.expressionClick.emit(r))}),e._uU(1," f(x) "),e.qZA()}}function Hr(i,o){if(1&i&&(e.TgZ(0,"div",2)(1,"label",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,Pr,2,0,"div",5),e.YNc(5,Zr,5,4,"ng-container",6),e.YNc(6,Jr,3,0,"button",7),e.YNc(7,Ur,2,0,"button",7),e.TgZ(8,"div",8),e._uU(9),e.ALo(10,"json"),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.label||t.name),e.xp6(2),e.Q6J("ngIf",n.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",!n.isDataBinding(t.control.value)),e.xp6(1),e.Q6J("ngIf",null!==t.control.value),e.xp6(1),e.Q6J("ngIf",t.expression),e.xp6(2),e.hij(" ",e.lcZ(10,6,n.formGroup.get(t.name).errors)," ")}}let on=(()=>{class i{constructor(){this.formGroup=new _.cw({}),this.subscription=k.w0.EMPTY,this.expressionClick=new e.vpe,this.formChange=new e.vpe}set value(t){this.formGroup.setValue(t)}get formList(){return this._formList}set formList(t){Object.keys(this.formGroup.controls).forEach(n=>this.formGroup.removeControl(n)),this._formList=t.map(n=>{const r=new _.NI({value:void 0!==n.value?n.value:null,disabled:n.disabled},n.validators);return this.formGroup.addControl(n.name,r),{...n,control:r}})}ngOnInit(){this.subscription=this.formGroup.valueChanges.subscribe(()=>this.formChange.emit(this.formGroup))}ngOnDestroy(){this.subscription.unsubscribe()}isDataBinding(t){return t instanceof y.Sl}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-form"]],inputs:{value:"value",formList:"formList"},outputs:{expressionClick:"expressionClick",formChange:"formChange"},decls:2,vars:2,consts:[[3,"formGroup"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"form-label"],[1,"input-group","input-group-sm","has-validation"],["class","form-control",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"invalid-feedback"],[1,"form-control"],[3,"ngSwitch"],["type","text","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","number","class","form-control",3,"formControlName","is-invalid",4,"ngSwitchCase"],["class","form-select",3,"formControlName","is-invalid",4,"ngSwitchCase"],["type","text",1,"form-control",3,"formControlName"],["type","number",1,"form-control",3,"formControlName"],[1,"form-select",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"gt-icon"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Hr,11,8,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngForOf",n.formList))},dependencies:[h.sg,h.O5,h.RF,h.n9,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.EJ,_.JJ,_.JL,_.sg,_.u,h.Ts],encapsulation:2}),i})(),rn=(()=>{class i{constructor(){this.buttonClick=new m.x}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ci=(()=>{class i{constructor(t,n,r,s,a){this.overlay=t,this.elementRef=n,this.formItem=r,this.formControl=s,this.formGroup=a,this.color="transparent",this.onchange=new e.vpe}set value(t){this.color=t||""}showColorPicker(){const t=this.overlay.create({width:"16rem",hasBackdrop:!0,backdropClass:"",positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:8},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-8},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8}])});t.backdropClick().subscribe(()=>t.dispose()),t.attach(new Y.C5(Nr)).instance.onChangeComplete.subscribe(r=>{const{r:s,g:a,b:l,a:c}=r.color.rgb,d=1===c?r.color.hex:`rgba(${s}, ${a}, ${l}, ${c})`;this.color=d,this.formControl.setValue(d)})}valueChange(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.aV),e.Y36(e.SBq),e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-color"]],inputs:{disabled:"disabled",value:"value"},outputs:{onchange:"onchange"},decls:5,vars:7,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],[1,"input-group-text"],["type","hidden",3,"formControlName","ngModelChange"],[1,"form-control","text-truncate",2,"height","calc(2.5rem - 2px)",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(s){return n.valueChange(s)}),e.qZA(),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.showColorPicker()}),e._uU(4),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Udp("background-color",n.formControl.value||"transparent"),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(1),e.ekj("disabled",n.disabled),e.xp6(1),e.hij(" ",n.formControl.value," "))},dependencies:[_.Fj,_.JJ,_.JL,_.sg,_.u],encapsulation:2}),i})();const Yr=["dropdown"];function $r(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw().type,l=e.oxw();return e.KtG(l.changeDropdown(a,s))}),e.TgZ(1,"a",15),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw().active;e.ekj("active",t===n),e.xp6(1),e.ekj("active",t===n),e.xp6(1),e.Oqu(t)}}function qr(i,o){if(1&i&&(e.TgZ(0,"ul",12),e.YNc(1,$r,3,5,"li",13),e.qZA()),2&i){const t=o.items;e.xp6(1),e.Q6J("ngForOf",t)}}let Vr=(()=>{class i{constructor(t,n,r,s,a){this.overlay=t,this.vcr=n,this.formItem=r,this.formControl=s,this.formGroup=a,this.onchange=new e.vpe,this.overlayRef=null,this.units=["px","%","em"],this.active="",this.border={left:"1px solid #ccc",top:"2px dashed #000",right:"3px dotted pink",bottom:"3px none red",all:"3px dashed #123456"},this.borderStyles=["solid","dashed","dotted","none"],this.borderIconMap={solid:"solid_line",dashed:"dashed_line",dotted:"dotted_line",none:"close"}}set value(t){this.border=t||{}}switchBorder(t){this.active=t;const n=this.border[t]?this.border[t].split(" "):[];if(n[0]){const r=n[0].match(/\d*/);this.borderWidth=r?r[0]:null,this.borderUnit=n[0].replace(/\d*/,"")}else this.borderWidth=null,this.borderUnit=null;this.borderStyle=n[1]||"none",this.borderColor=n[2]}changeColor(t){this.borderColor=t,this.change()}changeWidth(t){this.borderWidth=t,this.change()}changeStyle(t){"none"===t?(this.borderWidthDisabled=!0,this.borderColorDisabled=!0):(this.borderWidthDisabled=!1,this.borderColorDisabled=!1),this.borderStyle=t.value,this.change()}change(){this.border[this.active]=[this.borderWidth+this.borderUnit,this.borderStyle,this.borderColor].join(" "),this.formItem.value=this.border,this.formGroup.get(this.formItem.name).setValue(this.formItem.value),this.onchange.emit(this.border)}showDropdown(t,n){const r={type:n};switch(n){case"borderStyle":r.items=this.borderStyles,r.active=this.borderStyle;break;case"borderUnit":r.items=this.units,r.active=this.borderUnit}const s=new Y.UE(this.dropdown,this.vcr,r);this.overlayRef=this.overlay.create({hasBackdrop:!0,backdropClass:"",positionStrategy:this.overlay.position().flexibleConnectedTo(t.target).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}),this.overlayRef.attach(s),this.overlayRef.backdropClick().pipe((0,Q.q)(1)).subscribe(()=>{this.overlayRef.dispose(),this.overlayRef=null})}changeDropdown(t,n){switch(t){case"borderStyle":this.borderStyle=n;break;case"borderUnit":this.borderUnit=n}this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.change()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-border"]],viewQuery:function(t,n){if(1&t&&e.Gf(Yr,5),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{value:"value"},outputs:{onchange:"onchange"},decls:16,vars:18,consts:[[1,"border-box","mb-2"],[1,"border-item","border-all",3,"click"],[1,"border-item","border-left",3,"click"],[1,"border-item","border-top",3,"click"],[1,"border-item","border-right",3,"click"],[1,"border-item","border-bottom",3,"click"],[1,"mb-2","input-group","input-group-sm",2,"flex-wrap","nowrap"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"gt-icon"],["type","text","title","","size","1","name","",1,"form-control",3,"disabled","ngModel","ngModelChange"],[3,"value","disabled","onchange"],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return n.switchBorder("all")}),e.qZA(),e.TgZ(2,"div",2),e.NdJ("click",function(){return n.switchBorder("left")}),e.qZA(),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.switchBorder("top")}),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(){return n.switchBorder("right")}),e.qZA(),e.TgZ(5,"div",5),e.NdJ("click",function(){return n.switchBorder("bottom")}),e.qZA()(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(s){return n.showDropdown(s,"borderStyle")}),e.TgZ(8,"i",8),e._uU(9),e.qZA()(),e.TgZ(10,"input",9),e.NdJ("ngModelChange",function(s){return n.borderWidth=s})("ngModelChange",function(){return n.changeWidth(n.borderWidth)}),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(s){return n.showDropdown(s,"borderUnit")}),e._uU(12),e.qZA()(),e.TgZ(13,"properties-color",10),e.NdJ("onchange",function(s){return n.changeColor(s)}),e.qZA(),e.YNc(14,qr,2,1,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.ekj("active","all"===n.active),e.xp6(1),e.ekj("active","left"===n.active),e.xp6(1),e.ekj("active","top"===n.active),e.xp6(1),e.ekj("active","right"===n.active),e.xp6(1),e.ekj("active","bottom"===n.active),e.xp6(2),e.Q6J("disabled",!n.active),e.xp6(2),e.Oqu(n.borderIconMap[n.borderStyle]),e.xp6(1),e.Q6J("disabled",!n.active||"none"===n.borderStyle)("ngModel",n.borderWidth),e.xp6(1),e.Q6J("disabled",!n.active||"none"===n.borderStyle),e.xp6(1),e.hij(" ",n.borderUnit," "),e.xp6(1),e.Q6J("value",n.borderColor)("disabled",!n.active||"none"===n.borderStyle))},dependencies:[h.sg,_.Fj,_.JJ,_.On,ci],encapsulation:2}),i})(),Qr=(()=>{class i{constructor(t,n){this.formControlService=t,this.formItem=n,this.buttonClick=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(rn),e.Y36("FormItem"))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-button"]],outputs:{buttonClick:"buttonClick"},decls:2,vars:0,consts:[["type","button",1,"btn","btn-light",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.formControlService.buttonClick.next(n.formItem)}),e._uU(1," \u7f16\u8f91 "),e.qZA())},encapsulation:2}),i})(),zr=(()=>{class i{constructor(t,n){this.formItem=t,this.formControl=n,this.dataReset=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-data-binding"]],outputs:{dataReset:"dataReset"},decls:5,vars:1,consts:[[1,"input-group"],["type","text","disabled","",1,"form-control",3,"value"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"gt-icon"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.formControl.reset()}),e.TgZ(3,"i",3),e._uU(4,"close"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("value","\u6570\u636e\u7ed1\u5b9a\u4e2d"))},encapsulation:2}),i})();function jr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",1),e.NdJ("change",function(r){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l._onchange(r.target.value,a))}),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw();e.Q6J("value",t.value)("disabled",n&&!r.values[n-1].value.trim())}}let Wr=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r}ngOnInit(){const t=(""+(this.formControl.value||"")).split(" ");this.values=[{value:t[0]?t[0].match(/(-|\d)+/)[0]:""},{value:t[1]?t[1].match(/(-|\d)+/)[0]:""},{value:t[2]?t[2].match(/(-|\d)+/)[0]:""},{value:t[3]?t[3].match(/(-|\d)+/)[0]:""}]}_onchange(t,n){this.values[n].value=t,this.formItem.value=this.values.reduce((r,{value:s})=>0==+s?r+s+" ":r+s+"px ","").trim(),this.formControl.setValue(this.formItem.value)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-four-numbers"]],hostAttrs:[1,"input-group"],decls:1,vars:1,consts:[["class","form-control","title","","type","number","pattern","[0-9]*",3,"value","disabled","change",4,"ngFor","ngForOf"],["title","","type","number","pattern","[0-9]*",1,"form-control",3,"value","disabled","change"]],template:function(t,n){1&t&&e.YNc(0,jr,1,2,"input",0),2&t&&e.Q6J("ngForOf",n.values)},dependencies:[h.sg],encapsulation:2}),i})();function Kr(i,o){if(1&i&&(e.TgZ(0,"option",2),e._UZ(1,"i"),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Tol("fa fa-"+t.value),e.xp6(2),e.Oqu(t.value)}}let Xr=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-icon"]],decls:2,vars:2,consts:[[1,"form-select",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"select",0),e.YNc(1,Kr,4,4,"option",1),e.qZA()),2&t&&(e.Q6J("formControlName",n.formItem.name),e.xp6(1),e.Q6J("ngForOf",n.formItem.options))},dependencies:[h.sg,_.YN,_.Kr,_.EJ,_.JJ,_.u],encapsulation:2}),i})();function es(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",4),e.NdJ("wheel",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onwheel(r))})("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.setValue(r))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("type",t.formItem.type)("formControlName",t.formItem.name)}}function ts(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",5),e.NdJ("wheel",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onwheel(r))})("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.setValue(r))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("type",t.formItem.type)("formControlName",t.formItem.name)}}let ns=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r}onwheel(t){document.activeElement===t.target&&(t.preventDefault(),"number"===this.formItem.type&&this.formControl.setValue(Number(this.formControl.value)-Math.sign(t.deltaY)))}setValue(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-input"]],decls:4,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],["class","form-control","title","","autocomplete","off","pattern","[0-9]*",3,"type","formControlName","wheel","ngModelChange",4,"ngSwitchCase"],["class","form-control","title","","autocomplete","off",3,"type","formControlName","wheel","ngModelChange",4,"ngSwitchDefault"],["title","","autocomplete","off","pattern","[0-9]*",1,"form-control",3,"type","formControlName","wheel","ngModelChange"],["title","","autocomplete","off",1,"form-control",3,"type","formControlName","wheel","ngModelChange"]],template:function(t,n){1&t&&(e.ynx(0,0)(1,1),e.YNc(2,es,1,2,"input",2),e.YNc(3,ts,1,2,"input",3),e.BQk()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngSwitch",n.formItem.type),e.xp6(1),e.Q6J("ngSwitchCase","number"))},dependencies:[h.RF,h.n9,h.ED,_.Fj,_.JJ,_.JL,_.c5,_.sg,_.u],encapsulation:2}),i})();function is(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",5),e._uU(2),e.qZA(),e.TgZ(3,"td",5),e._uU(4),e.qZA(),e.TgZ(5,"td",6)(6,"a")(7,"i",4),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteRow(s))}),e._uU(8,"minus"),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("title",t.key),e.xp6(1),e.Oqu(t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}let os=(()=>{class i{constructor(){this.onchange=new e.vpe}add(){this.formItem.value[this.key]=this.value&&this.value.trim()||"",this.onchange.emit(this.formItem),this.key=this.value=""}deleteRow({key:t}){delete this.formItem.value[t],this.onchange.emit(this.formItem)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-object"]],inputs:{formItem:"formItem",relateList:"relateList"},outputs:{onchange:"onchange"},decls:20,vars:5,consts:[[1,"table","table-bordered","table-condensed","table-sm"],[2,"width","20px"],[4,"ngFor","ngForOf"],["type","text","title","",1,"form-control","input-xs",3,"ngModel","ngModelChange"],[1,"gt-icon",3,"click"],[1,"text-truncate",3,"title"],[2,"padding","4px"]],template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Key"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Value"),e.qZA(),e._UZ(7,"th",1),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,is,9,4,"tr",2),e.ALo(10,"keyvalue"),e.TgZ(11,"tr")(12,"td")(13,"input",3),e.NdJ("ngModelChange",function(s){return n.key=s}),e.qZA()(),e.TgZ(14,"td")(15,"input",3),e.NdJ("ngModelChange",function(s){return n.value=s}),e.qZA()(),e.TgZ(16,"td")(17,"a")(18,"i",4),e.NdJ("click",function(){return n.add()}),e._uU(19,"plus"),e.qZA()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,3,n.formItem.value)),e.xp6(4),e.Q6J("ngModel",n.key),e.xp6(2),e.Q6J("ngModel",n.value))},dependencies:[h.sg,_.Fj,_.JJ,_.On,h.Nd],encapsulation:2}),i})();function rs(i,o){if(1&i&&(e.TgZ(0,"option",3),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}let ss=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.onclick=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["property-select"]],outputs:{onclick:"onclick"},decls:3,vars:3,consts:[[1,"input-group",3,"formGroup"],[1,"form-select",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"select",1),e.YNc(2,rs,2,2,"option",2),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(1),e.Q6J("ngForOf",n.formItem.options))},dependencies:[h.sg,_.YN,_.Kr,_.EJ,_.JJ,_.JL,_.sg,_.u],encapsulation:2}),i})();function as(i,o){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.name)}}function ls(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",9),e.NdJ("dblclick",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw().index,a=e.oxw(2);return e.KtG(a.editMap[r.prop+s]=!0)}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.Q6J("title",n[t.prop]),e.xp6(1),e.hij(" ",n[t.prop]," ")}}function cs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",10)(1,"input",11),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw().$implicit;return e.KtG(a[s.prop]=r)})("blur",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw().index,a=e.oxw(2);return e.KtG(a.editMap[r.prop+s]=!1)}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.Q6J("title",n[t.prop]),e.xp6(1),e.Q6J("ngModel",n[t.prop])}}function ds(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ls,2,2,"td",7),e.YNc(2,cs,2,2,"td",8),e.BQk()),2&i){const t=o.$implicit,n=e.oxw().index,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!r.editMap[t.prop+n]),e.xp6(1),e.Q6J("ngIf",r.editMap[t.prop+n])}}function _s(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,ds,3,2,"ng-container",2),e.TgZ(2,"td",5)(3,"a")(4,"i",6),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.delete(s))}),e._uU(5,"minus"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.formItem.columns)}}function us(i,o){if(1&i&&(e.ynx(0),e.YNc(1,_s,6,1,"tr",2),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.formItem.value)}}function ps(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"input",12),e.NdJ("change",function(r){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l._onchange(r,a))}),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.value)}}function hs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,ps,2,1,"td",2),e.TgZ(2,"td",5)(3,"a")(4,"i",6),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.add())}),e._uU(5,"plus"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.formItem.columns)}}let gs=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.onclick=new e.vpe,this.editMap={}}add(){this.formItem.value.push(this.formItem.columns.reduce((t,n)=>(t[n.prop]=n.value,n.value=null,t),{})),this.formControl.setValue([...this.formItem.value])}delete(t){this.formItem.value.splice(this.formItem.value.indexOf(t),1),this.formItem.value=[...this.formItem.value],this.formControl.setValue(this.formItem.value)}_onchange(t,n){t.preventDefault(),t.stopPropagation(),this.formItem.columns[n].value=t.target.value,this.formControl.setValue(this.formItem.value)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-table"]],outputs:{onclick:"onclick"},decls:9,vars:3,consts:[[2,"overflow-x","auto","margin-bottom","10px"],[1,"table","table-bordered","table-condensed","table-sm",2,"margin","0"],[4,"ngFor","ngForOf"],[2,"width","20px"],[4,"ngIf"],[2,"padding","4px"],[1,"gt-icon",3,"click"],[3,"title","dblclick",4,"ngIf"],[3,"title",4,"ngIf"],[3,"title","dblclick"],[3,"title"],["title","","type","text","autofocus","",1,"form-control",3,"ngModel","ngModelChange","blur"],["type","text","title","",1,"form-control","input-xs",3,"value","change"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),e.YNc(4,as,2,1,"th",2),e._UZ(5,"th",3),e.qZA()(),e.TgZ(6,"tbody"),e.YNc(7,us,2,1,"ng-container",4),e.YNc(8,hs,6,1,"tr",4),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.formItem.columns),e.xp6(3),e.Q6J("ngIf",n.formItem.value.length),e.xp6(1),e.Q6J("ngIf","button"!==n.formItem.tableAddType))},dependencies:[h.sg,h.O5,_.Fj,_.JJ,_.On],encapsulation:2,changeDetection:0}),i})(),yt=(()=>{class i{constructor(t,n){this.viewContainerRef=t,this.injector=n}insert(t,n,r=[],s){const a=e.zs3.create({providers:r,parent:this.injector});return this.viewContainerRef.createComponent(n,{index:s,injector:a})}move(t,n){n!==this.viewContainerRef.indexOf(t)&&this.viewContainerRef.move(t,n)}remove(t){this.viewContainerRef.remove(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(e.zs3))},i.\u0275dir=e.lG2({type:i,selectors:[["","template-directive",""]]}),i})(),ms=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.options={language:"json",formatOnType:!0,formatOnPaste:!0,automaticLayout:!0,lineNumbersMinChars:2},this.onchange=new e.vpe}onInit(t){t.getModel().updateOptions({tabSize:2}),t.addAction({id:"saveScript",label:"\u4fdd\u5b58",keybindings:[],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:()=>(this.formControl.setValue(JSON.parse(this.rawScript.replace(/(\r|\n|\s+)/g,""))),null)}),t.setValue(JSON.stringify(this.formItem.value)),setTimeout(()=>t.getAction("editor.action.formatDocument").run(),100)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-textarea"]],outputs:{onchange:"onchange"},decls:2,vars:2,consts:[[3,"formGroup"],["cols","30","rows","10",1,"form-control",3,"formControlName"]],template:function(t,n){1&t&&(e.ynx(0,0),e._UZ(1,"textarea",1),e.BQk()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("formControlName",n.formItem.name))},dependencies:[_.Fj,_.JJ,_.JL,_.sg,_.u],encapsulation:2}),i})(),fs=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-toggle"]],hostAttrs:[1,"py-2","d-block"],decls:3,vars:4,consts:[[1,"form-check","form-switch",3,"formGroup"],["type","checkbox","role","switch",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1)(2,"label",2),e.qZA()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("id",n.formItem.name)("formControlName",n.formItem.name),e.xp6(1),e.Q6J("for",n.formItem.name))},dependencies:[_.Wl,_.JJ,_.JL,_.sg,_.u],encapsulation:2}),i})();const Cs=["dropdown"],bs=["unitEl"];function vs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",8),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.change(s))}),e.TgZ(1,"a",9),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.ekj("active",t===n.unit),e.xp6(1),e.ekj("active",t===n.unit),e.xp6(1),e.Oqu(t)}}function Ts(i,o){if(1&i&&(e.TgZ(0,"ul",6),e.YNc(1,vs,3,5,"li",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.units)}}const Ss=function(){return{standalone:!0}};let Es=(()=>{class i{constructor(t,n,r,s,a,l){this.cdf=t,this.overlay=n,this.vcr=r,this.formItem=s,this.formControl=a,this.formGroup=l,this.onchange=new e.vpe,this.unit="\\",this.units=["px","%","em","rem"],this.setValue(a.value),this.formControl.valueChanges.subscribe(c=>this.setValue(c))}setValue(t){t?(this.input=t.match(/([\d.-]|auto)/)?t.match(/([\d.-]+|auto)/)[0]:"",this.unit=t.match(/(px|%|em|rem|vw|vh)$/)?t.match(/(px|%|em|rem|vw|vh)$/)[0]:"\\"):(this.input="",this.unit="\\")}switchUnit(){if(this.disabled)return;const t=this.overlay.position().flexibleConnectedTo(this.unitEl).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:this.overlay.scrollStrategies.block(),backdropClass:"",hasBackdrop:!0});const n=new Y.UE(this.dropdown,this.vcr);this.overlayRef.attach(n),this.overlayRef.backdropClick().pipe((0,Q.q)(1)).subscribe(()=>this.overlayRef&&this.overlayRef.dispose())}onwheel(t){if(document.activeElement!==t.target)return;t.preventDefault();const n=this.input?+this.input:0;Number.isNaN(n)||(this.input=n-Math.sign(t.deltaY),this.change())}change(t){void 0!==t&&(this.unit=t);const n=this.formControl;"auto"===this.input?(this.unit="\\",n.setValue(this.input),this.onchange.emit(this.input)):(n.setValue(this.input+this.unit),this.onchange.emit(this.input+this.unit)),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.cdf.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(X.aV),e.Y36(e.s_b),e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-unit-input"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Cs,7),e.Gf(bs,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first),e.iGM(r=e.CRH())&&(n.unitEl=r.first)}},inputs:{disabled:"disabled"},outputs:{onchange:"onchange"},decls:8,vars:7,consts:[[1,"input-group",2,"flex-wrap","nowrap",3,"formGroup"],["type","number","title","","size","1","name","","pattern","[0-9]*",1,"form-control",3,"ngModel","disabled","ngModelOptions","ngModelChange","wheel","change"],["type","hidden",3,"formControlName","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["unitEl",""],["dropdown",""],[1,"dropdown-menu",2,"display","block","min-width","auto","position","static"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["href","javascript:void(0)",1,"dropdown-item"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(s){return n.input=s})("wheel",function(s){return n.onwheel(s)})("change",function(){return n.change()}),e.qZA(),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(s){return n.setValue(s)}),e.qZA(),e.TgZ(3,"button",3,4),e.NdJ("click",function(){return n.switchUnit()}),e._uU(5),e.qZA()(),e.YNc(6,Ts,2,1,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("ngModel",n.input)("disabled",n.disabled)("ngModelOptions",e.DdM(6,Ss)),e.xp6(1),e.Q6J("formControlName",n.formItem.name),e.xp6(3),e.hij(" ",n.unit," "))},dependencies:[h.sg,_.Fj,_.wV,_.JJ,_.JL,_.c5,_.On,_.sg,_.u],encapsulation:2}),i})();function ys(i,o){}function xs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.inheritClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e.TgZ(1,"i",8),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw();e.ekj("active",t.formItem.inherit),e.Q6J("disabled",t.formItem.inherit),e.xp6(2),e.Oqu("bind")}}function Os(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.dataBindClick.emit({formItem:r.formItem,formControl:r.formControl}))}),e._uU(1," B "),e.qZA()}}let Ns=(()=>{class i{constructor(t,n,r){this.formItem=t,this.formControl=n,this.formGroup=r,this.inheritClick=new e.vpe,this.dataBindClick=new e.vpe,this.dataReset=new e.vpe,this.subscription=k.w0.EMPTY}ngOnInit(){this.subscription=(0,F.T)(this.formControl.valueChanges,(0,Me.of)(this.formControl.value)).pipe((0,J.U)(t=>t instanceof y.Sl),ze()).subscribe(t=>{this.template.remove();const n=this.getComponentByType(this.formItem.type);!n||this.template.insert(this.formItem,n,[{provide:_.nJ,useValue:this.formGroup},{provide:_.p4,useValue:this.formControl},{provide:"FormItem",useValue:this.formItem}])})}ngOnDestroy(){this.subscription.unsubscribe()}getComponentByType(t){if(this.formControl.value instanceof y.Sl)return zr;switch(t){case"numberHasUnit":return Es;case"fourNumbers":return Wr;case"table":return gs;case"object":return os;case"select":return ss;case"text":case"number":return ns;case"icon":return Xr;case"textarea":return ms;case"color":return ci;case"border":return Vr;case"toggle":return fs;case"button":return Qr}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36("FormItem"),e.Y36(_.p4),e.Y36(_.nJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-form-group"]],viewQuery:function(t,n){if(1&t&&e.Gf(yt,7),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first)}},outputs:{inheritClick:"inheritClick",dataBindClick:"dataBindClick",dataReset:"dataReset"},decls:8,vars:8,consts:[[1,"row","mb-2",3,"formGroup"],[1,"col-4","col-form-label","text-truncate","pe-0",3,"title"],[1,"col-8","position-relative"],[1,"form-item",3,"ngSwitch"],["template-directive",""],["type","button","class","btn btn-light btn-sm","style","position: absolute;left: -1.5rem;top: 0.2rem;width: auto;",3,"active","disabled","click",4,"ngIf"],["type","button","class","btn btn-light btn-sm","style","position: absolute;right: -1rem;top: 0.2rem;width: auto;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","left","-1.5rem","top","0.2rem","width","auto",3,"disabled","click"],[1,"gt-icon","prepend-icon"],["type","button",1,"btn","btn-light","btn-sm",2,"position","absolute","right","-1rem","top","0.2rem","width","auto",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,ys,0,0,"ng-template",4),e.qZA(),e.YNc(6,xs,3,4,"button",5),e.YNc(7,Os,2,0,"button",6),e.qZA()()),2&t&&(e.Q6J("formGroup",n.formGroup),e.xp6(1),e.Q6J("title",n.formItem.label||n.formItem.name),e.xp6(1),e.Oqu(n.formItem.label||n.formItem.name),e.xp6(1),e.ekj("invalid",n.formControl.invalid),e.xp6(1),e.Q6J("ngSwitch",n.formItem.type),e.xp6(2),e.Q6J("ngIf",void 0!==n.formItem.inherit),e.xp6(1),e.Q6J("ngIf",n.formItem.canBind))},dependencies:[h.O5,h.RF,_.JL,_.sg,yt],encapsulation:2}),i})();function Ms(i,o){}let xt=(()=>{class i{constructor(t,n){this.iterableDiffers=t,this.formControlService=n,this.formGroup=new _.nJ({}),this._differ=this.iterableDiffers.find([]).create((r,s)=>s.type+"-"+s.name),this._subscriptions=new Map,this.formChange=new e.vpe,this.formClick=new e.vpe,this.dataBindClick=new e.vpe,this.inheritClick=new e.vpe,this.dataReset=new e.vpe,this.formControlService.buttonClick.subscribe(r=>this.formClick.emit({formItem:r,formControl:this.formGroup.get(r.name)}))}set formList(t){const n=this._differ.diff(t);n&&n.forEachOperation(({item:r,previousIndex:s},a,l)=>{if(null===s){const d=new _.p4(void 0===r.value?null:r.value,{validators:r.validator,updateOn:r.updateOn});this.formGroup.addControl(r.name,d);const{instance:p}=this.template.insert(r,Ns,[{provide:_.nJ,useValue:this.formGroup},{provide:_.p4,useValue:d},{provide:"FormItem",useValue:r}],l);this._subscriptions.set(r.name,(0,F.T)(d.valueChanges.pipe(me(10),(0,N.b)(u=>{r.value=u,this.formChange.emit({formItem:r,formControl:d})})),p.dataBindClick.pipe((0,N.b)(u=>this.dataBindClick.emit(u))),p.inheritClick.pipe((0,N.b)(u=>this.inheritClick.emit(u))),p.dataReset.pipe()).subscribe())}else if(null===l)this.formGroup.removeControl(r.name),this.template.remove(null===a?void 0:a),this._subscriptions.get(r.name).unsubscribe();else if(null!==a){const d=this.template.viewContainerRef.get(a);this.template.move(d,l)}}),t.forEach(({name:r,value:s=null})=>{const a=this.formGroup.get(r);a&&a.setValue(s,{emitEvent:!1})})}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe()),this._subscriptions.clear()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.ZZ4),e.Y36(rn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["properties-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(yt,7),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first)}},inputs:{formList:"formList"},outputs:{formChange:"formChange",formClick:"formClick",dataBindClick:"dataBindClick",inheritClick:"inheritClick",dataReset:"dataReset"},features:[e._Bn([rn])],decls:1,vars:0,consts:[["template-directive",""]],template:function(t,n){1&t&&e.YNc(0,Ms,0,0,"ng-template",0)},dependencies:[yt],encapsulation:2,changeDetection:0}),i})();function Ds(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",15),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"i",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.actionEdit(s))}),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"i",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.delete(s))}),e._uU(11,"minus"),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("title",t.desc),e.xp6(1),e.Oqu(t.desc)}}let di=(()=>{class i{get actions(){return Object.values(this.board.events).reduce((t,n)=>t.concat(n),[])}get board(){return this._board}set board(t){this._board=t,this.formList=[{label:"name",value:t.name,type:"text",name:"name"},{label:"type",value:t.type,type:"text",name:"type",disabled:!0},{label:"url",value:t.url,type:"text",name:"url"},{hide:"modal"!==t.type,label:"size",value:t.size||"",type:"select",name:"size",options:[{label:"xl",value:"xl"},{label:"lg",value:"lg"},{label:"md",value:""},{label:"sm",value:"sm"}]}]}onchange(t){const{name:n,value:r}=t;this.board[n]=r}onclick({}){}actionEdit(t=null){}delete(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-board-edit"]],inputs:{board:"board"},decls:19,vars:2,consts:function(){let o,t,n,r,s;return o=" \u5E8F\u53F7 ",t=" \u7C7B\u578B ",n=" \u63CF\u8FF0 ",r=" \u64CD\u4F5C ",s=" \u6DFB\u52A0 ",[[3,"formList","formChange","formClick"],[1,"table","table-bordered","m-0"],[1,"text-truncate",2,"width","3.8em"],o,[1,"text-truncate",2,"width","4em"],t,[1,"text-truncate"],n,[1,"text-truncate",2,"width","5em"],r,[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],[1,"btn","btn-light",3,"click"],s,["scope","row"],[1,"text-truncate",3,"title"],["title","Edit",1,"gt-icon",2,"cursor","pointer",3,"click"],["title","Remove",1,"gt-icon",2,"cursor","pointer",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"properties-form",0),e.NdJ("formChange",function(s){return n.onchange(s)})("formClick",function(s){return n.onclick(s)}),e.qZA(),e.TgZ(1,"p"),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"table",1)(4,"thead")(5,"tr")(6,"th",2),e.SDv(7,3),e.qZA(),e.TgZ(8,"th",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"th",6),e.SDv(11,7),e.qZA(),e.TgZ(12,"th",8),e.SDv(13,9),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,Ds,12,4,"tr",10),e.qZA()(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){return n.actionEdit()}),e.SDv(18,13),e.qZA()()),2&t&&(e.Q6J("formList",n.formList),e.xp6(15),e.Q6J("ngForOf",n.actions))},dependencies:[h.sg,xt],encapsulation:2,changeDetection:0}),i})(),_i=(()=>{class i{constructor(t,n,r){this.events=t,this.cdr=n,this.configList=r,this.openDialog=new e.vpe}set gtNode(t){this._gtNode=t,this.formList=this.getFormList()}get gtNode(){return this._gtNode}getFormList(){return this.configList.get(this.gtNode.type).get(this.type).map(t=>({...t,value:this.gtNode[this.type][t.name],inherit:this.gtNode.template?!Object.prototype.hasOwnProperty.call(this.gtNode[this.type],t.name):void 0}))}onclick({formItem:t,formControl:n}){this.openDialog.emit({type:this.type,gtNode:this.gtNode,args:[t.name,n.value],cb:r=>this.onchange({formItem:{...t,value:r},formControl:n})})}inheritClick({formItem:t,formControl:n}){if(!1===t.inherit){const r=this.gtNode[this.type][t.name];Reflect.deleteProperty(this.gtNode[this.type],t.name),n.reset(this.gtNode[this.type][t.name],{emitEvent:!1}),this.events["CHANGE_"+this.type.toUpperCase()].next({name:t.name,value:void 0,previousValue:r,gtNode:this.gtNode}),t.inherit=!0,this.cdr.markForCheck()}}onchange({formItem:t,formControl:n}){const{name:r,value:s}=t,a=this.gtNode[this.type][r];this.gtNode[this.type][r]=s,this.events["CHANGE_"+this.type.toUpperCase()].next({name:r,value:s,previousValue:a,gtNode:this.gtNode}),this.gtNode.template&&(t.inherit=!1),void 0!==t.inherit&&(t.inherit=!this.gtNode[this.type].hasOwnProperty(r)),n.setValue(t.value,{emitEvent:!1,onlySelf:!0}),this.cdr.markForCheck()}dataBind({formItem:t,formControl:n}){this.openDialog.emit({type:this.type,gtNode:this.gtNode,args:["bindData",t.name,n.value],cb:r=>this.onchange({formItem:{...t,value:r},formControl:n})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_e),e.Y36(e.sBO),e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-config"]],viewQuery:function(t,n){if(1&t&&e.Gf(xt,7),2&t){let r;e.iGM(r=e.CRH())&&(n.formComp=r.first)}},inputs:{type:"type",gtNode:"gtNode"},outputs:{openDialog:"openDialog"},decls:1,vars:1,consts:[[3,"formList","formChange","formClick","dataBindClick","inheritClick"]],template:function(t,n){1&t&&(e.TgZ(0,"properties-form",0),e.NdJ("formChange",function(s){return n.onchange(s)})("formClick",function(s){return n.onclick(s)})("dataBindClick",function(s){return n.dataBind(s)})("inheritClick",function(s){return n.inheritClick(s)}),e.qZA()),2&t&&e.Q6J("formList",n.formList)},dependencies:[xt],encapsulation:2,changeDetection:0}),i})();const ws=["dropdown"];function As(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Input"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"input"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.input)}}function Rs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15)(1,"h6",16),e._uU(2,"Output"),e.qZA(),e.TgZ(3,"gt-panel-form",17),e.NdJ("formChange",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.formChange(r,s,"output"))})("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("formList",t.form.output)}}function Is(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e._uU(3),e.TgZ(4,"div",9)(5,"button",10)(6,"i",11),e._uU(7,"list"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(9,"i",11),e._uU(10,"close"),e.qZA()()()()(),e.TgZ(11,"ul",13),e.YNc(12,As,4,1,"li",14),e.YNc(13,Rs,4,1,"li",14),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(9),e.Q6J("ngIf",t.form.input),e.xp6(1),e.Q6J("ngIf",t.form.output)}}const ks=[{text:"if"},{text:"for"}];let ui=(()=>{class i{constructor(t){this.cdr=t,this.openDialog=new e.vpe,this.directives=[],this.directiveTypes=ks}set gtNode(t){this.directives=t.directive.map(({type:n,value:r})=>this.getDirective(n,r)),this._gtNode=t}get gtNode(){return this._gtNode}formChange(t,n,r){t.valid&&(n.value[r]=t.value,this.updateGtNodeValidator())}getDirective(t,n={}){switch(t){case"if":return{title:t,form:{input:[{type:"text",name:"default",value:n.input?.default,expression:!0,validators:_.kI.required}]},value:{}};case"for":return{title:t,form:{input:[{type:"text",name:"default",value:n.input?.default,expression:!0,validators:_.kI.required}],output:[{type:"text",name:"index",value:n.output?.index},{type:"text",name:"item",value:n.output?.item}],export:[]},value:{}};default:throw new Error}}addDirective(t){this.directives.push(this.getDirective(t)),this.updateGtNodeValidator()}removeValidator(t){this.directives.splice(this.directives.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.directive=this.directives.map(t=>({needTemplate:!0,type:t.title,value:t.value}))}editExpression(t){this.openDialog.emit({type:"expression",args:[t.control.value instanceof y.Sl?t.control.value.data:void 0],cb:r=>{t.control.setValue(new y.Sl(r)),this.cdr.markForCheck()}})}dropped(t){qe(this.directives,t.previousIndex,t.currentIndex),this.updateGtNodeValidator()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-directive"]],viewQuery:function(t,n){if(1&t&&e.Gf(ws,7),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{gtNode:"gtNode"},outputs:{openDialog:"openDialog"},decls:6,vars:2,consts:function(){let o;return o=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped"],["class","card mb-3 transform","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],["dropdownButton",""],o,["cdkDrag","","cdkDragLockAxis","y",1,"card","mb-3","transform"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"btn-group","btn-group-sm"],["cdkDragHandle","",1,"btn","btn-light","btn-sm"],[1,"gt-icon"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[1,"card-title","text-center"],[3,"formList","formChange","expressionClick"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return n.dropped(s)}),e.YNc(1,Is,14,3,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3,4),e.NdJ("itemClick",function(s){return n.addDirective(s.text)}),e.SDv(5,5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.directives),e.xp6(2),e.Q6J("items",n.directiveTypes))},dependencies:[h.sg,h.O5,bt,Ne,Qe,nn,on],encapsulation:2}),i})();const Bs=["dropdown"];function Zs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-panel-card",5),e.NdJ("removeItem",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeValidator(s))}),e.TgZ(1,"properties-form",6),e.NdJ("formChange",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.formChange(a,r))}),e.qZA()()}if(2&i){const t=o.$implicit;e.Q6J("item",t),e.xp6(1),e.Q6J("formList",t.formList)}}const Js=[{text:"min"},{text:"max"},{text:"required"},{text:"requiredTrue"},{text:"email"},{text:"minLength"},{text:"maxLength"},{text:"pattern"}];let pi=(()=>{class i{constructor(){this.validators=[],this.validatorTypes=Js}set gtNode(t){this._gtNode=t,this.validators=t.validator.map(({type:n,value:r})=>({title:n,formList:hi(n,r),value:r}))}get gtNode(){return this._gtNode}formChange(t,n){t.value=n.formControl.root.value,this.updateGtNodeValidator()}addValidator(t){const n=hi(t);this.validators.push({title:t,formList:n,value:{}}),this.updateGtNodeValidator()}removeValidator(t){this.validators.splice(this.validators.indexOf(t),1),this.updateGtNodeValidator()}updateGtNodeValidator(){this.gtNode.validator=this.validators.map(t=>({type:t.title,value:t.value}))}dropped(t){qe(this.validators,t.previousIndex,t.currentIndex),qe(this.gtNode.validator,t.previousIndex,t.currentIndex)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-validator"]],viewQuery:function(t,n){if(1&t&&e.Gf(Bs,7),2&t){let r;e.iGM(r=e.CRH())&&(n.dropdown=r.first)}},inputs:{gtNode:"gtNode"},decls:5,vars:2,consts:function(){let o;return o=" \u6DFB\u52A0 ",[["cdkDropList","",3,"cdkDropListDropped"],[3,"item","removeItem",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","mt-2"],["gt-dropdown","",1,"btn","btn-light",3,"items","itemClick"],o,[3,"item","removeItem"],[3,"formList","formChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return n.dropped(s)}),e.YNc(1,Zs,2,2,"gt-panel-card",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("itemClick",function(s){return n.addValidator(s.text)}),e.SDv(4,4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.validators),e.xp6(2),e.Q6J("items",n.validatorTypes))},dependencies:[h.sg,xt,bt,nn,li],encapsulation:2}),i})();function hi(i,o={}){switch(i){case"min":return[{type:"number",name:"min",value:o.min},{type:"text",name:"errorText",value:o.errorText}];case"max":return[{type:"number",name:"max",value:o.max},{type:"text",name:"errorText",value:o.errorText}];case"required":case"requiredTrue":case"email":default:return[{type:"text",name:"errorText",value:o.errorText}];case"minLength":return[{type:"number",name:"minLength",value:o.minLength},{type:"text",name:"errorText",value:o.errorText}];case"maxLength":return[{type:"number",name:"maxLength",value:o.maxLength},{type:"text",name:"errorText",value:o.errorText}];case"pattern":return[{type:"text",name:"pattern",value:o.pattern},{type:"text",name:"errorText",value:o.errorText}]}}const Us=["editTemplate"];function Hs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",14)(2,"label",15),e.SDv(3,16),e.qZA(),e.TgZ(4,"div",17),e._uU(5),e.qZA()(),e.TgZ(6,"div",14)(7,"label",15),e.SDv(8,18),e.qZA(),e.TgZ(9,"div",17),e._uU(10),e.qZA()(),e.TgZ(11,"div",14)(12,"label",15),e.SDv(13,19),e.qZA(),e.TgZ(14,"div",17),e._uU(15),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editingVariable=r)}),e.SDv(17,20),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.removeVariable(r))}),e.SDv(19,21),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.type),e.xp6(5),e.Oqu(t.value)}}function Ys(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"gt-panel-form",22,23),e.NdJ("expressionClick",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editExpression(r))}),e.qZA(),e.TgZ(3,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2),s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.finishEdit(r.formGroup,s))}),e.SDv(4,24),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("formList",n.formList)("value",t)}}function $s(i,o){if(1&i&&(e.TgZ(0,"li",12),e.YNc(1,Hs,20,3,"div",13),e.YNc(2,Ys,5,2,"div",13),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t!==n.editingVariable),e.xp6(1),e.Q6J("ngIf",t===n.editingVariable)}}let gi=(()=>{class i{constructor(t){this.cdr=t,this.editingVariable=null,this.openDialog=new e.vpe,this.formList=[{label:"\u53d8\u91cf\u540d",name:"name",type:"text",validators:_.kI.required},{label:"\u6570\u636e\u7c7b\u578b",name:"type",type:"select",validators:_.kI.required,options:[{label:"Boolean",value:"Boolean"},{label:"String",value:"String"},{label:"Number",value:"Number"},{label:"Null",value:"Null"}]},{label:"\u53d8\u91cf\u503c",name:"value",type:"text",validators:_.kI.required,expression:!0}]}set gtNode(t){this._gtNode=t,this.variableName=t.variableName,this.variables=t.variable}get gtNode(){return this._gtNode}variableNameChange(){this.gtNode.variableName=this.variableName}addVariable(t){if(t.invalid)return void Object.values(t.controls).forEach(r=>r.markAsTouched());const n=this.normalizeVariable(t.value);if(n){if(this.gtNode.variable.find(({name:r})=>r===n.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});this.gtNode.variable.push(n),t.reset()}}normalizeVariable(t){switch(t.value instanceof y.Sl&&(t.type="DataBinding"),t.type){case"Boolean":t.value=!!t.value;break;case"String":t.value=String(t.value);break;case"Number":t.value=Number(t.value);break;case"Null":t.value=null;break;case"DataBinding":break;default:return null}return{...t}}removeVariable(t){this.gtNode.variable.splice(this.gtNode.variable.indexOf(t),1)}finishEdit(t,n){if(t.invalid)return void Object.values(t.controls).forEach(s=>s.markAsTouched());const r=this.normalizeVariable(t.value);if(r){if(this.gtNode.variable.find(a=>a!==n&&a.name===r.name))return void t.get("name")?.setErrors({text:"\u53d8\u91cf\u540d\u51b2\u7a81"});const s=this.gtNode.variable.indexOf(n);this.gtNode.variable.splice(s,1,r),this.editingVariable=null}}editExpression(t){this.openDialog.emit({type:"expression",args:[t.control.value instanceof y.Sl?t.control.value.data:void 0],cb:r=>{t.control.setValue(new y.Sl(r)),this.cdr.markForCheck()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-panel-variable"]],viewQuery:function(t,n){if(1&t&&e.Gf(Us,7),2&t){let r;e.iGM(r=e.CRH())&&(n.editTemplate=r.first)}},inputs:{gtNode:"gtNode"},outputs:{openDialog:"openDialog"},decls:12,vars:3,consts:function(){let o,t,n,r,s,a,l,c;return o="\u7EC4\u4EF6\u53D8\u91CF\u540D",t=" \u589E\u52A0 ",n="\u53D8\u91CF\u540D",r="\u6570\u636E\u7C7B\u578B",s="\u53D8\u91CF\u503C",a=" \u4FEE\u6539 ",l=" \u5220\u9664 ",c=" \u5B8C\u6210 ",[[1,"card"],[1,"card-header"],[1,"card-title"],o,["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","bg-secondary-subtle"],[3,"formList","expressionClick"],["form",""],["type","button",1,"btn","btn-link",3,"click"],t,[1,"list-group-item"],[4,"ngIf"],[1,"mb-3"],[1,"form-label"],n,[1,"form-control"],r,s,a,l,[3,"formList","value","expressionClick"],["editForm",""],c]},template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(a){return n.variableName=a})("ngModelChange",function(){return n.variableNameChange()}),e.qZA()(),e.TgZ(5,"ul",5),e.YNc(6,$s,3,2,"li",6),e.TgZ(7,"li",7)(8,"gt-panel-form",8,9),e.NdJ("expressionClick",function(a){return n.editExpression(a)}),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(9);return e.KtG(n.addVariable(a.formGroup))}),e.SDv(11,11),e.qZA()()()()}2&t&&(e.xp6(4),e.Q6J("ngModel",n.variableName),e.xp6(2),e.Q6J("ngForOf",n.variables),e.xp6(2),e.Q6J("formList",n.formList))},dependencies:[h.sg,h.O5,_.Fj,_.JJ,_.On,on],encapsulation:2}),i})(),qs=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,_.u5,Dr,Pe,tr,_.UX,Y.eL]}),i})(),mi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var fi=b(9770);const Qs=Element.prototype.matches;function sn(i,o){if(!i)return null;const t=o,n=o,r=o,s=o,a=Boolean("string"==typeof o),l=Boolean("function"==typeof o),c=Boolean(o instanceof NodeList||o instanceof Array),d=Boolean(o instanceof HTMLElement);let u=i;do{if(u=u.correspondingUseElement||u.correspondingElement||u,(f=u)&&(a?Qs.call(f,t):c?[...r].includes(f):d?s===f:l&&n(f)))return u;u=u.parentNode}while(u&&u!==document.body&&u!==document);var f;return null}var Ci=b(515);function bi(i){return(0,Bt.e)((o,t)=>{let n=!1,r=0;o.subscribe((0,Zt.x)(t,s=>(n||(n=!i(s,r++)))&&t.next(s)))})}const zs=getComputedStyle(document.documentElement).hasOwnProperty("user-select")?"user-select":"-webkit-user-select";function we(i,o){document.documentElement.style.setProperty(vi(i),o)}function le(i){document.documentElement.style.removeProperty(vi(i))}function vi(i){return"userSelect"===i?zs:i}function Ti(i){return 1-Math.pow(i-1,4)}function Ot(i){const o=i.cloneNode(!0);if(i.querySelectorAll("canvas")){const t=i.querySelectorAll("canvas"),n=o.querySelectorAll("canvas");Array.from(t).forEach((r,s)=>{n[s].style.background=`url(${r.toDataURL()}) no-repeat center center / contain`,n[s].style.width="100%",n[s].style.height="100%"})}return o}const Si=i=>(0,F.T)((0,P.R)(i,"mousedown",{passive:!0}),(0,P.R)(i,"touchstart",{passive:!0}).pipe((0,te.h)(o=>1===o.touches.length))),Ke=i=>oe(i)?(0,P.R)(document,"touchmove",{passive:!1,capture:!1}).pipe((0,N.b)(o=>o.preventDefault())):(0,P.R)(document,"mousemove",{passive:!0,capture:!1}),Xe=i=>oe(i)?(0,P.R)(document,"touchend",{capture:!0}):(0,P.R)(document,"mouseup",{capture:!0});function Nt(i,o){if(oe(i)&&oe(o)){const t=i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0},n=o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0};return{x:n.pageX-t.pageX,y:n.pageY-t.pageY}}return{x:o.clientX-i.clientX,y:o.clientY-i.clientY}}let Mt=(()=>{class i{constructor(){this.status="stop",this.queue=[],this.lastFrameTime=performance.now()}add(t){const n=t.element.style.transform.match(/(\d|\.)+/g)||[0,0],r=this.queue.findIndex(u=>u.element===t.element),{duration:s=250,element:a,to:l={left:0,top:0}}=t;let c=t.from;(-1!==r||!c)&&(c={left:+n[0],top:+n[1]});const p={element:a,from:c,to:l,duration:s,elapse:0};c.left===l.left&&c.top===l.top||(-1===r?this.queue.push(p):this.queue[r]=p,a.style.transform=`translate(${c.left}px,${c.top}px)`,"stop"===this.status&&this.start())}remove(t){this.queue.splice(this.queue.indexOf(t),1)}start(){this.status="start",this.lastFrameTime=performance.now(),this.anime()}anime(){requestAnimationFrame(()=>{const t=performance.now(),n=t-this.lastFrameTime;this.queue.forEach(r=>{const{element:s,from:a,to:l,duration:c=200,elapse:d}=r,p=d/c>1?1:d/c,u=Math.round((l.left-a.left)*Ti(p)+a.left),f=Math.round((l.top-a.top)*Ti(p)+a.top);s.style.transform=`translate(${u}px,${f}px)`,0===u&&0===f&&(s.style.transform=""),c<=d&&this.remove(r),r.elapse+=n}),this.queue.length>0?this.anime():this.status="stop",this.lastFrameTime=t})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function oe(i){return i.type.startsWith("touch")}function et(i){i&&i.parentElement&&i.parentElement.removeChild(i)}class Xs{constructor(o){this.el=o,this._target=null,this._mirror=null,this._placeholder=null,this._parentElement=null,this._refChild=null,this._drop=new m.x,this._dragEnd$=new m.x,this.drop=this._drop.asObservable().pipe(me(50)),this.dragEnd=this._dragEnd$.asObservable(),this._dragStart(this.el).pipe((0,ae.w)(t=>this._dragEnd(this._dragMove(t),t))).subscribe()}_dragStart(o){return Si(o).pipe((0,ae.w)(t=>(this._target=sn(t.target,"[data-draggable]"),!oe(t)&&0!==t.button||this.disabled||!this._target?Ci.E:Ke(t).pipe(bi(n=>{const{x:r,y:s}=Nt(t,n);return Math.abs(r)+Math.abs(s)<30}),(0,B.R)(Xe(t)),(0,Q.q)(1),(0,ae.w)(()=>{const n=this._target,r=n.getBoundingClientRect();return this._mirror=function s(l){const c=Ot(l);for(const p in c.dataset)delete c.dataset[p];c.style.width=r.width+"px",c.style.height=r.height+"px";const d=document.createElement("div");return d.appendChild(c),d.classList.add("draggable-mirror"),d}(n),this._mirror.style.left=r.left+"px",this._mirror.style.top=r.top+"px",this._placeholder=function a(l){const c=Ot(l);for(const d in c.dataset)delete c.dataset[d];return c.classList.add("draggable-placeholder"),c}(n),this._placeholder.style.transform=`translate(${r.left}px,${r.top}px)`,n.classList.add("draggable-source"),we("userSelect","none"),we("cursor","grab"),document.body.appendChild(this._mirror),document.body.appendChild(this._placeholder),(0,Me.of)(t)})))))}_dragMove(o){return Ke(o).pipe((0,N.b)(t=>{const{x:n,y:r}=Nt(o,t);this._mirror.style.transform=`translate(${n}px,${r}px)`}),(0,J.U)(t=>Ei(t,this._target)),(0,te.h)(t=>!!t),(0,N.b)(({parentElement:t,refChild:n})=>{this._parentElement=t,this._refChild=n}),ze((t,n)=>t.parentElement===n.parentElement&&t.refChild===n.refChild),(0,N.b)(t=>this._drop.next({...t,target:this._target,placeholder:this._placeholder})))}_dragEnd(o,t){return o.pipe((0,B.R)(Xe(t).pipe((0,N.b)(()=>{this._parentElement&&this._dragEnd$.next({parentElement:this._parentElement,refChild:this._refChild,target:this._target}),le("userSelect"),le("cursor"),et(this._placeholder),et(this._mirror),this._target&&this._target.classList.remove("draggable-source"),this._mirror=null,this._placeholder=null,this._target=null,this._parentElement=null,this._refChild=null}))))}}function an(i){return oe(i)?{x:i.touches[0].pageX,y:i.touches[0].pageY}:{x:i.pageX,y:i.pageY}}function Ei(i,o){const t=function ea(i){return oe(i)?document.elementFromPoint(i.touches[0].pageX,i.touches[0].pageY):i.target}(i),{x:n,y:r}=an(i);let s=null,a=null,l=null,c=null,d=t;for(;d.parentElement;){if(d.classList.contains("gt-page")){const u=Dt({x:n,y:r},d);switch(l=d.children[0],u){case"left":case"top":c=Array.from(l.children).find(f=>f!==o);break;default:c=null}return{refChild:c,parentElement:l}}if(d.dataset.hasOwnProperty("root")){switch(l=d,Dt({x:n,y:r},d)){case"left":case"top":c=Array.from(l.children).find(f=>f!==o);break;default:c=null}return{refChild:c,parentElement:l}}if(d.dataset.hasOwnProperty("droppable")&&(a||(a=d),d.classList.contains("gt-node"))){s=d;break}if(d.dataset.hasOwnProperty("draggable")&&d.classList.contains("gt-node")){s=d;break}d=d.parentElement}if(!document.querySelector(".gt-page"))throw new Error("");if(null===s)return null;if(null===a)switch(Dt({x:n,y:r},s,"true"===s.dataset.canHasChild)){case"left":case"top":l=s.parentElement,c=s;break;case"right":case"bottom":l=s.parentElement,c=s.nextElementSibling;break;case"center":return null}else{const u=Dt({x:n,y:r},a);if(s===a)switch(u){case"left":case"top":l=s.parentElement,c=s;break;case"right":case"bottom":l=s.parentElement,c=s.nextElementSibling;break;case"center":l=s,c=null}else switch(u){case"left":case"top":case"right":case"bottom":case"center":l=a}}return null!==c&&(c===o.nextElementSibling||c===o)||function Ks(i,o){let t=i;for(;t!==o&&null!==t;)t=t.parentElement;return t===o&&null!==t}(s,o)?null:{parentElement:l,refChild:c}}function Dt({x:i,y:o},t,n=!0){const r=n?.08:.5,s=n?10:1/0,{top:a,bottom:l,left:c,right:d,width:p,height:u}=t.getBoundingClientRect();return o-a<Math.min(u*r,s)?"top":l-o<Math.min(u*r,s)?"bottom":d-i<Math.min(p*r,s)?"right":i-c<Math.min(p*r,s)?"left":"center"}function ln(i){if(!i)return null;for(;i.parentElement;){if(i.classList.contains("gt-node"))return i;i=i.parentElement}return null}function cn(i){const o=getComputedStyle(i);return new WebKitCSSMatrix(o.transform||o.webkitTransform)}let dn=(()=>{class i{constructor(t,n,r,s){this._renderer=n,this._document=r,this._ngZone=s,this.transform=!1,this.minWidth=0,this.maxWidth=1/0,this.minHeight=0,this.maxHeight=1/0,this._widthResize=!1,this._heightResize=!1,this.container=t.nativeElement}ngOnInit(){"static"===window.getComputedStyle(this.container).getPropertyValue("position")&&this._renderer.setStyle(this.container,"position","relative");const n=this._renderer.createElement("div");this._renderer.addClass(n,"resizer-container"),this._renderer.appendChild(this.container,n);let r=[];Array.isArray(this.resizes)?r=this.resizes:"all"===this.resizes&&(r=["t","b","l","r","tl","tr","bl","br"]),this._ngZone.runOutsideAngular(()=>{r.forEach(s=>{const a=this._renderer.createElement("div");this.setResizeStyle(s,a),this._renderer.appendChild(n,a),(0,F.T)((0,P.R)(a,"mousedown",{passive:!1}).pipe((0,te.h)(l=>0===l.button)),(0,P.R)(a,"touchstart",{passive:!0})).subscribe(l=>this.resize(l,s))})}),this._widthResize="all"===this.resizes||/[lr]/.test(this.resizes.join("")),this._heightResize="all"===this.resizes||/[tb]/.test(this.resizes.join(""))}setResizeStyle(t,n){switch(t){case"t":this._renderer.setStyle(n,"left",".6rem"),this._renderer.setStyle(n,"right",".6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"cursor","ns-resize");break;case"b":this._renderer.setStyle(n,"left",".6rem"),this._renderer.setStyle(n,"right",".6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"cursor","ns-resize");break;case"l":this._renderer.setStyle(n,"top",".6rem"),this._renderer.setStyle(n,"bottom",".6rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"cursor","ew-resize");break;case"r":this._renderer.setStyle(n,"top",".6rem"),this._renderer.setStyle(n,"bottom",".6rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"cursor","ew-resize");break;case"tl":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"cursor","nwse-resize");break;case"tr":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"top","-.6rem"),this._renderer.setStyle(n,"cursor","nesw-resize");break;case"bl":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"left","-.6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"cursor","nesw-resize");break;case"br":this._renderer.setStyle(n,"width","1.2rem"),this._renderer.setStyle(n,"height","1.2rem"),this._renderer.setStyle(n,"right","-.6rem"),this._renderer.setStyle(n,"bottom","-.6rem"),this._renderer.setStyle(n,"cursor","nwse-resize")}this._renderer.setStyle(n,"position","absolute"),this._renderer.setStyle(n,"z-index","1")}resize(t,n){t.stopPropagation();const r=window.getComputedStyle(this.container),s=parseInt(r.getPropertyValue("width"),10),a=parseInt(r.getPropertyValue("height"),10),l=cn(this.container);if(we("userSelect","none"),!oe(t)){let c="auto";switch(n){case"t":case"b":c="ns-resize";break;case"l":case"r":c="ew-resize";break;case"tl":case"br":c="nwse-resize";break;case"tr":case"bl":c="nesw-resize"}we("cursor",c)}(function Vs(i,o,t){return(0,fi.P)(()=>i()?o:t)})(()=>oe(t),(0,P.R)(this._document,"touchmove",{passive:!1,capture:!0}).pipe((0,N.b)(c=>c.preventDefault()),(0,B.R)((0,P.R)(this._document,"touchend").pipe((0,N.b)(()=>{le("userSelect"),le("cursor")}))),(0,J.U)(c=>({offsetX:c.touches[0].clientX-t.touches[0].clientX,offsetY:c.touches[0].clientY-t.touches[0].clientY}))),(0,P.R)(this._document,"mousemove",{passive:!1,capture:!0}).pipe((0,B.R)((0,P.R)(this._document,"mouseup").pipe((0,N.b)(()=>{le("userSelect"),le("cursor")}))),(0,J.U)(c=>({offsetX:c.clientX-t.clientX,offsetY:c.clientY-t.clientY})))).subscribe(({offsetX:c,offsetY:d})=>{let p=0,u=0,f=0,T=0;switch(n){case"t":d=-(0,y.uZ)(-d,this.maxHeight-a,this.minHeight-a);break;case"l":c=-(0,y.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"b":d=(0,y.uZ)(d,this.maxHeight-a,this.minHeight-a);break;case"r":c=(0,y.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"tl":d=-(0,y.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=-(0,y.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"tr":d=-(0,y.uZ)(-d,this.maxHeight-a,this.minHeight-a),c=(0,y.uZ)(c,this.maxWidth-s,this.minWidth-s);break;case"bl":d=(0,y.uZ)(d,this.maxHeight-a,this.minHeight-a),c=-(0,y.uZ)(-c,this.maxWidth-s,this.minWidth-s);break;case"br":d=(0,y.uZ)(d,this.maxHeight-a,this.minHeight-a),c=(0,y.uZ)(c,this.maxWidth-s,this.minWidth-s)}switch(n){case"t":u=d,T=-d;break;case"l":p=c,f=-c;break;case"b":T=d;break;case"r":f=c;break;case"tl":p=c,u=d,f=-c,T=-d;break;case"tr":u=d,f=c,T=-d;break;case"bl":p=c,f=-c,T=d;break;case"br":f=c,T=d}this.transform&&this._renderer.setStyle(this.container,"transform",l.translate(p/l.a,u/l.d).toString()),this._widthResize&&this._renderer.setStyle(this.container,"width",`${s+f/l.a}px`),this._heightResize&&this._renderer.setStyle(this.container,"height",`${a+T/l.d}px`)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(h.K0),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","gtResize",""]],inputs:{resizes:"resizes",transform:"transform",minWidth:"minWidth",maxWidth:"maxWidth",minHeight:"minHeight",maxHeight:"maxHeight"}}),i})(),na=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.u5,h.ez,X.U8,qs,Re,Pe,er,Y.eL,mi]}),i})(),ia=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),tt=(()=>{class i{constructor(t){this.events=t,this.rightTabIndex=+localStorage.getItem("gtActiveRightTab")||0,this.configAccordionExpanded=JSON.parse(localStorage.getItem("configAccordionExpanded"))||{},this.elementAccordionExpanded=JSON.parse(localStorage.getItem("elementAccordionExpanded"))||{},this.currentBoardName=localStorage.getItem("currentBoardName"),this.events.CHANGE_BOARD.subscribe(n=>this.changeCurrentBoard(n))}activateRightTab(t){this.rightTabIndex=t,localStorage.setItem("gtActiveRightTab",""+t)}changeCurrentBoard(t){this.currentBoardName=t.name,localStorage.setItem("currentBoardName",this.currentBoardName)}changeConfigAccordionExpanded(t,n){this.configAccordionExpanded[t]=n,localStorage.setItem("configAccordionExpanded",JSON.stringify(this.configAccordionExpanded,(r,s)=>s||void 0))}changeElementAccordionExpanded(t,n){this.elementAccordionExpanded[t]=n,localStorage.setItem("elementAccordionExpanded",JSON.stringify(this.elementAccordionExpanded,(r,s)=>s||void 0))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_e))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,se.vT]}),i})(),ra=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[se.vT]}),i})();const yi={now:()=>(yi.delegate||performance).now(),delegate:void 0};var xi=b(3399);function Oi(i){return new ht.y(o=>{const t=i||yi,n=t.now();let r=0;const s=()=>{o.closed||(r=xi.l.requestAnimationFrame(a=>{r=0;const l=t.now();o.next({timestamp:i?l:a,elapsed:l-n}),s()}))};return s(),()=>{r&&xi.l.cancelAnimationFrame(r)}})}const aa=Oi();function _n(i,o,t,n=1){switch(i.beginPath(),o){case"long":i.moveTo(t,0),i.lineTo(t,10*n),i.globalAlpha=1;break;case"medium":i.moveTo(t,0),i.lineTo(t,8*n),i.globalAlpha=.6;break;case"short":i.moveTo(t,0),i.lineTo(t,5*n),i.globalAlpha=.3}i.closePath(),i.stroke()}function Ni(i,o,t,n,r=1){const s=Math.ceil(5/n),a=[Math.floor(-t/s/n)*s,Math.ceil((o-t)/s/n)*s];for(let l=a[0];l<=a[1];l+=s){const c=l*n+t;l%(20*s)==0?(_n(i,"long",c,r),i.fillText(""+l,c+5,20*r)):l%(10*s)==0?_n(i,"medium",c,r):l%s==0&&_n(i,"short",c,r)}}let Mi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","page-structure-source",""]]}),i})(),pa=(()=>{class i{constructor(t,n,r,s,a,l){this.el=t,this.events=n,this.render=r,this.gt=s,this.ngZone=a,this.direction=l,this.subscription=k.w0.EMPTY}ngOnInit(){if(!this.gtPage)throw new Error;const t=this.el.nativeElement,n=this.gtPage.nativeElement,r=this.render.createElement("canvas"),s=r.getContext("2d");r.classList.add("position-absolute"),r.classList.add("pe-none"),r.style.setProperty("z-index","1"),this.render.insertBefore(t.parentElement,r,t),this.ngZone.runOutsideAngular(()=>{this.subscription=(0,F.T)(this.events.CHANGE_SELECT,function sa(i){return i?Oi(i):aa}(),this.events.BLACKBOARD_RESIZE.pipe(me(20))).subscribe(()=>{const a=[],l=[];this.gt.currentBoard.nodeList.forEach(c=>{c.componentRef&&a.push({element:c.componentRef.location.nativeElement,type:c.type})}),this.gt.selected.forEach(c=>{l.push({element:c.componentRef.location.nativeElement,text1:c.type.toUpperCase(),text2:c.directive.map(p=>p.type).join(",")})}),function _a(i,o,t,n,r=[],s={}){const a=i.canvas,l=t,c=o.getBoundingClientRect(),d=o.clientLeft,{clientWidth:p,clientHeight:u,scrollLeft:f,scrollTop:T}=o;if(a.width!==p*devicePixelRatio&&(a.width=p*devicePixelRatio,a.style.width=p+"px"),a.height!==u*devicePixelRatio&&(a.height=u*devicePixelRatio,a.style.height=u+"px"),i.clearRect(0,0,a.width,a.height),i.getTransform().a!==devicePixelRatio&&(i.resetTransform(),i.scale(devicePixelRatio,devicePixelRatio)),s.drawAll||s.drawActive){i.save(),i.translate(-c.left-d,-c.top);const A=[];s.drawActive&&(i.setLineDash([]),i.lineWidth=1/devicePixelRatio,r.forEach(({element:S,text1:$,text2:Z})=>{const W=S.getBoundingClientRect(),{left:ve,top:pe,width:ot,height:rt}=W,{padding:vd,margin:Td}=getComputedStyle(S),{marginRect:Te,paddingRect:Se,contentRect:Ee}=function ua(i,o,t,n,r,s){const a=r?r.split(" ").map(W=>parseInt(W,10)):[0],l=s?s.split(" ").map(W=>parseInt(W,10)):[0];let c,d,p,u,f,T,L,A;switch(a.length){case 1:c=d=p=u=a[0];break;case 2:c=p=a[0],u=d=a[1];break;case 3:c=a[0],u=d=a[1],p=a[2];break;case 4:c=a[0],d=a[1],p=a[2],u=a[3];break;default:c=d=p=u=0}switch(l.length){case 1:f=T=L=A=l[0];break;case 2:f=L=l[0],A=T=l[1];break;case 3:f=l[0],A=T=l[1],L=l[2];break;case 4:f=l[0],T=l[1],L=l[2],A=l[3];break;default:f=T=L=A=0}return{marginRect:[i-A,o-f,t+A+T,n+f+L],paddingRect:[i,o,t,n],contentRect:[i+u,o+c,t-u-d,n-c-p]}}(ve,pe,ot,rt,vd,Td);i.fillStyle="rgba(255, 139, 15, 0.4)",i.fillRect(Te[0],Te[1],Te[2],Te[3]),i.clearRect(Se[0],Se[1],Se[2],Se[3]),i.fillStyle="rgba(2, 172, 13, 0.25)",i.fillRect(Se[0],Se[1],Se[2],Se[3]),i.clearRect(Ee[0],Ee[1],Ee[2],Ee[3]),i.fillStyle="rgba(32,189,248,0.4)",i.fillRect(Ee[0],Ee[1],Ee[2],Ee[3]),i.strokeStyle="#06366f",i.setLineDash([12/devicePixelRatio,4/devicePixelRatio]),i.strokeRect(Te[0],Te[1],Te[2],Te[3]),i.setLineDash([]),A.push({rect:W,text1:$,text2:Z})})),s.drawAll&&(i.strokeStyle="#8cb7ff",n.forEach(({element:S,type:$})=>{if(S){const Z=S.getBoundingClientRect();i.strokeRect(Z.left,Z.top,Z.width,Z.height),"slot"===$&&(i.strokeStyle=s.darkMode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",i.lineWidth=6/devicePixelRatio,i.setLineDash([16/devicePixelRatio,4/devicePixelRatio]),i.strokeRect(Z.left+i.lineWidth/2,Z.top+i.lineWidth/2,Z.width-i.lineWidth,Z.height-i.lineWidth),i.setLineDash([]),i.lineWidth=1/devicePixelRatio,i.strokeStyle="#8cb7ff")}})),i.font="normal 12px system-ui,-apple-system,Arial,sans-serif",i.textBaseline="top",A.forEach(({rect:{left:S,right:$,top:Z,bottom:W},text1:ve,text2:pe})=>{const ot=i.measureText(ve),rt=i.measureText(pe);"rtl"===s.direction?(i.beginPath(),i.rect($-(ot.width+8),Z-16,ot.width+8,16),i.closePath(),i.strokeStyle="#8cb7ff",i.stroke(),i.fillStyle="#404dff",i.fill(),pe&&(i.beginPath(),i.rect($-(rt.width+8),W,rt.width+8,16),i.closePath(),i.strokeStyle="#ff8cfd",i.stroke(),i.fillStyle="#ff0cae",i.fill()),i.fillStyle="#ffffff",i.fillText(ve,$-4,Z-14),pe&&i.fillText(pe,$-4,W+2)):(i.beginPath(),i.rect(S,Z-16,ot.width+8,16),i.closePath(),i.strokeStyle="#8cb7ff",i.stroke(),i.fillStyle="#404dff",i.fill(),pe&&(i.beginPath(),i.rect(S,W,rt.width+8,16),i.closePath(),i.strokeStyle="#ff8cfd",i.stroke(),i.fillStyle="#ff0cae",i.fill()),i.fillStyle="#ffffff",i.fillText(ve,S+4,Z-14),pe&&i.fillText(pe,S+4,W+2))}),i.restore()}{const A=new WebKitCSSMatrix(l.style.getPropertyValue("transform"));i.font="normal 8px system-ui,-apple-system,Arial,sans-serif",s.darkMode?(i.strokeStyle="#999",i.fillStyle="#999"):(i.strokeStyle="#333",i.fillStyle="#333");const S=A.a,Z=A.f-T;Ni(i,p,A.e-f,S),i.save(),i.rotate(Math.PI/180*90),Ni(i,u,Z,S,-1),i.restore(),i.globalAlpha=1}}(s,t,n,a,l,{drawAll:"edit"===this.gt.mode&&this.gt.showReferenceLine,drawActive:"edit"===this.gt.mode,darkMode:this.gt.darkMode,direction:this.direction.value})})})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(_e),e.Y36(e.Qsj),e.Y36(V),e.Y36(e.R0b),e.Y36(se.Is))},i.\u0275dir=e.lG2({type:i,selectors:[["","page-structure",""]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,Mi,7,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(n.gtPage=s.first)}}}),i})(),Di=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),ha=(()=>{class i{constructor(t,n,r){this.el=t,this.panDisabled=!1,this.subscription=k.w0.EMPTY,r.runOutsideAngular(()=>{this.subscription=Si(this.el.nativeElement).pipe((0,ae.w)(s=>{if(this.panDisabled)return Ci.E;const a=cn(this.panTarget);return we("userSelect","none"),we("cursor","grab"),Ke(s).pipe((0,B.R)(Xe(s).pipe((0,N.b)(()=>{le("userSelect"),le("cursor")}))),(0,J.U)(l=>Nt(s,l)),(0,N.b)(({x:l,y:c})=>{n.setStyle(this.panTarget,"transform",a.translate(l/a.a,c/a.d).toString())}))})).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","gtPan",""]],inputs:{panDisabled:"panDisabled",panTarget:"panTarget"}}),i})(),wi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),ga=(()=>{class i{constructor(t,n,r){this._renderer=n,this._ngZone=r,this.subscription=k.w0.EMPTY,this._container=t.nativeElement,this._renderer.setStyle(this._container,"transform-origin","left top")}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this.subscription=(0,P.R)(this.zoomZone||this._container,"wheel",{passive:!0,capture:!0}).subscribe(t=>this.zoom(t)),(0,P.R)(this.zoomZone||this._container,"touchstart").pipe((0,te.h)(t=>2===t.touches.length)).subscribe()})}ngOnDestroy(){this.subscription.unsubscribe()}zoom(t){if(this.gtZoomDisabled)return;t.stopPropagation();const n=cn(this._container),r=1-t.deltaY/1e3,s=+(n.a*r).toFixed(2);if(Math.max(.2,Math.min(s,5))!==s)return;const a=this._container.getBoundingClientRect(),l=this._container.parentElement.getBoundingClientRect();this._renderer.setStyle(this._container,"transform",(new WebKitCSSMatrix).scale(s,s).translate((t.pageX-(t.pageX-a.x)*r-l.x)/s,(t.pageY-(t.pageY-a.y)*r-l.y)/s))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","gtZoom",""]],inputs:{zoomZone:"zoomZone",gtZoomDisabled:"gtZoomDisabled"}}),i})();const ma={customComponent:!0,modal:!0,preview:!0,editProperty:!0,editVariable:!0,editStyle:!0,editRight:!0,editAction:!0,editDatasource:!0,editValidator:!0,editDirective:!0};let nt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[V,ia,_e,tt,{provide:ie,useValue:{title:"GHOSTEN",href:"/",src:"assets/icons/icon.svg",alt:"Ghosten Logo"}},{provide:Ze,useValue:{exitUrl:"/test"}},{provide:Ue,useValue:ma},{provide:x,useValue:{},multi:!0},{provide:w,useValue:{},multi:!0},{provide:v,useValue(){},multi:!0},{provide:M,useValue:{},multi:!0},{provide:O,useFactory:(o,t,n,r,s)=>(t=Object.assign({},...t),n=Object.assign({},...n),r=Object.assign({},...r),o?(o.forEach(a=>{a.elements.forEach(l=>{const c=l.type;t[c]||(l.disabled=!0,s.log.next({type:"error",message:`Type \u4e3a ${c} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e Component`,data:null})),n[c]||(l.disabled=!0,s.log.next({type:"error",message:`Type \u4e3a ${c} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e`,data:null})),r[c]||s.log.next({type:"warn",message:`Type \u4e3a ${c} \u7684\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u9884\u89c8\u7ec4\u4ef6`,data:null})})}),o):(s.log.next({type:"error",message:`\u672a\u914d\u7f6e ${Je.toString()}`,data:null}),[])),deps:[[new e.FiY,Je],x,w,M,V]},{provide:R,useFactory:o=>{const t=new Map;return o.forEach(n=>{for(const r in n)t.set(r,n[r])}),t},deps:[w]},{provide:H,useFactory:o=>{const t=new Map;return o.forEach(n=>{for(const r in n)t.set(r,{core:y.QY.create(n[r].get("core")),property:y.Z9.create(n[r].get("property").reduce((s,a)=>(s[a.name]=void 0===a.value?null:a.value,s),{})),style:y.bg.create(n[r].get("style").reduce((s,a)=>(s[a.name]=void 0===a.value?null:a.value,s),{})),action:n[r].get("action"),rights:n[r].get("rights"),validator:n[r].get("validator")})}),t},deps:[w]}],imports:[h.ez,X.U8,Y.eL,se.vT,na,Pe,oa,mi,ra,wi,Di]}),i})();var fa=b(7521),ue=b.n(fa);const Ca=["page"];function ba(i,o){}const va=function(i){return{transform:i}};let Ai=(()=>{class i{constructor(t,n,r,s,a,l,c,d){this.el=t,this.gt=n,this.events=r,this.translateAnimation=s,this.viewContainerRef=a,this.cdr=l,this.direction=c,this._gtContextMenu=d,this.gtNodeHover=new e.vpe,this.transform="matrix(1, 0, 0, 1, 0, 0)",this.itemName=null,this.events.CHANGE_BOARD.subscribe(()=>this.init())}blackboardClick(t){if("move"!==this.gt.mode){const n=this.getTargetNode(t);n&&this.gt.changeSelect(n,t.metaKey||t.ctrlKey)}}blackBoardContextmenu(t){t.stopPropagation(),t.preventDefault();const n=this.getTargetNode(t);!n||(this.gt.selected.includes(n)||this.gt.changeSelect(n),this._gtContextMenu&&this._gtContextMenu(this.gt,"gtNode",n,t))}blackboardMousemove(t){if("move"!==this.gt.mode){const n=this.getTargetNode(t);this.gtNodeHover.emit(n)}}ngOnInit(){this.initDragEvent()}ngAfterViewInit(){this.resetPosition()}init(){this.template.clear(),this.template.insert(this.gt.gt)}resetPosition(){this.transform=`matrix(1,0,0,1,${("ltr"===this.direction.value?1:-1)*Math.max(this.viewContainerRef.element.nativeElement.offsetWidth/2-400,50)},120)`,this.cdr.detectChanges()}getTargetNode(t){const n=sn(t.target,".gt-node");return n?this.gt.getNodeById(n.dataset.id):null}initDragEvent(){const t=new Xs(this.el.nativeElement),n=this.gt;Object.defineProperty(t,"disabled",{get:()=>"move"===n.mode}),t.drop.subscribe(({parentElement:r,refChild:s,target:a,placeholder:l})=>{const c=Array.prototype.filter.call(r.children,u=>u!==a).map(u=>u.getBoundingClientRect());r.insertBefore(a,s);const d=a.getBoundingClientRect(),p=Array.prototype.filter.call(r.children,u=>u!==a).map(u=>u.getBoundingClientRect());Array.prototype.filter.call(r.children,u=>u!==a).forEach((u,f)=>{this.translateAnimation.add({element:u,from:{left:c[f].left-p[f].left,top:c[f].top-p[f].top}})}),l.style.width=d.width+"px",l.style.height=d.height+"px",this.translateAnimation.add({element:l,to:{left:d.left,top:d.top}})}),t.dragEnd.subscribe(({parentElement:r,refChild:s,target:a})=>{const l=a.dataset.id,c=ln(r).dataset.id,d=this.gt.getNodeById(l),p=this.gt.getNodeById(c),u=s&&s.dataset.id?this.gt.getNodeById(s.dataset.id):null;d&&p?this.gt.dropNode(d,p,u?p.children.indexOf(u):void 0,r.dataset.droppable):console.error("something wrong!")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(V),e.Y36(_e),e.Y36(Mt),e.Y36(e.s_b),e.Y36(e.sBO),e.Y36(se.Is),e.Y36(ge,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-blackboard"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ne,7),e.Gf(Ca,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.page=r.first)}},hostAttrs:[1,"position-relative","d-flex","flex-column","flex-grow-1","overflow-hidden"],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n.blackboardClick(s)})("contextmenu",function(s){return n.blackBoardContextmenu(s)})("mousemove",function(s){return n.blackboardMousemove(s)})},outputs:{gtNodeHover:"gtNodeHover"},features:[e._Bn([Mt])],decls:4,vars:16,consts:[["page-structure","","gtPan","",1,"oblique-stripes","overflow-auto","position-relative","h-100",3,"panTarget","panDisabled"],["gtResize","","gtZoom","","resizes","all","page-structure-source","",1,"gt-page","shadow-lg",3,"minWidth","maxWidth","minHeight","maxHeight","transform","gtZoomDisabled","zoomZone","ngStyle"],["page",""],["gtTemplate",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1,2),e.YNc(3,ba,0,0,"ng-template",3),e.qZA()()),2&t){const r=e.MAs(2);e.ekj("overflow-auto","edit"===n.gt.mode)("overflow-hidden","move"===n.gt.mode),e.Q6J("panTarget",r)("panDisabled","move"!==n.gt.mode),e.xp6(1),e.Q6J("minWidth",300)("maxWidth",5e3)("minHeight",500)("maxHeight",5e3)("transform",!0)("gtZoomDisabled","move"!==n.gt.mode)("zoomZone",n.el.nativeElement)("ngStyle",e.VKq(14,va,n.transform))}},dependencies:[h.PC,dn,pa,Mi,ga,ha,ne],encapsulation:2}),i})();function Ta(i,o){}let Sa=(()=>{class i{constructor(t){this.gt=t,this.windowClose=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-float-bar"]],inputs:{icon:"icon",componentPortal:"componentPortal"},outputs:{windowClose:"windowClose"},decls:11,vars:6,consts:[["cdkDrag","","cdkDragBoundary","html","gtResize","",1,"card",2,"width","260px","height","600px",3,"resizes","minWidth","minHeight","transform"],["cdkDragHandle","",1,"card-header","bg-body",2,"cursor","move"],[1,"nav","nav-pills","card-header-pills"],[1,"nav-item"],[1,"nav-link","active"],[1,"gt-icon"],[1,"nav-item","ms-auto","mt-1"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"card-body","p-0","overflow-scroll"],[3,"cdkPortalOutlet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4)(5,"i",5),e._uU(6),e.qZA()()(),e.TgZ(7,"li",6)(8,"button",7),e.NdJ("click",function(){return n.windowClose.emit()}),e.qZA()()()(),e.TgZ(9,"div",8),e.YNc(10,Ta,0,0,"ng-template",9),e.qZA()()),2&t&&(e.Q6J("resizes","all")("minWidth",180)("minHeight",300)("transform",!0),e.xp6(6),e.Oqu(n.icon),e.xp6(4),e.Q6J("cdkPortalOutlet",n.componentPortal))},dependencies:[Ne,Qe,Y.Pl,dn],encapsulation:2,data:{animation:[(0,I.X$)("fade",[(0,I.SB)("in",(0,I.oB)({transform:"scale(1)",opacity:1})),(0,I.eR)("void => *",[(0,I.oB)({transform:"scale(.8)",opacity:0}),(0,I.jt)("250ms ease-out")])])]}}),i})();const Ea=["*"];let un=(()=>{class i{constructor(){this.multi=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion"]],inputs:{multi:"multi"},ngContentSelectors:Ea,decls:2,vars:1,consts:[["cdkAccordion","",1,"accordion","accordion-flush","border-bottom",3,"multi"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&t&&e.Q6J("multi",n.multi)},dependencies:[ee.xI],encapsulation:2}),i})();function ya(i,o){1&i&&(e.TgZ(0,"div",2),e.SDv(1,3),e.qZA())}function xa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",12),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("variable"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("variable"))}),e.TgZ(1,"gt-panel-variable",13),e.NdJ("openDialog",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOpenDialog(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.variable),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Oa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",14),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("property"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("property"))}),e.TgZ(1,"gt-panel-config",15),e.NdJ("openDialog",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOpenDialog(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.property),e.xp6(1),e.Q6J("type","property")("gtNode",t.gtNode)}}function Na(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",16),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("style"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("style"))}),e.TgZ(1,"gt-panel-config",15),e.NdJ("openDialog",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOpenDialog(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.style),e.xp6(1),e.Q6J("type","style")("gtNode",t.gtNode)}}function Ma(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",17),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("rights"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("rights"))}),e.TgZ(1,"gt-panel-config",15),e.NdJ("openDialog",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOpenDialog(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.rights),e.xp6(1),e.Q6J("type","rights")("gtNode",t.gtNode)}}function Da(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",18),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("directive"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("directive"))}),e.TgZ(1,"gt-panel-directive",13),e.NdJ("openDialog",function(r){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onOpenDialog(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.directive),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function wa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",19),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("validator"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("validator"))}),e._UZ(1,"gt-panel-validator",20),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.validator),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Aa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",21),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.opened("action"))})("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.closed("action"))}),e._UZ(1,"gt-panel-action",20),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",t.editorSetting.configAccordionExpanded.action),e.xp6(1),e.Q6J("gtNode",t.gtNode)}}function Ra(i,o){if(1&i&&(e.TgZ(0,"gt-accordion",4),e.YNc(1,xa,2,2,"gt-accordion-item",5),e.YNc(2,Oa,2,3,"gt-accordion-item",6),e.YNc(3,Na,2,3,"gt-accordion-item",7),e.YNc(4,Ma,2,3,"gt-accordion-item",8),e.YNc(5,Da,2,2,"gt-accordion-item",9),e.YNc(6,wa,2,2,"gt-accordion-item",10),e.YNc(7,Aa,2,2,"gt-accordion-item",11),e.qZA()),2&i){const t=e.oxw();e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngIf",t.gtNode.variable),e.xp6(1),e.Q6J("ngIf",t.gtNode.property),e.xp6(1),e.Q6J("ngIf",t.gtNode.style),e.xp6(1),e.Q6J("ngIf",t.gtNode.rights),e.xp6(1),e.Q6J("ngIf",t.gtNode.directive),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator),e.xp6(1),e.Q6J("ngIf",t.gtNode.validator)}}let Ri=(()=>{class i{constructor(t,n,r,s){this.editEvent=t,this.editorSetting=s,this.subscription=k.w0.EMPTY,this.subscription=(0,yn.a)([r.CHANGE_SELECT,(0,F.T)((0,Me.of)(null),r.REDO,r.UNDO,r.PASTE_STYLE)]).pipe(me(10)).subscribe(([a])=>{this.gtNode=1===a.length?a[0]:null,n.detectChanges()})}ngOnDestroy(){this.subscription.unsubscribe()}onOpenDialog(t){this.editEvent.forEach(n=>n(t))}opened(t){this.editorSetting.changeConfigAccordionExpanded(t,!0)}closed(t){this.editorSetting.changeConfigAccordionExpanded(t,!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v),e.Y36(e.sBO),e.Y36(_e),e.Y36(tt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-config"]],viewQuery:function(t,n){if(1&t&&e.Gf(K,5),2&t){let r;e.iGM(r=e.CRH())&&(n.accordionList=r)}},decls:2,vars:2,consts:function(){let o,t,n,r,s,a,l,c;return o=" \u8BF7\u9009\u4E2D\u4E00\u4E2A\u7EC4\u4EF6\uFF01 ",t="\u53D8\u91CF",n="\u5C5E\u6027",r="\u6837\u5F0F",s="\u6743\u9650",a="\u6307\u4EE4",l="\u6821\u9A8C",c="\u4E8B\u4EF6",[["class","bg-secondary-subtle p-2 text-center border-bottom",4,"ngIf"],[3,"multi",4,"ngIf"],[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],o,[3,"multi"],["cardTitle",t,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",n,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",r,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",s,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",a,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",l,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",c,3,"expanded","opened","closed",4,"ngIf"],["cardTitle",t,3,"expanded","opened","closed"],[3,"gtNode","openDialog"],["cardTitle",n,3,"expanded","opened","closed"],[3,"type","gtNode","openDialog"],["cardTitle",r,3,"expanded","opened","closed"],["cardTitle",s,3,"expanded","opened","closed"],["cardTitle",a,3,"expanded","opened","closed"],["cardTitle",l,3,"expanded","opened","closed"],[3,"gtNode"],["cardTitle",c,3,"expanded","opened","closed"]]},template:function(t,n){1&t&&(e.YNc(0,ya,2,0,"div",0),e.YNc(1,Ra,8,8,"gt-accordion",1)),2&t&&(e.Q6J("ngIf",!n.gtNode),e.xp6(1),e.Q6J("ngIf",n.gtNode))},dependencies:[h.O5,_i,pi,ui,gi,ai,un,K],encapsulation:2,changeDetection:0}),i})();var Ia=b(5577),ka=b(1481);function Pa(i,o){if(1&i&&(e.TgZ(0,"i",8),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.icon||"custom")}}function La(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.itemDrag(a,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.itemDrag(a,r))}),e.YNc(1,Pa,2,1,"i",7),e.TgZ(2,"div"),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit;e.uIk("data-type",t.type),e.xp6(1),e.Q6J("ngIf",t.icon),e.xp6(2),e.Oqu(t.label)}}function Ga(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",3),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.opened(s))})("closed",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.closed(s))}),e.TgZ(1,"div",4),e.YNc(2,La,4,3,"div",5),e.qZA()()}if(2&i){const t=o.$implicit;e.Q6J("cardTitle",t.title)("expanded",t.expanded),e.xp6(2),e.Q6J("ngForOf",t.elements)}}function Fa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"i",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.deleteCustom(r))}),e.qZA()}}function Ba(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.type=r)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.type)}}function Za(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name||t.type)}}function Ja(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("mousedown",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.itemDrag(a,r))})("touchstart",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.itemDrag(a,r))})("dblclick",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.editCustom(s))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.editCustomInfo(a,r))}),e.YNc(1,Fa,1,0,"i",14),e.TgZ(2,"i",15),e._uU(3,"custom"),e.qZA(),e.YNc(4,Ba,1,1,"input",16),e.YNc(5,Za,2,1,"div",17),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.uIk("data-id",t.id),e.xp6(1),e.Q6J("ngIf",n.editTypeMode),e.xp6(3),e.Q6J("ngIf",n.editTypeMode),e.xp6(1),e.Q6J("ngIf",!n.editTypeMode)}}function Ua(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",3),e.NdJ("opened",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.opened(r.customList))})("closed",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closed(r.customList))}),e.TgZ(1,"div",9),e.YNc(2,Ja,6,4,"div",10),e.qZA(),e.TgZ(3,"div",11)(4,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addCustom())}),e._uU(5),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("cardTitle",t.customList.title)("expanded",t.customList.expanded),e.xp6(2),e.Q6J("ngForOf",t.gt.customComponent),e.xp6(3),e.hij(" ",t.editMode?"\u5b8c\u6210":"\u6dfb\u52a0"," ")}}let Ii=(()=>{class i{constructor(t,n,r,s,a,l,c,d,p,u){this.gt=t,this.cdr=n,this.translateAnimation=r,this.domSanitizer=s,this.editorSetting=a,this._document=l,this.templateMap=c,this.internalElementLists=d,this.gtAuth=p,this._gtContextMenu=u,this.editMode=!1,this.editTypeMode=!1,this.customList={title:"\u81EA\u5B9A\u4E49",elements:this.gt.customComponent,expanded:this.editorSetting.elementAccordionExpanded["\u81EA\u5B9A\u4E49"]},this.internalElementLists.forEach(f=>{f.expanded=this.editorSetting.elementAccordionExpanded[f.title]}),this.templateMap=c.reduce((f,T)=>({...f,...T}),{})}itemDrag(t,n){if(!oe(n)&&0!==n.button)return;n.stopPropagation(),n.preventDefault();let r=null,s=null,a=null;we("userSelect","none"),(i=>Ke(i).pipe(bi(o=>{const{x:t,y:n}=Nt(i,o);return Math.abs(t)+Math.abs(n)<30}),(0,Q.q)(1),(0,B.R)(Xe(i).pipe((0,N.b)(()=>le("userSelect"))))))(n).pipe((0,J.U)(l=>sn(l.target,".gt-element")),(0,te.h)(l=>!!l),(0,J.U)(l=>{this.cdr.detach();const c=this._document.createElement("div");a=l;const d=t.type;let p;p=d?this.templateMap[d]?this.templateMap[d]:'<div style="width: 200px;height: 200px;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u672a\u77e5\u7ec4\u4ef6</div>':'<div style="width: 200px;height: 200px;display: flex;justify-content: center;align-items: center;border: 3px dashed #fff">\u81ea\u5b9a\u4e49\u7ec4\u4ef6</div>',c.style.setProperty("max-width","10rem"),c.innerHTML=p;const u=c.cloneNode(!0),f=c.children[0].cloneNode(!0),T=c.children[0].cloneNode(!0);u.classList.add("draggable-mirror"),f.classList.add("draggable-placeholder"),T.classList.add("draggable-source");const{x:L,y:A}=an(n);return u.style.transform=`translate(${L}px,${A}px)`,u.classList.add("draggable-mirror"),u.style.left="0",u.style.top="0",this._document.body.appendChild(u),this._document.body.appendChild(f),{mirror:u,placeholder:f,source:T,event:n}})).pipe((0,Ia.z)(({event:l,mirror:c,placeholder:d,source:p})=>Ke(l).pipe((0,N.b)(u=>{const{x:f,y:T}=an(u);c.style.transform=`translate(${f}px,${T}px)`}),(0,J.U)(u=>Ei(u,p)),(0,te.h)(u=>!!u),(0,te.h)(({parentElement:u})=>{const f=ln(u).dataset.id,T=this.gt.getNodeById(f);return!T.core.acceptedChildType.length||T.core.acceptedChildType.includes(a.dataset.type)}),(0,J.U)(({refChild:u,parentElement:f})=>(s=u,r=f,{refChild:u,parentElement:f})),ze((u,f)=>u.parentElement===f.parentElement&&u.refChild===f.refChild),(0,N.b)(({parentElement:u,refChild:f})=>{const T=Array.prototype.filter.call(u.children,S=>S!==p).map(S=>S.getBoundingClientRect());u.insertBefore(p,f);const L=Array.prototype.filter.call(u.children,S=>S!==p).map(S=>S.getBoundingClientRect());Array.prototype.filter.call(u.children,S=>S!==p).forEach((S,$)=>{this.translateAnimation.add({element:S,from:{left:T[$].left-L[$].left,top:T[$].top-L[$].top}})});const A=p.getBoundingClientRect();d.style.width=A.width+"px",d.style.height=A.height+"px",this.translateAnimation.add({element:d,to:{left:A.left,top:A.top}})}),(0,B.R)(Xe(l).pipe((0,N.b)(()=>{if(le("userSelect"),et(d),et(p),et(c),this.cdr.reattach(),!r)return;const u=ln(r).dataset.id,f=this.gt.getNodeById(u),T=s&&this.gt.getNodeById(s.dataset.id),L=T?T.parent.children.indexOf(T):f.children.length;t instanceof y.$l?this.gt.addCustomNode(a.dataset.id,f,L):this.gt.addNode(t.type,f,L,t.content,r.dataset.droppable),r=null,s=null})))))).subscribe()}addCustom(){this.editMode?(this.editMode=!1,this.gt.setCurrentBoard(this.gt.boards[0])):(this.editMode=!0,this.gt.addCustomComponent())}editCustom(t){this.gt.setCurrentBoard(t),this.editMode=!0}editCustomInfo(t,n){n.stopPropagation(),n.preventDefault(),this._gtContextMenu(this.gt,"customElement",t,n)}deleteCustom(t){this.gt.customComponent.splice(this.gt.customComponent.indexOf(t),1)}editType(){this.editTypeMode=!this.editTypeMode}opened(t){t.expanded=!0,this.editorSetting.changeElementAccordionExpanded(t.title,!0)}closed(t){t.expanded=!1,this.editorSetting.changeElementAccordionExpanded(t.title,!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V),e.Y36(e.sBO),e.Y36(Mt),e.Y36(ka.H7),e.Y36(tt),e.Y36(h.K0),e.Y36(M),e.Y36(O),e.Y36(Ue),e.Y36(ge,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-element"]],features:[e._Bn([Mt])],decls:3,vars:3,consts:[[3,"multi"],[3,"cardTitle","expanded","opened","closed",4,"ngFor","ngForOf"],[3,"cardTitle","expanded","opened","closed",4,"ngIf"],[3,"cardTitle","expanded","opened","closed"],[1,"item-container","row"],["class","gt-element col-4 d-flex flex-column align-items-center text-center",3,"mousedown","touchstart",4,"ngFor","ngForOf"],[1,"gt-element","col-4","d-flex","flex-column","align-items-center","text-center",3,"mousedown","touchstart"],["class","d-block fs-1 gt-icon",4,"ngIf"],[1,"d-block","fs-1","gt-icon"],[1,"item-container","clearfix"],["class","gt-element col-4 mb-2 d-flex flex-column align-items-center text-center",3,"mousedown","touchstart","dblclick","contextmenu",4,"ngFor","ngForOf"],[1,"d-grid","gap-2"],[1,"btn","btn-light",3,"click"],[1,"gt-element","col-4","mb-2","d-flex","flex-column","align-items-center","text-center",3,"mousedown","touchstart","dblclick","contextmenu"],["class","fa fa-times-circle","style","    font-size: 16px;\n    color: #000;\n    position: absolute;\n    margin: -9px 0 0 9px;",3,"click",4,"ngIf"],[1,"fs-1","gt-icon"],["type","text","class","form-control input-xs",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times-circle",2,"font-size","16px","color","#000","position","absolute","margin","-9px 0 0 9px",3,"click"],["type","text",1,"form-control","input-xs",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,Ga,3,3,"gt-accordion-item",1),e.YNc(2,Ua,6,4,"gt-accordion-item",2),e.qZA()),2&t&&(e.Q6J("multi",!0),e.xp6(1),e.Q6J("ngForOf",n.internalElementLists),e.xp6(1),e.Q6J("ngIf",n.gtAuth.customComponent))},dependencies:[_.Fj,_.JJ,_.On,h.sg,h.O5,un,K],encapsulation:2,changeDetection:0}),i})();function Ha(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"i",8),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.oxw().remove(s,r),e.KtG(r.stopPropagation())}),e._uU(1,"trash"),e.qZA()}}function Ya(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"gt-accordion-item",5),e.NdJ("opened",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.switchBoard(s))}),e.YNc(1,Ha,2,0,"i",6),e._UZ(2,"gt-board-edit",7),e.qZA()}if(2&i){const t=o.$implicit;e.Q6J("cardTitle",t.name||"Main"),e.xp6(1),e.Q6J("ngIf","main"!==t.type),e.xp6(1),e.Q6J("board",t)}}let ki=(()=>{class i{constructor(t){this.gt=t}remove(t,n){n.stopPropagation(),this.gt.removeBoard(t)}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-page"]],decls:5,vars:2,consts:function(){let o;return o=" \u6DFB\u52A0 ",[[3,"multi"],[3,"cardTitle","opened",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","p-3"],[1,"btn","btn-light",3,"click"],o,[3,"cardTitle","opened"],["class","gt-icon me-2 accordion-header-buttons","style","cursor:pointer;",3,"click",4,"ngIf"],[3,"board"],[1,"gt-icon","me-2","accordion-header-buttons",2,"cursor","pointer",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-accordion",0),e.YNc(1,Ya,3,3,"gt-accordion-item",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.gt.addBoard()}),e.SDv(4,4),e.qZA()()),2&t&&(e.Q6J("multi",!1),e.xp6(1),e.Q6J("ngForOf",n.gt.boards))},dependencies:[h.sg,h.O5,di,un,K],encapsulation:2}),i})();class $a{constructor(o,t,n,r){this.transformFunction=o,this.getLevel=t,this.isExpandable=n,this.getChildren=r}_flattenNode(o,t,n,r){const s=this.transformFunction(o,t);if(n.push(s),this.isExpandable(s)){const a=this.getChildren(o);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,r):a.pipe((0,Q.q)(1)).subscribe(l=>{this._flattenChildren(l,t,n,r)}))}return n}_flattenChildren(o,t,n,r){o.forEach((s,a)=>{let l=r.slice();l.push(a!==o.length-1),this._flattenNode(s,t+1,n,l)})}flattenNodes(o){let t=[];return o.forEach(n=>this._flattenNode(n,0,t,[])),t}expandFlattenedNodes(o,t){let n=[],r=[];return r[0]=!0,o.forEach(s=>{let a=!0;for(let l=0;l<=this.getLevel(s);l++)a=a&&r[l];a&&n.push(s),this.isExpandable(s)&&(r[this.getLevel(s)+1]=t.isExpanded(s))}),n}}class qa extends vt.o2{constructor(o,t,n){super(),this._treeControl=o,this._treeFlattener=t,this._flattenedData=new Tt.X([]),this._expandedData=new Tt.X([]),this._data=new Tt.X([]),n&&(this.data=n)}get data(){return this._data.value}set data(o){this._data.next(o),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(o){return(0,F.T)(o.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,J.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}function Va(i,o){if(1&i&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(Outlet ID: ",t.source.outletID,")")}}function Qa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"cdk-tree-node",6)(1,"div",7),e._UZ(2,"div",8),e.TgZ(3,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.selectTreeNode(s.source))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(4),e.YNc(5,Va,2,1,"small",10),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("cdkDragDisabled",t.source.template&&!t.source.isTemplateRoot)("cdkDragData",t.source)("cdkDropListEnterPredicate",n.cdkDropListEnterPredicate),e.xp6(3),e.ekj("active",n.gt.selected.includes(t.source)),e.xp6(1),e.hij(" ",t.type," "),e.xp6(1),e.Q6J("ngIf",t.source.outletID)}}function za(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"cdk-tree-node",11)(1,"div",7)(2,"button",12)(3,"i",13),e._uU(4,"chevron_right"),e.qZA()(),e.TgZ(5,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.selectTreeNode(s.source))})("contextmenu",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onContextmenu(a.source,r))}),e._uU(6),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("cdkDragData",t.source)("cdkDropListEnterPredicate",n.cdkDropListEnterPredicate),e.xp6(2),e.Udp("transform",n.treeControl.isExpanded(t)?"rotate(90deg)":""),e.uIk("aria-label","Toggle "+t.type),e.xp6(3),e.ekj("active",n.gt.selected.includes(t.source)),e.xp6(1),e.AsE(" ",t.type," ( ",t.source.children.length," ) ")}}let Pi=(()=>{class i{constructor(t,n,r){this.gt=t,this.events=n,this._gtContextMenu=r,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this._transformer=(s,a)=>{const l=this.nestedNodeMap.get(s),c=l&&l.source===s&&l.expandable===(!!s.children&&s.children.length>0)&&l.level===a?l:{expandable:!!s.children&&s.children.length>0,type:s.type,level:a,source:s};return c.source=s,c.level=a,c.expandable=!!s.children&&s.children.length>0,this.flatNodeMap.set(c,s),this.nestedNodeMap.set(s,c),c},this.treeControl=new zo(s=>s.level,s=>s.expandable),this.treeFlattener=new $a(this._transformer,s=>s.level,s=>s.expandable,s=>s.children),this.dataSource=new qa(this.treeControl,this.treeFlattener),this.hasChild=(s,a)=>a.expandable,this.subscription1=k.w0.EMPTY,this.subscription2=k.w0.EMPTY}ngOnInit(){this.subscription1=(0,F.T)((0,Me.of)(null),this.events.onEvent.pipe((0,te.h)(({type:t})=>["INSERT_NODE","REMOVE_NODE","MOVE_NODE","UNDO","REDO","CHANGE_BOARD"].indexOf(t)>-1))).subscribe(t=>{this.dataSource.data=[this.gt.currentBoard.gt]}),this.subscription2=this.events.CHANGE_SELECT.subscribe(t=>{t.forEach(n=>{n.path.forEach(r=>{const s=this.nestedNodeMap.get(r);this.treeControl.expand(s)})})})}ngOnDestroy(){this.subscription1.unsubscribe(),this.subscription2.unsubscribe()}onContextmenu(t,n){if(n.preventDefault(),"root"===t.type)return;const r=this.gt.getNodeById(t.id);this.gt.selected.includes(r)||this.gt.changeSelect(r),this._gtContextMenu&&this._gtContextMenu(this.gt,"gtNode",r,n)}selectTreeNode(t){const n=this.gt.getNodeById(t.id);n&&!this.gt.selected.includes(n)&&this.gt.changeSelect(n)}onEvent(t){const n=this.gt.getNodeById(t.node.id);this.gt.selected.includes(n)||this.gt.changeSelect(n)}sorted(t){}dropped(t){}cdkDropListEnterPredicate(t,n){return!0}cdkDropListSortPredicate(t,n,r){const s=n.data,a=r.getSortedItems()[t].data;return!!a.parent&&!a.path.includes(s)}cdkDropListDropped({currentIndex:t,container:n,item:r}){const s=n.getSortedItems()[t];this.gt.dropNode(r.data,s.data.parent,s.data.parent.children.indexOf(s.data))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V),e.Y36(_e),e.Y36(ge,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-elTree"]],viewQuery:function(t,n){if(1&t&&(e.Gf(De,5),e.Gf(ti,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.tree=r.first),e.iGM(r=e.CRH())&&(n.treeNodes=r)}},decls:6,vars:5,consts:function(){let o;return o=" \u5171" + "\ufffd0\ufffd" + "\u4E2A\u8282\u70B9 ",[[1,"bg-secondary-subtle","p-2","text-center","border-bottom"],o,[1,"p-3"],["cdkDropList","",1,"py-2",3,"dataSource","treeControl","cdkDropListSortPredicate","cdkDropListDropped","cdkDropListSorted"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragDisabled","cdkDragData","cdkDropListEnterPredicate",4,"cdkTreeNodeDef"],["class","d-block mb-1","cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",3,"cdkDragData","cdkDropListEnterPredicate",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragDisabled","cdkDragData","cdkDropListEnterPredicate"],[1,"d-flex","align-items-center","px-1"],[2,"width","2rem"],["type","button",1,"btn","btn-text","btn-sm","text-nowrap",3,"click","contextmenu"],[4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y","cdkDropList","","cdkTreeNodePadding","","cdkTreeNodePaddingIndent","26",1,"d-block","mb-1",3,"cdkDragData","cdkDropListEnterPredicate"],["type","button","cdkTreeNodeToggle","",1,"btn","btn-expander","btn-sm"],[1,"gt-icon"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"div",2)(3,"cdk-tree",3),e.NdJ("cdkDropListDropped",function(s){return n.cdkDropListDropped(s)})("cdkDropListSorted",function(s){return n.sorted(s)}),e.YNc(4,Qa,6,7,"cdk-tree-node",4),e.YNc(5,za,7,9,"cdk-tree-node",5),e.qZA()()),2&t&&(e.xp6(1),e.pQV(n.gt.currentBoard.nodeList.size),e.QtT(1),e.xp6(2),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl)("cdkDropListSortPredicate",n.cdkDropListSortPredicate),e.xp6(2),e.Q6J("cdkTreeNodeDefWhen",n.hasChild))},dependencies:[h.O5,bt,Ne,jt,ni,ii,De,fe],encapsulation:2}),i})();const ja=["tabsEle"];function Wa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7,8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editorSetting.activateRightTab(r.id))})("cdkDragEnded",function(r){e.CHM(t);const s=e.MAs(1),a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.dragEnd(r,s,a))}),e.TgZ(2,"i",9),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Udp("cursor",n.editorSetting.rightTabIndex===t.id?"default":"pointer"),e.ekj("active",n.editorSetting.rightTabIndex===t.id),e.Q6J("cdkDragStartDelay",50),e.uIk("data-id",t.id),e.xp6(3),e.Oqu(t.icon)}}function Ka(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Wa,4,7,"button",6),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hide)}}function Xa(i,o){if(1&i&&e._UZ(0,"gt-accordion-element",10),2&i){const t=e.oxw();e.Udp("display",0===t.editorSetting.rightTabIndex?"":"none")}}function el(i,o){if(1&i&&e._UZ(0,"gt-accordion-config",10),2&i){const t=e.oxw();e.Udp("display",1===t.editorSetting.rightTabIndex?"":"none")}}function tl(i,o){if(1&i&&e._UZ(0,"gt-accordion-elTree",10),2&i){const t=e.oxw();e.Udp("display",2===t.editorSetting.rightTabIndex?"":"none")}}function nl(i,o){if(1&i&&e._UZ(0,"gt-accordion-page",10),2&i){const t=e.oxw();e.Udp("display",3===t.editorSetting.rightTabIndex?"":"none")}}let il=(()=>{class i{constructor(t,n,r,s){this.gt=t,this.editorSetting=n,this._overlay=r,this.gtAuth=s,this.tabs=[{id:0,icon:"add",component:Ii},{id:1,icon:"edit",component:Ri},{id:2,icon:"file",component:Pi},{id:3,icon:"pages",hide:!this.gtAuth.modal,component:ki}]}dragEnd(t,n,r){this.createWindow(r,t.dropPoint.x,t.dropPoint.y),n.reset()}createWindow(t,n,r){t.hide=!0;const s=this._overlay.create({positionStrategy:this._overlay.position().global().top((0,E.HM)(r)).left((0,E.HM)(n))}),a=s.attach(new Y.C5(Sa));a.instance.componentPortal=new Y.C5(t.component),a.instance.icon=t.icon,a.instance.windowClose.subscribe(()=>{t.hide=!1,s.dispose()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V),e.Y36(tt),e.Y36(X.aV),e.Y36(Ue))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-sidebar"]],viewQuery:function(t,n){if(1&t&&e.Gf(ja,7),2&t){let r;e.iGM(r=e.CRH())&&(n.tabsEle=r.first)}},hostAttrs:[1,"flex-shrink-0"],decls:9,vars:5,consts:[[1,"card","border-0","h-100"],[1,"card-header","bg-body"],[1,"nav","nav-pills","nav-justified","card-header-pills"],[4,"ngFor","ngForOf"],[1,"card-body","p-0",2,"overflow-y","scroll"],["class","tab-panel",3,"display",4,"ngIf"],["class","nav-link","type","button","cdkDrag","","cdkDragBoundary","body","cdkDragPreviewContainer","global",3,"cdkDragStartDelay","active","cursor","click","cdkDragEnded",4,"ngIf"],["type","button","cdkDrag","","cdkDragBoundary","body","cdkDragPreviewContainer","global",1,"nav-link",3,"cdkDragStartDelay","click","cdkDragEnded"],["cdkDrag","cdkDrag"],[1,"gt-icon"],[1,"tab-panel"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2),e.YNc(3,Ka,2,1,"ng-container",3),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,Xa,1,2,"gt-accordion-element",5),e.YNc(6,el,1,2,"gt-accordion-config",5),e.YNc(7,tl,1,2,"gt-accordion-elTree",5),e.YNc(8,nl,1,2,"gt-accordion-page",5),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.tabs),e.xp6(2),e.Q6J("ngIf",!n.tabs[0].hide),e.xp6(1),e.Q6J("ngIf",!n.tabs[1].hide),e.xp6(1),e.Q6J("ngIf",!n.tabs[2].hide),e.xp6(1),e.Q6J("ngIf",n.gtAuth.modal&&!n.tabs[3].hide))},dependencies:[h.sg,h.O5,Ne,Ri,Ii,Pi,ki],encapsulation:2}),i})();var pn=b(5963);const ol=["tooltipContainer"],rl=["tooltip",""],sl=function(i,o){return{top:i,left:o}};let al=(()=>{class i{constructor(t,n,r){this.elementRef=t,this.cdr=n,this.direction=r,this.fading=!1,this.fadingOutSubscription=k.w0.EMPTY}get tooltipPosition(){return this._tooltipPosition}set tooltipPosition(t){if("rtl"===this.direction.value)switch(t){case"start":this._tooltipPosition="end";break;case"end":this._tooltipPosition="start";break;default:this._tooltipPosition=t}else this._tooltipPosition=t}get showing(){return!!this.elementRef.nativeElement.parentElement}show(){this.elementRef.nativeElement.parentElement||(this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=k.w0.EMPTY,document.body.appendChild(this.elementRef.nativeElement)),this.cdr.detectChanges()}hide(){this.elementRef.nativeElement.parentElement&&this.elementRef.nativeElement.parentElement.removeChild(this.elementRef.nativeElement),this.cdr.detectChanges()}setTitle(t){this.tooltipTitle=t,this.cdr.detectChanges()}setPosition(t){this.tooltipPosition=t,this.cdr.detectChanges()}updatePosition(t){this.fading=!0,this.fadingOutSubscription.unsubscribe(),this.fadingOutSubscription=k.w0.EMPTY;const n=this.tooltipContainer.nativeElement.getBoundingClientRect();let a,l,r=0,s=0;const c=document.body.clientWidth-n.width-5;switch(this.tooltipPosition){case"top":if(r=n.width/2,l=t.top-n.height,a=(t.left+t.right-n.width)/2,a>c){const p=a-c;a=c,r+=p}if(a<5){const p=a-5;a=5,r+=p}break;case"bottom":if(r=n.width/2,l=t.bottom,a=(t.left+t.right-n.width)/2,a>c){const p=a-c;a=c,r+=p}if(a<5){const p=a-5;a=5,r+=p}break;case"start":s=n.height/2,a=t.left-n.width,l=(t.top+t.bottom-n.height)/2;break;default:s=n.height/2,a=t.right,l=(t.top+t.bottom-n.height)/2}r=Math.round(r),s=Math.round(s),a=Math.round(a),l=Math.round(l),this.arrowMatrix=`matrix(1,0,0,1,${r},${s})`,this.containerMatrix=`matrix(1,0,0,1,${a},${l})`,this.cdr.detectChanges()}fadeIn(t){this.cdr.detectChanges(),this.show(),this.updatePosition(t),this.fading=!1,this.hide(),this.show(),this.fading=!0,this.cdr.detectChanges()}fadeOut(){this.fading=!1,this.cdr.detectChanges(),this.fadingOutSubscription=(0,pn.H)(150).subscribe(()=>this.hide())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(se.Is))},i.\u0275cmp=e.Xpm({type:i,selectors:[["div","tooltip",""]],viewQuery:function(t,n){if(1&t&&e.Gf(ol,7),2&t){let r;e.iGM(r=e.CRH())&&(n.tooltipContainer=r.first)}},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"},attrs:rl,decls:5,vars:12,consts:[["role","tooltip",1,"tooltip","position-absolute","fade",2,"left","0","top","0",3,"ngClass"],["tooltipContainer",""],[1,"tooltip-arrow","position-absolute",3,"ngStyle"],[1,"tooltip-inner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA()()),2&t&&(e.Udp("transform",n.containerMatrix),e.ekj("show",n.fading),e.Q6J("ngClass","bs-tooltip-"+n.tooltipPosition),e.xp6(2),e.Udp("transform",n.arrowMatrix),e.Q6J("ngStyle",e.WLB(9,sl,"start"===n.tooltipPosition||"end"===n.tooltipPosition?"-.4rem":"","bottom"===n.tooltipPosition||"top"===n.tooltipPosition?"-.4rem":"")),e.xp6(2),e.Oqu(n.tooltipTitle))},dependencies:[h.mk,h.PC],encapsulation:2}),i})();class U{constructor(o,t){this.elementRef=o,this.appRef=t,this.tooltipPosition="end"}mouseenter(o){if(o.preventDefault(),o.stopPropagation(),!this.tooltipTitle)return;U.tooltipRef||(U.tooltipRef=(0,e.LMc)(al,{environmentInjector:this.appRef.injector}));const t=U.tooltipRef.instance,n=this.elementRef.nativeElement.getBoundingClientRect();t.showing?(t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.updatePosition(n)):U.showTimerSubscription=(0,pn.H)(400).subscribe(()=>{t.setTitle(this.tooltipTitle),t.setPosition(this.tooltipPosition),t.fadeIn(n)}),U.hideTimerSubscription.unsubscribe(),U.hideTimerSubscription=k.w0.EMPTY}mouseleave(o){o.preventDefault(),o.stopPropagation();const t=U.tooltipRef.instance;U.hideTimerSubscription=(0,pn.H)(50).subscribe(()=>t.fadeOut()),U.showTimerSubscription.unsubscribe(),U.showTimerSubscription=k.w0.EMPTY}}function ll(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.switchBoard(s))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Udp("cursor",n.gt.currentBoard===t?"default":"pointer"),e.ekj("active",n.gt.currentBoard===t),e.xp6(1),e.hij(" ",t.name||t.type," ")}}function cl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.switchBoard(s))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Udp("cursor",n.gt.currentBoard===t?"default":"pointer"),e.ekj("active",n.gt.currentBoard===t),e.xp6(1),e.hij(" ",t.name||t.type," ")}}function dl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(r.onclick(s.gt))}),e.TgZ(1,"i",14),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.ekj("active",t.active),e.Q6J("tooltipTitle",t.title)("disabled",t.disabled),e.xp6(2),e.Oqu(t.icon)}}function _l(i,o){if(1&i&&(e.TgZ(0,"div",15)(1,"button",16)(2,"i",14),e._uU(3),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("title",t.title),e.xp6(2),e.Oqu(t.icon)}}function ul(i,o){if(1&i&&(e.ynx(0),e.YNc(1,dl,3,5,"button",11),e._uU(2,"\xa0 "),e.YNc(3,_l,4,2,"div",12),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.children),e.xp6(2),e.Q6J("ngIf",t.children)}}U.tooltipRef=null,U.showTimerSubscription=k.w0.EMPTY,U.hideTimerSubscription=k.w0.EMPTY,U.\u0275fac=function(o){return new(o||U)(e.Y36(e.SBq),e.Y36(e.z2F))},U.\u0275dir=e.lG2({type:U,selectors:[["","tooltip",""]],hostBindings:function(o,t){1&o&&e.NdJ("mouseenter",function(r){return t.mouseenter(r)})("mouseleave",function(r){return t.mouseleave(r)})},inputs:{tooltipTitle:"tooltipTitle",tooltipPosition:"tooltipPosition"}});let pl=(()=>{class i{constructor(t,n,r){this.gt=t,this.editorBrand=n,this.topBarButtons=r}switchBoard(t){this.gt.currentBoard!==t&&this.gt.setCurrentBoard(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V),e.Y36(ie,8),e.Y36(He,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-navbar"]],hostAttrs:[1,"navbar","border-bottom"],decls:13,vars:8,consts:[[1,"container-fluid"],[1,"navbar-brand","me-0","d-flex",3,"href"],[1,"rounded",2,"width","2rem",3,"src","alt"],[1,"fw-bold","mx-3"],[1,"border-start","border-secondary","me-3",2,"height","2rem"],[1,"nav","nav-pills"],["class","nav-link","type","button",3,"active","cursor","click",4,"ngFor","ngForOf"],["type","button","class","nav-link",3,"active","cursor","click",4,"ngFor","ngForOf"],[1,"fw-bold","fs-5","ms-auto","me-auto"],[4,"ngFor","ngForOf"],["type","button",1,"nav-link",3,"click"],["type","button","class","btn btn-light","tooltip","","tooltipPosition","bottom",3,"active","tooltipTitle","disabled","click",4,"ngIf"],["class","btn-group","role","group",4,"ngIf"],["type","button","tooltip","","tooltipPosition","bottom",1,"btn","btn-light",3,"tooltipTitle","disabled","click"],[1,"gt-icon"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-link","dropdown-toggle",3,"title"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"img",2),e.TgZ(3,"span",3),e._uU(4),e.qZA()(),e._UZ(5,"span",4),e.TgZ(6,"nav",5),e.YNc(7,ll,2,5,"button",6),e.YNc(8,cl,2,5,"button",7),e.qZA(),e.TgZ(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div"),e.YNc(12,ul,4,2,"ng-container",9),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("href",n.editorBrand.href,e.LSH),e.xp6(1),e.Q6J("src",n.editorBrand.src,e.LSH)("alt",n.editorBrand.alt),e.xp6(2),e.Oqu(n.editorBrand.title),e.xp6(3),e.Q6J("ngForOf",n.gt.boards),e.xp6(1),e.Q6J("ngForOf",n.gt.customComponent),e.xp6(2),e.Oqu(n.gt.metadata.name),e.xp6(2),e.Q6J("ngForOf",n.topBarButtons))},dependencies:[h.sg,h.O5,U],encapsulation:2}),i})();function hl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.gt.changeSelect(r))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function gl(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.type)}}function ml(i,o){if(1&i&&(e.TgZ(0,"li",16),e.YNc(1,hl,2,1,"a",17),e.YNc(2,gl,2,1,"ng-container",18),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.ekj("active",t===(n.gt.selected[0]||n.gt.gt)),e.xp6(1),e.Q6J("ngIf",t!==(n.gt.selected[0]||n.gt.gt)),e.xp6(1),e.Q6J("ngIf",t===(n.gt.selected[0]||n.gt.gt))}}const fl=function(){return["l"]};let Li=(()=>{class i{constructor(t,n,r){this.gt=t,this.events=n,this.log=this.gt.log,this.gtInit=new e.vpe,this.eventSubscription=k.w0.EMPTY,this.hoveredGtNode=null,this.eventSubscription=this.events.onEvent.subscribe(s=>{this.log.next({type:"log",message:s.type,data:s.data})}),ue().bind(["ctrl+z","meta+z"],s=>{s.preventDefault(),t.undo()}),ue().bind(["ctrl+shift+z","meta+shift+z"],s=>{s.preventDefault(),t.redo()}),ue().bind("alt+1",s=>{s.preventDefault(),r.activateRightTab(0)}),ue().bind("alt+2",s=>{s.preventDefault(),r.activateRightTab(1)}),ue().bind("alt+3",s=>{s.preventDefault(),r.activateRightTab(2)}),ue().bind("alt+4",s=>{s.preventDefault(),r.activateRightTab(3)}),ue().bind("del",s=>{s.preventDefault(),t.removeNode()}),ue().bind("m",s=>{s.preventDefault(),t.mode="move"}),ue().bind("v",s=>{s.preventDefault(),t.mode="edit"}),(0,P.R)(document,"keypress").pipe((0,te.h)(s=>32===s.keyCode),(0,J.U)(()=>t.mode),(0,N.b)(()=>t.mode="move"),(0,ae.w)(()=>(0,P.R)(document,"keyup").pipe((0,te.h)(s=>32===s.keyCode),(0,N.b)(()=>t.mode="edit"),(0,Q.q)(1)))).subscribe()}set data(t){this.gt.init(t),this.gt.log.next({type:"init",message:"Application Initialization",data:this.gt})}ngOnDestroy(){this.eventSubscription.unsubscribe(),this.gt.destroy()}resetPosition(){this.blackboard.resetPosition()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V),e.Y36(_e),e.Y36(tt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ai,7),2&t){let r;e.iGM(r=e.CRH())&&(n.blackboard=r.first)}},inputs:{data:"data"},outputs:{log:"log",gtInit:"gtInit"},decls:24,vars:12,consts:function(){let o,t,n;return o="\u5149\u6807",t="\u5E73\u79FB",n="\u91CD\u7F6E",[[1,"gt-wrapper","d-flex","h-100","flex-column",2,"min-width","50rem"],[1,"d-flex","flex-grow-1","overflow-hidden"],[1,"h-100","border-end"],[1,"toolbox","btn-group-vertical",3,"mousedown"],["tooltip","","tooltipTitle",o,1,"btn","btn-text","rounded-0","border-0",2,"border-top-left-radius","0",3,"click"],[1,"gt-icon"],["tooltip","","tooltipTitle",t,1,"btn","btn-text","rounded-0","border-0",3,"click"],["tooltip","","tooltipTitle",n,1,"btn","btn-text","rounded-0","border-0",2,"border-bottom-left-radius","0",3,"click"],[1,"d-flex","flex-column","flex-grow-1","overflow-hidden"],[1,"flex-grow-1",3,"gtNodeHover"],["blackboard",""],[1,"d-flex","justify-content-between","border-top","px-3"],[1,"breadcrumb","mb-0","flex-shrink-0"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"badge","text-bg-primary"],["gtResize","",1,"border-start",2,"width","20rem",3,"maxWidth","minWidth","resizes"],[1,"breadcrumb-item"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"gt-navbar"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e.NdJ("mousedown",function(s){return s.stopPropagation()}),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.gt.mode="edit"}),e.TgZ(6,"i",5),e._uU(7,"mouse_pointer"),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.gt.mode="move",n.gt.selected=[]}),e.TgZ(9,"i",5),e._uU(10,"move"),e.qZA()(),e.TgZ(11,"button",7),e.NdJ("click",function(){return n.resetPosition()}),e.TgZ(12,"i",5),e._uU(13,"refresh_ccw"),e.qZA()()()(),e.TgZ(14,"div",8)(15,"gt-blackboard",9,10),e.NdJ("gtNodeHover",function(s){return n.hoveredGtNode=s}),e.qZA(),e.TgZ(17,"div",11)(18,"ol",12),e.YNc(19,ml,3,4,"li",13),e.qZA(),e.TgZ(20,"span",14),e._uU(21),e.ALo(22,"uppercase"),e.qZA()()(),e._UZ(23,"gt-sidebar",15),e.qZA()()),2&t&&(e.xp6(5),e.ekj("active","edit"===n.gt.mode),e.xp6(3),e.ekj("active","move"===n.gt.mode),e.xp6(11),e.Q6J("ngForOf",(n.gt.selected[0]||n.gt.gt).path),e.xp6(2),e.Oqu(e.lcZ(22,9,null==n.hoveredGtNode?null:n.hoveredGtNode.type)),e.xp6(2),e.Q6J("maxWidth",400)("minWidth",230)("resizes",e.DdM(11,fl)))},dependencies:[h.sg,h.O5,il,U,dn,Ai,pl,h.gd],encapsulation:2}),i})(),z=(()=>{class i{constructor(t,n){this.gtNode=t,this.gt=n,this.gtClass=!0,this.subscriptions=[],this.property=this.gtNode.property}get gtSlot(){return"slot"===this.gtNode.type}get isHidden(){return!this.gtNode.property.show}get clearfix(){return this.gtNode.style&&this.gtNode.style.clearfix}get id(){return this.gtNode.id}get type(){return this.gtNode.type}get root(){return this.gtNode.parent?null:""}get draggable(){return"root"===this.gtNode.type||this.gtNode.template&&!this.gtNode.isTemplateRoot?null:""}get canHasChild(){return this.gtNode.core.canHasChild}get droppable(){return this.gtNode.template&&"slot"!==this.gtNode.type||!this.gtNode.core.canHasChild?null:""}get fontSize(){return this.gtNode.style.fontSize+"px"}get width(){return this.gtNode.style.width}get height(){return this.gtNode.style.height}get margin(){return this.gtNode.style.margin}get padding(){return this.gtNode.style.padding}get display(){return this.gtNode.style.display}get position(){return this.gtNode.style.position}get float(){return this.gtNode.style.float}get overflow(){return this.gtNode.style.overflow}get flexDirection(){return this.gtNode.style.flexDirection}get flexGrow(){return this.gtNode.style.flexGrow}get flexShrink(){return this.gtNode.style.flexShrink}get flexWrap(){return this.gtNode.style.flexWrap}get justifyContent(){return this.gtNode.style.justifyContent}get alignItems(){return this.gtNode.style.alignItems}get alignContent(){return this.gtNode.style.alignContent}get background(){return this.gtNode.style.background}get color(){return this.gtNode.style.color}get textAlign(){return this.gtNode.style.textAlign}get left(){return this.gtNode.style.left}get top(){return this.gtNode.style.top}get right(){return this.gtNode.style.right}get bottom(){return this.gtNode.style.bottom}get zIndex(){return this.gtNode.style.zIndex}get border(){if(this.gtNode.style.border&&this.gtNode.style.border.all)return this.gtNode.style.border.all}get borderLeft(){if(this.gtNode.style.border&&this.gtNode.style.border.left)return this.gtNode.style.border.left}get borderRight(){if(this.gtNode.style.border&&this.gtNode.style.border.right)return this.gtNode.style.border.right}get borderTop(){if(this.gtNode.style.border&&this.gtNode.style.border.top)return this.gtNode.style.border.top}get borderBottom(){if(this.gtNode.style.border&&this.gtNode.style.border.bottom)return this.gtNode.style.border.bottom}get fontWeight(){return this.gtNode.style.fontWeight}ngOnInit(){this.gtNode.core.dynamicTemplate||this.refresh()}ngAfterViewInit(){this.gtNode.core.dynamicTemplate&&this.refresh()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}refresh(){if(this.gtNode.core.canHasChild)if(this.gtNode.core.dynamicTemplate){const t=new Map;this.templates.forEach(n=>{n.clear(),t.set(n.templateID,n)}),this.gtNode.children.forEach(n=>{const r=t.get(n.outletID);r&&r.insert(n)})}else this.template.clear(),this.gtNode.children.forEach(t=>{this.template.insert(t)})}insert(t,n){if(this.gtNode.core.dynamicTemplate){const r=this.templates.find(s=>s.templateID===t.outletID);if(r)return r.insert(t,n);throw new Error}return this.template.insert(t,n)}remove(t){if("number"==typeof t)this.template.remove(t);else{if(!this.gtNode.core.dynamicTemplate)return this.template.remove(t.parent.children.indexOf(t));{const n=this.templates.find(r=>r.templateID===t.outletID);if(n)return n.remove(t.parent.children.filter(r=>r.outletID===t.outletID).indexOf(t));console.warn("\u8be5\u7ec4\u4ef6\u672a\u5728\u9875\u9762\u663e\u793a\uff1a%O",t)}}}move(t,n){return this.template.move(t,n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.Fo),e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ne,7),e.Gf(ne,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.templates=r)}},hostVars:74,hostBindings:function(t,n){2&t&&(e.uIk("data-id",n.id)("data-type",n.type)("data-root",n.root)("data-draggable",n.draggable)("data-can-has-child",n.canHasChild)("data-droppable",n.droppable),e.Udp("font-size",n.fontSize)("width",n.width)("height",n.height)("margin",n.margin)("padding",n.padding)("display",n.display)("position",n.position)("float",n.float)("overflow",n.overflow)("flex-direction",n.flexDirection)("flex-grow",n.flexGrow)("flex-shrink",n.flexShrink)("flex-wrap",n.flexWrap)("justify-content",n.justifyContent)("align-items",n.alignItems)("align-content",n.alignContent)("background",n.background)("color",n.color)("text-align",n.textAlign)("left",n.left)("top",n.top)("right",n.right)("bottom",n.bottom)("z-index",n.zIndex)("border",n.border)("border-left",n.borderLeft)("border-right",n.borderRight)("border-top",n.borderTop)("border-bottom",n.borderBottom)("font-weight",n.fontWeight),e.ekj("gt-node",n.gtClass)("gt-slot",n.gtSlot)("opacity-25",n.isHidden)("clearfix",n.clearfix))},decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),hn=(()=>{class i{transform(t,...n){return t instanceof y.Sl||"string"==typeof t&&/\${.+?}/.test(t)?"~~\u6570\u636e\u7ed1\u5b9a~~":t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"dataBinding",type:i,pure:!1}),i})();var be=b(3369);const Cl=["gt-division",""];function bl(i,o){}let it=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["div","gt-division",""]],features:[e.qOj],attrs:Cl,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,bl,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),i})();const vl=["gt-image",""];let Tl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["img","gt-image",""]],hostVars:3,hostBindings:function(t,n){2&t&&e.Ikx("src",n.gtNode.property.src,e.LSH)("alt",n.gtNode.property.alt)("title",n.gtNode.property.title)},features:[e.qOj],attrs:vl,decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),Sl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-text"]],features:[e.qOj],decls:2,vars:3,template:function(t,n){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,n.property.text))},dependencies:[hn],encapsulation:2}),i})(),El=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:x,useValue:{root:it,division:it,template:it,slot:it,outlet:it,text:Sl,image:Tl},multi:!0},{provide:M,useValue:{division:'<div style="width: 100px;height:100px;"></div>',slot:'<div class="gt-node gt-slot" style="width: 100px;height:100px;"></div>',text:"<span>Some Text</span>",image:"<img src='...' alt='...'/>"},multi:!0},{provide:w,multi:!0,useFactory:be.Tf}],imports:[h.ez,nt]}),i})();function yl(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",3)(2,"h2",4)(3,"button",5),e._uU(4," \u5360\u4f4d\u6807\u9898 "),e.qZA()(),e.TgZ(5,"div",6)(6,"div",7),e._uU(7,"\u5360\u4f4d\u6587\u672c"),e.qZA()()(),e.BQk())}function xl(i,o){}function Ol(i,o){if(1&i&&(e.TgZ(0,"div",3)(1,"h2",4)(2,"button",8),e._uU(3),e.qZA()(),e.TgZ(4,"div",6)(5,"div",7),e.YNc(6,xl,0,0,"ng-template",9),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t.title," "),e.xp6(2),e.uIk("data-droppable",t.id),e.xp6(1),e.Q6J("templateID",t.id)}}let Nl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion"]],features:[e.qOj],decls:3,vars:2,consts:[["id","accordionExample",1,"accordion"],[4,"ngIf"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["type","button","data-bs-toggle","collapse","aria-expanded","true",1,"accordion-button"],["gtTemplate","",3,"templateID"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,yl,8,0,"ng-container",1),e.YNc(2,Ol,7,3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!(null!=n.gtNode.property.accordionItems&&n.gtNode.property.accordionItems.length)),e.xp6(1),e.Q6J("ngForOf",n.gtNode.property.accordionItems))},dependencies:[h.sg,h.O5,ne],encapsulation:2}),i})();function Ml(i,o){1&i&&(e.ynx(0),e._uU(1,"\u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01 "),e.BQk())}function Dl(i,o){}function wl(i,o){1&i&&e._UZ(0,"button",4)}let Al=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-alert"]],features:[e.qOj],decls:4,vars:5,consts:[["data-droppable","","role","alert",1,"alert",3,"ngClass"],[4,"ngIf"],["gtTemplate",""],["type","button","class","btn-close","data-bs-dismiss","alert","aria-label","Close",4,"ngIf"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ml,2,0,"ng-container",1),e.YNc(2,Dl,0,0,"ng-template",2),e.YNc(3,wl,1,0,"button",3),e.qZA()),2&t&&(e.ekj("alert-dismissible",n.gtNode.property.dismissible),e.Q6J("ngClass","alert-"+n.gtNode.property.type),e.xp6(1),e.Q6J("ngIf",!n.gtNode.children.length),e.xp6(2),e.Q6J("ngIf",n.gtNode.property.dismissible))},dependencies:[h.mk,h.O5,ne],encapsulation:2}),i})();const Rl=["button-group",""];function Il(i,o){}let kl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["div","button-group",""]],hostVars:8,hostBindings:function(t,n){2&t&&e.ekj("btn-group","horizontal"===n.gtNode.property.orientation)("btn-group-vertical","vertical"===n.gtNode.property.orientation)("btn-group-lg","lg"===n.gtNode.property.size)("btn-group-sm","sm"===n.gtNode.property.size)},features:[e.qOj],attrs:Rl,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Il,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),i})();function Pl(i,o){if(1&i&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.gtNode.property.title," ")}}function Ll(i,o){}let Gl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-card"]],features:[e.qOj],decls:5,vars:2,consts:[[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],["gtTemplate",""],[1,"card-footer"],[1,"card-header"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pl,2,1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ll,0,0,"ng-template",3),e.qZA(),e._UZ(4,"div",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.gtNode.property.showTitle),e.xp6(1),e.uIk("data-droppable",n.droppable))},dependencies:[h.O5,ne],encapsulation:2}),i})(),Fl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:x,useValue:{card:Gl,accordion:Nl,alert:Al,buttonGroup:kl},multi:!0},{provide:w,useFactory:be.rT,multi:!0},{provide:M,useValue:{card:"<div class='card'>\n\t\t  <div class='card-header' *ngIf='gtNode.property.showTitle'>\u6807\u9898</div>\n\t\t  <div class='card-body'>\u5361\u7247\u5185\u5bb9</div>\n      <div class='card-footer'></div>\n\t  </div>",alert:"<div class='alert alert-primary' role='alert'>\n  \u9ed8\u8ba4\u6587\u672c\uff0c\u6e32\u67d3\u6a21\u5f0f\u4e0d\u4f1a\u5c55\u793a\uff01\n</div>",accordion:"<div class='accordion'>\n  <div class='accordion-item'>\n    <h2 class='accordion-header'>\n      <button class='accordion-button' type='button'>\n        \u5360\u4f4d\u6807\u9898\n      </button>\n    </h2>\n    <div class='accordion-collapse collapse show'>\n      <div class='accordion-body'>\u5360\u4f4d\u6587\u672c\n      </div>\n    </div>\n  </div>\n</div>",buttonGroup:"<div class='btn-group'>\n  <button type='button' class='btn btn-primary'>\u6309\u94ae1</button>\n  <button type='button' class='btn btn-primary'>\u6309\u94ae2</button>\n</div>"},multi:!0}],imports:[h.ez,nt]}),i})();const Bl=["gt-button","","type","button"];let Zl=(()=>{class i extends z{get className(){return["btn","gt-node",this.gtNode.property.buttonSize,this.gtNode.property.buttonColor,this.gtNode.property.buttonType].join(" ")}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["button","gt-button","","type","button"]],hostVars:2,hostBindings:function(t,n){2&t&&e.Tol(n.className)},features:[e.qOj],attrs:Bl,decls:2,vars:3,template:function(t,n){1&t&&(e._uU(0),e.ALo(1,"dataBinding")),2&t&&e.Oqu(e.lcZ(1,1,n.gtNode.property.text))},dependencies:[hn],encapsulation:2}),i})();const Jl=["gt-form",""];function Ul(i,o){}let Hl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["form","gt-form",""]],features:[e.qOj],attrs:Jl,decls:1,vars:0,consts:[["gtTemplate",""]],template:function(t,n){1&t&&e.YNc(0,Ul,0,0,"ng-template",0)},dependencies:[ne],encapsulation:2}),i})();function Yl(i,o){if(1&i&&(e.TgZ(0,"label",4),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}function $l(i,o){1&i&&(e.TgZ(0,"button",5),e._uU(1," - "),e.qZA())}function ql(i,o){1&i&&(e.TgZ(0,"button",5),e._uU(1," + "),e.qZA())}let Vl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-input"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:5,vars:10,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],["type","button","class","btn btn-outline-secondary",4,"ngIf"],["type","text",1,"form-control",3,"ngClass","disabled","readonly"],[1,"form-label"],["type","button",1,"btn","btn-outline-secondary"]],template:function(t,n){1&t&&(e.YNc(0,Yl,2,1,"label",0),e.TgZ(1,"div",1),e.YNc(2,$l,2,0,"button",2),e._UZ(3,"input",3),e.YNc(4,ql,2,0,"button",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("ngIf","number"===n.property.inputType),e.xp6(1),e.Akn(n.property.inputType),e.Q6J("ngClass",n.gtNode.property.inputSize)("disabled",n.gtNode.property.disabled)("readonly",n.gtNode.property.readonly),e.uIk("placeholder",n.gtNode.property.placeholder),e.xp6(1),e.Q6J("ngIf","number"===n.property.inputType))},dependencies:[h.mk,h.O5],encapsulation:2}),i})();function Ql(i,o){if(1&i&&(e.TgZ(0,"label",5),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.inputType))}}function zl(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.YNc(2,Ql,3,3,"label",4),e.qZA()),2&i){const t=e.oxw();e.ekj("form-check-inline","form-check-inline"===t.property.layout)("form-check-reverse","form-check-reverse"===t.property.layout),e.xp6(1),e.Q6J("type",t.property.inputType),e.xp6(1),e.Q6J("ngIf",t.property.showLabel)}}function jl(i,o){if(1&i&&(e.TgZ(0,"label",5),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function Wl(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.YNc(2,jl,2,1,"label",4),e.qZA()),2&i){const t=e.oxw();e.ekj("form-check-inline","form-check-inline"===t.property.layout)("form-check-reverse","form-check-reverse"===t.property.layout),e.xp6(1),e.Q6J("type",t.property.inputType),e.xp6(1),e.Q6J("ngIf",t.property.showLabel)}}let Gi=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-radio"]],features:[e.qOj],decls:2,vars:2,consts:[["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngIf"],["class","form-check",3,"form-check-inline","form-check-reverse",4,"ngFor","ngForOf"],[1,"form-check"],[1,"form-check-input",3,"type"],["class","form-check-label",4,"ngIf"],[1,"form-check-label"]],template:function(t,n){1&t&&(e.YNc(0,zl,3,6,"div",0),e.YNc(1,Wl,3,6,"div",1)),2&t&&(e.Q6J("ngIf",!n.property.options.length),e.xp6(1),e.Q6J("ngForOf",n.property.options))},dependencies:[h.sg,h.O5,h.gd],encapsulation:2}),i})();function Kl(i,o){if(1&i&&(e.TgZ(0,"label",3),e._uU(1),e.ALo(2,"dataBinding"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.property.labelText))}}let Xl=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-select"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:4,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-select",3,"ngClass","disabled"],[1,"form-label"]],template:function(t,n){1&t&&(e.YNc(0,Kl,3,3,"label",0),e.TgZ(1,"div",1),e._UZ(2,"select",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("ngClass",n.property.inputSize)("disabled",n.property.disabled))},dependencies:[h.mk,h.O5,hn],encapsulation:2}),i})();function ec(i,o){if(1&i&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.gtNode.property.labelText)}}let tc=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-textarea"]],hostAttrs:[1,"d-block"],features:[e.qOj],decls:3,vars:5,consts:[["class","form-label",4,"ngIf"],[1,"input-group","has-validation",3,"ngClass"],[1,"form-control",3,"rows","placeholder","disabled"],[1,"form-label"]],template:function(t,n){1&t&&(e.YNc(0,ec,2,1,"label",0),e.TgZ(1,"div",1),e._UZ(2,"textarea",2),e.qZA()),2&t&&(e.Q6J("ngIf",n.gtNode.property.showLabel),e.xp6(1),e.Q6J("ngClass",n.property.inputSize),e.xp6(1),e.Q6J("rows",n.property.textareaRows)("placeholder",n.gtNode.property.placeholder||"")("disabled",n.gtNode.property.disabled))},dependencies:[h.mk,h.O5],encapsulation:2}),i})(),nc=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-toggle"]],features:[e.qOj],decls:4,vars:0,consts:[[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input"],[1,"form-check-label"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.TgZ(2,"label",2),e._uU(3,"\u5207\u6362\u6309\u94ae"),e.qZA()())},encapsulation:2}),i})(),ic=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:x,useValue:{radio:Gi,checkbox:Gi,toggle:nc,button:Zl,input:Vl,form:Hl,textarea:tc,select:Xl},multi:!0},{provide:M,useValue:{button:"<button class='btn btn-primary' type='button'>Button</button>",select:"<select class='form-select'><option selected>Select</option></select>",input:"<input type='text' class='form-control' placeholder='Input'>",datepicker:"<input type='text' class='form-control' placeholder='Datepicker'>",textarea:"<textarea class='form-control'></textarea>",radio:'<div class="form-check"><input class="form-check-input" type="radio"><label class="form-check-label">RADIO</label></div>',checkbox:'<div class="form-check"><input class="form-check-input" type="checkbox"><label class="form-check-label">CHECKBOX</label></div>',form:"<div style='1px dotted #06366f;width: 100px;height:100px;'></div>",toggle:"<div class='form-check form-switch'><input type='checkbox' class='form-check-input' role='switch'><label class='form-check-label'>\u5207\u6362\u6309\u94ae</label></div>"},multi:!0},{provide:w,useFactory:be.Am,multi:!0}],imports:[h.ez,_.u5,nt]}),i})();const oc=["canvas"];let rc=(()=>{class i extends z{ngOnInit(){super.ngOnInit(),this.draw(this.canvas.nativeElement.getContext("2d"))}draw(t){(0,be.u1)(t,this.gtNode.property.title,this.gtNode.property.data,this.gtNode.property.gaugeMax,this.gtNode.property.gaugeMin,this.gtNode.property.direction),requestAnimationFrame(()=>this.draw(t))}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-battery"]],viewQuery:function(t,n){if(1&t&&e.Gf(oc,7),2&t){let r;e.iGM(r=e.CRH())&&(n.canvas=r.first)}},features:[e.qOj],decls:7,vars:3,consts:[[1,"battery-title"],[1,"battery-canvas","flex-grow-1","overflow-hidden"],["canvas",""],[1,"battery-value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"canvas",null,2),e.qZA(),e.TgZ(5,"div",3),e._uU(6),e.qZA()),2&t&&(e.xp6(1),e.Oqu(n.gtNode.property.title),e.xp6(5),e.AsE(" ",n.gtNode.property.get("data")||0,"/",n.gtNode.property.gaugeMax," "))},encapsulation:2}),i})(),sc=(()=>{class i{constructor(t,n){this.viewContainerRef=t,n.runOutsideAngular(()=>{this.gauge=new be.aC(t.element.nativeElement.parentElement),this.gauge.value=80})}set min(t){this.gauge.min=t,this.gauge.render()}set max(t){this.gauge.max=+t,this.gauge.render()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","gt-gauge",""]],inputs:{min:"min",max:"max"}}),i})();function ac(i,o){}let lc=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-gauge"]],features:[e.qOj],decls:3,vars:3,consts:[["gt-gauge","",3,"max","min"],[1,"px-2","text-center"]],template:function(t,n){1&t&&(e.YNc(0,ac,0,0,"ng-template",0),e.TgZ(1,"div",1),e._uU(2),e.qZA()),2&t&&(e.Q6J("max",n.gtNode.property.gaugeMax)("min",n.gtNode.property.gaugeMin),e.xp6(2),e.Oqu(n.gtNode.property.title))},dependencies:[sc],encapsulation:2}),i})();var cc=b(8870);let dc=(()=>{class i extends z{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-water"]],features:[e.qOj],decls:6,vars:7,consts:[[1,"position-relative","h-100"],["gt-waterBall","",1,"d-block","mx-auto",3,"value","max","min","color","background"],[1,"position-absolute","top-50","start-50","translate-middle","text-white",2,"margin-top","-14px"],[1,"text-truncate","text-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"canvas",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",n.gtNode.property.data)("max",n.gtNode.property.gaugeMax)("min",n.gtNode.property.gaugeMin)("color",n.gtNode.property.color)("background",n.gtNode.property.background),e.xp6(2),e.Oqu(n.gtNode.property.data),e.xp6(2),e.Oqu(n.gtNode.property.title))},dependencies:[cc.a],encapsulation:2}),i})(),_c=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:x,useValue:{gauge:lc,water:dc,battery:rc},multi:!0},{provide:w,useFactory:be.Nt,multi:!0},{provide:M,useValue:{gauge:"<div>Gauge</div>",water:"<div>Water</div>",battery:"<div>Battery</div>"},multi:!0}],imports:[nt,be.br,be.br]}),i})(),uc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[El,_c,ic,Fl]}),i})();var pc=b(5037);function hc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirm.emit())}),e.SDv(2,13),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancel.emit())}),e.SDv(4,15),e.qZA()()}}b(9812);const gc=["*"],mc=(0,I.X$)("fade",[(0,I.SB)("in",(0,I.oB)({transform:"matrix(1,0,0,1,0,0)",opacity:1})),(0,I.eR)("void => *",[(0,I.oB)({transform:"matrix(.9,0,0,.9,0,30)",opacity:0}),(0,I.jt)("200ms cubic-bezier(0, 0, 0.2, 1)")])]);let Ae=(()=>{class i{constructor(){this.size="md",this.confirm=new e.vpe,this.cancel=new e.vpe}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-modal"]],inputs:{modalTitle:"modalTitle",size:"size",noFooter:"noFooter",fullscreen:"fullscreen"},outputs:{confirm:"confirm",cancel:"cancel"},ngContentSelectors:gc,decls:14,vars:9,consts:function(){let o,t;return o=" \u786E\u5B9A ",t=" \u53D6\u6D88 ",[["cdkTrapFocus","","tabindex","-1","aria-modal","true","role","dialog",1,"modal","d-block",3,"cdkTrapFocusAutoCapture"],[1,"modal-dialog","modal-dialog-scrollable",3,"ngClass"],["cdkDrag","","cdkDragBoundary","body",1,"modal-content",3,"cdkDragStartDelay"],["cdkDrag","cdkDrag"],["cdkDragHandle","",1,"modal-header"],[1,"modal-title","flex-grow-1"],["type","button",1,"btn","btn-link",3,"mousedown","click"],[1,"gt-icon"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-close",3,"mousedown","click"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],o,["type","button",1,"btn","btn-link",3,"click"],t]},template:function(t,n){if(1&t){const r=e.EpF();e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2,3)(4,"div",4)(5,"h4",5),e._uU(6),e.qZA(),e.TgZ(7,"button",6),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(){e.CHM(r);const a=e.MAs(3);return n.fullscreen=!n.fullscreen,e.KtG(a.reset())}),e.TgZ(8,"i",7),e._uU(9),e.qZA()(),e.TgZ(10,"button",8),e.NdJ("mousedown",function(a){return a.stopPropagation()})("click",function(){return n.cancel.emit()}),e.qZA()(),e.TgZ(11,"div",9),e.Hsn(12),e.qZA(),e.YNc(13,hc,5,0,"div",10),e.qZA()()()}2&t&&(e.Q6J("cdkTrapFocusAutoCapture",!0),e.xp6(1),e.ekj("modal-fullscreen",n.fullscreen),e.Q6J("ngClass","modal-"+n.size),e.xp6(1),e.Q6J("@fade",void 0)("cdkDragStartDelay",50),e.xp6(4),e.Oqu(n.modalTitle),e.xp6(3),e.Oqu(n.fullscreen?"minimize":"maximize"),e.xp6(4),e.Q6J("ngIf",!n.noFooter))},dependencies:[Ne,Qe,h.mk,h.O5,Mo],encapsulation:2,data:{animation:[mc]}}),i})(),Cc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();function vc(i,o){1&i&&e._UZ(0,"hr",4)}function Tc(i,o){1&i&&e._UZ(0,"i",10)}function Sc(i,o){if(1&i&&(e.TgZ(0,"small",11),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.desc)}}function Ec(i,o){1&i&&e._UZ(0,"i",12)}function yc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onClick(s,r))})("mouseenter",function(r){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.mouseenter(r,s))}),e.YNc(1,Tc,1,0,"i",6),e.TgZ(2,"span",7),e._uU(3),e.qZA(),e.YNc(4,Sc,2,1,"small",8),e.YNc(5,Ec,1,0,"i",9),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.ekj("active",t.active)("disabled",t.disabled),e.xp6(1),e.Q6J("ngIf",t.checked),e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("ngIf",t.desc),e.xp6(1),e.Q6J("ngIf",t.children)}}function xc(i,o){if(1&i&&(e.ynx(0),e.YNc(1,vc,1,0,"hr",2),e.YNc(2,yc,6,8,"a",3),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.divider),e.xp6(1),e.Q6J("ngIf",!t.divider)}}const Oc=(0,I.X$)("fade",[(0,I.SB)("in",(0,I.oB)({opacity:1})),(0,I.eR)("void => *",[(0,I.oB)({opacity:0}),(0,I.jt)("200ms ease-out")])]);let Nc=(()=>{class i{constructor(t){this.menu=t}preventDefault(t){t.preventDefault(),t.stopPropagation()}mouseenter(t,n){t.stopPropagation(),t.preventDefault(),(0,P.R)(t.target,"mousemove").pipe(function bc(i,o){return ze((t,n)=>o?o(t[i],n[i]):t[i]===n[i])}("target"),me(200),(0,B.R)((0,P.R)(t.target,"mouseleave"))).subscribe(()=>{const{children:r,disabled:s}=n;this.menu.create(t,s?[]:r||[],this.level+1)})}onClick(t,n){if(n.stopPropagation(),t.disabled||t.children&&t.children.length)return n.stopPropagation();t.onclick&&t.onclick(t,n),this.menu.destroy()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(gn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-context-menu"]],hostBindings:function(t,n){1&t&&e.NdJ("pointerdown",function(s){return n.preventDefault(s)})},decls:2,vars:2,consts:[[1,"dropdown-menu","show","shadow",2,"position","static"],[4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],["class","dropdown-item d-flex justify-content-between","href","javascript:void(0);",3,"active","disabled","click","mouseenter",4,"ngIf"],[1,"dropdown-divider"],["href","javascript:void(0);",1,"dropdown-item","d-flex","justify-content-between",3,"click","mouseenter"],["class","check-icon",4,"ngIf"],[1,"text-main"],["class","text-desc text-muted ms-3",4,"ngIf"],["class","caret",4,"ngIf"],[1,"check-icon"],[1,"text-desc","text-muted","ms-3"],[1,"caret"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,xc,3,2,"ng-container",1),e.qZA()),2&t&&(e.Q6J("@fade","in"),e.xp6(1),e.Q6J("ngForOf",n.menus))},dependencies:[h.sg,h.O5],encapsulation:2,data:{animation:[Oc]}}),i})();const Mc=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"}];let gn=(()=>{class i{constructor(t,n){this.injector=t,this.overlay=n,this.onclick=new e.vpe,this.overlayRefs=[],this.currentMenus=[],this.destroy=()=>{this.overlayRefs.forEach(r=>{r.dispose()}),this.overlayRefs=[],this.unbindEvents()}}create(t,n,r=0){if(0===this.overlayRefs.length&&this.bindEvents(),!(this.currentMenus.indexOf(n)>-1)&&(this.overlayRefs.splice(r,this.overlayRefs.length).forEach(s=>s.dispose()),this.currentMenus.splice(r,this.overlayRefs.length),n&&n.length)){this.currentMenus.push(n);const s=e.zs3.create({providers:[],parent:this.injector}),a=new Y.C5(Nc,null,s),l=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(0===r?t:t.target).withPositions(Mc)}),c=l.attach(a);c.instance.menus=n,c.instance.level=r,this.overlayRefs.push(l)}}bindEvents(){window.addEventListener("pointerdown",this.destroy,{once:!0,capture:!1}),window.addEventListener("wheel",this.destroy,{once:!0,capture:!0}),window.addEventListener("blur",this.destroy,{once:!0,capture:!0}),window.addEventListener("resize",this.destroy,{once:!0,capture:!0})}unbindEvents(){window.removeEventListener("pointerdown",this.destroy),window.removeEventListener("wheel",this.destroy),window.removeEventListener("blur",this.destroy),window.removeEventListener("resize",this.destroy)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(X.aV))},i.\u0275dir=e.lG2({type:i,outputs:{onclick:"onclick"}}),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Dc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[gn],imports:[h.ez]}),i})(),mn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Pe,h.ez,In]}),i})();class wc{constructor(o,t){this.input=o,this.output=t}}let Ac=(()=>{class i{constructor(t){this.startDrawConnection=new m.x,this.drawingConnection=new m.x,this.endDrawConnection=new m.x,this.lastSocket=null,this.addConnection=new m.x,this.connections=[],this.nodeDragging=new m.x,t.runOutsideAngular(()=>{this.startDrawConnection.pipe((0,ae.w)(n=>{this.lastSocket=n.socket;const{x:r,y:s}=this.svgContainer.getBoundingClientRect(),a=n.socket.element.getBoundingClientRect();return(0,P.R)(document,"mousemove").pipe((0,B.R)((0,F.T)(this.endDrawConnection.asObservable(),(0,P.R)(document,"mouseup").pipe((0,N.b)(l=>this.endDrawConnection.next({event:l,node:null,socket:null})))).pipe((0,Q.q)(1))),(0,N.b)(l=>{this.drawingConnection.next("output"===this.lastSocket.type?{start:{x:(a.left+a.right)/2-r,y:(a.top+a.bottom)/2-s},end:{x:l.pageX-r,y:l.pageY-s}}:{end:{x:(a.left+a.right)/2-r,y:(a.top+a.bottom)/2-s},start:{x:l.pageX-r,y:l.pageY-s}})}))})).subscribe(),this.endDrawConnection.asObservable().subscribe(({socket:n})=>{n&&this.lastSocket&&n.node!==this.lastSocket.node&&n!==this.lastSocket&&this.addConnection.next(function Rc(i,o){if(i.type===o.type)throw new Error;return"input"===i.type?{input:i,output:o}:{input:o,output:i}}(n,this.lastSocket)),this.lastSocket=null}),this.addConnection.asObservable().subscribe(({input:n,output:r})=>{const s=new wc(n,r);n.addConnection(s),r.addConnection(s),this.connections.push(s)})})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ic=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Ac],imports:[h.ez,mn,Re,Pe,wi,Di]}),i})();function kc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("mouseenter",function(){const s=e.CHM(t).index,a=e.oxw().index,l=e.oxw();return e.KtG(l.current=[a,s])}),e.qZA()}if(2&i){const t=o.index,n=e.oxw().index,r=e.oxw();e.ekj("active",n<=r.current[0]&&t<=r.current[1])}}function Pc(i,o){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,kc,1,2,"div",3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rows)}}let Lc=(()=>{class i{constructor(){this.rows=Array(10).fill(0),this.current=[0,0],this.modalClose=new e.vpe}onclick(){this.modalClose.emit(this.current)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-create-table"]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.onclick()})},outputs:{modalClose:"modalClose"},decls:2,vars:1,consts:[[1,"p-2","bg-white","rounded","border","shadow"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["class","table-cell border",3,"active","mouseenter",4,"ngFor","ngForOf"],[1,"table-cell","border",3,"mouseenter"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pc,2,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.rows))},dependencies:[h.sg],styles:[".table-cell[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;margin:.15rem}.table-cell.active[_ngcontent-%COMP%]{background-color:var(--bs-light);border-color:var(--bs-border-color)}"]}),i})();const Fc={provide:ge,useFactory:(i,o)=>(t,n,r,s)=>{switch(n){case"gtNode":const a=function Gc(i,o,t){return[{label:"\u5411\u524D\u79FB\u52A8",desc:"\u2318\u21e6",disabled:!(o.parent&&o.parent.children.indexOf(o)>0),onclick:()=>i.dropNode(o,o.parent,o.parent.children.indexOf(o)-1)},{label:"\u5411\u540E\u79FB\u52A8",desc:"\u2318\u21e8",disabled:!(o.parent&&o.parent.children.indexOf(o)<o.parent.children.length-1),onclick:()=>i.dropNode(o,o.parent,o.parent.children.indexOf(o)+1)},{label:"\u5411\u4E0A\u79FB\u52A8",desc:"\u2318\u21e7\ufe0f",disabled:!(o.parent&&o.parent.parent),onclick:()=>i.dropNode(o,o.parent.parent,o.parent.parent.children.indexOf(o.parent)+1)},{divider:!0},{label:"\u590D\u5236",disabled:!i.selected.length||!i.selected[0].core.canCopy,onclick:()=>i.copyNode()},{label:"\u7C98\u8D34",disabled:1!==i.selected.length||!i.copiedNode.length||!i.selected[0].core.canHasChild||!i.selected[0].core.canPaste,onclick:()=>{i.pasteNode(o.core.canPaste?o:o.parent)}},{label:"\u526A\u5207",disabled:!i.selected.length||!i.selected[0].core.canCut},{label:"\u5220\u9664",desc:"DEL",disabled:!i.selected.length||!i.selected[0].core.canDelete,onclick:()=>i.removeNode()},{divider:!0},{label:"\u590D\u5236\u6837\u5F0F",disabled:1!==i.selected.length||!i.selected[0].core.canCopyStyle,onclick:()=>i.copyStyle()},{label:"\u7C98\u8D34\u6837\u5F0F",disabled:!i.copiedStyle||!i.selected.length||!i.selected[0].core.canPasteStyle,onclick:()=>i.pasteStyle()},{divider:!0},{label:"\u751F\u6210\u7F51\u683C",disabled:0===i.selected.filter(({core:n})=>n.canHasChild).length,onclick:(n,r)=>{const s=t.create({hasBackdrop:!0,backdropClass:"",positionStrategy:t.position().flexibleConnectedTo({x:r.clientX,y:r.clientY}).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])}),a=new Y.C5(Lc),l=s.attach(a);(0,F.T)(s.backdropClick(),l.instance.modalClose.pipe((0,N.b)(([c,d])=>{i.selected.forEach(p=>{i.addNode("division",p,-1,{type:"division",style:{},children:new Array(c+1).fill({type:"division",style:{display:"flex",flexDirection:"row",width:"100%"},children:new Array(d+1).fill({type:"division",style:{width:100/d+"%"}})})})})}))).pipe((0,Q.q)(1),(0,N.b)(()=>s.dispose())).subscribe()}}]}(t,r,o);i.create(s,a);break;case"customElement":i.create(s,[{label:"\u4FEE\u6539"},{label:"\u5220\u9664",onclick(){t.customComponent.splice(t.customComponent.indexOf(r),1)}}])}},deps:[gn,X.aV]},Bc={provide:Je,useValue:[{title:"\u5E03\u5C40",elements:[{label:"\u884C\u5E03\u5C40",type:"division",icon:"row",content:{style:{display:"flex"}}},{label:"\u5217\u5E03\u5C40",type:"division",icon:"column"},{label:"\u666E\u901A\u5E03\u5C40",type:"division",icon:"division"},{label:"\u5361\u7247",type:"card",icon:"panel"},{label:"\u6298\u53E0\u9762\u677F",type:"accordion",icon:"panel"},{label:"\u8B66\u544A",type:"alert",icon:"bell"},{label:"\u6309\u94ae\u7ec4",type:"buttonGroup",icon:"button_group"}]},{title:"\u901A\u7528",elements:[{label:"\u6587\u5B57",type:"text",icon:"text"},{label:"\u56fe\u7247",type:"image",icon:"picture"}]},{title:"\u8868\u5355",elements:[{label:"\u8868\u5355",type:"form",icon:"form"},{label:"\u6309\u94AE",type:"button",icon:"button"},{label:"\u8F93\u5165\u6846",type:"input",icon:"input"},{label:"\u5355\u9009\u6309\u94AE",type:"radio",icon:"radio",content:{property:{inputType:"radio"}}},{label:"\u590D\u9009\u6309\u94AE",type:"checkbox",icon:"checkbox",content:{property:{inputType:"checkbox"}}},{label:"\u4E0B\u62C9\u6846",type:"select",icon:"select"},{label:"\u6587\u672C\u57DF",type:"textarea",icon:"textarea"},{label:"\u5207\u6362\u6309\u94AE",type:"toggle",icon:"toggle"}]},{title:"\u7EC4\u4EF6",elements:[{label:"\u4EEA\u8868\u76D8",type:"gauge",icon:"gauge"},{label:"\u6C34\u4F4D\u56FE",type:"water",icon:"water"},{label:"\u5360\u4F4D\u7B26",type:"slot",icon:"slot"},{label:"\u7535\u6C60",type:"battery",icon:"battery"}]}]};function Zc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeParam(s))}),e.TgZ(7,"i",10),e._uU(8,"minus"),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.id)}}let Ji=(()=>{class i{constructor(){this.confirm=new e.vpe,this.cancel=new e.vpe}ngOnInit(){this.params=Array.isArray(this.initialValue)?new Set(this.initialValue):new Set}_confirm(){this.confirm.emit(Array.from(this.params))}addParam(){this.params.add({title:this.paramKey,id:this.paramValue}),this.paramKey=null,this.paramValue=null}removeParam(t){this.params.delete(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-accordion-items"]],inputs:{gtNode:"gtNode"},outputs:{confirm:"confirm",cancel:"cancel"},decls:20,vars:4,consts:function(){let o,t;return o="Header",t="ID",[["modalTitle","Accordion Item \u7f16\u8f91","size","lg",3,"confirm","cancel"],[1,"table","table-bordered"],o,t,[2,"width","2rem"],[4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-link",3,"disabled"],[1,"gt-icon",3,"click"],["type","button",1,"btn","btn-link",3,"click"],[1,"gt-icon"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n._confirm()})("cancel",function(){return n.cancel.emit()}),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th"),e.SDv(5,2),e.qZA(),e.TgZ(6,"th"),e.SDv(7,3),e.qZA(),e._UZ(8,"th",4),e.qZA()(),e.TgZ(9,"tbody"),e.YNc(10,Zc,9,2,"tr",5),e.TgZ(11,"tr")(12,"td")(13,"input",6),e.NdJ("ngModelChange",function(s){return n.paramKey=s}),e.qZA()(),e.TgZ(14,"td")(15,"input",6),e.NdJ("ngModelChange",function(s){return n.paramValue=s}),e.qZA()(),e.TgZ(16,"td")(17,"button",7)(18,"i",8),e.NdJ("click",function(){return n.addParam()}),e._uU(19,"plus"),e.qZA()()()()()()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",n.params),e.xp6(3),e.Q6J("ngModel",n.paramKey),e.xp6(2),e.Q6J("ngModel",n.paramValue),e.xp6(2),e.Q6J("disabled",!n.paramKey||!n.paramValue))},dependencies:[h.sg,_.Fj,_.JJ,_.On,Ae],encapsulation:2}),i})(),Ui=(()=>{class i{constructor(){this.confirm=new e.vpe,this.cancel=new e.vpe,this.sourceID=null}_confirm(){this.confirm.emit(this.data)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-data-binding-modal"]],inputs:{data:"data"},outputs:{confirm:"confirm",cancel:"cancel"},decls:2,vars:1,consts:function(){let o;return o="\u6570\u636E\u7ED1\u5B9A",[["modalTitle",o,"size","sm",3,"confirm","cancel"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n._confirm()})("cancel",function(){return n.cancel.emit()}),e.TgZ(1,"input",1),e.NdJ("ngModelChange",function(s){return n.data=s}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngModel",n.data))},dependencies:[_.Fj,_.JJ,_.On,Ae],encapsulation:2}),i})();function Hc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",24),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeParam(s))}),e.TgZ(7,"i",25),e._uU(8,"minus"),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}let Hi=(()=>{class i{constructor(){this.confirm=new e.vpe,this.cancel=new e.vpe,this.params=new Set}addParam(){this.params.add({key:this.paramKey,value:this.paramValue}),this.paramKey=null,this.paramValue=null}removeParam(t){this.params.delete(t)}_confirm(){this.confirm.emit({id:this.id,type:this.type,args:[this.method,this.url,Array.from(this.params).reduce((t,{key:n,value:r})=>({...t,[n]:r}),{})]})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-data-source-modal"]],outputs:{confirm:"confirm",cancel:"cancel"},decls:48,vars:8,consts:function(){let o,t,n,r,s,a,l;return o="\u6570\u636E\u7ED1\u5B9A",t="\u7C7B\u578B",n="\u65B9\u6CD5",r="\u8DEF\u5F84",s="\u53C2\u6570",a="\u53C2\u6570\u540D",l="\u53C2\u6570\u503C",[["modalTitle",o,"size","lg",3,"confirm","cancel"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],t,[1,"form-select",3,"ngModel","ngModelChange"],["value","http"],["value","interval"],[1,"row","g-3"],[1,"col-md-6"],n,["value","post"],["value","get"],r,[1,"col-12"],["for","inputAddress",1,"form-label"],s,[1,"table","table-bordered"],a,l,[2,"width","2rem"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link",3,"disabled"],[1,"gt-icon",3,"click"],["type","button",1,"btn","btn-link",3,"click"],[1,"gt-icon"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n._confirm()})("cancel",function(){return n.cancel.emit()}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"ID"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(s){return n.id=s}),e.qZA()(),e.TgZ(5,"div",1)(6,"label",2),e.SDv(7,4),e.qZA(),e.TgZ(8,"select",5),e.NdJ("ngModelChange",function(s){return n.type=s}),e.TgZ(9,"option",6),e._uU(10,"HTTP"),e.qZA(),e.TgZ(11,"option",7),e._uU(12,"Interval"),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"label",2),e.SDv(16,10),e.qZA(),e.TgZ(17,"select",5),e.NdJ("ngModelChange",function(s){return n.method=s}),e.TgZ(18,"option",11),e._uU(19,"POST"),e.qZA(),e.TgZ(20,"option",12),e._uU(21,"GET"),e.qZA()()(),e.TgZ(22,"div",9)(23,"label",2),e.SDv(24,13),e.qZA(),e.TgZ(25,"input",3),e.NdJ("ngModelChange",function(s){return n.url=s}),e.qZA()(),e.TgZ(26,"div",14)(27,"label",15),e.SDv(28,16),e.qZA(),e.TgZ(29,"table",17)(30,"thead")(31,"tr")(32,"th"),e.SDv(33,18),e.qZA(),e.TgZ(34,"th"),e.SDv(35,19),e.qZA(),e._UZ(36,"th",20),e.qZA()(),e.TgZ(37,"tbody"),e.YNc(38,Hc,9,2,"tr",21),e.TgZ(39,"tr")(40,"td")(41,"input",3),e.NdJ("ngModelChange",function(s){return n.paramKey=s}),e.qZA()(),e.TgZ(42,"td")(43,"input",3),e.NdJ("ngModelChange",function(s){return n.paramValue=s}),e.qZA()(),e.TgZ(44,"td")(45,"button",22)(46,"i",23),e.NdJ("click",function(){return n.addParam()}),e._uU(47,"plus"),e.qZA()()()()()()()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.id),e.xp6(4),e.Q6J("ngModel",n.type),e.xp6(9),e.Q6J("ngModel",n.method),e.xp6(8),e.Q6J("ngModel",n.url),e.xp6(13),e.Q6J("ngForOf",n.params),e.xp6(3),e.Q6J("ngModel",n.paramKey),e.xp6(2),e.Q6J("ngModel",n.paramValue),e.xp6(2),e.Q6J("disabled",!n.paramKey||!n.paramValue))},dependencies:[h.sg,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.On,Ae],encapsulation:2}),i})();function Yc(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.activatePage(r.id))}),e._uU(11," \u7f16\u8f91 "),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.startEditPage(r))}),e._uU(13," \u4fee\u6539 "),e.qZA(),e.TgZ(14,"button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deletePage(r.id))}),e._uU(15," \u5220\u9664 "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.pageTitle),e.xp6(2),e.Oqu(t.pageDescription),e.xp6(2),e.Oqu(t.pageUrl),e.xp6(2),e.Oqu(t.pageParentID),e.xp6(2),e.Q6J("disabled","view"!==n.mode),e.xp6(2),e.Q6J("disabled","view"!==n.mode),e.xp6(2),e.Q6J("disabled","view"!==n.mode)}}function $c(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageTitle.errors)," ")}}function qc(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageDescription.errors)," ")}}function Vc(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageUrl.errors)," ")}}function Qc(i,o){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.pageTitle," ")}}function zc(i,o){if(1&i){const t=e.EpF();e.ynx(0,17),e.TgZ(1,"td"),e._UZ(2,"input",18),e.YNc(3,$c,3,3,"div",19),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",20),e.YNc(6,qc,3,3,"div",19),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"input",21),e.YNc(9,Vc,3,3,"div",19),e.qZA(),e.TgZ(10,"td")(11,"select",22),e._UZ(12,"option",23),e.YNc(13,Qc,2,2,"option",24),e.qZA()(),e.TgZ(14,"td")(15,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editPage(r))}),e._uU(16," \u5b8c\u6210 "),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.resetStatus())}),e._uU(18," \u53d6\u6d88 "),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.form),e.xp6(2),e.ekj("is-invalid",t.pageTitle.touched&&t.pageTitle.invalid),e.xp6(1),e.Q6J("ngIf",t.pageTitle.touched),e.xp6(2),e.ekj("is-invalid",t.pageDescription.touched&&t.pageDescription.invalid),e.xp6(1),e.Q6J("ngIf",t.pageDescription.touched),e.xp6(2),e.ekj("is-invalid",t.pageUrl.touched&&t.pageUrl.invalid),e.xp6(1),e.Q6J("ngIf",t.pageUrl.touched),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.pageList)}}function jc(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Yc,16,7,"ng-container",14),e.YNc(2,zc,19,12,"ng-container",10),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf","edit"!==t.mode),e.xp6(1),e.Q6J("ngIf","edit"===t.mode)}}function Wc(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageTitle.errors)," ")}}function Kc(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageDescription.errors)," ")}}function Xc(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.pageUrl.errors)," ")}}function ed(i,o){if(1&i&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.pageTitle," ")}}function td(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr",17)(1,"td"),e._UZ(2,"input",18),e.YNc(3,Wc,3,3,"div",19),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",20),e.YNc(6,Kc,3,3,"div",19),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"input",21),e.YNc(9,Xc,3,3,"div",19),e.qZA(),e.TgZ(10,"td")(11,"select",22),e._UZ(12,"option",23),e.YNc(13,ed,2,2,"option",24),e.qZA()(),e.TgZ(14,"td")(15,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addPage())}),e._uU(16," \u5b8c\u6210 "),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resetStatus())}),e._uU(18," \u53d6\u6d88 "),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.ekj("is-invalid",t.pageTitle.touched&&t.pageTitle.invalid),e.xp6(1),e.Q6J("ngIf",t.pageTitle.touched),e.xp6(2),e.ekj("is-invalid",t.pageDescription.touched&&t.pageDescription.invalid),e.xp6(1),e.Q6J("ngIf",t.pageDescription.touched),e.xp6(2),e.ekj("is-invalid",t.pageUrl.touched&&t.pageUrl.invalid),e.xp6(1),e.Q6J("ngIf",t.pageUrl.touched),e.xp6(3),e.Q6J("value",null),e.xp6(1),e.Q6J("ngForOf",t.pageList)}}let Yi=(()=>{class i{constructor(t){this.gt=t,this.modalClose=new e.vpe,this.mode="view",this.form=new _.cw({pageTitle:new _.NI(null,_.kI.required),pageDescription:new _.NI(null,_.kI.required),pageUrl:new _.NI(null,[_.kI.required,_.kI.pattern(/^[\w\-]+$/)]),pageParentID:new _.NI}),this.pageTitle=this.form.get("pageTitle"),this.pageDescription=this.form.get("pageDescription"),this.pageUrl=this.form.get("pageUrl"),this.pageParentID=this.form.get("pageParentID")}ngOnInit(){this.loadPageList()}loadPageList(){this.gt.log.next({type:"Manipulate Page",subType:"getPageList",message:null,data:null,callback:t=>{this.pageList=t}})}startAddPage(){this.mode="add"}addPage(){this.form.invalid?this.form.markAllAsTouched():this.gt.log.next({type:"Manipulate Page",subType:"addPage",message:null,data:this.form.value,callback:()=>{this.loadPageList(),this.resetStatus()}})}startEditPage(t){this.mode=t.mode="edit",this.pageTitle.setValue(t.pageTitle),this.pageDescription.setValue(t.pageDescription),this.pageUrl.setValue(t.pageUrl),this.pageParentID.setValue(t.pageParentID)}editPage(t){this.form.invalid?this.form.markAllAsTouched():this.gt.log.next({type:"Manipulate Page",subType:"editPage",message:null,data:{id:t.id,...this.form.value},callback:()=>{this.loadPageList(),this.resetStatus()}})}deletePage(t){this.gt.log.next({type:"Manipulate Page",subType:"deletePage",message:null,data:{id:t},callback:()=>this.loadPageList()})}activatePage(t){this.gt.log.next({type:"Manipulate Page",subType:"activatePage",message:null,data:{id:t}}),this.modalClose.emit()}resetStatus(){this.mode="view",this.form.reset()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-modal-pages"]],outputs:{modalClose:"modalClose"},decls:20,vars:3,consts:function(){let o,t,n,r,s,a,l;return o="\u9875\u9762\u5217\u8868",t="\u6807\u9898",n="\u63CF\u8FF0",r="\u8DEF\u5F84",s=" \u4E0A\u7EA7\u83DC\u5355 ",a=" \u64CD\u4F5C ",l=" \u6DFB\u52A0 ",[["modalTitle",o,"size","xl",3,"confirm","cancel"],[1,"table","table-bordered","table-hover","table-striped"],[2,"width","12rem"],t,n,r,s,[2,"width","11rem","min-width","11rem"],a,[4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[1,"d-grid","gap-2","mt-2"],[1,"btn","btn-light",3,"disabled","click"],l,[4,"ngIf"],[1,"btn","btn-light","btn-sm","me-2",3,"disabled","click"],[1,"btn","btn-light","btn-sm",3,"disabled","click"],[3,"formGroup"],["type","text","formControlName","pageTitle",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","pageDescription",1,"form-control"],["type","text","formControlName","pageUrl",1,"form-control"],["name","","id","","formControlName","pageParentID",1,"form-select"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-light","btn-sm","me-2",3,"click"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"invalid-feedback"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n.modalClose.emit()})("cancel",function(){return n.modalClose.emit()}),e.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.SDv(5,3),e.qZA(),e.TgZ(6,"th"),e.SDv(7,4),e.qZA(),e.TgZ(8,"th",2),e.SDv(9,5),e.qZA(),e.TgZ(10,"th",2),e.SDv(11,6),e.qZA(),e.TgZ(12,"th",7),e.SDv(13,8),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,jc,3,2,"tr",9),e.YNc(16,td,19,12,"tr",10),e.qZA()(),e.TgZ(17,"div",11)(18,"button",12),e.NdJ("click",function(){return n.startAddPage()}),e.SDv(19,13),e.qZA()()()),2&t&&(e.xp6(15),e.Q6J("ngForOf",n.pageList),e.xp6(1),e.Q6J("ngIf","add"===n.mode),e.xp6(2),e.Q6J("disabled","view"!==n.mode))},dependencies:[h.sg,h.O5,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.JL,_.sg,_.u,Ae,h.Ts],encapsulation:2}),i})();var nd=b(2076),id=b(6063);class od extends m.x{constructor(o=1/0,t=1/0,n=id.l){super(),this._bufferSize=o,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,t)}next(o){const{isStopped:t,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;t||(n.push(o),!r&&n.push(s.now()+a)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(o),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!o.closed;a+=n?1:2)o.next(s[a]);return this._checkFinalizedStatuses(o),t}_trimBuffer(){const{_bufferSize:o,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*o;if(o<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const a=t.now();let l=0;for(let c=1;c<n.length&&n[c]<=a;c+=2)l=c;l&&n.splice(0,l+1)}}}var rd=b(3099);const $i="https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.24.0/min/vs",ad=(0,Me.of)(null).pipe((0,J.U)(()=>{const i=document.createElement("script");return i.type="text/javascript",i.src=`${$i}/loader.js`,document.body.appendChild(i),i}),(0,ae.w)(i=>(0,P.R)(i,"load")),(0,ae.w)(()=>(window.require.config({paths:{vs:$i}}),(0,nd.D)(new Promise(i=>window.require(["vs/editor/editor.main"],i))))),function sd(i,o,t){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:o=1/0,refCount:r=!1,scheduler:t}=i):n=i??1/0,(0,rd.B)({connector:()=>new od(n,o,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1)),ld=["editor"];let cd=(()=>{class i{constructor(t){this.gt=t,this.confirm=new e.vpe,this.cancel=new e.vpe}ngAfterViewInit(){ad.subscribe(()=>{const t=monaco.editor.create(this.editor.nativeElement,{value:this.script,language:"typescript",lineNumbersMinChars:2,theme:this.gt.darkMode?"vs-dark":"vs"});t.onDidChangeModelContent(()=>this.script=t.getValue())})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gt-action-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(ld,7),2&t){let r;e.iGM(r=e.CRH())&&(n.editor=r.first)}},inputs:{script:"script"},outputs:{confirm:"confirm",cancel:"cancel"},decls:3,vars:0,consts:function(){let o;return o="\u4E8B\u4EF6\u7F16\u8F91\u5668",[["modalTitle",o,"size","xl",3,"confirm","cancel"],[1,"overflow-hidden","border",2,"height","36rem"],["editor",""]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("confirm",function(){return n.confirm.emit(n.script)})("cancel",function(){return n.cancel.emit()}),e._UZ(1,"div",1,2),e.qZA())},dependencies:[Ae],encapsulation:2}),i})();const ud=[Bc,{provide:v,useFactory:i=>o=>{switch(o.type){case"expression":case"action":{const t=i.create({hasBackdrop:!0}),n=t.attach(new Y.C5(cd));n.instance.script=o.args[0],(0,F.T)(n.instance.confirm.pipe((0,N.b)(r=>o.cb(r))),n.instance.cancel).pipe((0,Q.q)(1)).subscribe(()=>t.dispose());break}case"dataSource":{const t=i.create({hasBackdrop:!0}),n=t.attach(new Y.C5(Hi));(0,F.T)(n.instance.confirm.pipe((0,N.b)(r=>{o.gtNode.dataSource.add(r),o.cb()})),n.instance.cancel).pipe((0,Q.q)(1)).subscribe(()=>t.dispose());break}case"property":switch(o.args[0]){case"bindData":{const r=i.create({hasBackdrop:!0}),s=r.attach(new Y.C5(Ui));s.instance.data=o.args[2]&&o.args[2].data,(0,F.T)(s.instance.confirm.pipe((0,N.b)(a=>{o.cb(new y.Sl(a))})),s.instance.cancel).pipe((0,Q.q)(1)).subscribe(()=>r.dispose())}break;case"accordionItems":const t=i.create({hasBackdrop:!0}),n=t.attach(new Y.C5(Ji));n.instance.initialValue=o.args[1],(0,F.T)(n.instance.confirm.pipe((0,N.b)(r=>{o.cb(r)})),n.instance.cancel).pipe((0,Q.q)(1)).subscribe(()=>t.dispose())}}},deps:[X.aV],multi:!0},{provide:He,useFactory:(i,o)=>[{title:"\u64A4\u9500",icon:"rotate_ccw",get disabled(){return!i.history.get().length},onclick:()=>{i.undo()}},{title:"\u91CD\u505A",icon:"rotate_cw",get disabled(){return!i.undoHistory.get().length},onclick:()=>{i.redo()}},{title:"\u53C2\u8003\u7EBF",icon:"dashed_rect",get active(){return i.showReferenceLine},onclick(){i.showReferenceLine=!i.showReferenceLine}},{title:"\u6DFB\u52A0\u6570\u636E\u6E90",icon:"bind",onclick:()=>{}},{title:"\u9884\u89C8",icon:"preview",onclick:()=>{i.log.next({type:"preview",message:"\u6b63\u5728\u9884\u89c8 data \u4e3a %o \u7684\u9875\u9762",data:i.export()})}},{title:"\u4FDD\u5B58",icon:"save",onclick:()=>{i.log.next({type:"save",message:"\u4fdd\u5b58",data:i.exportString()})}},{title:"\u9875\u9762\u5217\u8868",icon:"list",onclick:()=>{const t=o.create({hasBackdrop:!0});t.attach(new Y.C5(Yi)).instance.modalClose.subscribe(()=>t.dispose())}}],deps:[V,X.aV]},Fc];let pd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:ud,imports:[h.ez,Dc,_.u5,Pe,In,Cc,_.UX,mn,Ic,mn]}),i})();var hd=b(3328),gd=b(9162);let md=(()=>{class i{constructor(){this.modalDismiss=new e.vpe}log(t){console.log(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gt-render"]],inputs:{data:"data"},outputs:{modalDismiss:"modalDismiss"},decls:2,vars:2,consts:function(){let o;return o="\u9884\u89C8",[["modalTitle",o,"size","xl",3,"noFooter","cancel"],[3,"data","log"]]},template:function(t,n){1&t&&(e.TgZ(0,"gt-modal",0),e.NdJ("cancel",function(){return n.modalDismiss.emit()}),e.TgZ(1,"gt-render",1),e.NdJ("log",function(s){return n.log(s)}),e.qZA()()),2&t&&(e.Q6J("noFooter",!0),e.xp6(1),e.Q6J("data",n.data))},dependencies:[gd.b,Ae],encapsulation:2}),i})();var fd=b(529);let Cd=(()=>{class i{constructor(t,n){this.overlay=t,this.http=n,this.currentID=localStorage.getItem("currentID"),this.getActivatedPage(),window.addEventListener("beforeunload",()=>this.ngOnDestroy())}ngOnDestroy(){this.currentID?localStorage.setItem("currentID",this.currentID):localStorage.removeItem("currentID")}getActivatedPage(){(this.currentID?this.http.get("getLatestConfigByID",{params:{id:this.currentID}}).pipe((0,J.U)(t=>{if(t){const{config:n}=t;return n}return this.currentID=null,null})):(0,Me.of)(null)).subscribe(t=>this.data=t)}log({type:t,message:n,data:r,subType:s,callback:a}){switch(t){case"preview":const l=this.overlay.create({hasBackdrop:!0,width:"90%",maxHeight:"90%",panelClass:"",positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically()}),c=l.attach(new Y.C5(md));c.instance.data=r,c.instance.modalDismiss.subscribe(()=>l.dispose()),console.info("Gt Message: "+n,r);break;case"save":return this.http.post("save",{data:r,id:this.currentID}).pipe((0,N.b)(({id:p})=>this.currentID=p)).subscribe(a);case"Manipulate Page":switch(s){case"getPageList":return this.http.get("getPageList").subscribe(a);case"addPage":return this.http.post("addPage",r).subscribe(a);case"editPage":return this.http.post("editPage",r).subscribe(a);case"deletePage":return this.http.post("deletePage",r).subscribe(a);case"activatePage":return(this.currentID=r.id)&&this.getActivatedPage()}break;case"init":const d=localStorage.getItem("selectedNode");d&&d.split(",").map(p=>{const u=this.gt.gt.getNodeById(p);u&&this.gt.gt.changeSelect(u,!0)}),console.info("[Gt Message]: "+n+" %O",r);break;case"error":console.error("[Gt Message]: "+n,r);break;case"warn":console.warn("[Gt Message]: "+n,r);break;default:"CHANGE_SELECT"===n&&r.length&&localStorage.setItem("selectedNode",r.map(p=>p.id).join(",")),console.info("[Gt Message]: "+n+" %O",r)}return null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.aV),e.Y36(fd.eN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gt-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(Li,7),2&t){let r;e.iGM(r=e.CRH())&&(n.gt=r.first)}},decls:1,vars:1,consts:[[3,"data","log"]],template:function(t,n){1&t&&(e.TgZ(0,"gt-edit",0),e.NdJ("log",function(s){return n.log(s)}),e.qZA()),2&t&&e.Q6J("data",n.data)},dependencies:[Li],encapsulation:2}),i})(),bd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[nt,hd.Bp,uc,pc.h3,pd,Fe.Bz.forChild([{path:"",component:Cd}])]}),i})()},7521:(Le,Ge,b)=>{var Fe;!function(h,st,e){if(h){for(var ye,ee={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},I={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},at={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},lt={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},K=1;K<20;++K)ee[111+K]="f"+K;for(K=0;K<=9;++K)ee[K+96]=K.toString();q.prototype.bind=function(g,C,D){var G=this;return G._bindMultiple.call(G,g=g instanceof Array?g:[g],C,D),G},q.prototype.unbind=function(g,C){return this.bind.call(this,g,function(){},C)},q.prototype.trigger=function(g,C){var D=this;return D._directMap[g+":"+C]&&D._directMap[g+":"+C]({},g),D},q.prototype.reset=function(){var g=this;return g._callbacks={},g._directMap={},g},q.prototype.stopCallback=function(g,C){if((" "+C.className+" ").indexOf(" mousetrap ")>-1||dt(C,this.target))return!1;if("composedPath"in g&&"function"==typeof g.composedPath){var G=g.composedPath()[0];G!==g.target&&(C=G)}return"INPUT"==C.tagName||"SELECT"==C.tagName||"TEXTAREA"==C.tagName||C.isContentEditable},q.prototype.handleKey=function(){var g=this;return g._handleKey.apply(g,arguments)},q.addKeycodes=function(g){for(var C in g)g.hasOwnProperty(C)&&(ee[C]=g[C]);ye=null},q.init=function(){var g=q(st);for(var C in g)"_"!==C.charAt(0)&&(q[C]=function(D){return function(){return g[D].apply(g,arguments)}}(C))},q.init(),h.Mousetrap=q,Le.exports&&(Le.exports=q),void 0!==(Fe=function(){return q}.call(Ge,b,Ge,Le))&&(Le.exports=Fe)}function Re(g,C,D){g.addEventListener?g.addEventListener(C,D,!1):g.attachEvent("on"+C,D)}function y(g){if("keypress"==g.type){var C=String.fromCharCode(g.which);return g.shiftKey||(C=C.toLowerCase()),C}return ee[g.which]?ee[g.which]:I[g.which]?I[g.which]:String.fromCharCode(g.which).toLowerCase()}function ne(g,C){return g.sort().join(",")===C.sort().join(",")}function Be(g){return"shift"==g||"ctrl"==g||"alt"==g||"meta"==g}function It(g,C,D){return D||(D=function Rt(){if(!ye)for(var g in ye={},ee)g>95&&g<112||ee.hasOwnProperty(g)&&(ye[ee[g]]=g);return ye}()[g]?"keydown":"keypress"),"keypress"==D&&C.length&&(D="keydown"),D}function ct(g,C){var D,G,ce,he=[];for(D=function kt(g){return"+"===g?["+"]:(g=g.replace(/\+{2}/g,"+plus")).split("+")}(g),ce=0;ce<D.length;++ce)lt[G=D[ce]]&&(G=lt[G]),C&&"keypress"!=C&&at[G]&&(G=at[G],he.push("shift")),Be(G)&&he.push(G);return{key:G,modifiers:he,action:C=It(G,he,C)}}function dt(g,C){return null!==g&&g!==st&&(g===C||dt(g.parentNode,C))}function q(g){var C=this;if(g=g||st,!(C instanceof q))return new q(g);C.target=g,C._callbacks={},C._directMap={};var G,D={},ce=!1,he=!1,_t=!1;function ut(v){v=v||{};var M,x=!1;for(M in D)v[M]?x=!0:D[M]=0;x||(_t=!1)}function Pt(v,x,M,O,w,ie){var R,H,de=[],m=M.type;if(!C._callbacks[v])return[];for("keyup"==m&&Be(v)&&(x=[v]),R=0;R<C._callbacks[v].length;++R)H=C._callbacks[v][R],!O&&H.seq&&D[H.seq]!=H.level||m!=H.action||("keypress"!=m||M.metaKey||M.ctrlKey)&&!ne(x,H.modifiers)||((!O&&H.combo==w||O&&H.seq==O&&H.level==ie)&&C._callbacks[v].splice(R,1),de.push(H));return de}function ge(v,x,M,O){C.stopCallback(x,x.target||x.srcElement,M,O)||!1===v(x,M)&&(function wt(g){g.preventDefault?g.preventDefault():g.returnValue=!1}(x),function At(g){g.stopPropagation?g.stopPropagation():g.cancelBubble=!0}(x))}function Ze(v){"number"!=typeof v.which&&(v.which=v.keyCode);var x=y(v);if(x){if("keyup"==v.type&&ce===x)return void(ce=!1);C.handleKey(x,function re(g){var C=[];return g.shiftKey&&C.push("shift"),g.altKey&&C.push("alt"),g.ctrlKey&&C.push("ctrl"),g.metaKey&&C.push("meta"),C}(v),v)}}function He(v,x,M,O,w){C._directMap[v+":"+M]=x;var R,ie=(v=v.replace(/\s+/g," ")).split(" ");ie.length>1?function Ue(v,x,M,O){function w(m){return function(){_t=m,++D[v],function Je(){clearTimeout(G),G=setTimeout(ut,1e3)}()}}function ie(m){ge(M,m,v),"keyup"!==O&&(ce=y(m)),setTimeout(ut,10)}D[v]=0;for(var R=0;R<x.length;++R){var de=R+1===x.length?ie:w(O||ct(x[R+1]).action);He(x[R],de,O,v,R)}}(v,ie,x,M):(R=ct(v,M),C._callbacks[R.key]=C._callbacks[R.key]||[],Pt(R.key,R.modifiers,{type:R.action},O,v,w),C._callbacks[R.key][O?"unshift":"push"]({callback:x,modifiers:R.modifiers,action:R.action,seq:O,level:w,combo:v}))}C._handleKey=function(v,x,M){var w,O=Pt(v,x,M),ie={},R=0,H=!1;for(w=0;w<O.length;++w)O[w].seq&&(R=Math.max(R,O[w].level));for(w=0;w<O.length;++w)if(O[w].seq){if(O[w].level!=R)continue;H=!0,ie[O[w].seq]=1,ge(O[w].callback,M,O[w].combo,O[w].seq)}else H||ge(O[w].callback,M,O[w].combo);var de="keypress"==M.type&&he;M.type==_t&&!Be(v)&&!de&&ut(ie),he=H&&"keydown"==M.type},C._bindMultiple=function(v,x,M){for(var O=0;O<v.length;++O)He(v[O],x,M)},Re(g,"keypress",Ze),Re(g,"keydown",Ze),Re(g,"keyup",Ze)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},6198:()=>{},9812:()=>{}}]);