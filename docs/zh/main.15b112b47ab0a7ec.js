var $localize=Object.assign(void 0===$localize?{}:$localize,{locale:"zh"});
"use strict";(function(global){global.ng=global.ng||{};global.ng.common=global.ng.common||{};global.ng.common.locales=global.ng.common.locales||{};const u=undefined;function plural(val){const n=val;return 5}global.ng.common.locales["zh"]=["zh",[["\u4E0A\u5348","\u4E0B\u5348"],u,u],u,[["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"]],u,[["1","2","3","4","5","6","7","8","9","10","11","12"],["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]],u,[["\u516C\u5143\u524D","\u516C\u5143"],u,u],0,[6,0],["y/M/d","y\u5E74M\u6708d\u65E5",u,"y\u5E74M\u6708d\u65E5EEEE"],["HH:mm","HH:mm:ss","z HH:mm:ss","zzzz HH:mm:ss"],["{1} {0}",u,u,u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"CNY","\xA5","\u4EBA\u6C11\u5E01",{"AUD":["AU$","$"],"BYN":[u,"\u0440."],"CNY":["\xA5"],"ILR":["ILS"],"JPY":["JP\xA5","\xA5"],"KRW":["\uFFE6","\u20A9"],"PHP":[u,"\u20B1"],"RUR":[u,"\u0440."],"TWD":["NT$"],"USD":["US$","$"],"XXX":[]},"ltr",plural,[[["\u5348\u591C","\u65E9\u4E0A","\u4E0A\u5348","\u4E2D\u5348","\u4E0B\u5348","\u665A\u4E0A","\u51CC\u6668"],u,["\u5348\u591C","\u6E05\u6668","\u4E0A\u5348","\u4E2D\u5348","\u4E0B\u5348","\u665A\u4E0A","\u51CC\u6668"]],[["\u5348\u591C","\u65E9\u4E0A","\u4E0A\u5348","\u4E2D\u5348","\u4E0B\u5348","\u665A\u4E0A","\u51CC\u6668"],u,u],["00:00",["05:00","08:00"],["08:00","12:00"],["12:00","13:00"],["13:00","19:00"],["19:00","24:00"],["00:00","05:00"]]]]})(typeof globalThis!=="undefined"&&globalThis||typeof global!=="undefined"&&global||typeof window!=="undefined"&&window);;
"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[179],{3498:(S,E,a)=>{a.d(E,{k:()=>I});var O=a(4080),p=a(7340),t=a(4650),b=a(6895);function x(c,h){if(1&c){const s=t.EpF();t.TgZ(0,"div",8)(1,"strong",9),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"button",10),t.NdJ("click",function(){t.CHM(s);const C=t.oxw().$implicit,y=t.oxw();return t.KtG(y.remove(C))}),t.qZA()()}if(2&c){const s=t.oxw().$implicit;t.xp6(2),t.Oqu(s.title),t.xp6(2),t.Oqu(t.xi3(5,2,s.time,"medium"))}}function D(c,h){if(1&c&&(t.TgZ(0,"div",11)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&c){const s=t.oxw().$implicit;t.xp6(2),t.Oqu(s.message),t.xp6(2),t.Oqu(s.detail)}}function w(c,h){if(1&c){const s=t.EpF();t.TgZ(0,"div",12)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(s);const C=t.oxw().$implicit,y=t.oxw();return t.KtG(y.remove(C))}),t.qZA()()}if(2&c){const s=t.oxw().$implicit;t.xp6(2),t.Oqu(s.message)}}function F(c,h){if(1&c){const s=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){const y=t.CHM(s).$implicit,v=t.oxw(2).$implicit;return t.KtG(v.buttonClick&&v.buttonClick(y))}),t._uU(1),t.qZA()}if(2&c){const s=h.$implicit,u=t.oxw(2).$implicit;t.Q6J("ngClass","btn-"+u.type),t.xp6(1),t.hij(" ",s," ")}}function g(c,h){if(1&c&&(t.TgZ(0,"div",13),t.YNc(1,F,2,2,"button",14),t.qZA()),2&c){const s=t.oxw().$implicit;t.Q6J("ngClass","border-"+s.type+"-subtle"),t.xp6(1),t.Q6J("ngForOf",s.buttons)}}function T(c,h){if(1&c&&(t.TgZ(0,"div",16),t._UZ(1,"div",17),t.qZA()),2&c){const s=t.oxw().$implicit;t.xp6(1),t.Udp("transform","scaleX("+s.progress+")")}}function A(c,h){if(1&c){const s=t.EpF();t.TgZ(0,"div",2),t.NdJ("mouseenter",function(){const y=t.CHM(s).$implicit;return t.KtG(y.paused=!0)})("mouseleave",function(){const y=t.CHM(s).$implicit;return t.KtG(y.paused=!1)}),t.YNc(1,x,7,5,"div",3),t.YNc(2,D,5,2,"div",4),t.YNc(3,w,4,1,"div",5),t.YNc(4,g,2,2,"div",6),t.YNc(5,T,2,2,"div",7),t.qZA()}if(2&c){const s=h.$implicit;t.Q6J("ngClass","text-bg-"+s.type)("@slide",void 0),t.xp6(1),t.Q6J("ngIf",s.title),t.xp6(1),t.Q6J("ngIf",s.title),t.xp6(1),t.Q6J("ngIf",!s.title),t.xp6(1),t.Q6J("ngIf",s.buttons),t.xp6(1),t.Q6J("ngIf",!1!==s.duration)}}let B=(()=>{class c{constructor(s,u){this.ngZone=s,this.cdr=u,this.toastList=[],this.progress=100}set position(s){switch(this._position=s,s){case"top_left":this.toastContainerClass="top-0 start-0";break;case"top_right":this.toastContainerClass="top-0 end-0";break;case"top_center":this.toastContainerClass="top-0 start-50 translate-middle-x";break;case"middle_left":this.toastContainerClass="top-50 start-0 translate-middle-y";break;case"middle_right":this.toastContainerClass="top-50 end-0 translate-middle-y";break;case"middle_center":this.toastContainerClass="top-50 start-50 translate-middle";break;case"bottom_left":this.toastContainerClass="bottom-0 start-0";break;case"bottom_right":this.toastContainerClass="bottom-0 end-0";break;case"bottom_center":this.toastContainerClass="bottom-0 start-50 translate-middle-x"}}get position(){return this._position}ngOnInit(){let s=performance.now();this.ngZone.runOutsideAngular(()=>{const u=C=>{const y=C-s;this.toastList.forEach(v=>{!1!==v.duration&&!v.paused&&(v.remain-=y,v.remain=Math.max(0,v.remain),this.ngZone.run(()=>v.progress=+((v.remain-200)/5e3).toFixed(2)),0===v.remain&&setTimeout(()=>this.remove(v)))}),s=C,this.timer=requestAnimationFrame(u)};this.timer=requestAnimationFrame(u)})}add(s){const u={...s,time:s.time||Date.now(),paused:!1,progress:1,remain:"boolean"==typeof s.duration?0:s.duration||5e3};/bottom/.test(this.position)?this.toastList.unshift(u):this.toastList.push(u)}remove(s){this.toastList.splice(this.toastList.indexOf(s),1),this.cdr.detectChanges()}ngOnDestroy(){cancelAnimationFrame(this.timer)}}return c.\u0275fac=function(s){return new(s||c)(t.Y36(t.R0b),t.Y36(t.sBO))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-toast"]],inputs:{position:"position"},decls:2,vars:2,consts:[[1,"toast-container","position-fixed","p-3",3,"ngClass"],["class","toast show mb-2 overflow-hidden","role","alert","aria-live","assertive","aria-atomic","true",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","show","mb-2","overflow-hidden",3,"ngClass","mouseenter","mouseleave"],["class","toast-header",4,"ngIf"],["class","toast-body",4,"ngIf"],["class","toast-body d-flex justify-content-between",4,"ngIf"],["class","mt-2 p-2 border-top text-end",3,"ngClass",4,"ngIf"],["class","progress","style","height: 2px;--bs-progress-bg: transparent",4,"ngIf"],[1,"toast-header"],[1,"me-auto"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close",3,"click"],[1,"toast-body"],[1,"toast-body","d-flex","justify-content-between"],[1,"mt-2","p-2","border-top","text-end",3,"ngClass"],["type","button","class","btn btn-sm",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"progress",2,"height","2px","--bs-progress-bg","transparent"],["role","progressbar","aria-label","Example 1px high","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","w-100",2,"transform-origin","left","transition","transform 200ms linear"]],template:function(s,u){1&s&&(t.TgZ(0,"div",0),t.YNc(1,A,6,7,"div",1),t.qZA()),2&s&&(t.Q6J("ngClass",u.toastContainerClass),t.xp6(1),t.Q6J("ngForOf",u.toastList))},dependencies:[b.mk,b.sg,b.O5,b.uU],encapsulation:2,data:{animation:[(0,p.X$)("slide",[(0,p.eR)(":enter",[(0,p.oB)({opacity:0,transform:"translateX(10%)"}),(0,p.jt)("250ms cubic-bezier(0.4,0.0,0.2,1)",(0,p.oB)({opacity:1,transform:"translateX(0)"}))]),(0,p.eR)(":leave",[(0,p.jt)("250ms cubic-bezier(0.4,0.0,0.2,1)",(0,p.oB)({opacity:0,transform:"translateX(50%)"}))])])]}}),c})();var R=a(8184);let I=(()=>{class c{constructor(s){this.overlay=s,this.componentRefs={}}show(s){const u=s.position||"bottom_right";this.componentRefs[u]||(this.componentRefs[u]=this.overlay.create().attach(new O.C5(B)),this.componentRefs[u].instance.position=u),this.componentRefs[u].instance.add(s)}}return c.\u0275fac=function(s){return new(s||c)(t.LFG(R.aV))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},9371:(S,E,a)=>{a.d(E,{J:()=>p});var O=a(4650);let p=(()=>{class t{constructor(){this.rawMenus=[]}generateRoutes(x,D){const w=new Map,F=this.rawMenus.map(g=>{const T={id:g.id,path:g.url,parentId:typeof g.parentId>"u"||null===g.parentID?null:+g.parentId,component:x,data:{id:g.id},children:[],resolve:{data:D}};return w.set(T.id,T),T});return F.forEach(g=>{if(g.parentId){const T=w.get(g.parentId);T&&T.children.push(g)}}),F.forEach(g=>{g.children.length&&(delete g.component,delete g.resolve)}),F.filter(g=>!g.parentId)}}return t.\u0275fac=function(x){return new(x||t)},t.\u0275prov=O.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6730:(S,E,a)=>{var O=a(1481),p=a(4650),t=a(8746),b=a(529),x=a(5453),D=a(2039),w=a(3498);let F=(()=>{class n{constructor(e,r){r.isEnabled&&r.versionUpdates.subscribe(i=>{console.info("versionUpdates",i),"VERSION_READY"===i.type&&e.show({type:"light",title:"\u63D0\u793A",message:"\u6709\u65B0\u7248\u672C\uFF0C\u662F\u5426\u66F4\u65B0\uFF1F",buttons:["\u662F"],duration:!1,buttonClick:l=>{l==="\u662F"&&location.reload()}})})}}return n.\u0275fac=function(e){return new(e||n)(p.Y36(w.k),p.Y36(D.yO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){1&e&&p._UZ(0,"router-outlet")},dependencies:[x.lC],encapsulation:2}),n})();var g=a(6895),T=a(8184),A=a(4080);let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[w.k],imports:[T.U8,g.ez,A.eL]}),n})();function I(n){return new Promise((o,e)=>{n.addEventListener("complete",r=>o(r),{once:!0}),n.addEventListener("error",r=>{console.log(r),e(r)},{once:!0})})}function c(n){return new Promise((o,e)=>{n.addEventListener("success",()=>o(n),{once:!0}),n.addEventListener("error",r=>e(r),{once:!0})})}function y(n,o){const e=n.transaction(["CONFIG"],"readwrite"),r=e.objectStore("CONFIG");if(null===o.parentId&&(o.parentId="null"),o.id===o.parentId)throw{type:"error",name:"parentId",message:"\u4e0a\u7ea7\u83dc\u5355\u51fa\u73b0\u5faa\u73af\u5f15\u7528\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u4e0a\u7ea7\u83dc\u5355"};return c(r.index("url_parentId").get(IDBKeyRange.only([o.url,o.parentId]))).then(i=>{if(i.result&&i.result.id!==o.id)throw{type:"error",name:"url",message:"\u8be5\u6761\u6570\u636e\u8def\u5f84\u91cd\u590d"};return v(o.id,o.parentId,r).then(l=>{if(l)throw{type:"error",name:"parentId",message:"\u4e0a\u7ea7\u83dc\u5355\u51fa\u73b0\u5faa\u73af\u5f15\u7528\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u4e0a\u7ea7\u83dc\u5355"};return c(r.get(o.id)).then(m=>{if(m.result)return r.put({...o,type:m.result.type}),I(e).then(()=>({type:"log",subType:"editPage",message:"\u4fee\u6539\u6210\u529f"}));throw{type:"error",name:"id",message:`ID \u4e3a${o.id} \u4e0d\u5b58\u5728`}})})})}function v(n,o,e){return c(e.index("id").get(IDBKeyRange.only(o))).then(r=>{if(r.result){const i="null"===r.result.parentId?"null":+r.result.parentId;return n===i||v(n,i,e)}return!1})}var z=a(5861),P=a(4956);function G(n,o,...e){switch(n){case"info":case"error":break;case"warn":console.warn("[IndexedDB]:"+o,...e)}}class et{constructor(){this.DBName="GHOSTEN",this.db=null}init(){return new Promise(o=>{const e=indexedDB.open(this.DBName,2);e.addEventListener("upgradeneeded",function(){const r=this.result;Array.from(r.objectStoreNames).forEach(f=>r.deleteObjectStore(f));const i=r.createObjectStore("USER_INTERACTION",{keyPath:"category"}),l=r.createObjectStore("CONFIG",{keyPath:"id",autoIncrement:!0}),m=r.createObjectStore("CONFIG_HISTORY",{keyPath:["id","timestamp"]}),d=r.createObjectStore("EDIT_CONFIG",{keyPath:"type"});i.createIndex("category","category",{unique:!0}),i.createIndex("value","value"),l.createIndex("id","id",{unique:!0}),l.createIndex("url","url"),l.createIndex("type","type"),l.createIndex("parentId","parentId"),l.createIndex("url_parentId",["url","parentId"]),m.createIndex("id","id"),m.createIndex("type","type"),m.createIndex("timestamp","timestamp"),d.createIndex("type","type"),d.createIndex("value","value")}),e.addEventListener("success",()=>{G("info","connect success"),this.db=e.result,this.db.addEventListener("close",()=>{G("warn","closed unexpectedly"),this.db=null}),o(this.db)}),e.addEventListener("error",r=>G("error","IndexedDB connect request failed %O",r))})}message(o,e){return Promise.resolve(this.db||this.init()).then(r=>{switch(o){case"save":return function tt(n,{id:o,config:e,settings:r,type:i}){const l=n.transaction(["CONFIG","CONFIG_HISTORY"],"readwrite"),m=l.objectStore("CONFIG"),d=l.objectStore("CONFIG_HISTORY");return c(m.get(o=+o)).then(f=>{if(f.result)return d.add({id:o,type:i,settings:r,config:P.ZP.deflate(e,{level:9}).toString().split(",").map(j=>(+j).toString(16).padStart(2,"0")).join(""),timestamp:Date.now()}),I(l).then(()=>({type:"log",subType:"save",message:"\u4fdd\u5b58\u6210\u529f",data:{id:o}}));throw new Error(`ID \u4e3a ${o} \u7684\u6570\u636e\u4e0d\u5b58\u5728`)})}(r,e);case"getLatestConfigByID":return function W(n,{id:o}){const e=n.transaction(["CONFIG","CONFIG_HISTORY"],"readonly"),r=e.objectStore("CONFIG"),i=e.objectStore("CONFIG_HISTORY");return I(e).then(),Promise.all([c(r.get(+o)).then(l=>l.result),c(i.index("id").openCursor(IDBKeyRange.only(+o),"prev")).then(l=>l.result&&l.result.value)]).then(([l,m])=>{const d={...l,...m};return"null"===d.parentId&&(d.parentId=null),d.config&&(d.config=P.ZP.inflate(d.config.match(/\w{2}/g).map(f=>parseInt(f,16)),{to:"string"})),{type:"log",subType:"getLatestConfigByID",data:d}},l=>({type:"error",message:l.toString()}))}(r,e);case"addPage":return function s(n,o){const e=n.transaction(["CONFIG","CONFIG_HISTORY"],"readwrite"),r=e.objectStore("CONFIG");return null===o.parentId&&(o.parentId="null"),c(r.index("url_parentId").get(IDBKeyRange.only([o.url,o.parentId]))).then(i=>{if(i.result)throw{type:"error",name:"url",message:"\u8be5\u6761\u6570\u636e\u8def\u5f84\u91cd\u590d"};{const l=r.add(o);return I(e).then(()=>({type:"log",subType:"addPage",message:"\u521b\u5efa\u6210\u529f",data:{...o,id:l.result}}))}})}(r,e);case"editPage":return y(r,e);case"deletePage":return function C(n,{id:o}){const e=n.transaction(["CONFIG","CONFIG_HISTORY"],"readwrite"),r=e.objectStore("CONFIG"),i=e.objectStore("CONFIG_HISTORY");return r.delete(o),i.index("id").openCursor(IDBKeyRange.only(o)).addEventListener("success",function(l){const m=this.result;m&&(m.delete(),m.continue())}),I(e).then(()=>({type:"log",subType:"deletePage",message:"\u5220\u9664\u6210\u529f"}))}(r,e);case"getPageList":return function V(n,o){const e=n.transaction("CONFIG","readonly"),r=e.objectStore("CONFIG");if(o&&o.type){const i=r.index("type").getAll(IDBKeyRange.only(o.type));return I(e).then(()=>({type:"log",subType:"getPageList",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:i.result.map(l=>("null"===l.parentId&&(l.parentId=null),l))}))}{const i=r.getAll();return I(e).then(()=>({type:"log",subType:"getPageList",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:i.result.map(l=>("null"===l.parentId&&(l.parentId=null),l))}))}}(r,e);case"activatePage":return function h(n,o){const e=n.transaction(["CONFIG","EDIT_CONFIG"],"readwrite"),r=e.objectStore("CONFIG"),i=e.objectStore("EDIT_CONFIG"),l=r.get(o);return l.addEventListener("success",()=>{if(!l.result)throw new Error("\u66f4\u65b0\u5931\u8d25");i.put({type:"activated ID",value:o})}),I(e).then(()=>({type:"log",subType:"activatePage",message:"\u66f4\u65b0\u6210\u529f"}))}(r,e);case"getActivatedPageID":return function Q(n){const r=n.transaction("EDIT_CONFIG","readonly").objectStore("EDIT_CONFIG").get("activated ID");return c(r).then(()=>({type:"log",subType:"getActivatedPageID",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:r.result}))}(r);case"importDB":return function _(n,o){return o.arrayBuffer().then(e=>P.ZP.inflate(e,{to:"string"})).then(e=>JSON.parse(e)).then(({config:e,history:r})=>{const i=n.transaction(["CONFIG","CONFIG_HISTORY"],"readwrite"),l=i.objectStore("CONFIG"),m=i.objectStore("CONFIG_HISTORY");return l.openCursor().addEventListener("success",function(){const d=this.result;d?(d.delete(),d.continue()):e.forEach(f=>l.add(f))}),m.openCursor().addEventListener("success",function(){const d=this.result;d?(d.delete(),d.continue()):r.forEach(f=>{m.add(f)})}),I(i).then(()=>({type:"log",subType:"importDB",message:"\u5bfc\u5165\u6210\u529f",data:null}))})}(r,e);case"exportDB":return function K(n){const o=n.transaction(["CONFIG","CONFIG_HISTORY"],"readonly"),e=o.objectStore("CONFIG").getAll(),r=o.objectStore("CONFIG_HISTORY").getAll();return I(o).then((0,z.Z)(function*(){const i=P.ZP.deflate(JSON.stringify({config:e.result,history:r.result}),{level:9});return{type:"log",subType:"exportDB",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:new File([i],"export.gt",{type:"application/ghosten"})}}))}(r);case"deleteDB":return function u(n,o){return n.close(),c(indexedDB.deleteDatabase(o)).then(()=>({type:"log",subType:"deleteDB",message:"\u6570\u636e\u5e93\u5220\u9664\u6210\u529f"}),r=>{throw new Error(r)})}(r,this.DBName);case"getNavigations":return function X(n){const o=n.transaction("CONFIG","readonly"),r=o.objectStore("CONFIG").getAll();return I(o).then(()=>{const i=r.result,l=new Map,m=i.map(d=>{const f={id:d.id,label:d.title,path:d.url,icon:d.icon,directory:"Directory"===d.type,parentId:"null"===d.parentId?null:+d.parentId,children:[]};return l.set(f.id,f),f});return m.forEach(d=>{if(d.parentId){const f=l.get(d.parentId);f&&(f.children.push(d),d.parent=f)}}),m.forEach(d=>{const f=[];let j=d;for(;j;)f.unshift(j.path),j=j.parent;d.url=f.join("/")}),{type:"log",subType:"getNavigations",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:m.filter(d=>!d.parentId)}})}(r);case"getRoutes":return function q(n){const o=n.transaction("CONFIG","readonly"),r=o.objectStore("CONFIG").getAll();return I(o).then(()=>({type:"log",subType:"getRoutes",message:"\u6570\u636e\u67e5\u8be2\u6210\u529f",data:r.result}))}(r);default:throw new Error("\u672a\u77e5\u65b9\u6cd5")}},r=>(G("error","error",r),r)).catch(r=>{throw G("error","error",r),r})}}var Z=a(5698),ot=a(262),nt=a(2076),L=a(515),H=a(4004),Y=a(8505),M=a(4968),rt=a(6451),st=a(9300);let at=(()=>{class n{constructor(){if(this.worker=null,this.message=L.E,this.error=L.E,n.workerConnector)return n.workerConnector;if(!(typeof Worker<"u"))throw new Error("Web Worker is not supported by you browser!");this.worker=new Worker(a.tu(new URL(a.p+a.u(462),a.b))),this.message=(0,M.R)(this.worker,"message"),this.error=(0,rt.T)((0,M.R)(this.worker,"messageerror"),(0,M.R)(this.worker,"error"))}postMessage(e,r){this.worker&&this.worker.postMessage(e,r)}request(e,r){return this.postMessage({type:e,data:r}),this.message.pipe((0,st.h)(({data:i})=>i.subType===e),(0,H.U)(i=>{if("log"===i.data.type)return i.data;throw new Error(i.data.message)}),(0,Z.q)(1))}terminate(){this.worker&&this.worker.terminate(),n.workerConnector=null}}return n.workerConnector=null,n})(),it=(()=>{class n{constructor(){this.worker=new at,this.gtDatabase=new et}intercept(e,r){return console.info("[HTTP REQUEST]:%O",e),this.resolveWorkerRequest(e).pipe((0,H.U)(({data:i})=>new b.Zn({url:e.url,body:i})),(0,Y.b)(i=>console.info("[HTTP RESPONSE]:%O",i)),(0,Z.q)(1),(0,ot.K)(i=>{throw console.error(i.message),i}))}resolveWorkerRequest(e){switch(e.url){case"getLatestConfigByID":case"getPageList":case"getNavigations":case"getRoutes":case"addPage":case"editPage":case"deletePage":case"activatePage":case"save":case"getActivatedPageID":case"deleteDB":case"importDB":case"exportDB":const r="get"===e.method.toLocaleLowerCase()?Object.fromEntries(new URLSearchParams(e.params.toString())):e.body;return(0,nt.D)(this.gtDatabase.message(e.url,r));default:return L.E}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();var k=a(9371);const lt=[{provide:b.TP,useClass:it,multi:!0},k.J,{provide:p.ip1,useFactory:function ct(n,o){return()=>n.get("getRoutes").pipe((0,Y.b)(e=>o.rawMenus=e))},multi:!0,deps:[b.eN,k.J]}];let dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[F]}),n.\u0275inj=p.cJS({providers:lt,imports:[O.b2.withServerTransition({appId:"serverApp"}),t.PW,b.JF,B,x.Bz.forRoot([{path:"",loadChildren:()=>Promise.all([a.e(963),a.e(875)]).then(a.bind(a,8875)).then(o=>o.MainModule)},{path:"edit",loadChildren:()=>Promise.all([a.e(963),a.e(80)]).then(a.bind(a,5080)).then(o=>o.GtModule)},{path:"**",redirectTo:"404",pathMatch:"full"}]),D.Wr.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:3000"})]}),n})();(0,p.G48)();const N=new(a(3738));N.dom.style.position="fixed",N.dom.style.left="",N.dom.style.top="",N.dom.style.right="env(safe-area-inset-right)",N.dom.style.bottom="env(safe-area-inset-bottom)",document.body.appendChild(N.dom);const J=()=>{N.update(),requestAnimationFrame(J)};requestAnimationFrame(J),function pt(){O.q6().bootstrapModule(dt).then(n=>{const o=n.injector.get(p.z2F);(0,O.HJ)(o.components[0])}).catch(n=>console.error(n))}();const $=matchMedia("(prefers-color-scheme: dark)"),U=n=>document.documentElement.dataset.bsTheme=n?"dark":"light";U($.matches),$.addEventListener("change",n=>U(n.matches))}},S=>{S.O(0,[736],()=>S(S.s=6730)),S.O()}]);